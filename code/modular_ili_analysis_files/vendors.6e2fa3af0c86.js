(self.webpackChunksimtheory=self.webpackChunksimtheory||[]).push([[8096],{69661:(t,e,i)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=w(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function h(t){var e=p();return function(){var i,n=d(t);if(e){var s=d(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)}(this,i)}}function c(t,e,i){return(e=v(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p=function(){return!!t})()}function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,h=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(t){h=!0,r=t}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(h)throw r}}return o}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function w(t,e){if(t){if("string"==typeof t)return n(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}i.d(e,{A:()=>dr});var k=function(){function t(){s(this,t)}return o(t,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),n=t<0?0:255,r=t<0?-1*t:t,s=parseInt(i[0].slice(4),10),a=parseInt(i[1],10),o=parseInt(i[2],10);return"rgb("+(Math.round((n-s)*r)+s)+","+(Math.round((n-a)*r)+a)+","+(Math.round((n-o)*r)+o)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),n=t<0?0:255,r=t<0?-1*t:t,s=i>>16,a=i>>8&255,o=255&i;return"#"+(16777216+65536*(Math.round((n-s)*r)+s)+256*(Math.round((n-a)*r)+a)+(Math.round((n-o)*r)+o)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return t.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===y(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e});var n=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(r){i.isObject(e[r])&&r in t?n[r]=i.extend(t[r],e[r]):Object.assign(n,c({},r,e[r]))})),n}},{key:"extendArray",value:function(e,i){var n=[];return e.map((function(e){n.push(t.extend(i,e))})),n}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===t||"object"!==y(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){e=[],i.set(t,e);for(var n=0;n<t.length;n++)e[n]=this.clone(t[n],i)}else if(t instanceof Date)e=new Date(t.getTime());else for(var r in e={},i.set(t,e),t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r],i));return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"stripNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(t)?t:parseFloat(t.toPrecision(e))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){return t.toString().includes("e")?Math.round(t):t}},{key:"elementExists",value:function(t){return!(!t||!t.isConnected)}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,n=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[n-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce((function(t,e){return Array.isArray(e)&&(e=e.reduce((function(t,e){return t.length>e.length?t:e}))),t.length>e.length?t:e}),0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(1===i[n].length?i[n]+i[n]:i[n],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],n=2*Math.PI/e,r=0;r<e;r++){var s={};s.x=t*Math.sin(r*n),s.y=-t*Math.cos(r*n),i.push(s)}return i}},{key:"polarToCartesian",value:function(t,e,i,n){var r=(n-90)*Math.PI/180;return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var n=i-t.length+1;n--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"preciseAddition",value:function(t,e){var i=(String(t).split(".")[1]||"").length,n=(String(e).split(".")[1]||"").length,r=Math.pow(10,Math.max(i,n));return(Math.round(t*r)+Math.round(e*r))/r}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isMsEdge",value:function(){var t=window.navigator.userAgent,e=t.indexOf("Edge/");return e>0&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}},{key:"getGCD",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(t,e))));for(t=Math.round(Math.abs(t)*n),e=Math.round(Math.abs(e)*n);e;){var r=e;e=t%e,t=r}return t/n}},{key:"getPrimeFactors",value:function(t){for(var e=[],i=2;t>=2;)t%i==0?(e.push(i),t/=i):i++;return e}},{key:"mod",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(t,e))));return(t=Math.round(Math.abs(t)*n))%(e=Math.round(Math.abs(e)*n))/n}}]),t}(),A=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"animateLine",value:function(t,e,i,n){t.attr(e).animate(n).attr(i)}},{key:"animateMarker",value:function(t,e,i,n){t.attr({opacity:0}).animate(e).attr({opacity:1}).after((function(){n()}))}},{key:"animateRect",value:function(t,e,i,n,r){t.attr(e).animate(n).attr(i).after((function(){return r()}))}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,n=t.j,r=t.fill,s=t.pathFrom,a=t.pathTo,o=t.speed,l=t.delay,h=this.w,c=0;h.config.chart.animations.animateGradually.enabled&&(c=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(c=0),this.morphSVG(e,i,n,"line"!==h.config.chart.type||h.globals.comboCharts?r:"stroke",s,a,o,l*c)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(t){var e=t.el;e.classList.remove("apexcharts-element-hidden"),e.classList.add("apexcharts-hidden-element-shown")}))}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,n,r,s,a,o){var l=this,h=this.w;r||(r=t.attr("pathFrom")),s||(s=t.attr("pathTo"));var c=function(t){return"radar"===h.config.chart.type&&(a=1),"M 0 ".concat(h.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=c()),(!s.trim()||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=c()),h.globals.shouldAnimate||(a=1),t.plot(r).animate(1,o).plot(r).animate(a,o).plot(s).after((function(){k.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==n&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()}))}}]),t}();const S={},C=[];function _(t,e){if(Array.isArray(t))for(const i of t)_(i,e);else if("object"!=typeof t)T(Object.getOwnPropertyNames(e)),S[t]=Object.assign(S[t]||{},e);else for(const e in t)_(e,t[e])}function M(t){return S[t]||{}}function T(t){C.push(...t)}function E(t,e){let i;const n=t.length,r=[];for(i=0;i<n;i++)r.push(e(t[i]));return r}function N(t){return t%360*Math.PI/180}function P(t){return t.charAt(0).toUpperCase()+t.slice(1)}function L(t,e,i,n){return null!=e&&null!=i||(n=n||t.bbox(),null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)),{width:e,height:i}}function I(t,e){const i=t.origin;let n=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",r=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=i&&([n,r]=Array.isArray(i)?i:"object"==typeof i?[i.x,i.y]:[i,i]);const s="string"==typeof n,a="string"==typeof r;if(s||a){const{height:t,width:i,x:o,y:l}=e.bbox();s&&(n=n.includes("left")?o:n.includes("right")?o+i:o+i/2),a&&(r=r.includes("top")?l:r.includes("bottom")?l+t:l+t/2)}return[n,r]}const R=new Set(["desc","metadata","title"]),O=t=>R.has(t.nodeName),D=(t,e,i={})=>{const n={...e};for(const t in n)n[t].valueOf()===i[t]&&delete n[t];Object.keys(n).length?t.node.setAttribute("data-svgjs",JSON.stringify(n)):(t.node.removeAttribute("data-svgjs"),t.node.removeAttribute("svgjs:data"))},z="http://www.w3.org/2000/svg",F="http://www.w3.org/2000/xmlns/",B="http://www.w3.org/1999/xlink",H={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function q(){return H.window}let G=class{};const X={},V="___SYMBOL___ROOT___";function W(t,e=z){return H.document.createElementNS(e,t)}function Y(t,e=!1){if(t instanceof G)return t;if("object"==typeof t)return K(t);if(null==t)return new X[V];if("string"==typeof t&&"<"!==t.charAt(0))return K(H.document.querySelector(t));const i=e?H.document.createElement("div"):W("svg");return i.innerHTML=t,t=K(i.firstChild),i.removeChild(i.firstChild),t}function U(t,e){return e&&(e instanceof H.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:W(t)}function $(t){if(!t)return null;if(t.instance instanceof G)return t.instance;if("#document-fragment"===t.nodeName)return new X.Fragment(t);let e=P(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":X[e]||(e="Dom"),new X[e](t)}let K=$;function Z(t,e=t.name,i=!1){return X[e]=t,i&&(X[V]=t),T(Object.getOwnPropertyNames(t.prototype)),t}let J=1e3;function Q(t){return"Svgjs"+P(t)+J++}function tt(t){for(let e=t.children.length-1;e>=0;e--)tt(t.children[e]);return t.id?(t.id=Q(t.nodeName),t):t}function et(t,e){let i,n;for(n=(t=Array.isArray(t)?t:[t]).length-1;n>=0;n--)for(i in e)t[n].prototype[i]=e[i]}function it(t){return function(...e){const i=e[e.length-1];return!i||i.constructor!==Object||i instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(i)}}_("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=Y(t)).remove();const e=this.position();return this.parent().add(t,e),this},after:function(t){(t=Y(t)).remove();const e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=Y(t)).before(this),this},insertAfter:function(t){return(t=Y(t)).after(this),this}});const nt=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,rt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,st=/rgb\((\d+),(\d+),(\d+)\)/,at=/(#[a-z_][a-z0-9\-_]*)/i,ot=/\)\s*,?\s*/,lt=/\s/g,ht=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,ct=/^rgb\(/,dt=/^(\s+)?$/,ut=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pt=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,ft=/[\s,]+/,gt=/[MLHVCSQTAZ]/i;function mt(t){const e=Math.round(t),i=Math.max(0,Math.min(255,e)).toString(16);return 1===i.length?"0"+i:i}function bt(t,e){for(let i=e.length;i--;)if(null==t[e[i]])return!1;return!0}function xt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}_("Dom",{classes:function(){const t=this.attr("class");return null==t?[]:t.trim().split(ft)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),_("Dom",{css:function(t,e){const i={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);i[e[0]]=e[1]})),i;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=e;i[e]=this.node.style.getPropertyValue(t)}return i}if("string"==typeof t)return this.node.style.getPropertyValue(t);if("object"==typeof t)for(const e in t)this.node.style.setProperty(e,null==t[e]||dt.test(t[e])?"":t[e])}return 2===arguments.length&&this.node.style.setProperty(t,null==e||dt.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),_("Dom",{data:function(t,e,i){if(null==t)return this.data(E(function(t,e){let i;const n=t.length,r=[];for(i=0;i<n;i++)e(t[i])&&r.push(t[i]);return r}(this.node.attributes,(t=>0===t.nodeName.indexOf("data-"))),(t=>t.nodeName.slice(5))));if(t instanceof Array){const e={};for(const i of t)e[i]=this.data(i);return e}if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),_("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(const e in t)this.remember(e,t[e]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class vt{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof vt||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e){const{random:i,round:n,sin:r,PI:s}=Math;if("vibrant"===t){const t=24*i()+57,e=38*i()+45,n=360*i();return new vt(t,e,n,"lch")}if("sine"===t){const t=n(80*r(2*s*(e=null==e?i():e)/.5+.01)+150),a=n(50*r(2*s*e/.5+4.6)+200),o=n(100*r(2*s*e/.5+2.3)+150);return new vt(t,a,o)}if("pastel"===t){const t=8*i()+86,e=17*i()+9,n=360*i();return new vt(t,e,n,"lch")}if("dark"===t){const t=10+10*i(),e=50*i()+86,n=360*i();return new vt(t,e,n,"lch")}if("rgb"===t){const t=255*i(),e=255*i(),n=255*i();return new vt(t,e,n)}if("lab"===t){const t=100*i(),e=256*i()-128,n=256*i()-128;return new vt(t,e,n,"lab")}if("grey"===t){const t=255*i();return new vt(t,t,t)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(ht.test(t)||ct.test(t))}cmyk(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,r,s]=[t,e,i].map((t=>t/255)),a=Math.min(1-n,1-r,1-s);return 1===a?new vt(0,0,0,1,"cmyk"):new vt((1-n-a)/(1-a),(1-r-a)/(1-a),(1-s-a)/(1-a),a,"cmyk")}hsl(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,r,s]=[t,e,i].map((t=>t/255)),a=Math.max(n,r,s),o=Math.min(n,r,s),l=(a+o)/2,h=a===o,c=a-o;return new vt(360*(h?0:a===n?((r-s)/c+(r<s?6:0))/6:a===r?((s-n)/c+2)/6:a===s?((n-r)/c+4)/6:0),100*(h?0:l>.5?c/(2-a-o):c/(a+o)),100*l,"hsl")}init(t=0,e=0,i=0,n=0,r="rgb"){if(t=t||0,this.space)for(const t in this.space)delete this[this.space[t]];if("number"==typeof t)r="string"==typeof n?n:r,n="string"==typeof n?0:n,Object.assign(this,{_a:t,_b:e,_c:i,_d:n,space:r});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const i=function(t,e){const i=bt(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:bt(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:bt(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:bt(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:bt(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:bt(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return i.space=e||i.space,i}(t,e);Object.assign(this,i)}else if("string"==typeof t)if(ct.test(t)){const e=t.replace(lt,""),[i,n,r]=st.exec(e).slice(1,4).map((t=>parseInt(t)));Object.assign(this,{_a:i,_b:n,_c:r,_d:0,space:"rgb"})}else{if(!ht.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,i,n,r]=rt.exec(function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)).map(e);Object.assign(this,{_a:i,_b:n,_c:r,_d:0,space:"rgb"})}}const{_a:s,_b:a,_c:o,_d:l}=this,h="rgb"===this.space?{r:s,g:a,b:o}:"xyz"===this.space?{x:s,y:a,z:o}:"hsl"===this.space?{h:s,s:a,l:o}:"lab"===this.space?{l:s,a,b:o}:"lch"===this.space?{l:s,c:a,h:o}:"cmyk"===this.space?{c:s,m:a,y:o,k:l}:{};Object.assign(this,h)}lab(){const{x:t,y:e,z:i}=this.xyz();return new vt(116*e-16,500*(t-e),200*(e-i),"lab")}lch(){const{l:t,a:e,b:i}=this.lab(),n=Math.sqrt(e**2+i**2);let r=180*Math.atan2(i,e)/Math.PI;return r<0&&(r*=-1,r=360-r),new vt(t,n,r,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:i}=this;if("lab"===this.space||"lch"===this.space){let{l:n,a:r,b:s}=this;if("lch"===this.space){const{c:t,h:e}=this,i=Math.PI/180;r=t*Math.cos(i*e),s=t*Math.sin(i*e)}const a=(n+16)/116,o=r/500+a,l=a-s/200,h=16/116,c=.008856,d=7.787;t=.95047*(o**3>c?o**3:(o-h)/d),e=1*(a**3>c?a**3:(a-h)/d),i=1.08883*(l**3>c?l**3:(l-h)/d)}const n=3.2406*t+-1.5372*e+-.4986*i,r=-.9689*t+1.8758*e+.0415*i,s=.0557*t+-.204*e+1.057*i,a=Math.pow,o=.0031308,l=n>o?1.055*a(n,1/2.4)-.055:12.92*n,h=r>o?1.055*a(r,1/2.4)-.055:12.92*r,c=s>o?1.055*a(s,1/2.4)-.055:12.92*s;return new vt(255*l,255*h,255*c)}if("hsl"===this.space){let{h:t,s:e,l:i}=this;if(t/=360,e/=100,i/=100,0===e)return i*=255,new vt(i,i,i);const n=i<.5?i*(1+e):i+e-i*e,r=2*i-n,s=255*xt(r,n,t+1/3),a=255*xt(r,n,t),o=255*xt(r,n,t-1/3);return new vt(s,a,o)}if("cmyk"===this.space){const{c:t,m:e,y:i,k:n}=this,r=255*(1-Math.min(1,t*(1-n)+n)),s=255*(1-Math.min(1,e*(1-n)+n)),a=255*(1-Math.min(1,i*(1-n)+n));return new vt(r,s,a)}return this;var t}toArray(){const{_a:t,_b:e,_c:i,_d:n,space:r}=this;return[t,e,i,n,r]}toHex(){const[t,e,i]=this._clamped().map(mt);return`#${t}${e}${i}`}toRgb(){const[t,e,i]=this._clamped();return`rgb(${t},${e},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,r,s]=[t,e,i].map((t=>t/255)),a=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,o=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,h=(.4124*a+.3576*o+.1805*l)/.95047,c=(.2126*a+.7152*o+.0722*l)/1,d=(.0193*a+.1192*o+.9505*l)/1.08883,u=h>.008856?Math.pow(h,1/3):7.787*h+16/116,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new vt(u,p,f,"xyz")}_clamped(){const{_a:t,_b:e,_c:i}=this.rgb(),{max:n,min:r,round:s}=Math;return[t,e,i].map((t=>n(0,r(s(t),255))))}}class yt{constructor(...t){this.init(...t)}clone(){return new yt(this)}init(t,e){const i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==i.x?0:i.x,this.y=null==i.y?0:i.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){kt.isMatrixLike(t)||(t=new kt(t));const{x:e,y:i}=this;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}}function wt(t,e,i){return Math.abs(e-t)<(i||1e-6)}class kt{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,i=t.flip&&(e||"x"===t.flip)?-1:1,n=t.flip&&(e||"y"===t.flip)?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,s=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,o=t.scale&&t.scale.length?t.scale[1]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleY)?t.scaleY*n:n,l=t.shear||0,h=t.rotate||t.theta||0,c=new yt(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),d=c.x,u=c.y,p=new yt(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),f=p.x,g=p.y,m=new yt(t.translate||t.tx||t.translateX,t.ty||t.translateY),b=m.x,x=m.y,v=new yt(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:o,skewX:r,skewY:s,shear:l,theta:h,rx:v.x,ry:v.y,tx:b,ty:x,ox:d,oy:u,px:f,py:g}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,i){const n=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,s=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,o=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return i.a=n,i.b=r,i.c=s,i.d=a,i.e=o,i.f=l,i}around(t,e,i){return this.clone().aroundO(t,e,i)}aroundO(t,e,i){const n=t||0,r=e||0;return this.translateO(-n,-r).lmultiplyO(i).translateO(n,r)}clone(){return new kt(this)}decompose(t=0,e=0){const i=this.a,n=this.b,r=this.c,s=this.d,a=this.e,o=this.f,l=i*s-n*r,h=l>0?1:-1,c=h*Math.sqrt(i*i+n*n),d=Math.atan2(h*n,h*i),u=180/Math.PI*d,p=Math.cos(d),f=Math.sin(d),g=(i*r+n*s)/l,m=r*c/(g*i-n)||s*c/(g*n+i);return{scaleX:c,scaleY:m,shear:g,rotate:u,translateX:a-t+t*p*c+e*(g*p*c-f*m),translateY:o-e+t*f*c+e*(g*f*c+p*m),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new kt(t);return wt(this.a,e.a)&&wt(this.b,e.b)&&wt(this.c,e.c)&&wt(this.d,e.d)&&wt(this.e,e.e)&&wt(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=kt.fromArray([1,0,0,1,0,0]);return t=t instanceof Xt?t.matrixify():"string"==typeof t?kt.fromArray(t.split(ft).map(parseFloat)):Array.isArray(t)?kt.fromArray(t):"object"==typeof t&&kt.isMatrixLike(t)?t:"object"==typeof t?(new kt).transform(t):6===arguments.length?kt.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,i=this.c,n=this.d,r=this.e,s=this.f,a=t*n-e*i;if(!a)throw new Error("Cannot invert "+this);const o=n/a,l=-e/a,h=-i/a,c=t/a,d=-(o*r+h*s),u=-(l*r+c*s);return this.a=o,this.b=l,this.c=h,this.d=c,this.e=d,this.f=u,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof kt?t:new kt(t);return kt.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof kt?t:new kt(t);return kt.matrixMultiply(this,e,this)}rotate(t,e,i){return this.clone().rotateO(t,e,i)}rotateO(t,e=0,i=0){t=N(t);const n=Math.cos(t),r=Math.sin(t),{a:s,b:a,c:o,d:l,e:h,f:c}=this;return this.a=s*n-a*r,this.b=a*n+s*r,this.c=o*n-l*r,this.d=l*n+o*r,this.e=h*n-c*r+i*r-e*n+e,this.f=c*n+h*r-e*r-i*n+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,e=t,i=0,n=0){3===arguments.length&&(n=i,i=e,e=t);const{a:r,b:s,c:a,d:o,e:l,f:h}=this;return this.a=r*t,this.b=s*e,this.c=a*t,this.d=o*e,this.e=l*t-i*t+i,this.f=h*e-n*e+n,this}shear(t,e,i){return this.clone().shearO(t,e,i)}shearO(t,e=0,i=0){const{a:n,b:r,c:s,d:a,e:o,f:l}=this;return this.a=n+r*t,this.c=s+a*t,this.e=o+l*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,e=t,i=0,n=0){3===arguments.length&&(n=i,i=e,e=t),t=N(t),e=N(e);const r=Math.tan(t),s=Math.tan(e),{a,b:o,c:l,d:h,e:c,f:d}=this;return this.a=a+o*r,this.b=o+a*s,this.c=l+h*r,this.d=h+l*s,this.e=c+d*r-n*r,this.f=d+c*s-i*s,this}skewX(t,e,i){return this.skew(t,0,e,i)}skewY(t,e,i){return this.skew(0,t,e,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(kt.isMatrixLike(t))return new kt(t).multiplyO(this);const e=kt.formatTransforms(t),{x:i,y:n}=new yt(e.ox,e.oy).transform(this),r=(new kt).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-i,-n).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,n);if(isFinite(e.px)||isFinite(e.py)){const t=new yt(i,n).transform(r),s=isFinite(e.px)?e.px-t.x:0,a=isFinite(e.py)?e.py-t.y:0;r.translateO(s,a)}return r.translateO(e.tx,e.ty),r}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function At(){if(!At.nodes){const t=Y().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;At.nodes={svg:t,path:e}}if(!At.nodes.svg.node.parentNode){const t=H.document.body||H.document.documentElement;At.nodes.svg.addTo(t)}return At.nodes}function St(t){return!(t.width||t.height||t.x||t.y)}Z(kt,"Matrix");class Ct{constructor(...t){this.init(...t)}addOffset(){return this.x+=H.window.pageXOffset,this.y+=H.window.pageYOffset,new Ct(this)}init(t){return t="string"==typeof t?t.split(ft).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return St(this)}merge(t){const e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width)-e,r=Math.max(this.y+this.height,t.y+t.height)-i;return new Ct(e,i,n,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof kt||(t=new kt(t));let e=1/0,i=-1/0,n=1/0,r=-1/0;return[new yt(this.x,this.y),new yt(this.x2,this.y),new yt(this.x,this.y2),new yt(this.x2,this.y2)].forEach((function(s){s=s.transform(t),e=Math.min(e,s.x),i=Math.max(i,s.x),n=Math.min(n,s.y),r=Math.max(r,s.y)})),new Ct(e,n,i-e,r-n)}}function _t(t,e,i){let n;try{if(n=e(t.node),St(n)&&(r=t.node)!==H.document&&!(H.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===H.document}).call(H.document.documentElement,r))throw new Error("Element not in the dom")}catch(e){n=i(t)}var r;return n}_({viewbox:{viewbox(t,e,i,n){return null==t?new Ct(this.attr("viewBox")):this.attr("viewBox",new Ct(t,e,i,n))},zoom(t,e){let{width:i,height:n}=this.attr(["width","height"]);if((i||n)&&"string"!=typeof i&&"string"!=typeof n||(i=this.node.clientWidth,n=this.node.clientHeight),!i||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=i/r.width,a=n/r.height,o=Math.min(s,a);if(null==t)return o;let l=o/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new yt(i/2/s+r.x,n/2/a+r.y);const h=new Ct(r).transform(new kt({scale:l,origin:e}));return this.viewbox(h)}}}),Z(Ct,"Box");class Mt extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}et([Mt],{each(t,...e){return"function"==typeof t?this.map(((e,i,n)=>t.call(e,e,i,n))):this.map((i=>i[t](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const Tt=["toArray","constructor","each"];function Et(t,e){return new Mt(E((e||H.document).querySelectorAll(t),(function(t){return $(t)})))}Mt.extend=function(t){t=t.reduce(((t,e)=>(Tt.includes(e)||"_"===e[0]||(e in Array.prototype&&(t["$"+e]=Array.prototype[e]),t[e]=function(...t){return this.each(e,...t)}),t)),{}),et([Mt],t)};let Nt=0;const Pt={};function Lt(t){let e=t.getEventHolder();return e===H.window&&(e=Pt),e.events||(e.events={}),e.events}function It(t){return t.getEventTarget()}function Rt(t,e,i,n,r){const s=i.bind(n||t),a=Y(t),o=Lt(a),l=It(a);e=Array.isArray(e)?e:e.split(ft),i._svgjsListenerId||(i._svgjsListenerId=++Nt),e.forEach((function(t){const e=t.split(".")[0],n=t.split(".")[1]||"*";o[e]=o[e]||{},o[e][n]=o[e][n]||{},o[e][n][i._svgjsListenerId]=s,l.addEventListener(e,s,r||!1)}))}function Ot(t,e,i,n){const r=Y(t),s=Lt(r),a=It(r);("function"!=typeof i||(i=i._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(ft)).forEach((function(t){const e=t&&t.split(".")[0],o=t&&t.split(".")[1];let l,h;if(i)s[e]&&s[e][o||"*"]&&(a.removeEventListener(e,s[e][o||"*"][i],n||!1),delete s[e][o||"*"][i]);else if(e&&o){if(s[e]&&s[e][o]){for(h in s[e][o])Ot(a,[e,o].join("."),h);delete s[e][o]}}else if(o)for(t in s)for(l in s[t])o===l&&Ot(a,[t,o].join("."));else if(e){if(s[e]){for(l in s[e])Ot(a,[e,l].join("."));delete s[e]}}else{for(t in s)Ot(a,t);!function(t){let e=t.getEventHolder();e===H.window&&(e=Pt),e.events&&(e.events={})}(r)}}))}class Dt extends G{addEventListener(){}dispatch(t,e,i){return function(t,e,i,n){const r=It(t);return e instanceof H.window.Event||(e=new H.window.CustomEvent(e,{detail:i,cancelable:!0,...n})),r.dispatchEvent(e),e}(this,t,e,i)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const i=e[t.type];for(const e in i)for(const n in i[e])i[e][n](t);return!t.defaultPrevented}fire(t,e,i){return this.dispatch(t,e,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,i){return Ot(this,t,e,i),this}on(t,e,i,n){return Rt(this,t,e,i,n),this}removeEventListener(){}}function zt(){}Z(Dt,"EventTarget");const Ft={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Bt extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(ft).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class Ht{constructor(...t){this.init(...t)}convert(t){return new Ht(this.value,t)}divide(t){return t=new Ht(t),new Ht(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(nt))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof Ht&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new Ht(t),new Ht(this-t,this.unit||t.unit)}plus(t){return t=new Ht(t),new Ht(this+t,this.unit||t.unit)}times(t){return t=new Ht(t),new Ht(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const qt=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),jt=[];class Gt extends Dt{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=Y(t)).removeNamespace&&this.node instanceof H.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return Y(t).put(this,e)}children(){return new Mt(E(this.node.children,(function(t){return $(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,e=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return e&&(i=tt(i)),new this.constructor(i)}each(t,e){const i=this.children();let n,r;for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),e&&i[n].each(t,e);return this}element(t,e){return this.put(new Gt(W(t),e))}first(){return $(this.node.firstChild)}get(t){return $(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return void 0!==t||this.node.id||(this.node.id=Q(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return $(this.node.lastChild)}matches(t){const e=this.node,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=$(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=$(e.node.parentNode));return e}put(t,e){return t=Y(t),this.add(t,e),t}putIn(t,e){return Y(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Y(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const i=10**t,n=this.attr(e);for(const t in n)"number"==typeof n[t]&&(n[t]=Math.round(n[t]*i)/i);return this.attr(n),this}svg(t,e){return this.xml(t,e,z)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const i=e.index(this);return e.put(t,i).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let i=this;if(null!=t){if(i=$(i.node.cloneNode(!0)),e){const e=t(i);if(i=e||i,!1===e)return""}i.each((function(){const e=t(this),i=e||this;!1===e?this.remove():e&&this!==i&&this.replace(i)}),!0)}return e?i.node.outerHTML:i.node.innerHTML}e=null!=e&&e;const n=W("wrapper",i),r=H.document.createDocumentFragment();n.innerHTML=t;for(let t=n.children.length;t--;)r.appendChild(n.firstElementChild);const s=this.parent();return e?this.replace(r)&&s:this.add(r)}}et(Gt,{attr:function(t,e,i){if(null==t){t={},e=this.node.attributes;for(const i of e)t[i.nodeName]=ut.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return t}if(t instanceof Array)return t.reduce(((t,e)=>(t[e]=this.attr(e),t)),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?Ft[t]:ut.test(e)?parseFloat(e):e;"number"==typeof(e=jt.reduce(((e,i)=>i(t,e,this)),e))?e=new Ht(e):qt.has(t)&&vt.isColor(e)?e=new vt(e):e.constructor===Array&&(e=new Bt(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return Et(t,this.node)},findOne:function(t){return $(this.node.querySelector(t))}}),Z(Gt,"Dom");let Xt=class extends Gt{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,(t.hasAttribute("data-svgjs")||t.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(t.getAttribute("data-svgjs"))??JSON.parse(t.getAttribute("svgjs:data"))??{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new Ht(t).plus(this.x()))}dy(t=0){return this.y(new Ht(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e="string"==typeof t;e||(t=Y(t));const i=new Mt;let n=this;for(;(n=n.parent())&&n.node!==H.document&&"#document-fragment"!==n.nodeName&&(i.push(n),e||n.node!==t.node)&&(!e||!n.matches(t));)if(n.node===this.root().node)return null;return i}reference(t){if(!(t=this.attr(t)))return null;const e=(t+"").match(at);return e?Y(e[1]):null}root(){const t=this.parent(function(t){return X[t]}(V));return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const i=L(this,t,e);return this.width(new Ht(i.width)).height(new Ht(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return D(this,this.dom),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}};et(Xt,{bbox:function(){const t=_t(this,(t=>t.getBBox()),(t=>{try{const e=t.clone().addTo(At().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}}));return new Ct(t)},rbox:function(t){const e=_t(this,(t=>t.getBoundingClientRect()),(t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)})),i=new Ct(e);return t?i.transform(t.screenCTM().inverseO()):i.addOffset()},inside:function(t,e){const i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},point:function(t,e){return new yt(t,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new kt(this.node.getCTM())},screenCTM:function(){try{if("function"==typeof this.isRoot&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new kt(e)}return new kt(this.node.getScreenCTM())}catch(t){return new kt}}}),Z(Xt,"Element");const Vt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){const e={};let i;e[t]=function(e){if(void 0===e)return this.attr(t);if("string"==typeof e||e instanceof vt||vt.isRgb(e)||e instanceof Xt)this.attr(t,e);else for(i=Vt[t].length-1;i>=0;i--)null!=e[Vt[t][i]]&&this.attr(Vt.prefix(t,Vt[t][i]),e[Vt[t][i]]);return this},_(["Element","Runner"],e)})),_(["Element","Runner"],{matrix:function(t,e,i,n,r,s){return null==t?new kt(this):this.attr("transform",new kt(t,e,i,n,r,s))},rotate:function(t,e,i){return this.transform({rotate:t,ox:e,oy:i},!0)},skew:function(t,e,i,n){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:i},!0):this.transform({skew:[t,e],ox:i,oy:n},!0)},shear:function(t,e,i){return this.transform({shear:t,ox:e,oy:i},!0)},scale:function(t,e,i,n){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:i},!0):this.transform({scale:[t,e],ox:i,oy:n},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),_("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new Ht(t)):this.rx(t).ry(e)}}),_("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new yt(this.node.getPointAtLength(t))}}),_(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),_("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce((function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t}),{})),_("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){const t=(this.attr("transform")||"").split(ot).slice(0,-1).map((function(t){const e=t.trim().split("(");return[e[0],e[1].split(ft).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(kt.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new kt);return t},toParent:function(t,e){if(this===t)return this;if(O(this.node))return this.addTo(t,e);const i=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(n.multiply(i)),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t){const e=new kt(this).decompose();return null==t?e:e[t]}kt.isMatrixLike(t)||(t={...t,origin:I(t,this)});const i=new kt(!0===e?this:e||!1).transform(t);return this.attr("transform",i)}});class Wt extends Xt{flatten(){return this.each((function(){if(this instanceof Wt)return this.flatten().ungroup()})),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each((function(i,n){return n[n.length-i-1].toParent(t,e)})),this.remove()}}Z(Wt,"Container");class Yt extends Wt{constructor(t,e=t){super(U("defs",t),e)}flatten(){return this}ungroup(){return this}}Z(Yt,"Defs");class Ut extends Xt{}function $t(t){return this.attr("rx",t)}function Kt(t){return this.attr("ry",t)}function Zt(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Jt(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function Qt(t){return this.attr("cx",t)}function te(t){return this.attr("cy",t)}function ee(t){return null==t?2*this.rx():this.rx(new Ht(t).divide(2))}function ie(t){return null==t?2*this.ry():this.ry(new Ht(t).divide(2))}Z(Ut,"Shape");var ne=Object.freeze({__proto__:null,cx:Qt,cy:te,height:ie,rx:$t,ry:Kt,width:ee,x:Zt,y:Jt});class re extends Ut{constructor(t,e=t){super(U("ellipse",t),e)}size(t,e){const i=L(this,t,e);return this.rx(new Ht(i.width).divide(2)).ry(new Ht(i.height).divide(2))}}et(re,ne),_("Container",{ellipse:it((function(t=0,e=t){return this.put(new re).size(t,e).move(0,0)}))}),Z(re,"Ellipse");class se extends Gt{constructor(t=H.document.createDocumentFragment()){super(t)}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){const t=new Gt(W("wrapper",i));return t.add(this.node.cloneNode(!0)),t.xml(!1,i)}return super.xml(t,!1,i)}}function ae(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Ht(t),fy:new Ht(e)}):this.attr({x1:new Ht(t),y1:new Ht(e)})}function oe(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Ht(t),cy:new Ht(e)}):this.attr({x2:new Ht(t),y2:new Ht(e)})}Z(se,"Fragment");var le=Object.freeze({__proto__:null,from:ae,to:oe});class he extends Wt{constructor(t,e){super(U(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,i){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,i)}bbox(){return new Ct}targets(){return Et("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}et(he,le),_({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:it((function(t,e){return this.put(new he(t)).update(e)}))}}),Z(he,"Gradient");class ce extends Wt{constructor(t,e=t){super(U("pattern",t),e)}attr(t,e,i){return"transform"===t&&(t="patternTransform"),super.attr(t,e,i)}bbox(){return new Ct}targets(){return Et("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}_({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:it((function(t,e,i){return this.put(new ce).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),Z(ce,"Pattern");let de=class extends Ut{constructor(t,e=t){super(U("image",t),e)}load(t,e){if(!t)return this;const i=new H.window.Image;return Rt(i,"load",(function(t){const n=this.parent(ce);0===this.width()&&0===this.height()&&this.size(i.width,i.height),n instanceof ce&&0===n.width()&&0===n.height()&&n.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),Rt(i,"load error",(function(){Ot(i)})),this.attr("href",i.src=t,B)}};var ue;ue=function(t,e,i){return"fill"!==t&&"stroke"!==t||pt.test(e)&&(e=i.root().defs().image(e)),e instanceof de&&(e=i.root().defs().pattern(0,0,(t=>{t.add(e)}))),e},jt.push(ue),_({Container:{image:it((function(t,e){return this.put(new de).size(0,0).load(t,e)}))}}),Z(de,"Image");class pe extends Bt{bbox(){let t=-1/0,e=-1/0,i=1/0,n=1/0;return this.forEach((function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),i=Math.min(r[0],i),n=Math.min(r[1],n)})),new Ct(i,n,t-i,e-n)}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(ft).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,n=t.length;i<n;i+=2)e.push([t[i],t[i+1]]);return e}size(t,e){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*t/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*e/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,i=this.length;e<i;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){kt.isMatrixLike(t)||(t=new kt(t));for(let e=this.length;e--;){const[i,n]=this[e];this[e][0]=t.a*i+t.c*n+t.e,this[e][1]=t.b*i+t.d*n+t.f}return this}}const fe=pe;var ge=Object.freeze({__proto__:null,MorphArray:fe,height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}});let me=class extends Ut{constructor(t,e=t){super(U("line",t),e)}array(){return new pe([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,i,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:n}:new pe(t).toLine(),this.attr(t))}size(t,e){const i=L(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}};et(me,ge),_({Container:{line:it((function(...t){return me.prototype.plot.apply(this.put(new me),null!=t[0]?t:[0,0,0,0])}))}}),Z(me,"Line");let be=class extends Wt{constructor(t,e=t){super(U("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}};function xe(t,e){return function(i){return null==i?this[t]:(this[t]=i,e&&e.call(this),this)}}_({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:it((function(t,e,i){return this.put(new be).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}))},marker:{marker(t,e,i,n){let r=["marker"];return"all"!==t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof be?arguments[1]:this.defs().marker(e,i,n),this.attr(r,t)}}}),Z(be,"Marker");const ve={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,i,n){return function(r){return r<0?t>0?e/t*r:i>0?n/i*r:0:r>1?i<1?(1-n)/(1-i)*r+(n-i)/(1-i):t<1?(1-e)/(1-t)*r+(e-t)/(1-t):1:3*r*(1-r)**2*e+3*r**2*(1-r)*n+r**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let i=t;return"none"===e?--i:"both"===e&&++i,(n,r=!1)=>{let s=Math.floor(n*t);const a=n*s%1==0;return"start"!==e&&"both"!==e||++s,r&&a&&--s,n>=0&&s<0&&(s=0),n<=1&&s>i&&(s=i),s/i}}};class ye{done(){return!1}}class we extends ye{constructor(t=">"){super(),this.ease=ve[t]||t}step(t,e,i){return"number"!=typeof t?i<1?t:e:t+(e-t)*this.ease(i)}}class ke extends ye{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,i,n){return this.stepper(t,e,i,n)}}function Ae(){const t=(this._duration||500)/1e3,e=this._overshoot||0,i=Math.PI,n=Math.log(e/100+1e-10),r=-n/Math.sqrt(i*i+n*n),s=3.9/(r*t);this.d=2*r*s,this.k=s*s}et(class extends ke{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,i,n){if("string"==typeof t)return t;if(n.done=i===1/0,i===1/0)return e;if(0===i)return t;i>100&&(i=16),i/=1e3;const r=n.velocity||0,s=-this.d*r-this.k*(t-e),a=t+r*i+s*i*i/2;return n.velocity=r+s*i,n.done=Math.abs(e-a)+Math.abs(r)<.002,n.done?e:a}},{duration:xe("_duration",Ae),overshoot:xe("_overshoot",Ae)}),et(class extends ke{constructor(t=.1,e=.01,i=0,n=1e3){super(),this.p(t).i(e).d(i).windup(n)}step(t,e,i,n){if("string"==typeof t)return t;if(n.done=i===1/0,i===1/0)return e;if(0===i)return t;const r=e-t;let s=(n.integral||0)+r*i;const a=(r-(n.error||0))/i,o=this._windup;return!1!==o&&(s=Math.max(-o,Math.min(s,o))),n.error=r,n.integral=s,n.done=Math.abs(r)<.001,n.done?e:t+(this.P*r+this.I*s+this.D*a)}},{windup:xe("_windup"),p:xe("P"),i:xe("I"),d:xe("D")});const Se={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ce={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},_e="mlhvqtcsaz".split("");for(let t=0,e=_e.length;t<e;++t)Ce[_e[t]]=function(t){return function(e,i,n){if("H"===t)e[0]=e[0]+i.x;else if("V"===t)e[0]=e[0]+i.y;else if("A"===t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(let t=0,n=e.length;t<n;++t)e[t]=e[t]+(t%2?i.y:i.x);return Ce[t](e,i,n)}}(_e[t].toUpperCase());function Me(t){return t.segment.length&&t.segment.length-1===Se[t.segment[0].toUpperCase()]}function Te(t,e){t.inNumber&&Ee(t,!1);const i=gt.test(e);if(i)t.segment=[e];else{const e=t.lastCommand,i=e.toLowerCase(),n=e===i;t.segment=["m"===i?n?"l":"L":e]}return t.inSegment=!0,t.lastCommand=t.segment[0],i}function Ee(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,Me(t)&&Ne(t)}function Ne(t){t.inSegment=!1,t.absolute&&(t.segment=function(t){const e=t.segment[0];return Ce[e](t.segment.slice(1),t.p,t.p0)}(t)),t.segments.push(t.segment)}function Pe(t){if(!t.segment.length)return!1;const e="A"===t.segment[0].toUpperCase(),i=t.segment.length;return e&&(4===i||5===i)}function Le(t){return"E"===t.lastToken.toUpperCase()}const Ie=new Set([" ",",","\t","\n","\r","\f"]);class Re extends Bt{bbox(){return At().path.setAttribute("d",this.toString()),new Ct(At.nodes.path.getBBox())}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i,n=this.length-1;n>=0;n--)i=this[n][0],"M"===i||"L"===i||"T"===i?(this[n][1]+=t,this[n][2]+=e):"H"===i?this[n][1]+=t:"V"===i?this[n][1]+=e:"C"===i||"S"===i||"Q"===i?(this[n][1]+=t,this[n][2]+=e,this[n][3]+=t,this[n][4]+=e,"C"===i&&(this[n][5]+=t,this[n][6]+=e)):"A"===i&&(this[n][6]+=t,this[n][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(t,e=!0){let i=0,n="";const r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new yt,p:new yt};for(;r.lastToken=n,n=t.charAt(i++);)if(r.inSegment||!Te(r,n))if("."!==n)if(isNaN(parseInt(n)))if(Ie.has(n))r.inNumber&&Ee(r,!1);else if("-"!==n&&"+"!==n)if("E"!==n.toUpperCase()){if(gt.test(n)){if(r.inNumber)Ee(r,!1);else{if(!Me(r))throw new Error("parser Error");Ne(r)}--i}}else r.number+=n,r.hasExponent=!0;else{if(r.inNumber&&!Le(r)){Ee(r,!1),--i;continue}r.number+=n,r.inNumber=!0}else{if("0"===r.number||Pe(r)){r.inNumber=!0,r.number=n,Ee(r,!0);continue}r.inNumber=!0,r.number+=n}else{if(r.pointSeen||r.hasExponent){Ee(r,!1),--i;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=n}return r.inNumber&&Ee(r,!1),r.inSegment&&Me(r)&&Ne(r),r.segments}(t)}size(t,e){const i=this.bbox();let n,r;for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,n=this.length-1;n>=0;n--)r=this[n][0],"M"===r||"L"===r||"T"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y):"H"===r?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:"V"===r?this[n][1]=(this[n][1]-i.y)*e/i.height+i.y:"C"===r||"S"===r||"Q"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*e/i.height+i.y,"C"===r&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*e/i.height+i.y)):"A"===r&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*e/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*e/i.height+i.y);return this}toString(){return function(t){let e="";for(let i=0,n=t.length;i<n;i++)e+=t[i][0],null!=t[i][1]&&(e+=t[i][1],null!=t[i][2]&&(e+=" ",e+=t[i][2],null!=t[i][3]&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],null!=t[i][5]&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],null!=t[i][7]&&(e+=" ",e+=t[i][7])))));return e+" "}(this)}}const Oe=t=>{const e=typeof t;return"number"===e?Ht:"string"===e?vt.isColor(t)?vt:ft.test(t)?gt.test(t)?Re:Bt:nt.test(t)?Ht:ze:qe.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?Bt:"object"===e?He:ze};class De{constructor(t){this._stepper=t||new we("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(Oe(t));let e=new this._type(t);return this._type===vt&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===He&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map((function(t){return t.done=!0,t})),e}}class ze{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Fe{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Fe.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Fe.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Be=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class He{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let i=0,n=e.length;i<n;++i){if(e[i+1]===t[i+1]){if(e[i+1]===vt&&t[i+7]!==e[i+7]){const e=t[i+7],n=new vt(this.values.splice(i+3,5))[e]().toArray();this.values.splice(i+3,0,...n)}i+=e[i+2]+2;continue}if(!t[i+1])return this;const n=(new t[i+1]).toArray(),r=e[i+2]+3;e.splice(i,r,t[i],t[i+1],t[i+2],...n),i+=e[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const i in t){const n=Oe(t[i]),r=new n(t[i]).toArray();e.push([i,n,r.length,...r])}return e.sort(Be),this.values=e.reduce(((t,e)=>t.concat(e)),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const i=e.shift(),n=e.shift(),r=e.shift(),s=e.splice(0,r);t[i]=new n(s)}return t}}const qe=[ze,Fe,He];class je extends Ut{constructor(t,e=t){super(U("path",t),e)}array(){return this._array||(this._array=new Re(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new Re(t))}size(t,e){const i=L(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}je.prototype.MorphArray=Re,_({Container:{path:it((function(t){return this.put(new je).plot(t||new Re)}))}}),Z(je,"Path");var Ge=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new pe(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new pe(t))},size:function(t,e){const i=L(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}});class Xe extends Ut{constructor(t,e=t){super(U("polygon",t),e)}}_({Container:{polygon:it((function(t){return this.put(new Xe).plot(t||new pe)}))}}),et(Xe,ge),et(Xe,Ge),Z(Xe,"Polygon");class Ve extends Ut{constructor(t,e=t){super(U("polyline",t),e)}}_({Container:{polyline:it((function(t){return this.put(new Ve).plot(t||new pe)}))}}),et(Ve,ge),et(Ve,Ge),Z(Ve,"Polyline");class We extends Ut{constructor(t,e=t){super(U("rect",t),e)}}et(We,{rx:$t,ry:Kt}),_({Container:{rect:it((function(t,e){return this.put(new We).size(t,e)}))}}),Z(We,"Rect");class Ye{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const Ue={nextDraw:null,frames:new Ye,timeouts:new Ye,immediates:new Ye,timer:()=>H.window.performance||H.window.Date,transforms:[],frame(t){const e=Ue.frames.push({run:t});return null===Ue.nextDraw&&(Ue.nextDraw=H.window.requestAnimationFrame(Ue._draw)),e},timeout(t,e){e=e||0;const i=Ue.timer().now()+e,n=Ue.timeouts.push({run:t,time:i});return null===Ue.nextDraw&&(Ue.nextDraw=H.window.requestAnimationFrame(Ue._draw)),n},immediate(t){const e=Ue.immediates.push(t);return null===Ue.nextDraw&&(Ue.nextDraw=H.window.requestAnimationFrame(Ue._draw)),e},cancelFrame(t){null!=t&&Ue.frames.remove(t)},clearTimeout(t){null!=t&&Ue.timeouts.remove(t)},cancelImmediate(t){null!=t&&Ue.immediates.remove(t)},_draw(t){let e=null;const i=Ue.timeouts.last();for(;(e=Ue.timeouts.shift())&&(t>=e.time?e.run():Ue.timeouts.push(e),e!==i););let n=null;const r=Ue.frames.last();for(;n!==r&&(n=Ue.frames.shift());)n.run(t);let s=null;for(;s=Ue.immediates.shift();)s();Ue.nextDraw=Ue.timeouts.first()||Ue.frames.first()?H.window.requestAnimationFrame(Ue._draw):null}},$e=function(t){const e=t.start,i=t.runner.duration();return{start:e,duration:i,end:e+i,runner:t.runner}},Ke=function(){const t=H.window;return(t.performance||t.Date).now()};class Ze extends Dt{constructor(t=Ke){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const i=Math.abs(e);return this.speed(t?-i:i)}schedule(t,e,i){if(null==t)return this._runners.map($e);let n=0;const r=this.getEndTime();if(e=e||0,null==i||"last"===i||"after"===i)n=r;else if("absolute"===i||"start"===i)n=e,e=0;else if("now"===i)n=this._time;else if("relative"===i){const i=this.getRunnerInfoById(t.id);i&&(n=i.start+e,e=0)}else{if("with-last"!==i)throw new Error('Invalid value for the "when" parameter');{const t=this.getLastRunnerInfo();n=t?t.start:this._time}}t.unschedule(),t.timeline(this);const s=t.persist(),a={persist:null===s?this._persist:s,start:n+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort(((t,e)=>t.start-e.start)),this._runnerIds=this._runners.map((t=>t.runner.id)),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return Ue.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=Ue.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let i=e-this._lastSourceTime;t&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let t=this._runners.length;t--;){const e=this._runners[t],i=e.runner;this._time-e.start<=0&&i.reset()}let r=!1;for(let t=0,e=this._runners.length;t<e;t++){const i=this._runners[t],s=i.runner;let a=n;const o=this._time-i.start;o<=0?r=!0:(o<a&&(a=o),s.active()&&(s.step(a).done?!0!==i.persist&&s.duration()-s.time()+this._time+i.persist<this._time&&(s.unschedule(),--t,--e):r=!0))}return r&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}_({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Ze,this._timeline):(this._timeline=t,this)}}});class Je extends Dt{constructor(t){super(),this.id=Je.id++,t="function"==typeof(t=null==t?400:t)?new ke(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof ke,this._stepper=this._isDeclarative?t:new we,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new kt,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,i){let n=1,r=!1,s=0;return e=e??0,i=i||"last","object"!=typeof(t=t??400)||t instanceof ye||(e=t.delay??e,i=t.when??i,r=t.swing||r,n=t.times??n,s=t.wait??s,t=t.duration??400),{duration:t,delay:e,swing:r,times:n,wait:s,when:i}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,i){const n=Je.sanitise(t,e,i),r=new Je(n.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new kt,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((t=>!t.isTransform)))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new we(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,i){return"object"==typeof t&&(e=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=i||0,!0===this._times&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(null==t){const t=Math.floor(this._time/e),i=(this._time-t*e)/this._duration;return Math.min(t+i,this._times)}const i=t%1,n=e*Math.floor(t)+this._duration*i;return this.time(n)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const e=this._time,i=this._duration,n=this._wait,r=this._times,s=this._swing,a=this._reverse;let o;if(null==t){const t=function(t){const e=s*Math.floor(t%(2*(n+i))/(n+i)),r=e&&!a||!e&&a,o=Math.pow(-1,r)*(t%(n+i))/i+r;return Math.max(Math.min(o,1),0)},l=r*(n+i)-n;return o=e<=0?Math.round(t(1e-5)):e<l?t(e):Math.round(t(l-1e-5)),o}const l=Math.floor(this.loops()),h=s&&l%2==0;return o=l+(h&&!a||a&&h?t:1-t),this.loops(o)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,i,n){return this._queue.push({initialiser:t||zt,runner:e||zt,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=null==t?!this._reverse:t,this}schedule(t,e,i){if(t instanceof Ze||(i=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,i),this}step(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;const e=this.position(),i=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const n=this.duration(),r=this._lastTime<=0&&this._time>0,s=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!s&&this._time>=n,this._reseted=!1;let o=!1;return(i||a)&&(this._initialise(i),this.transforms=new kt,o=this._run(a?t:e),this.fire("step",this)),this.done=this.done||o&&a,s&&this.fire("finished",this),this}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,i=this._queue.length;e<i;++e){const i=this._queue[e],n=this._isDeclarative||!i.initialised&&t;t=!i.finished,n&&t&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const t=this.timeline();t&&t.play()}}_run(t){let e=!0;for(let i=0,n=this._queue.length;i<n;++i){const n=this._queue[i],r=n.runner.call(this,t);n.finished=n.finished||!0===r,e=e&&n.finished}return e}_tryRetarget(t,e,i){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,i):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}Je.id=0;class Qe{constructor(t=new kt,e=-1,i=!0){this.transforms=t,this.id=e,this.done=i}clearTransformsFromQueue(){}}et([Je,Qe],{mergeWith(t){return new Qe(t.transforms.lmultiply(this.transforms),t.id)}});const ti=(t,e)=>t.lmultiplyO(e),ei=t=>t.transforms;function ii(){const t=this._transformationRunners.runners.map(ei).reduce(ti,new kt);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class ni{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new Qe).forEach((t=>t.clearTransformsFromQueue())),this}edit(t,e){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const i=this.runners[e];if(!(t&&i.done&&t.done)||i._timeline&&i._timeline._runnerIds.includes(i.id)||t._timeline&&t._timeline._runnerIds.includes(t.id))t=i;else{this.remove(i.id);const n=i.mergeWith(t);this.edit(t.id,n),t=n,--e}}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}_({Element:{animate(t,e,i){const n=Je.sanitise(t,e,i),r=this.timeline();return new Je(n.duration).loop(n).element(this).timeline(r.play()).schedule(n.delay,n.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter((e=>e.id<=t.id)).map(ei).reduce(ti,new kt)},_addRunner(t){this._transformationRunners.add(t),Ue.cancelImmediate(this._frameId),this._frameId=Ue.immediate(ii.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new ni).add(new Qe(new kt(this))))}}}),et(Je,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,i){if("string"==typeof e)return this.styleAttr(t,{[e]:i});let n=e;if(this._tryRetarget(t,n))return this;let r=new De(this._stepper).to(n),s=Object.keys(n);return this.queue((function(){r=r.from(this.element()[t](s))}),(function(e){return this.element()[t](r.at(e).valueOf()),r.done()}),(function(e){const i=Object.keys(e),a=(o=s,i.filter((t=>!o.includes(t))));var o;if(a.length){const e=this.element()[t](a),i=new He(r.from()).valueOf();Object.assign(i,e),r.from(i)}const l=new He(r.to()).valueOf();Object.assign(l,e),r.to(l),s=i,n=e})),this._rememberMorpher(t,r),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let i=new De(this._stepper).to(new Ht(t));return this.queue((function(){i=i.from(this.element().zoom())}),(function(t){return this.element().zoom(i.at(t),e),i.done()}),(function(t,n){e=n,i.to(t)})),this._rememberMorpher("zoom",i),this},transform(t,e,i){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const n=kt.isMatrixLike(t);i=null!=t.affine?t.affine:null!=i?i:!n;const r=new De(this._stepper).type(i?Fe:kt);let s,a,o,l,h;return this.queue((function(){a=a||this.element(),s=s||I(t,a),h=new kt(e?void 0:a),a._addRunner(this),e||a._clearTransformRunnersBefore(this)}),(function(c){e||this.clearTransform();const{x:d,y:u}=new yt(s).transform(a._currentTransform(this));let p=new kt({...t,origin:[d,u]}),f=this._isDeclarative&&o?o:h;if(i){p=p.decompose(d,u),f=f.decompose(d,u);const t=p.rotate,e=f.rotate,i=[t-360,t,t+360],n=i.map((t=>Math.abs(t-e))),r=Math.min(...n),s=n.indexOf(r);p.rotate=i[s]}e&&(n||(p.rotate=t.rotate||0),this._isDeclarative&&l&&(f.rotate=l)),r.from(f),r.to(p);const g=r.at(c);return l=g.rotate,o=new kt(g),this.addTransform(o),a._addRunner(this),r.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(s=I(e,a)),t={...e,origin:s}}),!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(t){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},ax(t){return this._queueNumber("ax",t)},ay(t){return this._queueNumber("ay",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new Ht(e),this._tryRetarget(t,e))return this;const i=new De(this._stepper).to(e);let n=null;return this.queue((function(){n=this.element()[t](),i.from(n),i.to(n+e)}),(function(e){return this.element()[t](i.at(e)),i.done()}),(function(t){i.to(n+new Ht(t))})),this._rememberMorpher(t,i),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const i=new De(this._stepper).to(e);return this.queue((function(){i.from(this.element()[t]())}),(function(e){return this.element()[t](i.at(e)),i.done()})),this._rememberMorpher(t,i),this},_queueNumber(t,e){return this._queueObject(t,new Ht(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},amove(t,e){return this.ax(t).ay(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let i;return t&&e||(i=this._element.bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,i,n){if(4===arguments.length)return this.plot([t,e,i,n]);if(this._tryRetarget("plot",t))return this;const r=new De(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){r.from(this._element.array())}),(function(t){return this._element.plot(r.at(t)),r.done()})),this._rememberMorpher("plot",r),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,i,n){return this._queueObject("viewbox",new Ct(t,e,i,n))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),et(Je,{rx:$t,ry:Kt,from:ae,to:oe}),Z(Je,"Runner");class ri extends Wt{constructor(t,e=t){super(U("svg",t),e),this.namespace()}defs(){return this.isRoot()?$(this.node.querySelector("defs"))||this.put(new Yt):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof H.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:z,version:"1.1"}).attr("xmlns:xlink",B,F):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,F).attr("xmlns:svgjs",null,F)}root(){return this.isRoot()?this:super.root()}}_({Container:{nested:it((function(){return this.put(new ri)}))}}),Z(ri,"Svg",!0);let si=class extends Wt{constructor(t,e=t){super(U("symbol",t),e)}};_({Container:{symbol:it((function(){return this.put(new si)}))}}),Z(si,"Symbol");var ai=Object.freeze({__proto__:null,amove:function(t,e){return this.ax(t).ay(e)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},build:function(t){return this._build=!!t,this},center:function(t,e,i=this.bbox()){return this.cx(t,i).cy(e,i)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(t,e,i=this.bbox()){return this.x(t,i).y(e,i)},plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(H.document.createTextNode(t)),this},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}});class oi extends Ut{constructor(t,e=t){super(U("text",t),e),this.dom.leading=this.dom.leading??new Ht(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new Ht(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const t=this;let e=0;const i=this.dom.leading;this.each((function(n){if(O(this.node))return;const r=H.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=i*new Ht(r);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?e+=s:(this.attr("dy",n?s+e:0),e=0))})),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new Ht(t.leading||1.3),this}writeDataToDom(){return D(this,this.dom,{leading:1.3}),this}text(t){if(void 0===t){const e=this.node.childNodes;let i=0;t="";for(let n=0,r=e.length;n<r;++n)"textPath"===e[n].nodeName||O(e[n])?0===n&&(i=n+1):(n!==i&&3!==e[n].nodeType&&!0===$(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,i=(t=(t+"").split("\n")).length;e<i;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}et(oi,ai),_({Container:{text:it((function(t=""){return this.put(new oi).text(t)})),plain:it((function(t=""){return this.put(new oi).plain(t)}))}}),Z(oi,"Text");class li extends Ut{constructor(t,e=t){super(U("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof oi))return this;const e=t.index(this),i=H.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new Ht(i);return this.dy(e?n:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}et(li,ai),_({Tspan:{tspan:it((function(t=""){const e=new li;return this._build||this.clear(),this.put(e).text(t)}))},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),Z(li,"Tspan");class hi extends Ut{constructor(t,e=t){super(U("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new Ht(t).divide(2))}}et(hi,{x:Zt,y:Jt,cx:Qt,cy:te,width:ee,height:ie}),_({Container:{circle:it((function(t=0){return this.put(new hi).size(t).move(0,0)}))}}),Z(hi,"Circle");class ci extends Wt{constructor(t,e=t){super(U("clipPath",t),e)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return Et("svg [clip-path*="+this.id()+"]")}}_({Container:{clip:it((function(){return this.defs().put(new ci)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof ci?t:this.parent().clip().add(t);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),Z(ci,"ClipPath");class di extends Xt{constructor(t,e=t){super(U("foreignObject",t),e)}}_({Container:{foreignObject:it((function(t,e){return this.put(new di).size(t,e)}))}}),Z(di,"ForeignObject");var ui=Object.freeze({__proto__:null,dmove:function(t,e){return this.children().forEach((i=>{let n;try{n=i.node instanceof q().SVGSVGElement?new Ct(i.attr(["x","y","width","height"])):i.bbox()}catch(t){return}const r=new kt(i),s=r.translate(t,e).transform(r.inverse()),a=new yt(n.x,n.y).transform(s);i.move(a.x,a.y)})),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,i=this.bbox()){const n=t-i.x,r=e-i.y;return this.dmove(n,r)},size:function(t,e,i=this.bbox()){const n=L(this,t,e,i),r=n.width/i.width,s=n.height/i.height;return this.children().forEach((t=>{const e=new yt(i).transform(new kt(t).inverse());t.scale(r,s,e.x,e.y)})),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}});class pi extends Wt{constructor(t,e=t){super(U("g",t),e)}}et(pi,ui),_({Container:{group:it((function(){return this.put(new pi)}))}}),Z(pi,"G");class fi extends Wt{constructor(t,e=t){super(U("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,B)}}et(fi,ui),_({Container:{link:it((function(t){return this.put(new fi).to(t)}))},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const i=e.index(t);return e.add(this,i),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new fi,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),Z(fi,"A");class gi extends Wt{constructor(t,e=t){super(U("mask",t),e)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return Et("svg [mask*="+this.id()+"]")}}_({Container:{mask:it((function(){return this.defs().put(new gi)}))},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof gi?t:this.parent().mask().add(t);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),Z(gi,"Mask");class mi extends Xt{constructor(t,e=t){super(U("stop",t),e)}update(t){return("number"==typeof t||t instanceof Ht)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Ht(t.offset)),this}}_({Gradient:{stop:function(t,e,i){return this.put(new mi).update(t,e,i)}}}),Z(mi,"Stop");class bi extends Xt{constructor(t,e=t){super(U("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,i={}){return this.rule("@font-face",{fontFamily:t,src:e,...i})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let i=t+"{";for(const t in e)i+=t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))+":"+e[t]+";";return i+="}",i}(t,e))}}_("Dom",{style(t,e){return this.put(new bi).rule(t,e)},fontface(t,e,i){return this.put(new bi).font(t,e,i)}}),Z(bi,"Style");class xi extends oi{constructor(t,e=t){super(U("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let i=null;return e&&(i=e.plot(t)),null==t?i:this}track(){return this.reference("href")}}_({Container:{textPath:it((function(t,e){return t instanceof oi||(t=this.text(t)),t.path(e)}))},Text:{path:it((function(t,e=!0){const i=new xi;let n;if(t instanceof je||(t=this.defs().path(t)),i.attr("href","#"+t,B),e)for(;n=this.node.firstChild;)i.node.appendChild(n);return this.put(i)})),textPath(){return this.findOne("textPath")}},Path:{text:it((function(t){return t instanceof oi||(t=(new oi).addTo(this.parent()).text(t)),t.path(this)})),targets(){return Et("svg textPath").filter((t=>(t.attr("href")||"").includes(this.id())))}}}),xi.prototype.MorphArray=Re,Z(xi,"TextPath");class vi extends Ut{constructor(t,e=t){super(U("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,B)}}_({Container:{use:it((function(t,e){return this.put(new vi).use(t,e)}))}}),Z(vi,"Use");const yi=Y;et([ri,si,de,ce,be],M("viewbox")),et([me,Ve,Xe,je],M("marker")),et(oi,M("Text")),et(je,M("Path")),et(Yt,M("Defs")),et([oi,li],M("Tspan")),et([We,re,he,Je],M("radius")),et(Dt,M("EventTarget")),et(Gt,M("Dom")),et(Xt,M("Element")),et(Ut,M("Shape")),et([Wt,se],M("Container")),et(he,M("Gradient")),et(Je,M("Runner")),Mt.extend([...new Set(C)]),function(t=[]){qe.push(...[].concat(t))}([Ht,vt,Ct,kt,Bt,pe,Re,yt]),et(qe,{to(t){return(new De).type(this.constructor).from(this.toArray()).to(t)},fromArray(t){return this.init(t),this},toConsumable(){return this.toArray()},morph(t,e,i,n,r){return this.fromArray(t.map((function(t,s){return n.step(t,e[s],i,r[s],r)})))}});class wi extends Xt{constructor(t){super(U("filter",t),t),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(t,e){return!(t=super.put(t,e)).attr("in")&&this.$autoSetIn&&t.attr("in",this.$source),t.attr("result")||t.attr("result",t.id()),t}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Et('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class ki extends Xt{constructor(t,e){super(t,e),this.result(this.id())}in(t){if(null==t){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",t)}result(t){return this.attr("result",t)}toString(){return this.result()}}const Ai=t=>function(...e){for(let i=t.length;i--;)null!=e[i]&&this.attr(t[i],e[i])},Si={blend:Ai(["in","in2","mode"]),colorMatrix:Ai(["type","values"]),composite:Ai(["in","in2","operator"]),convolveMatrix:function(t){t=new Bt(t).toString(),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},diffuseLighting:Ai(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Ai(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Ai(["in","dx","dy","stdDeviation"]),flood:Ai(["flood-color","flood-opacity"]),gaussianBlur:function(t=0,e=t){this.attr("stdDeviation",t+" "+e)},image:function(t){this.attr("href",t,B)},morphology:Ai(["operator","radius"]),offset:Ai(["dx","dy"]),specularLighting:Ai(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Ai([]),turbulence:Ai(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach((t=>{const e=P(t),i=Si[t];wi[e+"Effect"]=class extends ki{constructor(t){super(U("fe"+e,t),t)}update(t){return i.apply(this,t),this}},wi.prototype[t]=it((function(t,...i){const n=new wi[e+"Effect"];return null==t?this.put(n):("function"==typeof t?t.call(n,n):i.unshift(t),this.put(n).update(i))}))})),et(wi,{merge(t){const e=this.put(new wi.MergeEffect);return"function"==typeof t?(t.call(e,e),e):((t instanceof Array?t:[...arguments]).forEach((t=>{t instanceof wi.MergeNode?e.put(t):e.mergeNode(t)})),e)},componentTransfer(t={}){const e=this.put(new wi.ComponentTransferEffect);if("function"==typeof t)return t.call(e,e),e;t.r||t.g||t.b||t.a||(t={r:t,g:t,b:t,a:t});for(const i in t)e.add(new(wi["Func"+i.toUpperCase()])(t[i]));return e}}),["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach((t=>{const e=P(t);wi[e]=class extends ki{constructor(t){super(U("fe"+e,t),t)}}})),["funcR","funcG","funcB","funcA"].forEach((function(t){const e=wi[P(t)],i=it((function(){return this.put(new e)}));wi.ComponentTransferEffect.prototype[t]=i})),["distantLight","pointLight","spotLight"].forEach((t=>{const e=wi[P(t)],i=it((function(){return this.put(new e)}));wi.DiffuseLightingEffect.prototype[t]=i,wi.SpecularLightingEffect.prototype[t]=i})),et(wi.MergeEffect,{mergeNode(t){return this.put(new wi.MergeNode).attr("in",t)}}),et(Yt,{filter:function(t){const e=this.put(new wi);return"function"==typeof t&&t.call(e,e),e}}),et(Wt,{filter:function(t){return this.defs().filter(t)}}),et(Xt,{filterWith:function(t){const e=t instanceof wi?t:this.defs().filter(t);return this.attr("filter",e)},unfilter:function(t){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const Ci={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},diffuseLighting:function(t,e,i,n){return this.parent()&&this.parent().diffuseLighting(t,i,n).in(this)},displacementMap:function(t,e,i,n){return this.parent()&&this.parent().displacementMap(this,t,e,i,n)},dropShadow:function(t,e,i){return this.parent()&&this.parent().dropShadow(this,t,e,i).in(this)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(t){return t=t instanceof Array?t:[...t],this.parent()&&this.parent().merge(this,...t)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},specularLighting:function(t,e,i,n,r){return this.parent()&&this.parent().specularLighting(t,i,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,n,r){return this.parent()&&this.parent().turbulence(t,e,i,n,r).in(this)}};et(ki,Ci),et(wi.MergeEffect,{in:function(t){return t instanceof wi.MergeNode?this.add(t,0):this.add((new wi.MergeNode).in(t),0),this}}),et([wi.CompositeEffect,wi.BlendEffect,wi.DisplacementMapEffect],{in2:function(t){if(null==t){const t=this.attr("in2");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in2",t)}}),wi.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var _i=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new wi).size("120%","180%","-5%","-40%"),i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"applyFilter",value:function(t,e,i){var n,r=this,s=this.w;if(t.unfilter(!0),"none"!==i){var a,o,l=s.config.chart.dropShadow,h="lighten"===i?2:.3;t.filterWith((function(t){t.colorMatrix({type:"matrix",values:"\n          ".concat(h," 0 0 0 0\n          0 ").concat(h," 0 0 0\n          0 0 ").concat(h," 0 0\n          0 0 0 1 0\n        "),in:"SourceGraphic",result:"brightness"}),l.enabled&&r.addShadow(t,e,l,"brightness")})),l.noUserSpaceOnUse||null===(a=t.filterer())||void 0===a||null===(o=a.node)||void 0===o||o.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(null===(n=t.filterer())||void 0===n?void 0:n.node)}else this.getDefaultFilter(t,e)}},{key:"addShadow",value:function(t,e,i,n){var r,s=this.w,a=i.blur,o=i.top,l=i.left,h=i.color,c=i.opacity;if(h=Array.isArray(h)?h[e]:h,(null===(r=s.config.chart.dropShadow.enabledOnSeries)||void 0===r?void 0:r.length)>0&&-1===s.config.chart.dropShadow.enabledOnSeries.indexOf(e))return t;t.offset({in:n,dx:l,dy:o,result:"offset"}),t.gaussianBlur({in:"offset",stdDeviation:a,result:"blur"}),t.flood({"flood-color":h,"flood-opacity":c,result:"flood"}),t.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),t.merge(["shadow",n])}},{key:"dropShadow",value:function(t,e){var i,n,r,s,a,o=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=this.w;return t.unfilter(!0),k.isMsEdge()&&"radialBar"===h.config.chart.type||(null===(i=h.config.chart.dropShadow.enabledOnSeries)||void 0===i?void 0:i.length)>0&&-1===(null===(r=h.config.chart.dropShadow.enabledOnSeries)||void 0===r?void 0:r.indexOf(l))||(t.filterWith((function(t){o.addShadow(t,l,e,"SourceGraphic")})),e.noUserSpaceOnUse||null===(s=t.filterer())||void 0===s||null===(a=s.node)||void 0===a||a.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(null===(n=t.filterer())||void 0===n?void 0:n.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var n=this.w;if(void 0!==n.globals.selectedDataPoints[e]&&n.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var r=n.config.states.active.filter;"none"!==r&&this.applyFilter(t,e,r.type)}}},{key:"_scaleFilterSize",value:function(t){t&&function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),Mi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"roundPathCorners",value:function(t,e){function i(t,e,i){var r=e.x-t.x,s=e.y-t.y,a=Math.sqrt(r*r+s*s);return n(t,e,Math.min(1,i/a))}function n(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}function r(t,e){t.length>2&&(t[t.length-2]=e.x,t[t.length-1]=e.y)}function s(t){return{x:parseFloat(t[t.length-2]),y:parseFloat(t[t.length-1])}}t.indexOf("NaN")>-1&&(t="");var a=t.split(/[,\s]/).reduce((function(t,e){var i=e.match("([a-zA-Z])(.+)");return i?(t.push(i[1]),t.push(i[2])):t.push(e),t}),[]).reduce((function(t,e){return parseFloat(e)==e&&t.length?t[t.length-1].push(e):t.push([e]),t}),[]),o=[];if(a.length>1){var l=s(a[0]),h=null;"Z"==a[a.length-1][0]&&a[0].length>2&&(h=["L",l.x,l.y],a[a.length-1]=h),o.push(a[0]);for(var c=1;c<a.length;c++){var d=o[o.length-1],u=a[c],p=u==h?a[1]:a[c+1];if(p&&d&&d.length>2&&"L"==u[0]&&p.length>2&&"L"==p[0]){var f,g,m=s(d),b=s(u),x=s(p);f=i(b,m,e),g=i(b,x,e),r(u,f),u.origPoint=b,o.push(u);var v=n(f,b,.5),y=n(b,g,.5),w=["C",v.x,v.y,y.x,y.y,g.x,g.y];w.origPoint=b,o.push(w)}else o.push(u)}if(h){var k=s(o[o.length-1]);o.push(["Z"]),r(o[0],k)}}else o=a;return o.reduce((function(t,e){return t+e.join(" ")+" "}),"")}},{key:"drawLine",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:n,stroke:r,"stroke-dasharray":s,"stroke-width":a,"stroke-linecap":o})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=this.w.globals.dom.Paper.rect();return c.attr({x:t,y:e,width:i>0?i:0,height:n>0?n:0,rx:r,ry:r,opacity:a,"stroke-width":null!==o?o:0,stroke:null!==l?l:"none","stroke-dasharray":h}),c.node.setAttribute("fill",s),c}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:n,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t<0&&(t=0);var i=this.w.globals.dom.Paper.circle(2*t);return null!==e&&i.attr(e),i}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,n=t.stroke,r=void 0===n?"#a8a8a8":n,s=t.strokeWidth,a=void 0===s?1:s,o=t.fill,l=t.fillOpacity,h=void 0===l?1:l,c=t.strokeOpacity,d=void 0===c?1:c,u=t.classes,p=t.strokeLinecap,f=void 0===p?null:p,g=t.strokeDashArray,m=void 0===g?0:g,b=this.w;return null===f&&(f=b.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(b.globals.gridHeight)),b.globals.dom.Paper.path(i).attr({fill:o,"fill-opacity":h,stroke:r,"stroke-opacity":d,"stroke-linecap":f,"stroke-width":a,"stroke-dasharray":m,class:u})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;return null===i?n=[" L",t,e].join(" "):"H"===i?n=[" H",t].join(" "):"V"===i&&(n=[" V",e].join(" ")),n}},{key:"curve",value:function(t,e,i,n,r,s){return["C",t,e,i,n,r,s].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,n){return["Q",t,e,i,n].join(" ")}},{key:"arc",value:function(t,e,i,n,r,s,a){var o="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(o="a"),[o,t,e,i,n,r,s,a].join(" ")}},{key:"renderPaths",value:function(t){var e,i=t.j,n=t.realIndex,r=t.pathFrom,s=t.pathTo,a=t.stroke,o=t.strokeWidth,l=t.strokeLinecap,h=t.fill,c=t.animationDelay,d=t.initialSpeed,u=t.dataChangeSpeed,p=t.className,f=t.chartType,m=t.shouldClipToGrid,b=void 0===m||m,x=t.bindEventsOnPaths,v=void 0===x||x,y=t.drawShadow,w=void 0===y||y,k=this.w,S=new _i(this.ctx),C=new A(this.ctx),_=this.w.config.chart.animations.enabled,M=_&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(_&&!k.globals.resized||M&&k.globals.dataChanged&&k.globals.shouldAnimate);T?e=r:(e=s,k.globals.animationEnded=!0);var E,N=k.config.stroke.dashArray;E=Array.isArray(N)?N[n]:k.config.stroke.dashArray;var P=this.drawPath({d:e,stroke:a,strokeWidth:o,fill:h,fillOpacity:1,classes:p,strokeLinecap:l,strokeDashArray:E});P.attr("index",n),b&&("bar"===f&&!k.globals.isHorizontal||k.globals.comboCharts?P.attr({"clip-path":"url(#gridRectBarMask".concat(k.globals.cuid,")")}):P.attr({"clip-path":"url(#gridRectMask".concat(k.globals.cuid,")")})),k.config.chart.dropShadow.enabled&&w&&S.dropShadow(P,k.config.chart.dropShadow,n),v&&(P.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,P)),P.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,P)),P.node.addEventListener("mousedown",this.pathMouseDown.bind(this,P))),P.attr({pathTo:s,pathFrom:r});var L={el:P,j:i,realIndex:n,pathFrom:r,pathTo:s,fill:h,strokeWidth:o,delay:c};return!_||k.globals.resized||k.globals.dataChanged?!k.globals.resized&&k.globals.dataChanged||C.showDelayedElements():C.animatePathsGradually(g(g({},L),{},{speed:d})),k.globals.dataChanged&&M&&T&&C.animatePathsGradually(g(g({},L),{},{speed:u})),P}},{key:"drawPattern",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,i,(function(s){"horizontalLines"===t?s.line(0,0,i,0).stroke({color:n,width:r+1}):"verticalLines"===t?s.line(0,0,0,e).stroke({color:n,width:r+1}):"slantedLines"===t?s.line(0,0,e,i).stroke({color:n,width:r}):"squares"===t?s.rect(e,i).fill("none").stroke({color:n,width:r}):"circles"===t&&s.circle(e).fill("none").stroke({color:n,width:r})}))}},{key:"drawGradient",value:function(t,e,i,n,r){var s,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.w;e.length<9&&0===e.indexOf("#")&&(e=k.hexToRgba(e,n)),i.length<9&&0===i.indexOf("#")&&(i=k.hexToRgba(i,r));var d=0,u=1,p=1,f=null;null!==o&&(d=void 0!==o[0]?o[0]/100:0,u=void 0!==o[1]?o[1]/100:1,p=void 0!==o[2]?o[2]/100:1,f=void 0!==o[3]?o[3]/100:null);var g=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(s=l&&0!==l.length?c.globals.dom.Paper.gradient(g?"radial":"linear",(function(t){(Array.isArray(l[h])?l[h]:l).forEach((function(e){t.stop(e.offset/100,e.color,e.opacity)}))})):c.globals.dom.Paper.gradient(g?"radial":"linear",(function(t){t.stop(d,e,n),t.stop(u,i,r),t.stop(p,i,r),null!==f&&t.stop(f,e,n)})),g){var m=c.globals.gridWidth/2,b=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?s.attr({gradientUnits:"userSpaceOnUse",cx:m,cy:b,r:a}):s.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?s.from(0,0).to(0,1):"diagonal"===t?s.from(0,0).to(1,1):"horizontal"===t?s.from(0,1).to(1,1):"diagonal2"===t&&s.from(1,0).to(0,1);return s}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,i=t.maxWidth,n=t.fontSize,r=t.fontFamily,s=this.getTextRects(e,n,r),a=s.width/e.length,o=Math.floor(i/a);return i<s.width?e.slice(0,o-3)+"...":e}},{key:"drawText",value:function(t){var e=this,i=t.x,n=t.y,r=t.text,s=t.textAnchor,a=t.fontSize,o=t.fontFamily,l=t.fontWeight,h=t.foreColor,c=t.opacity,d=t.maxWidth,u=t.cssClass,p=void 0===u?"":u,f=t.isPlainText,m=void 0===f||f,b=t.dominantBaseline,x=void 0===b?"auto":b,v=this.w;void 0===r&&(r="");var y=r;s||(s="start"),h&&h.length||(h=v.config.chart.foreColor),o=o||v.config.chart.fontFamily,l=l||"regular";var w,k={maxWidth:d,fontSize:a=a||"11px",fontFamily:o};return Array.isArray(r)?w=v.globals.dom.Paper.text((function(t){for(var i=0;i<r.length;i++)y=r[i],d&&(y=e.getTextBasedOnMaxWidth(g({text:r[i]},k))),0===i?t.tspan(y):t.tspan(y).newLine()})):(d&&(y=this.getTextBasedOnMaxWidth(g({text:r},k))),w=m?v.globals.dom.Paper.plain(r):v.globals.dom.Paper.text((function(t){return t.tspan(y)}))),w.attr({x:i,y:n,"text-anchor":s,"dominant-baseline":x,"font-size":a,"font-family":o,"font-weight":l,fill:h,class:"apexcharts-text "+p}),w.node.style.fontFamily=o,w.node.style.opacity=c,w}},{key:"getMarkerPath",value:function(t,e,i,n){var r="";switch(i){case"cross":r="M ".concat(t-(n/=1.4)," ").concat(e-n," L ").concat(t+n," ").concat(e+n,"  M ").concat(t-n," ").concat(e+n," L ").concat(t+n," ").concat(e-n);break;case"plus":r="M ".concat(t-(n/=1.12)," ").concat(e," L ").concat(t+n," ").concat(e,"  M ").concat(t," ").concat(e-n," L ").concat(t," ").concat(e+n);break;case"star":case"sparkle":var s=5;n*=1.15,"sparkle"===i&&(n/=1.1,s=4);for(var a=Math.PI/s,o=0;o<=2*s;o++){var l=o*a,h=o%2==0?n:n/2;r+=(0===o?"M":"L")+(t+h*Math.sin(l))+","+(e-h*Math.cos(l))}r+="Z";break;case"triangle":r="M ".concat(t," ").concat(e-n," \n             L ").concat(t+n," ").concat(e+n," \n             L ").concat(t-n," ").concat(e+n," \n             Z");break;case"square":case"rect":r="M ".concat(t-(n/=1.125)," ").concat(e-n," \n           L ").concat(t+n," ").concat(e-n," \n           L ").concat(t+n," ").concat(e+n," \n           L ").concat(t-n," ").concat(e+n," \n           Z");break;case"diamond":n*=1.05,r="M ".concat(t," ").concat(e-n," \n             L ").concat(t+n," ").concat(e," \n             L ").concat(t," ").concat(e+n," \n             L ").concat(t-n," ").concat(e," \n            Z");break;case"line":r="M ".concat(t-(n/=1.1)," ").concat(e," \n           L ").concat(t+n," ").concat(e);break;default:n*=2,r="M ".concat(t,", ").concat(e," \n           m -").concat(n/2,", 0 \n           a ").concat(n/2,",").concat(n/2," 0 1,0 ").concat(n,",0 \n           a ").concat(n/2,",").concat(n/2," 0 1,0 -").concat(n,",0")}return r}},{key:"drawMarkerShape",value:function(t,e,i,n,r){var s=this.drawPath({d:this.getMarkerPath(t,e,i,n,r),stroke:r.pointStrokeColor,strokeDashArray:r.pointStrokeDashArray,strokeWidth:r.pointStrokeWidth,fill:r.pointFillColor,fillOpacity:r.pointFillOpacity,strokeOpacity:r.pointStrokeOpacity});return s.attr({cx:t,cy:e,shape:r.shape,class:r.class?r.class:""}),s}},{key:"drawMarker",value:function(t,e,i){t=t||0;var n=i.pSize||0;return k.isNumber(e)||(n=0,e=0),this.drawMarkerShape(t,e,null==i?void 0:i.shape,n,g(g({},i),"line"===i.shape||"plus"===i.shape||"cross"===i.shape?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,n=new _i(this.ctx),r=parseInt(t.node.getAttribute("index"),10),s=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:r,dataPointIndex:s,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:r,dataPointIndex:s,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var a=i.config.states.hover.filter;n.applyFilter(t,r,a.type)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,n=new _i(this.ctx),r=parseInt(t.node.getAttribute("index"),10),s=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:r,dataPointIndex:s,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:r,dataPointIndex:s,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&n.getDefaultFilter(t,r)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,n=new _i(this.ctx),r=parseInt(t.node.getAttribute("index"),10),s=parseInt(t.node.getAttribute("j"),10),a="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[r].indexOf(s)>-1){var o=i.globals.selectedDataPoints[r].indexOf(s);i.globals.selectedDataPoints[r].splice(o,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),h=i.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),c=function(t){Array.prototype.forEach.call(t,(function(t){t.node.setAttribute("selected","false"),n.getDefaultFilter(t,r)}))};c(l),c(h)}t.node.setAttribute("selected","true"),a="true",void 0===i.globals.selectedDataPoints[r]&&(i.globals.selectedDataPoints[r]=[]),i.globals.selectedDataPoints[r].push(s)}if("true"===a){var d=i.config.states.active.filter;if("none"!==d)n.applyFilter(t,r,d.type);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var u=i.config.states.hover.filter;n.applyFilter(t,r,u.type)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?n.getDefaultFilter(t,r):(u=i.config.states.hover.filter,n.applyFilter(t,r,u.type)));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:s,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:s,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.w,a=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});n&&a.attr("transform",n),s.globals.dom.Paper.add(a);var o=a.bbox();return r||(o=a.node.getBoundingClientRect()),a.remove(),{width:o.width,height:o.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var n=e.length-3;n>0;n-=3)if(t.getSubStringLength(0,n)<=i/1.1)return void(t.textContent=e.substring(0,n)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),Ti=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getStackedSeriesTotals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.w,i=[];if(0===e.globals.series.length)return i;for(var n=0;n<e.globals.series[e.globals.maxValsInArrayIndex].length;n++){for(var r=0,s=0;s<e.globals.series.length;s++)void 0!==e.globals.series[s][n]&&-1===t.indexOf(s)&&(r+=e.globals.series[s][n]);i.push(r)}return i}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce((function(t,e){return t+e}),0):this.w.globals.series[t].reduce((function(t,e){return t+e}),0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var t=this,e=this.w,i=[];return e.globals.seriesGroups.forEach((function(n){var r=[];e.config.series.forEach((function(t,i){n.indexOf(e.globals.seriesNames[i])>-1&&r.push(i)}));var s=e.globals.series.map((function(t,e){return-1===r.indexOf(e)?e:-1})).filter((function(t){return-1!==t}));i.push(t.getStackedSeriesTotals(s))})),i}},{key:"setSeriesYAxisMappings",value:function(){var t=this.w.globals,e=this.w.config,i=[],n=[],r=[],s=t.series.length>e.yaxis.length||e.yaxis.some((function(t){return Array.isArray(t.seriesName)}));e.series.forEach((function(t,e){r.push(e),n.push(null)})),e.yaxis.forEach((function(t,e){i[e]=[]}));var a=[];e.yaxis.forEach((function(t,n){var o=!1;if(t.seriesName){var l=[];Array.isArray(t.seriesName)?l=t.seriesName:l.push(t.seriesName),l.forEach((function(t){e.series.forEach((function(e,a){if(e.name===t){var l=a;n===a||s?(!s||r.indexOf(a)>-1)&&i[n].push([n,a]):(i[a].push([a,n]),l=n),o=!0,-1!==(l=r.indexOf(l))&&r.splice(l,1)}}))}))}o||a.push(n)})),i=i.map((function(t,e){var i=[];return t.forEach((function(t){n[t[1]]=t[0],i.push(t[1])})),i}));for(var o=e.yaxis.length-1,l=0;l<a.length&&(o=a[l],i[o]=[],r);l++){var h=r[0];r.shift(),i[o].push(h),n[h]=o}r.forEach((function(t){i[o].push(t),n[t]=o})),t.seriesYAxisMap=i.map((function(t){return t})),t.seriesYAxisReverseMap=n.map((function(t){return t})),t.seriesYAxisMap.forEach((function(t,i){t.forEach((function(t){e.series[t]&&void 0===e.series[t].group&&(e.series[t].group="apexcharts-axis-".concat(i.toString()))}))}))}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter((function(t){return null!==t})):this.w.config.series[t].data.filter((function(t){return null!==t}))).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every((function(t,e,i){return t===i[0]}))}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map((function(t,i){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,t.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach((function(t){e=Math.max(e,t)})),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach((function(t){e=Math.max(e,t.size)})),e>0&&(t.config.markers.hover.size>0?e=t.config.markers.hover.size:e+=t.config.markers.hover.sizeOffset),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map((function(t,e){var i=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)i+=t[n];else i+=t;return i}))}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map((function(n,r){for(var s=0,a=0;a<n.length;a++)i.globals.seriesX[r][a]>t&&i.globals.seriesX[r][a]<e&&(s+=n[a]);return s}))}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map((function(e,i){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var s=t.globals.stackedSeriesTotals[r],a=0;s&&(a=100*e[r]/s),n.push(a)}else{var o=100*e/t.globals.seriesTotals.reduce((function(t,e){return t+e}),0);n.push(o)}return n}))}},{key:"getCalculatedRatios",value:function(){var t,e,i,n=this,r=this.w,s=r.globals,a=[],o=0,l=[],h=.1,c=0;if(s.yRange=[],s.isMultipleYAxis)for(var d=0;d<s.minYArr.length;d++)s.yRange.push(Math.abs(s.minYArr[d]-s.maxYArr[d])),l.push(0);else s.yRange.push(Math.abs(s.minY-s.maxY));s.xRange=Math.abs(s.maxX-s.minX),s.zRange=Math.abs(s.maxZ-s.minZ);for(var u=0;u<s.yRange.length;u++)a.push(s.yRange[u]/s.gridHeight);if(e=s.xRange/s.gridWidth,t=s.yRange/s.gridWidth,i=s.xRange/s.gridHeight,(o=s.zRange/s.gridHeight*16)||(o=1),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(s.hasNegs=!0),r.globals.seriesYAxisReverseMap.length>0){var p=function(t,e){var i=r.config.yaxis[r.globals.seriesYAxisReverseMap[e]],s=t<0?-1:1;return t=Math.abs(t),i.logarithmic&&(t=n.getBaseLog(i.logBase,t)),-s*t/a[e]};if(s.isMultipleYAxis){l=[];for(var f=0;f<a.length;f++)l.push(p(s.minYArr[f],f))}else(l=[]).push(p(s.minY,0)),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(h=-s.minY/t,c=s.minX/e)}else(l=[]).push(0),h=0,c=0;return{yRatio:a,invertedYRatio:t,zRatio:o,xRatio:e,invertedXRatio:i,baseLineInvertedY:h,baseLineY:l,baseLineX:c}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map((function(t,n){var r=i.globals.seriesYAxisReverseMap[n];return i.config.yaxis[r]&&i.config.yaxis[r].logarithmic?t.map((function(t){return null===t?null:e.getLogVal(i.config.yaxis[r].logBase,t,n)})):t})),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(t,e){if(null===t)return null;var i=this.w,n=i.globals.seriesYAxisReverseMap[e];return i.config.yaxis[n]&&i.config.yaxis[n].logarithmic?this.getLogVal(i.config.yaxis[n].logBase,t,e):t}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(e<=0)return 0;var n=this.w,r=0===n.globals.minYArr[i]?-1:this.getBaseLog(t,n.globals.minYArr[i]),s=(0===n.globals.maxYArr[i]?0:this.getBaseLog(t,n.globals.maxYArr[i]))-r;return e<1?e/s:(this.getBaseLog(t,e)-r)/s}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,n=this.w.globals;return n.yLogRatio=t.slice(),n.logYRange=n.yRange.map((function(t,r){var s=i.globals.seriesYAxisReverseMap[r];if(i.config.yaxis[s]&&e.w.config.yaxis[s].logarithmic){var a,o=-Number.MAX_VALUE,l=Number.MIN_VALUE;return n.seriesLog.forEach((function(t,e){t.forEach((function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(o=Math.max(t,o),l=Math.min(t,l))}))})),a=Math.pow(n.yRange[r],Math.abs(l-o)/n.yRange[r]),n.yLogRatio[r]=a/n.gridHeight,a}})),n.invalidLogScale?t.slice():n.yLogRatio}},{key:"drawSeriesByGroup",value:function(t,e,i,n){var r=this.w,s=[];return t.series.length>0&&e.forEach((function(e){var a=[],o=[];t.i.forEach((function(i,n){r.config.series[i].group===e&&(a.push(t.series[n]),o.push(i))})),a.length>0&&s.push(n.draw(a,i,o))})),s}}],[{key:"checkComboSeries",value:function(t,e){var i=!1,n=0,r=0;return void 0===e&&(e="line"),t.length&&void 0!==t[0].type&&t.forEach((function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||n++,void 0!==t.type&&t.type!==e&&r++})),r>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(t,e,i){var n,r,s,a,o,l;return null!==(n=e)&&void 0!==n&&n.yaxis&&(e=t.extendYAxis(e,i)),null!==(r=e)&&void 0!==r&&r.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),null!==(s=e)&&void 0!==s&&null!==(a=s.annotations)&&void 0!==a&&a.xaxis&&(e=t.extendXAxisAnnotations(e)),null!==(o=e)&&void 0!==o&&null!==(l=o.annotations)&&void 0!==l&&l.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),Ei=function(){function t(e){s(this,t),this.w=e.w,this.annoCtx=e}return o(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===t.label.orientation){var n=null!==e?e:0,r=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(null!==r){var s=r.getBoundingClientRect();r.setAttribute("x",parseFloat(r.getAttribute("x"))-s.height+4);var a="top"===t.label.position?s.width:-s.width;r.setAttribute("y",parseFloat(r.getAttribute("y"))+a);var o=this.annoCtx.graphics.rotateAroundCenter(r),l=o.x,h=o.y;r.setAttribute("transform","rotate(-90 ".concat(l," ").concat(h,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||!e.label.text||!String(e.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=t.getBoundingClientRect(),s=e.label.style.padding,a=s.left,o=s.right,l=s.top,h=s.bottom;if("vertical"===e.label.orientation){var c=[a,o,l,h];l=c[0],h=c[1],a=c[2],o=c[3]}var d=r.left-n.left-a,u=r.top-n.top-l,p=this.annoCtx.graphics.drawRect(d-i.globals.barPadForNumericAxis,u,r.width+a+o,r.height+l+h,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&p.node.classList.add(e.id),p}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,n,r){var s=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(n,"']"));if(s){var a=s.parentNode,o=t.addBackgroundToAnno(s,i);o&&(a.insertBefore(o.node,s),i.label.mouseEnter&&o.node.addEventListener("mouseenter",i.label.mouseEnter.bind(t,i)),i.label.mouseLeave&&o.node.addEventListener("mouseleave",i.label.mouseLeave.bind(t,i)),i.label.click&&o.node.addEventListener("click",i.label.click.bind(t,i)))}};e.config.annotations.xaxis.forEach((function(t,e){return i(t,e,"xaxis")})),e.config.annotations.yaxis.forEach((function(t,e){return i(t,e,"yaxis")})),e.config.annotations.points.forEach((function(t,e){return i(t,e,"point")}))}},{key:"getY1Y2",value:function(t,e){var i,n=this.w,r="y1"===t?e.y:e.y2,s=!1;if(this.annoCtx.invertAxis){var a=n.config.xaxis.convertedCatToNumeric?n.globals.categoryLabels:n.globals.labels,o=a.indexOf(r),l=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(o+1,")"));i=l?parseFloat(l.getAttribute("y")):(n.globals.gridHeight/a.length-1)*(o+1)-n.globals.barHeight,void 0!==e.seriesIndex&&n.globals.barHeight&&(i-=n.globals.barHeight/2*(n.globals.series.length-1)-n.globals.barHeight*e.seriesIndex)}else{var h,c=n.globals.seriesYAxisMap[e.yAxisIndex][0],d=n.config.yaxis[e.yAxisIndex].logarithmic?new Ti(this.annoCtx.ctx).getLogVal(n.config.yaxis[e.yAxisIndex].logBase,r,c)/n.globals.yLogRatio[c]:(r-n.globals.minYArr[c])/(n.globals.yRange[c]/n.globals.gridHeight);i=n.globals.gridHeight-Math.min(Math.max(d,0),n.globals.gridHeight),s=d>n.globals.gridHeight||d<0,!e.marker||void 0!==e.y&&null!==e.y||(i=0),null!==(h=n.config.yaxis[e.yAxisIndex])&&void 0!==h&&h.reversed&&(i=d)}return"string"==typeof r&&r.includes("px")&&(i=parseFloat(r)),{yP:i,clipped:s}}},{key:"getX1X2",value:function(t,e){var i=this.w,n="x1"===t?e.x:e.x2,r=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,s=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,a=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,o=!1,l=this.annoCtx.inversedReversedAxis?(s-n)/(a/i.globals.gridWidth):(n-r)/(a/i.globals.gridWidth);return"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(l=this.getStringX(n)),"string"==typeof n&&n.includes("px")&&(l=parseFloat(n)),null==n&&e.marker&&(l=i.globals.gridWidth),void 0!==e.seriesIndex&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(l-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*e.seriesIndex),l>i.globals.gridWidth?(l=i.globals.gridWidth,o=!0):l<0&&(l=0,o=!0),{x:l,clipped:o}}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var n=e.globals.labels.map((function(t){return Array.isArray(t)?t.join(" "):t})).indexOf(t),r=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(n+1,")"));return r&&(i=parseFloat(r.getAttribute("x"))),i}}]),t}(),Ni=function(){function t(e){s(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Ei(this.annoCtx)}return o(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var n,r=this.w,s=this.helpers.getX1X2("x1",t),a=s.x,o=s.clipped,l=!0,h=t.label.text,c=t.strokeDashArray;if(k.isNumber(a)){if(null===t.x2||void 0===t.x2){if(!o){var d=this.annoCtx.graphics.drawLine(a+t.offsetX,0+t.offsetY,a+t.offsetX,r.globals.gridHeight+t.offsetY,t.borderColor,c,t.borderWidth);e.appendChild(d.node),t.id&&d.node.classList.add(t.id)}}else{var u=this.helpers.getX1X2("x2",t);if(n=u.x,l=u.clipped,n<a){var p=a;a=n,n=p}var f=this.annoCtx.graphics.drawRect(a+t.offsetX,0+t.offsetY,n-a,r.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,c);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}if(!o||!l){var g=this.annoCtx.graphics.getTextRects(h,parseFloat(t.label.style.fontSize)),m="top"===t.label.position?4:"center"===t.label.position?r.globals.gridHeight/2+("vertical"===t.label.orientation?g.width/2:0):r.globals.gridHeight,b=this.annoCtx.graphics.drawText({x:a+t.label.offsetX,y:m+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?g.width/2-12:-g.width/2:0),text:h,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});b.attr({rel:i}),e.appendChild(b.node),this.annoCtx.helpers.setOrientations(t,i)}}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((function(e,n){t.addXaxisAnnotation(e,i.node,n)})),i}}]),t}(),Pi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return o(t,[{key:"isValidDate",value:function(t){return"number"!=typeof t&&!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,r=["\0"].concat(x(i.months)),s=[""].concat(x(i.shortMonths)),a=[""].concat(x(i.days)),o=[""].concat(x(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var h=n?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var c=(n?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+s[0])).replace(/(^|[^\\])MM/g,"$1"+l(c))).replace(/(^|[^\\])M/g,"$1"+c);var d=n?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+o[0])).replace(/(^|[^\\])dd/g,"$1"+l(d))).replace(/(^|[^\\])d/g,"$1"+d);var u=n?t.getUTCHours():t.getHours(),p=u>12?u-12:0===u?12:u;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(u))).replace(/(^|[^\\])H/g,"$1"+u)).replace(/(^|[^\\])hh+/g,"$1"+l(p))).replace(/(^|[^\\])h/g,"$1"+p);var f=n?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(f))).replace(/(^|[^\\])m/g,"$1"+f);var g=n?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(g))).replace(/(^|[^\\])s/g,"$1"+g);var m=n?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(m,3)),m=Math.round(m/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(m)),m=Math.round(m/10);var b=u<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+b)).replace(/(^|[^\\])T/g,"$1"+b.charAt(0));var v=b.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+v)).replace(/(^|[^\\])t/g,"$1"+v.charAt(0));var y=-t.getTimezoneOffset(),w=n||!y?"Z":y>0?"+":"-";if(!n){var k=(y=Math.abs(y))%60;w+=l(Math.floor(y/60))+":"+l(k)}e=e.replace(/(^|[^\\])K/g,"$1"+w);var A=(n?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(a[0],"g"),a[A])).replace(new RegExp(o[0],"g"),o[A])).replace(new RegExp(r[0],"g"),r[c])).replace(new RegExp(s[0],"g"),s[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var n=this.w;void 0!==n.config.xaxis.min&&(t=n.config.xaxis.min),void 0!==n.config.xaxis.max&&(e=n.config.xaxis.max);var r=this.getDate(t),s=this.getDate(e),a=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" "),o=this.formatDate(s,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(o[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(o[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(o[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(o[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(o[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(o[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(o[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var n=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=k.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),Li=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return o(t,[{key:"xLabelFormat",value:function(t,e,i,n){var r=this.w;if("datetime"===r.config.xaxis.type&&void 0===r.config.xaxis.labels.formatter&&void 0===r.config.tooltip.x.formatter){var s=new Pi(this.ctx);return s.formatDate(s.getDate(e),r.config.tooltip.x.format)}return t(e,i,n)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map((function(t){return t})):t}},{key:"defaultYFormatter",value:function(t,e,i){var n=this.w;if(k.isNumber(t))if(0!==n.globals.yValueDecimal)t=t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:n.globals.yValueDecimal);else{var r=t.toFixed(0);t=t==r?r:t.toFixed(1)}return t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},void 0!==e.config.xaxis.labels.formatter?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(t){if(k.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(k.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);var i=e.globals.maxX-e.globals.minX;return i>0&&i<100?t.toFixed(1):t.toFixed(0)}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0)}return t},"function"==typeof e.config.tooltip.x.formatter?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((function(i,n){void 0!==i.labels.formatter?e.globals.yLabelFormatters[n]=i.labels.formatter:e.globals.yLabelFormatters[n]=function(r){return e.globals.xyCharts?Array.isArray(r)?r.map((function(e){return t.defaultYFormatter(e,i,n)})):t.defaultYFormatter(r,i,n):r}})),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce((function(t,e){return t.length>e.length?t:e}),0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),Ii=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getLabel",value:function(t,e,i,n){var r,s,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=this.w,c=void 0===t[n]?"":t[n],d=c,u=h.globals.xLabelFormatter,p=h.config.xaxis.labels.formatter,f=!1,g=new Li(this.ctx),m=c;l&&(d=g.xLabelFormat(u,c,m,{i:n,dateFormatter:new Pi(this.ctx).formatDate,w:h}),void 0!==p&&(d=p(c,t[n],{i:n,dateFormatter:new Pi(this.ctx).formatDate,w:h}))),e.length>0?(r=e[n].unit,s=null,e.forEach((function(t){"month"===t.unit?s="year":"day"===t.unit?s="month":"hour"===t.unit?s="day":"minute"===t.unit&&(s="hour")})),f=s===r,i=e[n].position,d=e[n].value):"datetime"===h.config.xaxis.type&&void 0===p&&(d=""),void 0===d&&(d=""),d=Array.isArray(d)?d:d.toString();var b,x=new Mi(this.ctx);b=h.globals.rotateXLabels&&l?x.getTextRects(d,parseInt(o,10),null,"rotate(".concat(h.config.xaxis.labels.rotate," 0 0)"),!1):x.getTextRects(d,parseInt(o,10));var v=!h.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(d)&&("NaN"===String(d)||a.indexOf(d)>=0&&v)&&(d=""),{x:i,text:d,textRect:b,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var n=this.w,r=n.config.xaxis.tickAmount;return"dataPoints"===r&&(r=Math.round(n.globals.gridWidth/120)),r>i||t%Math.round(i/(r+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,n,r){var s=this.w;if(0===t&&s.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&s.globals.skipLastTimelinelabel&&(e.text=""),s.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var a=r[r.length-1];e.x<a.textRect.width/(s.globals.rotateXLabels?Math.abs(s.config.xaxis.labels.rotate)/12:1.01)+a.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"yAxisAllSeriesCollapsed",value:function(t){var e=this.w.globals;return!e.seriesYAxisMap[t].some((function(t){return-1===e.collapsedSeriesIndices.indexOf(t)}))}},{key:"translateYAxisIndex",value:function(t){var e=this.w,i=e.globals,n=e.config.yaxis;return i.series.length>n.length||n.some((function(t){return Array.isArray(t.seriesName)}))?t:i.seriesYAxisReverseMap[t]}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=e.config.yaxis[t];if(!i.show||this.yAxisAllSeriesCollapsed(t))return!0;if(!i.showForNullSeries){var n=e.globals.seriesYAxisMap[t],r=new Ti(this.ctx);return n.every((function(t){return r.isSeriesNull(t)}))}return!1}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,n,r,s,a){var o=this.w,l=new Mi(this.ctx),h=o.globals.translateY+o.config.yaxis[r].labels.offsetY;if(o.globals.isBarHorizontal?h=0:"heatmap"===o.config.chart.type&&(h+=s/2),n.show&&e>0){!0===o.config.yaxis[r].opposite&&(t+=n.width);for(var c=e;c>=0;c--){var d=l.drawLine(t+i.offsetX-n.width+n.offsetX,h+n.offsetY,t+i.offsetX+n.offsetX,h+n.offsetY,n.color);a.add(d),h+=s}}}}]),t}(),Ri=function(){function t(e){s(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new Ei(this.annoCtx),this.axesUtils=new Ii(this.annoCtx)}return o(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var n,r=this.w,s=t.strokeDashArray,a=this.helpers.getY1Y2("y1",t),o=a.yP,l=a.clipped,h=!0,c=!1,d=t.label.text;if(null===t.y2||void 0===t.y2){if(!l){c=!0;var u=this.annoCtx.graphics.drawLine(0+t.offsetX,o+t.offsetY,this._getYAxisAnnotationWidth(t),o+t.offsetY,t.borderColor,s,t.borderWidth);e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}}else{if(n=(a=this.helpers.getY1Y2("y2",t)).yP,h=a.clipped,n>o){var p=o;o=n,n=p}if(!l||!h){c=!0;var f=this.annoCtx.graphics.drawRect(0+t.offsetX,n+t.offsetY,this._getYAxisAnnotationWidth(t),o-n,0,t.fillColor,t.opacity,1,t.borderColor,s);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}}if(c){var g="right"===t.label.position?r.globals.gridWidth:"center"===t.label.position?r.globals.gridWidth/2:0,m=this.annoCtx.graphics.drawText({x:g+t.label.offsetX,y:(null!=n?n:o)+t.label.offsetY-3,text:d,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});m.attr({rel:i}),e.appendChild(m.node)}}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.forEach((function(e,n){e.yAxisIndex=t.axesUtils.translateYAxisIndex(e.yAxisIndex),t.axesUtils.isYAxisHidden(e.yAxisIndex)&&t.axesUtils.yAxisAllSeriesCollapsed(e.yAxisIndex)||t.addYaxisAnnotation(e,i.node,n)})),i}}]),t}(),Oi=function(){function t(e){s(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new Ei(this.annoCtx)}return o(t,[{key:"addPointAnnotation",value:function(t,e,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(t.seriesIndex)>-1)){var n=this.helpers.getX1X2("x1",t),r=n.x,s=n.clipped,a=(n=this.helpers.getY1Y2("y1",t)).yP,o=n.clipped;if(k.isNumber(r)&&!o&&!s){var l={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},h=this.annoCtx.graphics.drawMarker(r+t.marker.offsetX,a+t.marker.offsetY,l);e.appendChild(h.node);var c=t.label.text?t.label.text:"",d=this.annoCtx.graphics.drawText({x:r+t.label.offsetX,y:a+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:c,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(d.attr({rel:i}),e.appendChild(d.node),t.customSVG.SVG){var u=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});u.attr({transform:"translate(".concat(r+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),u.node.innerHTML=t.customSVG.SVG,e.appendChild(u.node)}if(t.image.path){var p=t.image.width?t.image.width:20,f=t.image.height?t.image.height:20;h=this.annoCtx.addImage({x:r+t.image.offsetX-p/2,y:a+t.image.offsetY-f/2,width:p,height:f,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&h.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&h.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&h.node.addEventListener("click",t.click.bind(this,t))}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((function(e,n){t.addPointAnnotation(e,i.node,n)})),i}}]),t}(),Di={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},zi=function(){function t(){s(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return o(t,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[Di],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)/t.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(t){return t},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),Fi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.graphics=new Mi(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Ei(this),this.xAxisAnnotations=new Ni(this),this.yAxisAnnotations=new Ri(this),this.pointsAnnotations=new Oi(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return o(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts&&t.globals.dataPoints){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),r=t.config.chart.animations.enabled,s=[e,i,n],a=[i.node,e.node,n.node],o=0;o<3;o++)t.globals.dom.elGraphical.add(s[o]),!r||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&a[o].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:a[o],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map((function(e,i){t.addImage(e,i)}))}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map((function(e,i){t.addText(e,i)}))}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,n=t.y,r=t.text,s=t.textAnchor,a=t.foreColor,o=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.cssClass,d=t.backgroundColor,u=t.borderWidth,p=t.strokeDashArray,f=t.borderRadius,g=t.borderColor,m=t.appendTo,b=void 0===m?".apexcharts-svg":m,x=t.paddingLeft,v=void 0===x?4:x,y=t.paddingRight,w=void 0===y?4:y,k=t.paddingBottom,A=void 0===k?2:k,S=t.paddingTop,C=void 0===S?2:S,_=this.w,M=this.graphics.drawText({x:i,y:n,text:r,textAnchor:s||"start",fontSize:o||"12px",fontWeight:h||"regular",fontFamily:l||_.config.chart.fontFamily,foreColor:a||_.config.chart.foreColor,cssClass:c}),T=_.globals.dom.baseEl.querySelector(b);T&&T.appendChild(M.node);var E=M.bbox();if(r){var N=this.graphics.drawRect(E.x-v,E.y-C,E.width+v+w,E.height+A+C,f,d||"transparent",1,u,g,p);T.insertBefore(N.node,M.node)}}},{key:"addImage",value:function(t,e){var i=this.w,n=t.path,r=t.x,s=void 0===r?0:r,a=t.y,o=void 0===a?0:a,l=t.width,h=void 0===l?20:l,c=t.height,d=void 0===c?20:c,u=t.appendTo,p=void 0===u?".apexcharts-svg":u,f=i.globals.dom.Paper.image(n);f.size(h,d).move(s,o);var g=i.globals.dom.baseEl.querySelector(p);return g&&g.appendChild(f.node),f}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,n=t.context,r=t.type,s=t.contextMethod,a=n,o=a.w,l=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),h=l.childNodes.length+1,c=new zi,d=Object.assign({},"xaxis"===r?c.xAxisAnnotation:"yaxis"===r?c.yAxisAnnotation:c.pointAnnotation),u=k.extend(d,e);switch(r){case"xaxis":this.addXaxisAnnotation(u,l,h);break;case"yaxis":this.addYaxisAnnotation(u,l,h);break;case"point":this.addPointAnnotation(u,l,h)}var p=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(h,"']")),f=this.helpers.addBackgroundToAnno(p,u);return f&&l.insertBefore(f.node,p),i&&o.globals.memory.methodsToExec.push({context:a,id:u.id?u.id:k.randomId(),method:s,label:"addAnnotation",params:e}),n}},{key:"clearAnnotations",value:function(t){for(var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),n=e.globals.memory.methodsToExec.length-1;n>=0;n--)"addText"!==e.globals.memory.methodsToExec[n].label&&"addAnnotation"!==e.globals.memory.methodsToExec[n].label||e.globals.memory.methodsToExec.splice(n,1);i=k.listToArray(i),Array.prototype.forEach.call(i,(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))}},{key:"removeAnnotation",value:function(t,e){var i=t.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(e));n&&(i.globals.memory.methodsToExec.map((function(t,n){t.id===e&&i.globals.memory.methodsToExec.splice(n,1)})),Array.prototype.forEach.call(n,(function(t){t.parentElement.removeChild(t)})))}}]),t}(),Bi=function(t){var e,i=t.isTimeline,n=t.ctx,r=t.seriesIndex,s=t.dataPointIndex,a=t.y1,o=t.y2,l=t.w,h=l.globals.seriesRangeStart[r][s],c=l.globals.seriesRangeEnd[r][s],d=l.globals.labels[s],u=l.config.series[r].name?l.config.series[r].name:"",p=l.globals.ttKeyFormatter,f=l.config.tooltip.y.title.formatter,g={w:l,seriesIndex:r,dataPointIndex:s,start:h,end:c};"function"==typeof f&&(u=f(u,g)),null!==(e=l.config.series[r].data[s])&&void 0!==e&&e.x&&(d=l.config.series[r].data[s].x),i||"datetime"===l.config.xaxis.type&&(d=new Li(n).xLabelFormat(l.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new Pi(n).formatDate,w:l})),"function"==typeof p&&(d=p(d,g)),Number.isFinite(a)&&Number.isFinite(o)&&(h=a,c=o);var m="",b="",x=l.globals.colors[r];if(void 0===l.config.tooltip.x.formatter)if("datetime"===l.config.xaxis.type){var v=new Pi(n);m=v.formatDate(v.getDate(h),l.config.tooltip.x.format),b=v.formatDate(v.getDate(c),l.config.tooltip.x.format)}else m=h,b=c;else m=l.config.tooltip.x.formatter(h),b=l.config.tooltip.x.formatter(c);return{start:h,end:c,startVal:m,endVal:b,ylabel:d,color:x,seriesName:u}},Hi=function(t){var e=t.color,i=t.seriesName,n=t.ylabel,r=t.start,s=t.end,a=t.seriesIndex,o=t.dataPointIndex,l=t.ctx.tooltip.tooltipLabels.getFormatters(a);r=l.yLbFormatter(r),s=l.yLbFormatter(s);var h=l.yLbFormatter(t.w.globals.series[a][o]),c='<span class="value start-value">\n  '.concat(r,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(s,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(i||"")+'</span></div><div> <span class="category">'+n+": </span> "+(t.w.globals.comboCharts?"rangeArea"===t.w.config.series[a].type||"rangeBar"===t.w.config.series[a].type?c:"<span>".concat(h,"</span>"):c)+" </div></div>"},qi=function(){function t(e){s(this,t),this.opts=e}return o(t,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.hideYAxis(),k.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(t,e){var i=e.w.config.series[e.seriesIndex].name;return null!==t?i+": "+t:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),g(g({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,n=e.dataPointIndex,r=e.w;return t._getBoxTooltip(r,i,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,n=e.dataPointIndex,r=e.w;return t._getBoxTooltip(r,i,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,n=e.dataPointIndex,r=e.w,s=function(){var t=r.globals.seriesRangeStart[i][n];return r.globals.seriesRangeEnd[i][n]-t};return r.globals.comboCharts?"rangeBar"===r.config.series[i].type||"rangeArea"===r.config.series[i].type?s():t:s()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=Bi(g(g({},t),{},{isTimeline:!0})),i=e.color,n=e.seriesName,r=e.ylabel,s=e.startVal,a=e.endVal;return Hi(g(g({},t),{},{color:i,seriesName:n,ylabel:r,start:s,end:a}))}(t):function(t){var e=Bi(t),i=e.color,n=e.seriesName,r=e.ylabel,s=e.start,a=e.end;return Hi(g(g({},t),{},{color:i,seriesName:n,ylabel:r,start:s,end:a}))}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(t){var e,i;return null!==(e=t.plotOptions.bar)&&void 0!==e&&e.barHeight||(t.plotOptions.bar.barHeight=2),null!==(i=t.plotOptions.bar)&&void 0!==i&&i.columnWidth||(t.plotOptions.bar.columnWidth=2),t}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(t){return function(t){var e=Bi(t),i=e.color,n=e.seriesName,r=e.ylabel,s=e.start,a=e.end;return Hi(g(g({},t),{},{color:i,seriesName:n,ylabel:r,start:s,end:a}))}(t)}}}}},{key:"brush",value:function(t){return k.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"stackedBars",value:function(){var t=this.bar();return g(g({},t),{},{plotOptions:g(g({},t.plotOptions),{},{bar:g(g({},t.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return k.isNumber(t)?Math.floor(t):t};var n=t.xaxis.labels.formatter,r=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(r=i.map((function(t){return Array.isArray(t)?t:String(t)}))),r&&r.length&&(t.xaxis.labels.formatter=function(t){return k.isNumber(t)?n(r[Math.floor(t)-1]):n(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(t,e,i,n,r){var s=t.globals.seriesCandleO[e][i],a=t.globals.seriesCandleH[e][i],o=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==r?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+s+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+a+"</span></div>"+(o?"<div>".concat(n[2],': <span class="value">')+o+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+h+"</span></div></div>"}}]),t}(),ji=function(){function t(e){s(this,t),this.opts=e}return o(t,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,n=new zi,r=new qi(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var s=n.init(),a={};if(i&&"object"===y(i)){var o,l,h,c,d,u,p,f,g,m,b={};b=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?r[i.chart.type]():r.line(),null!==(o=i.plotOptions)&&void 0!==o&&null!==(l=o.bar)&&void 0!==l&&l.isFunnel&&(b=r.funnel()),i.chart.stacked&&"bar"===i.chart.type&&(b=r.stackedBars()),null!==(h=i.chart.brush)&&void 0!==h&&h.enabled&&(b=r.brush(b)),null!==(c=i.plotOptions)&&void 0!==c&&null!==(d=c.line)&&void 0!==d&&d.isSlopeChart&&(b=r.slope()),i.chart.stacked&&"100%"===i.chart.stackType&&(i=r.stacked100(i)),null!==(u=i.plotOptions)&&void 0!==u&&null!==(p=u.bar)&&void 0!==p&&p.isDumbbell&&(i=r.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),(null!==(f=(i=this.checkForCatToNumericXAxis(this.chartType,b,i)).chart.sparkline)&&void 0!==f&&f.enabled||null!==(g=window.Apex.chart)&&void 0!==g&&null!==(m=g.sparkline)&&void 0!==m&&m.enabled)&&(b=r.sparkline(b)),a=k.extend(s,b)}var x=k.extend(a,window.Apex);return s=k.extend(x,i),this.handleUserInputErrors(s)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var n,r,s=new qi(i),a=("bar"===t||"boxPlot"===t)&&(null===(n=i.plotOptions)||void 0===n||null===(r=n.bar)||void 0===r?void 0:r.horizontal),o="pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t,l="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,h=i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return a||o||!l||"between"===h||(i=s.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new zi;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=k.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[k.extend(i.yAxis,t.yaxis)]:t.yaxis=k.extendArray(t.yaxis,i.yAxis);var n=!1;t.yaxis.forEach((function(t){t.logarithmic&&(n=!0)}));var r=t.series;return e&&!r&&(r=e.config.series),n&&r.length!==t.yaxis.length&&r.length&&(t.yaxis=r.map((function(e,n){if(e.name||(r[n].name="series-".concat(n+1)),t.yaxis[n])return t.yaxis[n].seriesName=r[n].name,t.yaxis[n];var s=k.extend(i.yAxis,t.yaxis[0]);return s.show=!1,s}))),n&&r.length>1&&(r.length,t.yaxis.length),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new zi;return t.annotations.yaxis=k.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new zi;return t.annotations.xaxis=k.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new zi;return t.annotations.points=k.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(e.yaxis[0].reversed=!1),e}}]),t}(),Gi=function(){function t(){s(this,t)}return o(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRange=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasXaxisGroups=!1,t.groups=[],t.barGroups=[],t.lineGroups=[],t.areaGroups=[],t.hasSeriesGroups=!1,t.seriesGroups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.lastWheelExecution=0,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0,t.multiAxisTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:t.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=k.extend({},t),e.initialSeries=k.clone(t.series),e.lastXAxis=k.clone(e.initialConfig.xaxis),e.lastYAxis=k.clone(e.initialConfig.yaxis),e}}]),t}(),Xi=function(){function t(e){s(this,t),this.opts=e}return o(t,[{key:"init",value:function(){var t=new ji(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new Gi).init(t)}}}]),t}(),Vi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return o(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,n=parseInt(e.globals.gridWidth,10),r=parseInt(e.globals.gridHeight,10),s=n>r?n:r,a=t.image,o=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(o=i.fill.image.width+1,l=i.fill.image.height):(o=s+1,l=s):(o=t.width,l=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");Mi.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:o+"px",height:l+"px"});var c=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(c),c.setAttributeNS(window.SVG.xlink,"href",a),Mi.setAttrs(c,{x:0,y:0,preserveAspectRatio:"none",width:o+"px",height:l+"px"}),c.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w,i=e.config.chart.type;return("bar"===i||"rangeBar"===i)&&e.config.plotOptions.bar.distributed||"heatmap"===i||"treemap"===i?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(t,e){var i,n=this.w,r=null,s=null,a=l(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o>=e.threshold?(null===r||o>r)&&(r=o):(null===s||o<s)&&(s=o)}}catch(t){a.e(t)}finally{a.f()}null===r&&(r=e.threshold),null===s&&(s=e.threshold);var h=r-e.threshold+(e.threshold-s);0===h&&(h=1);var c=100-(e.threshold-s)/h*100;return[{offset:c=Math.max(0,Math.min(c,100)),color:e.colorAboveThreshold,opacity:n.config.fill.opacity},{offset:0,color:e.colorBelowThreshold,opacity:n.config.fill.opacity}]}},{key:"fillPath",value:function(t){var e,i,n,r=this.w;this.opts=t;var s,a,o,l=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var h=l.plotOptions.line.colors.colorAboveThreshold&&l.plotOptions.line.colors.colorBelowThreshold,c=this.getFillColors()[this.seriesIndex];void 0!==r.globals.seriesColors[this.seriesIndex]&&(c=r.globals.seriesColors[this.seriesIndex]),"function"==typeof c&&(c=c({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:r}));var d,u,p,f=t.fillType?t.fillType:this.getFillType(this.seriesIndex),g=Array.isArray(l.fill.opacity)?l.fill.opacity[this.seriesIndex]:l.fill.opacity,m="gradient"===f||h;t.color&&(c=t.color),null!==(e=r.config.series[this.seriesIndex])&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&null!==(n=i[t.dataPointIndex])&&void 0!==n&&n.fillColor&&(c=null===(d=r.config.series[this.seriesIndex])||void 0===d||null===(u=d.data)||void 0===u||null===(p=u[t.dataPointIndex])||void 0===p?void 0:p.fillColor),c||(c="#fff");var b=c;if(-1===c.indexOf("rgb")?-1===c.indexOf("#")?b=c:c.length<9&&(b=k.hexToRgba(c,g)):c.indexOf("rgba")>-1?g=k.getOpacityFromRGBA(c):b=k.hexToRgba(k.rgb2hex(c),g),t.opacity&&(g=t.opacity),"pattern"===f&&(a=this.handlePatternFill({fillConfig:t.fillConfig,patternFill:a,fillColor:c,fillOpacity:g,defaultColor:b})),m){var v=x(l.fill.gradient.colorStops)||[],y=l.fill.gradient.type;h&&(v[this.seriesIndex]=this.computeColorStops(r.globals.series[this.seriesIndex],l.plotOptions.line.colors),y="vertical"),o=this.handleGradientFill({type:y,fillConfig:t.fillConfig,fillColor:c,fillOpacity:g,colorStops:v,i:this.seriesIndex})}if("image"===f){var w=l.fill.image.src,A=t.patternID?t.patternID:"",S="pattern".concat(r.globals.cuid).concat(t.seriesNumber+1).concat(A);-1===this.patternIDs.indexOf(S)&&(this.clippedImgArea({opacity:g,image:Array.isArray(w)?t.seriesNumber<w.length?w[t.seriesNumber]:w[0]:w,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:S}),this.patternIDs.push(S)),s="url(#".concat(S,")")}else s=m?o:"pattern"===f?a:b;return t.solid&&(s=b),s}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,n=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?n=t.globals.fill.colors:n.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?n=t.globals.fill.colors:n.push(t.globals.fill.colors),void 0!==i.fillColors&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(t){var e=t.fillConfig,i=(t.patternFill,t.fillColor),n=t.fillOpacity,r=t.defaultColor,s=this.w.config.fill;e&&(s=e);var a=this.opts,o=new Mi(this.ctx),l=Array.isArray(s.pattern.strokeWidth)?s.pattern.strokeWidth[this.seriesIndex]:s.pattern.strokeWidth,h=i;return Array.isArray(s.pattern.style)?void 0!==s.pattern.style[a.seriesNumber]?o.drawPattern(s.pattern.style[a.seriesNumber],s.pattern.width,s.pattern.height,h,l,n):r:o.drawPattern(s.pattern.style,s.pattern.width,s.pattern.height,h,l,n)}},{key:"handleGradientFill",value:function(t){var e=t.type,i=t.fillColor,n=t.fillOpacity,r=t.fillConfig,s=t.colorStops,a=t.i,o=this.w.config.fill;r&&(o=g(g({},o),r));var l=this.opts,h=new Mi(this.ctx),c=new k;e=e||o.gradient.type;var d,u=i,p=void 0===o.gradient.opacityFrom?n:Array.isArray(o.gradient.opacityFrom)?o.gradient.opacityFrom[a]:o.gradient.opacityFrom;u.indexOf("rgba")>-1&&(p=k.getOpacityFromRGBA(u));var f=void 0===o.gradient.opacityTo?n:Array.isArray(o.gradient.opacityTo)?o.gradient.opacityTo[a]:o.gradient.opacityTo;if(void 0===o.gradient.gradientToColors||0===o.gradient.gradientToColors.length)d="dark"===o.gradient.shade?c.shadeColor(-1*parseFloat(o.gradient.shadeIntensity),i.indexOf("rgb")>-1?k.rgb2hex(i):i):c.shadeColor(parseFloat(o.gradient.shadeIntensity),i.indexOf("rgb")>-1?k.rgb2hex(i):i);else if(o.gradient.gradientToColors[l.seriesNumber]){var m=o.gradient.gradientToColors[l.seriesNumber];d=m,m.indexOf("rgba")>-1&&(f=k.getOpacityFromRGBA(m))}else d=i;if(o.gradient.gradientFrom&&(u=o.gradient.gradientFrom),o.gradient.gradientTo&&(d=o.gradient.gradientTo),o.gradient.inverseColors){var b=u;u=d,d=b}return u.indexOf("rgb")>-1&&(u=k.rgb2hex(u)),d.indexOf("rgb")>-1&&(d=k.rgb2hex(d)),h.drawGradient(e,u,d,p,f,l.size,o.gradient.stops,s,a)}}]),t}(),Wi=function(){function t(e,i){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map((function(e){return t.config.markers.size}))}},{key:"plotChartMarkers",value:function(t){var e=t.pointsPos,i=t.seriesIndex,n=t.j,r=t.pSize,s=t.alwaysDrawMarker,a=void 0!==s&&s,o=t.isVirtualPoint,l=void 0!==o&&o,h=this.w,c=i,d=e,u=null,p=new Mi(this.ctx),f=h.config.markers.discrete&&h.config.markers.discrete.length;if(Array.isArray(d.x))for(var g=0;g<d.x.length;g++){var m=void 0,b=n,x=!k.isNumber(d.y[g]);0===h.globals.markers.largestSize&&h.globals.hasNullValues&&null!==h.globals.series[c][n+1]&&!l&&(x=!0),1===n&&0===g&&(b=0),1===n&&1===g&&(b=1);var v="apexcharts-marker";if("line"!==h.config.chart.type&&"area"!==h.config.chart.type||h.globals.comboCharts||h.config.tooltip.intersect||(v+=" no-pointer-events"),(Array.isArray(h.config.markers.size)?h.globals.markers.size[i]>0:h.config.markers.size>0)||a||f){x||(v+=" w".concat(k.randomId()));var y=this.getMarkerConfig({cssClass:v,seriesIndex:i,dataPointIndex:b});h.config.series[c].data[b]&&(h.config.series[c].data[b].fillColor&&(y.pointFillColor=h.config.series[c].data[b].fillColor),h.config.series[c].data[b].strokeColor&&(y.pointStrokeColor=h.config.series[c].data[b].strokeColor)),void 0!==r&&(y.pSize=r),(d.x[g]<-h.globals.markers.largestSize||d.x[g]>h.globals.gridWidth+h.globals.markers.largestSize||d.y[g]<-h.globals.markers.largestSize||d.y[g]>h.globals.gridHeight+h.globals.markers.largestSize)&&(y.pSize=0),x||((h.globals.markers.size[i]>0||a||f)&&!u&&(u=p.group({class:a||f?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),(m=p.drawMarker(d.x[g],d.y[g],y)).attr("rel",b),m.attr("j",b),m.attr("index",i),m.node.setAttribute("default-marker-size",y.pSize),new _i(this.ctx).setSelectionFilter(m,i,b),this.addEvents(m),u&&u.add(m))}else void 0===h.globals.pointsArray[i]&&(h.globals.pointsArray[i]=[]),h.globals.pointsArray[i].push([d.x[g],d.y[g]])}return u}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,n=t.dataPointIndex,r=void 0===n?null:n,s=t.radius,a=void 0===s?null:s,o=t.size,l=void 0===o?null:o,h=t.strokeWidth,c=void 0===h?null:h,d=this.w,u=this.getMarkerStyle(i),p=null===l?d.globals.markers.size[i]:l,f=d.config.markers;return null!==r&&f.discrete.length&&f.discrete.map((function(t){t.seriesIndex===i&&t.dataPointIndex===r&&(u.pointStrokeColor=t.strokeColor,u.pointFillColor=t.fillColor,p=t.size,u.pointShape=t.shape)})),{pSize:null===a?p:a,pRadius:null!==a?a:f.radius,pointStrokeWidth:null!==c?c:Array.isArray(f.strokeWidth)?f.strokeWidth[i]:f.strokeWidth,pointStrokeColor:u.pointStrokeColor,pointFillColor:u.pointFillColor,shape:u.pointShape||(Array.isArray(f.shape)?f.shape[i]:f.shape),class:e,pointStrokeOpacity:Array.isArray(f.strokeOpacity)?f.strokeOpacity[i]:f.strokeOpacity,pointStrokeDashArray:Array.isArray(f.strokeDashArray)?f.strokeDashArray[i]:f.strokeDashArray,pointFillOpacity:Array.isArray(f.fillOpacity)?f.fillOpacity[i]:f.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new Mi(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,n=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[t]:n,pointFillColor:Array.isArray(i)?i[t]:i}}}]),t}(),Yi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return o(t,[{key:"draw",value:function(t,e,i){var n=this.w,r=new Mi(this.ctx),s=i.realIndex,a=i.pointsPos,o=i.zRatio,l=i.elParent,h=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(a.x))for(var c=0;c<a.x.length;c++){var d=e+1,u=!0;0===e&&0===c&&(d=0),0===e&&1===c&&(d=1);var p=n.globals.markers.size[s];if(o!==1/0){var f=n.config.plotOptions.bubble;p=n.globals.seriesZ[s][d],f.zScaling&&(p/=o),f.minBubbleRadius&&p<f.minBubbleRadius&&(p=f.minBubbleRadius),f.maxBubbleRadius&&p>f.maxBubbleRadius&&(p=f.maxBubbleRadius)}var g=a.x[c],m=a.y[c];if(p=p||0,null!==m&&void 0!==n.globals.series[s][d]||(u=!1),u){var b=this.drawPoint(g,m,p,s,d,e);h.add(b)}l.add(h)}}},{key:"drawPoint",value:function(t,e,i,n,r,s){var a=this.w,o=n,l=new A(this.ctx),h=new _i(this.ctx),c=new Vi(this.ctx),d=new Wi(this.ctx),u=new Mi(this.ctx),p=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:o,dataPointIndex:r,radius:"bubble"===a.config.chart.type||a.globals.comboCharts&&a.config.series[n]&&"bubble"===a.config.series[n].type?i:null}),f=c.fillPath({seriesNumber:n,dataPointIndex:r,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[n][s]}),g=u.drawMarker(t,e,p);if(a.config.series[o].data[r]&&a.config.series[o].data[r].fillColor&&(f=a.config.series[o].data[r].fillColor),g.attr({fill:f}),a.config.chart.dropShadow.enabled){var m=a.config.chart.dropShadow;h.dropShadow(g,m,n)}if(!this.initialAnim||a.globals.dataChanged||a.globals.resized)a.globals.animationEnded=!0;else{var b=a.config.chart.animations.speed;l.animateMarker(g,b,a.globals.easing,(function(){window.setTimeout((function(){l.animationCompleted(g)}),100)}))}return g.attr({rel:r,j:r,index:n,"default-marker-size":p.pSize}),h.setSelectionFilter(g,n,r),d.addEvents(g),g.node.classList.add("apexcharts-marker"),g}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),Ui=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"dataLabelsCorrection",value:function(t,e,i,n,r,s,a){var o=this.w,l=!1,h=new Mi(this.ctx).getTextRects(i,a),c=h.width,d=h.height;e<0&&(e=0),e>o.globals.gridHeight+d&&(e=o.globals.gridHeight+d/2),void 0===o.globals.dataLabelsRects[n]&&(o.globals.dataLabelsRects[n]=[]),o.globals.dataLabelsRects[n].push({x:t,y:e,width:c,height:d});var u=o.globals.dataLabelsRects[n].length-2,p=void 0!==o.globals.lastDrawnDataLabelsIndexes[n]?o.globals.lastDrawnDataLabelsIndexes[n][o.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(void 0!==o.globals.dataLabelsRects[n][u]){var f=o.globals.dataLabelsRects[n][p];(t>f.x+f.width||e>f.y+f.height||e+d<f.y||t+c<f.x)&&(l=!0)}return(0===r||s)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t){var e=this,i=t.type,n=t.pos,r=t.i,s=t.j,a=t.isRangeStart,o=t.strokeWidth,l=void 0===o?2:o,h=this.w,c=new Mi(this.ctx),d=h.config.dataLabels,u=0,p=0,f=s,g=null;if(-1!==h.globals.collapsedSeriesIndices.indexOf(r)||!d.enabled||!Array.isArray(n.x))return g;g=c.group({class:"apexcharts-data-labels"});for(var m=0;m<n.x.length;m++)if(u=n.x[m]+d.offsetX,p=n.y[m]+d.offsetY+l,!isNaN(u)){1===s&&0===m&&(f=0),1===s&&1===m&&(f=1);var b=h.globals.series[r][f];"rangeArea"===i&&(b=a?h.globals.seriesRangeStart[r][f]:h.globals.seriesRangeEnd[r][f]);var x="",v=function(t){return h.config.dataLabels.formatter(t,{ctx:e.ctx,seriesIndex:r,dataPointIndex:f,w:h})};"bubble"===h.config.chart.type?(x=v(b=h.globals.seriesZ[r][f]),p=n.y[m],p=new Yi(this.ctx).centerTextInBubble(p,r,f).y):void 0!==b&&(x=v(b));var y=h.config.dataLabels.textAnchor;h.globals.isSlopeChart&&(y=0===f?"end":f===h.config.series[r].data.length-1?"start":"middle"),this.plotDataLabelsText({x:u,y:p,text:x,i:r,j:f,parent:g,offsetCorrection:!0,dataLabelsConfig:h.config.dataLabels,textAnchor:y})}return g}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new Mi(this.ctx),n=t.x,r=t.y,s=t.i,a=t.j,o=t.text,l=t.textAnchor,h=t.fontSize,c=t.parent,d=t.dataLabelsConfig,u=t.color,p=t.alwaysDrawDataLabel,f=t.offsetCorrection,g=t.className,m=null;if(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(s)<0)return m;var b={x:n,y:r,drawnextLabel:!0,textRects:null};f&&(b=this.dataLabelsCorrection(n,r,o,s,a,p,parseInt(d.style.fontSize,10))),e.globals.zoomed||(n=b.x,r=b.y),b.textRects&&(n<-20-b.textRects.width||n>e.globals.gridWidth+b.textRects.width+30)&&(o="");var x=e.globals.dataLabels.style.colors[s];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(x=e.globals.dataLabels.style.colors[a]),"function"==typeof x&&(x=x({series:e.globals.series,seriesIndex:s,dataPointIndex:a,w:e})),u&&(x=u);var v=d.offsetX,y=d.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(v=0,y=0),e.globals.isSlopeChart&&(0!==a&&(v=-2*d.offsetX+5),0!==a&&a!==e.config.series[s].data.length-1&&(v=0)),b.drawnextLabel){if((m=i.drawText({width:100,height:parseInt(d.style.fontSize,10),x:n+v,y:r+y,foreColor:x,textAnchor:l||d.textAnchor,text:o,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"})).attr({class:g||"apexcharts-datalabel",cx:n,cy:r}),d.dropShadow.enabled){var w=d.dropShadow;new _i(this.ctx).dropShadow(m,w)}c.add(m),void 0===e.globals.lastDrawnDataLabelsIndexes[s]&&(e.globals.lastDrawnDataLabelsIndexes[s]=[]),e.globals.lastDrawnDataLabelsIndexes[s].push(a)}return m}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,n=i.config.dataLabels.background,r=n.padding,s=n.padding/2,a=e.width,o=e.height,l=new Mi(this.ctx).drawRect(e.x-r,e.y-s/2,a+2*r,o+s,n.borderRadius,"transparent"!==i.config.chart.background&&i.config.chart.background?i.config.chart.background:"#fff",n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new _i(this.ctx).dropShadow(l,n.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var n=e[i],r=n.getBBox(),s=null;if(r.width&&r.height&&(s=this.addBackgroundToDataLabel(n,r)),s){n.parentNode.insertBefore(s.node,n);var a=n.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?s.attr({fill:a}):s.animate().attr({fill:a}),n.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<e.length;n++)i&&i.insertBefore(e[n],i.nextSibling)}}]),t}(),$i=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return o(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(k.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function n(i){for(var n=0;n<i.length;n++)i[n].index===e&&t.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w,r=k.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):r=this.emptyCollapsedSeries(r),n.config.series=r,t&&(e&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"highlightSeries",value:function(t){var e=this.w,i=this.getSeriesByName(t),n=parseInt(null==i?void 0:i.getAttribute("data:realIndex"),10),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),s=null,a=null,o=null;if(e.globals.axisCharts||"radialBar"===e.config.chart.type)if(e.globals.axisCharts){s=e.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),a=e.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"));var l=e.globals.seriesYAxisReverseMap[n];o=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(l,"']"))}else s=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']"));else s=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var h=0;h<r.length;h++)r[h].classList.add(this.legendInactiveClass);if(s)e.globals.axisCharts||s.parentNode.classList.remove(this.legendInactiveClass),s.classList.remove(this.legendInactiveClass),null!==a&&a.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass);else for(var c=0;c<r.length;c++)r[c].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[r])}else if("mouseout"===t.type)for(var s=0;s<n.length;s++)n[s].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,n=this.w,r=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),s=function(t){for(var e=0;e<r.length;e++)r[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var a=parseInt(e.getAttribute("rel"),10)-1;s("add");var o=n.config.plotOptions.heatmap.colorScale.ranges;!function(t,e){for(var n=0;n<r.length;n++){var s=Number(r[n].getAttribute("val"));s>=t.from&&(s<t.to||t.to===e&&s===e)&&r[n].classList.remove(i.legendInactiveClass)}}(o[a],o.reduce((function(t,e){return Math.max(t,e.to)}),0))}else"mouseout"===t.type&&s("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.w,n=0;if(i.config.series.length>1)for(var r=i.config.series.map((function(t,n){return t.data&&t.data.length>0&&-1===i.globals.collapsedSeriesIndices.indexOf(n)&&(!i.globals.comboCharts||0===e.length||e.length&&e.indexOf(i.config.series[n].type)>-1)?n:-1})),s="asc"===t?0:r.length-1;"asc"===t?s<r.length:s>=0;"asc"===t?s++:s--)if(-1!==r[s]){n=r[s];break}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(t,e){return"bar"===t.type||"column"===t.type?e:-1})).filter((function(t){return-1!==t})):this.w.config.series.map((function(t,e){return e}))}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,i,n){for(var r=e[i].childNodes,s={type:n,paths:[],realIndex:e[i].getAttribute("data:realIndex")},a=0;a<r.length;a++)if(r[a].hasAttribute("pathTo")){var o=r[a].getAttribute("pathTo");s.paths.push({d:o})}t.globals.previousPaths.push(s)}t.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(i){for(var n,r=(n=i,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series"))),s=0;s<r.length;s++)e(r,s,i)}));var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(e){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),n=[],r=function(t){var e=function(e){return i[t].getAttribute(e)},r={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};n.push({rect:r,color:i[t].getAttribute("color")})},s=0;s<i.length;s++)r(s);t.globals.previousPaths.push(n)},r=0;r<i.length;r++)n(r);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new Mi(this.ctx),n=t.globals.svgWidth/2,r=t.globals.svgHeight/2,s="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(n=10,s="start"):"right"===e.align&&(n=t.globals.svgWidth-10,s="end"),"top"===e.verticalAlign?r=50:"bottom"===e.verticalAlign&&(r=t.globals.svgHeight-50),n+=e.offsetX,r=r+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var a=i.drawText({x:n,y:r,text:e.text,textAnchor:s,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var n=0;n<t[e.globals.maxValsInArrayIndex].length;n++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}))}}]),t}(),Ki=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Ti(this.ctx)}return o(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new $i(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new $i(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,n=this.w.globals,r="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,s=0;s<t[e].data.length;s++)if(void 0!==t[e].data[s][1]&&(Array.isArray(t[e].data[s][1])&&4===t[e].data[s][1].length&&!r?this.twoDSeries.push(k.parseNumber(t[e].data[s][1][3])):t[e].data[s].length>=5?this.twoDSeries.push(k.parseNumber(t[e].data[s][4])):this.twoDSeries.push(k.parseNumber(t[e].data[s][1])),n.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var a=new Date(t[e].data[s][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(t[e].data[s][0]);for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o][2]&&(this.threeDSeries.push(t[e].data[o][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,n=this.w.globals,r=new Pi(this.ctx),s=e;n.collapsedSeriesIndices.indexOf(e)>-1&&(s=this.activeSeriesIndex);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a].y&&(Array.isArray(t[e].data[a].y)?this.twoDSeries.push(k.parseNumber(t[e].data[a].y[t[e].data[a].y.length-1])):this.twoDSeries.push(k.parseNumber(t[e].data[a].y))),void 0!==t[e].data[a].goals&&Array.isArray(t[e].data[a].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[a].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var o=0;o<t[s].data.length;o++){var l="string"==typeof t[s].data[o].x,h=Array.isArray(t[s].data[o].x),c=!h&&!!r.isValidDate(t[s].data[o].x);if(l||c)if(l||i.xaxis.convertedCatToNumeric){var d=n.isBarHorizontal&&n.isRangeData;"datetime"!==i.xaxis.type||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[s].data[o].x),isNaN(t[s].data[o].x)||"category"===this.w.config.xaxis.type||"string"==typeof t[s].data[o].x||(n.isXNumeric=!0)):this.twoDSeriesX.push(r.parseDate(t[s].data[o].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(r.parseDate(t[s].data[o].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[s].data[o].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[s].data[o].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[s].data[o].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var u=0;u<t[e].data.length;u++)this.threeDSeries.push(t[e].data[u].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(void 0===n.start?[]:n.start),i.seriesRangeEnd.push(void 0===n.end?[]:n.end),i.seriesRange.push(n.rangeUniques),i.seriesRange.forEach((function(t,e){t&&t.forEach((function(t,e){t.y.forEach((function(e,i){for(var n=0;n<t.y.length;n++)if(i!==n){var r=e.y1,s=e.y2,a=t.y[n].y1;r<=t.y[n].y2&&a<=s&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[n].rangeName)<0&&t.overlaps.push(t.y[n].rangeName))}}))}))})),n}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=n.o,i.seriesCandleH[e]=n.h,i.seriesCandleM[e]=n.m,i.seriesCandleL[e]=n.l,i.seriesCandleC[e]=n.c,n}},{key:"handleRangeDataFormat",value:function(t,e,i){var n=[],r=[],s=e[i].data.filter((function(t,e,i){return e===i.findIndex((function(e){return e.x===t.x}))})).map((function(t,e){return{x:t.x,overlaps:[],y:[]}}));if("array"===t)for(var a=0;a<e[i].data.length;a++)Array.isArray(e[i].data[a])?(n.push(e[i].data[a][1][0]),r.push(e[i].data[a][1][1])):(n.push(e[i].data[a]),r.push(e[i].data[a]));else if("xy"===t)for(var o=function(t){var a=Array.isArray(e[i].data[t].y),o=k.randomId(),l=e[i].data[t].x,h={y1:a?e[i].data[t].y[0]:e[i].data[t].y,y2:a?e[i].data[t].y[1]:e[i].data[t].y,rangeName:o};e[i].data[t].rangeName=o;var c=s.findIndex((function(t){return t.x===l}));s[c].y.push(h),n.push(h.y1),r.push(h.y2)},l=0;l<e[i].data.length;l++)o(l);return{start:n,end:r,rangeUniques:s}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var n=this.w,r="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[i].type,s=[],a=[],o=[],l=[],h=[];if("array"===t)if(r&&6===e[i].data[0].length||!r&&5===e[i].data[0].length)for(var c=0;c<e[i].data.length;c++)s.push(e[i].data[c][1]),a.push(e[i].data[c][2]),r?(o.push(e[i].data[c][3]),l.push(e[i].data[c][4]),h.push(e[i].data[c][5])):(l.push(e[i].data[c][3]),h.push(e[i].data[c][4]));else for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d][1])&&(s.push(e[i].data[d][1][0]),a.push(e[i].data[d][1][1]),r?(o.push(e[i].data[d][1][2]),l.push(e[i].data[d][1][3]),h.push(e[i].data[d][1][4])):(l.push(e[i].data[d][1][2]),h.push(e[i].data[d][1][3])));else if("xy"===t)for(var u=0;u<e[i].data.length;u++)Array.isArray(e[i].data[u].y)&&(s.push(e[i].data[u].y[0]),a.push(e[i].data[u].y[1]),r?(o.push(e[i].data[u].y[2]),l.push(e[i].data[u].y[3]),h.push(e[i].data[u].y[4])):(l.push(e[i].data[u].y[2]),h.push(e[i].data[u].y[3])));return{o:s,h:a,m:o,l,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,n=this.w.config,r=this.w.globals,s=new Pi(i),a=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();r.isRangeBar="rangeBar"===n.chart.type&&r.isBarHorizontal,r.hasXaxisGroups="category"===n.xaxis.type&&n.xaxis.group.groups.length>0,r.hasXaxisGroups&&(r.groups=n.xaxis.group.groups),t.forEach((function(t,e){void 0!==t.name?r.seriesNames.push(t.name):r.seriesNames.push("series-"+parseInt(e+1,10))})),this.coreUtils.setSeriesYAxisMappings();var o=[],l=x(new Set(n.series.map((function(t){return t.group}))));n.series.forEach((function(t,e){var i=l.indexOf(t.group);o[i]||(o[i]=[]),o[i].push(r.seriesNames[e])})),r.seriesGroups=o;for(var h=function(){for(var t=0;t<a.length;t++)if("string"==typeof a[t]){if(!s.isValidDate(a[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(s.parseDate(a[t]))}else e.twoDSeriesX.push(a[t])},c=0;c<t.length;c++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[c].data)return;if("rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type&&"rangeBar"!==t[c].type&&"rangeArea"!==t[c].type||(r.isRangeData=!0,"rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type||this.handleRangeData(t,c)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,c):this.isFormatXY()&&this.handleFormatXY(t,c),"candlestick"!==n.chart.type&&"candlestick"!==t[c].type&&"boxPlot"!==n.chart.type&&"boxPlot"!==t[c].type||this.handleCandleStickBoxData(t,c),r.series.push(this.twoDSeries),r.labels.push(this.twoDSeriesX),r.seriesX.push(this.twoDSeriesX),r.seriesGoals=this.seriesGoals,c!==this.activeSeriesIndex||this.fallbackToCategory||(r.isXNumeric=!0);else{"datetime"===n.xaxis.type?(r.isXNumeric=!0,h(),r.seriesX.push(this.twoDSeriesX)):"numeric"===n.xaxis.type&&(r.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,r.seriesX.push(this.twoDSeriesX))),r.labels.push(this.twoDSeriesX);var d=t[c].data.map((function(t){return k.parseNumber(t)}));r.series.push(d)}r.seriesZ.push(this.threeDSeries),void 0!==t[c].color?r.seriesColors.push(t[c].color):r.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var n=0;n<e.series.length;n++)void 0===e.seriesNames[n]&&e.seriesNames.push("series-"+(n+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map((function(t){t.forEach((function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)}))})),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),e.xaxis.convertedCatToNumeric&&(new qi(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,n=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var r=i.series.map((function(t,e){return t.data.filter((function(t,e,i){return i.findIndex((function(e){return e.x===t.x}))===e}))})),s=r.reduce((function(t,e,i,n){return n[t].length>e.length?t:i}),0),a=0;a<r[s].length;a++)n.push(a+1);else for(var o=0;o<e.series[e.maxValsInArrayIndex].length;o++)n.push(o+1);e.seriesX=[];for(var l=0;l<t.length;l++)e.seriesX.push(n);this.w.globals.isBarHorizontal||(e.isXNumeric=!0)}if(0===n.length){n=e.axisCharts?[]:e.series.map((function(t,e){return e+1}));for(var h=0;h<t.length;h++)e.seriesX.push(n)}e.labels=n,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=n.map((function(t){return i.xaxis.labels.formatter(t)}))),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,n=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(t),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(t),i.chart.stacked){var r=new $i(this.ctx);n.series=r.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),n.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var s=this.coreUtils.getCategoryLabels(n.labels),a=0;a<s.length;a++)if(Array.isArray(s[a])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this.w,e=[];t.globals.seriesYAxisMap.forEach((function(i,n){var r=0;i.forEach((function(e){-1!==t.globals.collapsedSeriesIndices.indexOf(e)&&r++})),r>0&&r==i.length&&e.push(n)})),t.globals.ignoreYAxisIndexes=e.map((function(t){return t}))}}]),t}(),Zi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),n=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",n*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"getSvgString",value:function(t){var e=this;return new Promise((function(i){var n=e.w,r=t||n.config.chart.toolbar.export.scale||n.config.chart.toolbar.export.width/n.globals.svgWidth;r||(r=1);var s=e.w.globals.dom.Paper.svg(),a=e.w.globals.dom.Paper.node.cloneNode(!0);1!==r&&e.scaleSvgNode(a,r),e.convertImagesToBase64(a).then((function(){s=(new XMLSerializer).serializeToString(a),i(s.replace(/&nbsp;/g,"&#160;"))}))}))}},{key:"convertImagesToBase64",value:function(t){var e=this,i=t.getElementsByTagName("image"),n=Array.from(i).map((function(t){var i=t.getAttributeNS("http://www.w3.org/1999/xlink","href");return i&&!i.startsWith("data:")?e.getBase64FromUrl(i).then((function(e){t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)})).catch((function(t){})):Promise.resolve()}));return Promise.all(n)}},{key:"getBase64FromUrl",value:function(t){return new Promise((function(e,i){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),e(t.toDataURL())},n.onerror=i,n.src=t}))}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(n,(function(t){t.setAttribute("width",0)})),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){var t=this;return new Promise((function(e){t.cleanup(),t.getSvgString().then((function(t){var i=new Blob([t],{type:"image/svg+xml;charset=utf-8"});e(URL.createObjectURL(i))}))}))}},{key:"dataURI",value:function(t){var e=this;return new Promise((function(i){var n=e.w,r=t?t.scale||t.width/n.globals.svgWidth:1;e.cleanup();var s=document.createElement("canvas");s.width=n.globals.svgWidth*r,s.height=parseInt(n.globals.dom.elWrap.style.height,10)*r;var a="transparent"!==n.config.chart.background&&n.config.chart.background?n.config.chart.background:"#fff",o=s.getContext("2d");o.fillStyle=a,o.fillRect(0,0,s.width*r,s.height*r),e.getSvgString(r).then((function(t){var e="data:image/svg+xml,"+encodeURIComponent(t),n=new Image;n.crossOrigin="anonymous",n.onload=function(){if(o.drawImage(n,0,0),s.msToBlob){var t=s.msToBlob();i({blob:t})}else{var e=s.toDataURL("image/png");i({imgURI:e})}},n.src=e}))}))}},{key:"exportToSVG",value:function(){var t=this;this.svgUrl().then((function(e){t.triggerDownload(e,t.w.config.chart.toolbar.export.svg.filename,".svg")}))}},{key:"exportToPng",value:function(){var t=this,e=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width,n=e?{scale:e}:i?{width:i}:void 0;this.dataURI(n).then((function(e){var i=e.imgURI,n=e.blob;n?navigator.msSaveOrOpenBlob(n,t.w.globals.chartID+".png"):t.triggerDownload(i,t.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,n=t.fileName,r=t.columnDelimiter,s=void 0===r?",":r,a=t.lineDelimiter,o=void 0===a?"\n":a,l=this.w;i||(i=l.config.series);var h=[],c=[],d="",u=l.globals.series.map((function(t,e){return-1===l.globals.collapsedSeriesIndices.indexOf(e)?t:[]})),p=function(t){return"function"==typeof l.config.chart.toolbar.export.csv.categoryFormatter?l.config.chart.toolbar.export.csv.categoryFormatter(t):"datetime"===l.config.xaxis.type&&String(t).length>=10?new Date(t).toDateString():k.isNumber(t)?t:t.split(s).join("")},f=function(t){return"function"==typeof l.config.chart.toolbar.export.csv.valueFormatter?l.config.chart.toolbar.export.csv.valueFormatter(t):t},g=Math.max.apply(Math,x(i.map((function(t){return t.data?t.data.length:0})))),m=new Ki(this.ctx),b=new Ii(this.ctx),v=function(t){var i="";if(l.globals.axisCharts){if("category"===l.config.xaxis.type||l.config.xaxis.convertedCatToNumeric)if(l.globals.isBarHorizontal){var n=l.globals.yLabelFormatters[0],r=new $i(e.ctx).getActiveConfigSeriesIndex();i=n(l.globals.labels[t],{seriesIndex:r,dataPointIndex:t,w:l})}else i=b.getLabel(l.globals.labels,l.globals.timescaleLabels,0,t).text;"datetime"===l.config.xaxis.type&&(l.config.xaxis.categories.length?i=l.config.xaxis.categories[t]:l.config.labels.length&&(i=l.config.labels[t]))}else i=l.config.labels[t];return null===i?"nullvalue":(Array.isArray(i)&&(i=i.join(" ")),k.isNumber(i)?i:i.split(s).join(""))};h.push(l.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===l.config.chart.type?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):"candlestick"===l.config.chart.type?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):"rangeBar"===l.config.chart.type?(h.push("minimum"),h.push("maximum")):i.map((function(t,e){var i=(t.name?t.name:"series-".concat(e))+"";l.globals.axisCharts&&h.push(i.split(s).join("")?i.split(s).join(""):"series-".concat(e))})),l.globals.axisCharts||(h.push(l.config.chart.toolbar.export.csv.headerValue),c.push(h.join(s))),l.globals.allSeriesHasEqualX||!l.globals.axisCharts||l.config.xaxis.categories.length||l.config.labels.length?i.map((function(t,e){l.globals.axisCharts?function(t,e){if(h.length&&0===e&&c.push(h.join(s)),t.data){t.data=t.data.length&&t.data||x(Array(g)).map((function(){return""}));for(var n=0;n<t.data.length;n++){h=[];var r=v(n);if("nullvalue"!==r){if(r||(m.isFormatXY()?r=i[e].data[n].x:m.isFormat2DArray()&&(r=i[e].data[n]?i[e].data[n][0]:"")),0===e){h.push(p(r));for(var a=0;a<l.globals.series.length;a++){var o,d=m.isFormatXY()?null===(o=i[a].data[n])||void 0===o?void 0:o.y:u[a][n];h.push(f(d))}}("candlestick"===l.config.chart.type||t.type&&"candlestick"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][n]),h.push(l.globals.seriesCandleH[e][n]),h.push(l.globals.seriesCandleL[e][n]),h.push(l.globals.seriesCandleC[e][n])),("boxPlot"===l.config.chart.type||t.type&&"boxPlot"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][n]),h.push(l.globals.seriesCandleH[e][n]),h.push(l.globals.seriesCandleM[e][n]),h.push(l.globals.seriesCandleL[e][n]),h.push(l.globals.seriesCandleC[e][n])),"rangeBar"===l.config.chart.type&&(h.pop(),h.push(l.globals.seriesRangeStart[e][n]),h.push(l.globals.seriesRangeEnd[e][n])),h.length&&c.push(h.join(s))}}}}(t,e):((h=[]).push(p(l.globals.labels[e])),h.push(f(u[e])),c.push(h.join(s)))})):function(){var t=new Set,e={};i.forEach((function(n,r){null==n||n.data.forEach((function(n){var s,a;if(m.isFormatXY())s=n.x,a=n.y;else{if(!m.isFormat2DArray())return;s=n[0],a=n[1]}e[s]||(e[s]=Array(i.length).fill("")),e[s][r]=f(a),t.add(s)}))})),h.length&&c.push(h.join(s)),Array.from(t).sort().forEach((function(t){c.push([p(t),e[t].join(s)])}))}(),d+=c.join(o),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+d),n||l.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var n=document.createElement("a");n.href=t,n.download=(e||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),t}(),Ji=function(){function t(e,i){s(this,t),this.ctx=e,this.elgrid=i,this.w=e.w;var n=this.w;this.axesUtils=new Ii(e),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===n.config.xaxis.position?this.offY=0:this.offY=n.globals.gridHeight,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return o(t,[{key:"drawXaxis",value:function(){var t=this.w,e=new Mi(this.ctx),i=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),n=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});i.add(n);for(var r=[],s=0;s<this.xaxisLabels.length;s++)r.push(this.xaxisLabels[s]);if(this.drawXAxisLabelAndGroup(!0,e,n,r,t.globals.isXNumeric,(function(t,e){return e})),t.globals.hasXaxisGroups){var a=t.globals.groups;r=[];for(var o=0;o<a.length;o++)r.push(a[o].title);var l={};t.config.xaxis.group.style&&(l.xaxisFontSize=t.config.xaxis.group.style.fontSize,l.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,l.xaxisForeColors=t.config.xaxis.group.style.colors,l.fontWeight=t.config.xaxis.group.style.fontWeight,l.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,n,r,!1,(function(t,e){return a[t].cols*e}),l)}if(void 0!==t.config.xaxis.title.text){var h=e.group({class:"apexcharts-xaxis-title"}),c=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===t.config.xaxis.position?t.globals.xAxisLabelsHeight:-t.globals.xAxisLabelsHeight-10)+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});h.add(c),i.add(h)}if(t.config.xaxis.axisBorder.show){var d=t.globals.barPadForNumericAxis,u=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(u):i.add(u)}return i}},{key:"drawXAxisLabelAndGroup",value:function(t,e,i,n,r,s){var a,o=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},h=[],c=[],d=this.w,u=l.xaxisFontSize||this.xaxisFontSize,p=l.xaxisFontFamily||this.xaxisFontFamily,f=l.xaxisForeColors||this.xaxisForeColors,g=l.fontWeight||d.config.xaxis.labels.style.fontWeight,m=l.cssClass||d.config.xaxis.labels.style.cssClass,b=d.globals.padHorizontal,x=n.length,v="category"===d.config.xaxis.type?d.globals.dataPoints:x;if(0===v&&x>v&&(v=x),r){var y=Math.max(Number(d.config.xaxis.tickAmount)||1,v>1?v-1:v);a=d.globals.gridWidth/Math.min(y,x-1),b=b+s(0,a)/2+d.config.xaxis.labels.offsetX}else a=d.globals.gridWidth/v,b=b+s(0,a)+d.config.xaxis.labels.offsetX;for(var w=function(r){var l=b-s(r,a)/2+d.config.xaxis.labels.offsetX;0===r&&1===x&&a/2===b&&1===v&&(l=d.globals.gridWidth/2);var y=o.axesUtils.getLabel(n,d.globals.timescaleLabels,l,r,h,u,t),w=28;if(d.globals.rotateXLabels&&t&&(w=22),d.config.xaxis.title.text&&"top"===d.config.xaxis.position&&(w+=parseFloat(d.config.xaxis.title.style.fontSize)+2),t||(w=w+parseFloat(u)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),y=void 0!==d.config.xaxis.tickAmount&&"dataPoints"!==d.config.xaxis.tickAmount&&"datetime"!==d.config.xaxis.type?o.axesUtils.checkLabelBasedOnTickamount(r,y,x):o.axesUtils.checkForOverflowingLabels(r,y,x,h,c),d.config.xaxis.labels.show){var k=e.drawText({x:y.x,y:o.offY+d.config.xaxis.labels.offsetY+w-("top"===d.config.xaxis.position?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:y.text,textAnchor:"middle",fontWeight:y.isBold?600:g,fontSize:u,fontFamily:p,foreColor:Array.isArray(f)?t&&d.config.xaxis.convertedCatToNumeric?f[d.globals.minX+r-1]:f[r]:f,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(i.add(k),k.on("click",(function(t){if("function"==typeof d.config.chart.events.xAxisLabelClick){var e=Object.assign({},d,{labelIndex:r});d.config.chart.events.xAxisLabelClick(t,o.ctx,e)}})),t){var A=document.createElementNS(d.globals.SVGNS,"title");A.textContent=Array.isArray(y.text)?y.text.join(" "):y.text,k.node.appendChild(A),""!==y.text&&(h.push(y.text),c.push(y))}}r<x-1&&(b+=s(r+1,a))},k=0;k<=x-1;k++)w(k)}},{key:"drawXaxisInversed",value:function(t){var e,i,n=this,r=this.w,s=new Mi(this.ctx),a=r.config.yaxis[0].opposite?r.globals.translateYAxisX[t]:0,o=s.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=s.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});o.add(l);var h=[];if(r.config.yaxis[t].show)for(var c=0;c<this.xaxisLabels.length;c++)h.push(this.xaxisLabels[c]);e=r.globals.gridHeight/h.length,i=-e/2.2;var d=r.globals.yLabelFormatters[0],u=r.config.yaxis[0].labels;if(u.show)for(var p=function(a){var o=void 0===h[a]?"":h[a];o=d(o,{seriesIndex:t,dataPointIndex:a,w:r});var c=n.axesUtils.getYAxisForeColor(u.style.colors,t),p=0;Array.isArray(o)&&(p=o.length/2*parseInt(u.style.fontSize,10));var f=u.offsetX-15,g="end";n.yaxis.opposite&&(g="start"),"left"===r.config.yaxis[0].labels.align?(f=u.offsetX,g="start"):"center"===r.config.yaxis[0].labels.align?(f=u.offsetX,g="middle"):"right"===r.config.yaxis[0].labels.align&&(g="end");var m=s.drawText({x:f,y:i+e+u.offsetY-p,text:o,textAnchor:g,foreColor:Array.isArray(c)?c[a]:c,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+u.style.cssClass,maxWidth:u.maxWidth});l.add(m),m.on("click",(function(t){if("function"==typeof r.config.chart.events.xAxisLabelClick){var e=Object.assign({},r,{labelIndex:a});r.config.chart.events.xAxisLabelClick(t,n.ctx,e)}}));var b=document.createElementNS(r.globals.SVGNS,"title");if(b.textContent=Array.isArray(o)?o.join(" "):o,m.node.appendChild(b),0!==r.config.yaxis[t].labels.rotate){var x=s.rotateAroundCenter(m.node);m.node.setAttribute("transform","rotate(".concat(r.config.yaxis[t].labels.rotate," 0 ").concat(x.y,")"))}i+=e},f=0;f<=h.length-1;f++)p(f);if(void 0!==r.config.yaxis[0].title.text){var g=s.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),m=s.drawText({x:r.config.yaxis[0].title.offsetX,y:r.globals.gridHeight/2+r.config.yaxis[0].title.offsetY,text:r.config.yaxis[0].title.text,textAnchor:"middle",foreColor:r.config.yaxis[0].title.style.color,fontSize:r.config.yaxis[0].title.style.fontSize,fontWeight:r.config.yaxis[0].title.style.fontWeight,fontFamily:r.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[0].title.style.cssClass});g.add(m),o.add(g)}var b=0;this.isCategoryBarHorizontal&&r.config.yaxis[0].opposite&&(b=r.globals.gridWidth);var x=r.config.xaxis.axisBorder;if(x.show){var v=s.drawLine(r.globals.padHorizontal+x.offsetX+b,1+x.offsetY,r.globals.padHorizontal+x.offsetX+b,r.globals.gridHeight+x.offsetY,x.color,0);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(v):o.add(v)}return r.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(b,h.length,r.config.yaxis[0].axisBorder,r.config.yaxis[0].axisTicks,0,e,o),o}},{key:"drawXaxisTicks",value:function(t,e,i){var n=this.w,r=t;if(!(t<0||t-2>n.globals.gridWidth)){var s=this.offY+n.config.xaxis.axisTicks.offsetY;if(e=e+s+n.config.xaxis.axisTicks.height,"top"===n.config.xaxis.position&&(e=s-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var a=new Mi(this.ctx).drawLine(t+n.config.xaxis.axisTicks.offsetX,s+n.config.xaxis.offsetY,r+n.config.xaxis.axisTicks.offsetX,e+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,n=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var r=0;r<i;r++)n=this.xaxisLabels[r].position,e.push(n);else for(var s=i,a=0;a<s;a++){var o=s;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(o-=1),n+=t.globals.gridWidth/o,e.push(n)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new Mi(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var a=0;a<n.length;a++){var o=e.rotateAroundCenter(n[a]);o.y=o.y-1,o.x=o.x+1,n[a].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(o.x," ").concat(o.y,")")),n[a].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=n[a].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(i){e.placeTextWithEllipsis(i,i.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))}))}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),r=0;r<n.length;r++){var s=n[r].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(s,(function(t){e.placeTextWithEllipsis(t,t.textContent,i)}))}}();if(r.length>0){var h=r[r.length-1].getBBox(),c=r[0].getBBox();h.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var d=0;d<s.length;d++)e.placeTextWithEllipsis(s[d],s[d].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),t}(),Qi=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Ii(e),this.isRangeBar=i.globals.seriesRange.length&&i.globals.isBarHorizontal,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return o(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new Mi(this.ctx);t||(t=i.group({class:"apexcharts-grid"}));var n=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),r=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(r),t.add(n),t}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var t=this.renderGrid();return this.drawGridArea(t.el),t}return null}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new Mi(this.ctx),n=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,x(t.config.stroke.width)):t.config.stroke.width,r=function(t){var i=document.createElementNS(e.SVGNS,"clipPath");return i.setAttribute("id",t),i};e.dom.elGridRectMask=r("gridRectMask".concat(e.cuid)),e.dom.elGridRectBarMask=r("gridRectBarMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=r("gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=r("forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=r("nonForecastMask".concat(e.cuid));var s=0,a=0;(["bar","rangeBar","candlestick","boxPlot"].includes(t.config.chart.type)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(s=Math.max(t.config.grid.padding.left,e.barPadForNumericAxis),a=Math.max(t.config.grid.padding.right,e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-n/2-2,-n/2-2,e.gridWidth+n+4,e.gridHeight+n+4,0,"#fff"),e.dom.elGridRectBar=i.drawRect(-n/2-s-2,-n/2-2,e.gridWidth+n+a+s+4,e.gridHeight+n+4,0,"#fff");var o=t.globals.markers.largestSize;e.dom.elGridRectMarker=i.drawRect(-o,-o,e.gridWidth+2*o,e.gridHeight+2*o,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectBarMask.appendChild(e.dom.elGridRectBar.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var l=e.dom.baseEl.querySelector("defs");l.appendChild(e.dom.elGridRectMask),l.appendChild(e.dom.elGridRectBarMask),l.appendChild(e.dom.elGridRectMarkerMask),l.appendChild(e.dom.elForecastMask),l.appendChild(e.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,n=t.y1,r=t.x2,s=t.y2,a=t.xCount,o=t.parent,l=this.w;if(!(0===e&&l.globals.skipFirstTimelinelabel||e===a-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:i,y1:n,x2:r,y2:s,xCount:a,parent:o});var h=0;if(l.globals.hasXaxisGroups&&"between"===l.config.xaxis.tickPlacement){var c=l.globals.groups;if(c){for(var d=0,u=0;d<e&&u<c.length;u++)d+=c[u].cols;d===e&&(h=.6*l.globals.xAxisLabelsHeight)}}new Ji(this.ctx).drawXaxisTicks(i,h,l.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(t){var e=t.i,i=t.x1,n=t.y1,r=t.x2,s=t.y2,a=t.xCount,o=t.parent,l=this.w,h=o.node.classList.contains("apexcharts-gridlines-horizontal"),c=l.globals.barPadForNumericAxis,d=0===n&&0===s||0===i&&0===r||n===l.globals.gridHeight&&s===l.globals.gridHeight||l.globals.isBarHorizontal&&(0===e||e===a-1),u=new Mi(this).drawLine(i-(h?c:0),n,r+(h?c:0),s,l.config.grid.borderColor,l.config.grid.strokeDashArray);u.node.classList.add("apexcharts-gridline"),d&&l.config.grid.show?this.elGridBorders.add(u):o.add(u)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,n=t.y1,r=t.x2,s=t.y2,a=t.type,o=this.w,l=new Mi(this.ctx),h=o.globals.barPadForNumericAxis,c=o.config.grid[a].colors[e],d=l.drawRect(i-("row"===a?h:0),n,r+("row"===a?2*h:0),s,0,c,o.config.grid[a].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(a))}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,n=t.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var s,a=r.globals.padHorizontal,o=r.globals.gridHeight;r.globals.timescaleLabels.length?function(t){for(var n=t.xC,r=t.x1,s=t.y1,a=t.x2,o=t.y2,l=0;l<n;l++)r=e.xaxisLabels[l].position,a=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:r,y1:s,x2:a,y2:o,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:a,y1:0,x2:s,y2:o}):(r.globals.isXNumeric&&(i=r.globals.xAxisScale.result.length),function(t){for(var n=t.xC,s=t.x1,a=t.y1,o=t.x2,l=t.y2,h=0;h<n+(r.globals.isXNumeric?0:1);h++)0===h&&1===n&&1===r.globals.dataPoints&&(o=s=r.globals.gridWidth/2),e._drawGridLines({i:h,x1:s,y1:a,x2:o,y2:l,xCount:i,parent:e.elgridLinesV}),o=s+=r.globals.gridWidth/(r.globals.isXNumeric?n-1:n)}({xC:i,x1:a,y1:0,x2:s,y2:o}))}if(r.config.grid.yaxis.lines.show){var l=0,h=0,c=r.globals.gridWidth,d=n+1;this.isRangeBar&&(d=r.globals.labels.length);for(var u=0;u<d+(this.isRangeBar?1:0);u++)this._drawGridLine({i:u,xCount:d+(this.isRangeBar?1:0),x1:0,y1:l,x2:c,y2:h,parent:this.elgridLinesH}),h=l+=r.globals.gridHeight/(this.isRangeBar?d:n)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,r=i.globals.padHorizontal,s=i.globals.gridHeight,a=0;a<e+1;a++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:e+1,x1:r,y1:0,x2:n,y2:s,parent:this.elgridLinesV}),new Ji(this.ctx).drawXaxisTicks(r,0,i.globals.dom.elGraphical),n=r+=i.globals.gridWidth/e;if(i.config.grid.yaxis.lines.show)for(var o=0,l=0,h=i.globals.gridWidth,c=0;c<i.globals.dataPoints+1;c++)this._drawGridLine({i:c,xCount:i.globals.dataPoints+1,x1:0,y1:o,x2:h,y2:l,parent:this.elgridLinesH}),l=o+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=t.globals,i=new Mi(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<e.seriesYAxisMap.length&&e.ignoreYAxisIndexes.includes(n);)n++;n===e.seriesYAxisMap.length&&(n=0);var r,s,a,o,l=e.yAxisScale[n].result.length-1;!e.isBarHorizontal||this.isRangeBar?(r=this.xaxisLabels.length,this.isRangeBar&&(l=e.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(r=t.config.xaxis.tickAmount),(null===(s=e.yAxisScale)||void 0===s||null===(a=s[n])||void 0===a||null===(o=a.result)||void 0===o?void 0:o.length)>0&&"datetime"!==t.config.xaxis.type&&(r=e.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:r,tickAmount:l})):(r=l,l=e.xTickAmount,this._drawInvertedXYLines({xCount:r,tickAmount:l}));return this.drawGridBands(r,l),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.gridWidth/r}}},{key:"drawGridBands",value:function(t,e){var i,n,r=this,s=this.w;if((null===(i=s.config.grid.row.colors)||void 0===i?void 0:i.length)>0&&function(t,i,n,a,o,l){for(var h=0,c=0;h<i;h++,c++)c>=s.config.grid.row.colors.length&&(c=0),r._drawGridBandRect({c,x1:0,y1:a,x2:o,y2:l,type:"row"}),a+=s.globals.gridHeight/e}(0,e,0,0,s.globals.gridWidth,s.globals.gridHeight/e),(null===(n=s.config.grid.column.colors)||void 0===n?void 0:n.length)>0){var a=s.globals.isBarHorizontal||"on"!==s.config.xaxis.tickPlacement||"category"!==s.config.xaxis.type&&!s.config.xaxis.convertedCatToNumeric?t:t-1;s.globals.isXNumeric&&(a=s.globals.xAxisScale.result.length-1);for(var o=s.globals.padHorizontal,l=s.globals.padHorizontal+s.globals.gridWidth/a,h=s.globals.gridHeight,c=0,d=0;c<t;c++,d++){var u;d>=s.config.grid.column.colors.length&&(d=0),"datetime"===s.config.xaxis.type&&(o=this.xaxisLabels[c].position,l=((null===(u=this.xaxisLabels[c+1])||void 0===u?void 0:u.position)||s.globals.gridWidth)-this.xaxisLabels[c].position),this._drawGridBandRect({c:d,x1:o,y1:0,x2:l,y2:h,type:"column"}),o+=s.globals.gridWidth/a}}}}]),t}(),tn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.coreUtils=new Ti(this.ctx)}return o(t,[{key:"niceScale",value:function(t,e){var i,n,r,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=1e-11,l=this.w,h=l.globals;h.isBarHorizontal?(i=l.config.xaxis,n=Math.max((h.svgWidth-100)/25,2)):(i=l.config.yaxis[a],n=Math.max((h.svgHeight-100)/15,2)),k.isNumber(n)||(n=10),r=void 0!==i.min&&null!==i.min,s=void 0!==i.max&&null!==i.min;var c=void 0!==i.stepSize&&null!==i.stepSize,d=void 0!==i.tickAmount&&null!==i.tickAmount,u=d?i.tickAmount:h.niceScaleDefaultTicks[Math.min(Math.round(n/2),h.niceScaleDefaultTicks.length-1)];if(h.isMultipleYAxis&&!d&&h.multiAxisTickAmount>0&&(u=h.multiAxisTickAmount,d=!0),u="dataPoints"===u?h.dataPoints-1:Math.abs(Math.round(u)),(t===Number.MIN_VALUE&&0===e||!k.isNumber(t)&&!k.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)&&(t=k.isNumber(i.min)?i.min:0,e=k.isNumber(i.max)?i.max:t+u,h.allSeriesCollapsed=!1),t>e){var p=e;e=t,t=p}else t===e&&(t=0===t?0:t-1,e=0===e?2:e+1);var f=[];u<1&&(u=1);var g=u,m=Math.abs(e-t);!r&&t>0&&t/m<.15&&(t=0,r=!0),!s&&e<0&&-e/m<.15&&(e=0,s=!0);var b=(m=Math.abs(e-t))/g,x=b,v=Math.floor(Math.log10(x)),y=Math.pow(10,v),w=Math.ceil(x/y);if(b=x=(w=h.niceScaleAllowedMagMsd[0===h.yValueDecimal?0:1][w])*y,h.isBarHorizontal&&i.stepSize&&"datetime"!==i.type?(b=i.stepSize,c=!0):c&&(b=i.stepSize),c&&i.forceNiceScale){var A=Math.floor(Math.log10(b));b*=Math.pow(10,v-A)}if(r&&s){var S=m/g;if(d)if(c)if(0!=k.mod(m,b)){var C=k.getGCD(b,S);b=S/C<10?C:S}else 0==k.mod(b,S)?b=S:(S=b,d=!1);else b=S;else if(c)0==k.mod(m,b)?S=b:b=S;else if(0==k.mod(m,b))S=b;else{S=m/(g=Math.ceil(m/b));var _=k.getGCD(m,b);m/_<n&&(S=_),b=S}g=Math.round(m/b)}else{if(r||s){if(s)if(d)t=e-b*g;else{var M=t;t=b*Math.floor(t/b),Math.abs(e-t)/k.getGCD(m,b)>n&&(t=e-b*u,t+=b*Math.floor((M-t)/b))}else if(r)if(d)e=t+b*g;else{var T=e;e=b*Math.ceil(e/b),Math.abs(e-t)/k.getGCD(m,b)>n&&(e=t+b*u,e+=b*Math.ceil((T-e)/b))}}else if(h.isMultipleYAxis&&d){var E=b*Math.floor(t/b),N=E+b*g;N<e&&(b*=2),N=e,e=(t=E)+b*g,m=Math.abs(e-t),t>0&&t<Math.abs(N-e)&&(t=0,e=b*g),e<0&&-e<Math.abs(E-t)&&(e=0,t=-b*g)}else t=b*Math.floor(t/b),e=b*Math.ceil(e/b);m=Math.abs(e-t),b=k.getGCD(m,b),g=Math.round(m/b)}if(d||r||s||(g=Math.ceil((m-o)/(b+o)))>16&&k.getPrimeFactors(g).length<2&&g++,!d&&i.forceNiceScale&&0===h.yValueDecimal&&g>m&&(g=m,b=Math.round(m/g)),g>n&&(!d&&!c||i.forceNiceScale)){var P=k.getPrimeFactors(g),L=P.length-1,I=g;t:for(var R=0;R<L;R++)for(var O=0;O<=L-R;O++){for(var D=Math.min(O+R,L),z=I,F=1,B=O;B<=D;B++)F*=P[B];if((z/=F)<n){I=z;break t}}b=I===g?m:m/I,g=Math.round(m/b)}h.isMultipleYAxis&&0==h.multiAxisTickAmount&&h.ignoreYAxisIndexes.indexOf(a)<0&&(h.multiAxisTickAmount=g);var H=t-b,q=b*o;do{H+=b,f.push(k.stripNumber(H,7))}while(e-H>q);return{result:f,niceMin:f[0],niceMax:f[f.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=Math.abs(e-t),a=[];if(t===e)return{result:a=[t],niceMin:a[0],niceMax:a[a.length-1]};"dataPoints"===(i=this._adjustTicksForSmallRange(i,n,s))&&(i=this.w.globals.dataPoints-1),r||(r=s/i),r=Math.round(10*(r+Number.EPSILON))/10,i===Number.MAX_VALUE&&(i=5,r=1);for(var o=t;i>=0;)a.push(o),o=k.preciseAddition(o,r),i-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var n=[],r=Math.ceil(Math.log(e)/Math.log(i)+1),s=Math.floor(Math.log(t)/Math.log(i));s<r;s++)n.push(Math.pow(i,s));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var n=[],r=Math.log(e)/Math.log(i),s=Math.log(t)/Math.log(i),a=r-s,o=Math.round(a),l=a/o,h=0,c=s;h<o;h++,c+=l)n.push(Math.pow(i,c));return n.push(Math.pow(i,r)),{result:n,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var n=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var r=Number(this.w.config.yaxis[e].labels.formatter(1));k.isNumber(r)&&0===this.w.globals.yValueDecimal&&(n=Math.ceil(i))}return n<t?n:t}},{key:"setYScaleForIndex",value:function(t,e,i){var n=this.w.globals,r=this.w.config,s=n.isBarHorizontal?r.xaxis:r.yaxis[t];void 0===n.yAxisScale[t]&&(n.yAxisScale[t]=[]);var a=Math.abs(i-e);s.logarithmic&&a<=5&&(n.invalidLogScale=!0),s.logarithmic&&a>5?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=s.forceNiceScale?this.logarithmicScaleNice(e,i,s.logBase):this.logarithmicScale(e,i,s.logBase)):i!==-Number.MAX_VALUE&&k.isNumber(i)&&e!==Number.MAX_VALUE&&k.isNumber(e)?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=this.niceScale(e,i,t)):n.yAxisScale[t]=this.niceScale(Number.MIN_VALUE,0,t)}},{key:"setXScale",value:function(t,e){var i=this.w,n=i.globals,r=Math.abs(e-t);if(e!==-Number.MAX_VALUE&&k.isNumber(e)){var s=n.xTickAmount;r<10&&r>1&&(s=r),n.xAxisScale=this.linearScale(t,e,s,0,i.config.xaxis.stepSize)}else n.xAxisScale=this.linearScale(0,10,10);return n.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var t=this,e=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var n=i.seriesYAxisMap,r=i.minYArr,s=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],n.forEach((function(n,a){var o=[];n.forEach((function(t){var i,n=null===(i=e.series[t])||void 0===i?void 0:i.group;o.indexOf(n)<0&&o.push(n)})),n.length>0?function(){var l,h,c=Number.MAX_VALUE,d=-Number.MAX_VALUE,u=c,p=d;if(e.chart.stacked)!function(){var t=new Array(i.dataPoints).fill(0),r=[],s=[],f=[];o.forEach((function(){r.push(t.map((function(){return Number.MIN_VALUE}))),s.push(t.map((function(){return Number.MIN_VALUE}))),f.push(t.map((function(){return Number.MIN_VALUE})))}));for(var g=function(t){!l&&e.series[n[t]].type&&(l=e.series[n[t]].type);var c=n[t];h=e.series[c].group?e.series[c].group:"axis-".concat(a),!(i.collapsedSeriesIndices.indexOf(c)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(c)<0)||(i.allSeriesCollapsed=!1,o.forEach((function(t,n){if(e.series[c].group===t)for(var a=0;a<i.series[c].length;a++){var o=i.series[c][a];o>=0?s[n][a]+=o:f[n][a]+=o,r[n][a]+=o,u=Math.min(u,o),p=Math.max(p,o)}}))),"bar"!==l&&"column"!==l||i.barGroups.push(h)},m=0;m<n.length;m++)g(m);l||(l=e.chart.type),"bar"===l||"column"===l?o.forEach((function(t,e){c=Math.min(c,Math.min.apply(null,f[e])),d=Math.max(d,Math.max.apply(null,s[e]))})):(o.forEach((function(t,e){u=Math.min(u,Math.min.apply(null,r[e])),p=Math.max(p,Math.max.apply(null,r[e]))})),c=u,d=p),c===Number.MIN_VALUE&&d===Number.MIN_VALUE&&(d=-Number.MAX_VALUE)}();else for(var f=0;f<n.length;f++){var g=n[f];c=Math.min(c,r[g]),d=Math.max(d,s[g]),!(i.collapsedSeriesIndices.indexOf(g)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(g)<0)||(i.allSeriesCollapsed=!1)}void 0!==e.yaxis[a].min&&(c="function"==typeof e.yaxis[a].min?e.yaxis[a].min(c):e.yaxis[a].min),void 0!==e.yaxis[a].max&&(d="function"==typeof e.yaxis[a].max?e.yaxis[a].max(d):e.yaxis[a].max),i.barGroups=i.barGroups.filter((function(t,e,i){return i.indexOf(t)===e})),t.setYScaleForIndex(a,c,d),n.forEach((function(t){r[t]=i.yAxisScale[a].niceMin,s[t]=i.yAxisScale[a].niceMax}))}():t.setYScaleForIndex(a,0,-Number.MAX_VALUE)}))}}]),t}(),en=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.scales=new tn(e)}return o(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w.config,s=this.w.globals,a=-Number.MAX_VALUE,o=Number.MIN_VALUE;null===n&&(n=t+1);var l=s.series,h=l,c=l;"candlestick"===r.chart.type?(h=s.seriesCandleL,c=s.seriesCandleH):"boxPlot"===r.chart.type?(h=s.seriesCandleO,c=s.seriesCandleC):s.isRangeData&&(h=s.seriesRangeStart,c=s.seriesRangeEnd);var d=!1;if(s.seriesX.length>=n){var u,p=null===(u=s.brushSource)||void 0===u?void 0:u.w.config.chart.brush;(r.chart.zoom.enabled&&r.chart.zoom.autoScaleYaxis||null!=p&&p.enabled&&null!=p&&p.autoScaleYaxis)&&(d=!0)}for(var f=t;f<n;f++){s.dataPoints=Math.max(s.dataPoints,l[f].length);var g=r.series[f].type;s.categoryLabels.length&&(s.dataPoints=s.categoryLabels.filter((function(t){return void 0!==t})).length),s.labels.length&&"datetime"!==r.xaxis.type&&0!==s.series.reduce((function(t,e){return t+e.length}),0)&&(s.dataPoints=Math.max(s.dataPoints,s.labels.length));var m=0,b=l[f].length-1;if(d){if(r.xaxis.min)for(;m<b&&s.seriesX[f][m]<r.xaxis.min;m++);if(r.xaxis.max)for(;b>m&&s.seriesX[f][b]>r.xaxis.max;b--);}for(var x=m;x<=b&&x<s.series[f].length;x++){var v=l[f][x];if(null!==v&&k.isNumber(v)){switch(void 0!==c[f][x]&&(a=Math.max(a,c[f][x]),e=Math.min(e,c[f][x])),void 0!==h[f][x]&&(e=Math.min(e,h[f][x]),i=Math.max(i,h[f][x])),g){case"candlestick":void 0!==s.seriesCandleC[f][x]&&(a=Math.max(a,s.seriesCandleH[f][x]),e=Math.min(e,s.seriesCandleL[f][x]));break;case"boxPlot":void 0!==s.seriesCandleC[f][x]&&(a=Math.max(a,s.seriesCandleC[f][x]),e=Math.min(e,s.seriesCandleO[f][x]))}g&&"candlestick"!==g&&"boxPlot"!==g&&"rangeArea"!==g&&"rangeBar"!==g&&(a=Math.max(a,s.series[f][x]),e=Math.min(e,s.series[f][x])),s.seriesGoals[f]&&s.seriesGoals[f][x]&&Array.isArray(s.seriesGoals[f][x])&&s.seriesGoals[f][x].forEach((function(t){a=Math.max(a,t.value),e=Math.min(e,t.value)})),i=a,v=k.noExponents(v),k.isFloat(v)&&(s.yValueDecimal=Math.max(s.yValueDecimal,v.toString().split(".")[1].length)),o>h[f][x]&&h[f][x]<0&&(o=h[f][x])}else s.hasNullValues=!0}"bar"!==g&&"column"!==g||(o<0&&a<0&&(a=0,i=Math.max(i,0)),o===Number.MIN_VALUE&&(o=0,e=Math.min(e,0)))}return"rangeBar"===r.chart.type&&s.seriesRangeStart.length&&s.isBarHorizontal&&(o=e),"bar"===r.chart.type&&(o<0&&a<0&&(a=0),o===Number.MIN_VALUE&&(o=0)),{minY:o,maxY:a,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i,n=Number.MAX_VALUE;if(t.isMultipleYAxis){n=Number.MAX_VALUE;for(var r=0;r<t.series.length;r++)i=this.getMinYMaxY(r),t.minYArr[r]=i.lowestY,t.maxYArr[r]=i.highestY,n=Math.min(n,i.lowestY)}return i=this.getMinYMaxY(0,n,null,t.series.length),"bar"===e.chart.type?(t.minY=i.minY,t.maxY=i.maxY):(t.minY=i.lowestY,t.maxY=i.highestY),n=i.lowestY,e.chart.stacked&&this._setStackedMinMax(),"line"===e.chart.type||"area"===e.chart.type||"scatter"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal?t.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==t.maxY&&(t.minY=n):t.minY=t.minY!==Number.MIN_VALUE?Math.min(i.minY,t.minY):i.minY,e.yaxis.forEach((function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.isMultipleYAxis?t.maxYArr[i]:t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.isMultipleYAxis?t.minYArr[i]===Number.MIN_VALUE?0:t.minYArr[i]:t.minY)),t.minY=t.minYArr[i])})),t.isBarHorizontal&&["min","max"].forEach((function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])})),t.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),t.minY=n):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.minY,t.maxYArr[0]=t.maxY),t.barGroups=[],t.lineGroups=[],t.areaGroups=[],e.series.forEach((function(i){switch(i.type||e.chart.type){case"bar":case"column":t.barGroups.push(i.group);break;case"line":t.lineGroups.push(i.group);break;case"area":t.areaGroups.push(i.group)}})),t.barGroups=t.barGroups.filter((function(t,e,i){return i.indexOf(t)===e})),t.lineGroups=t.lineGroups.filter((function(t,e,i){return i.indexOf(t)===e})),t.areaGroups=t.areaGroups.filter((function(t,e,i){return i.indexOf(t)===e})),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&k.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var n=10;if(void 0===e.xaxis.tickAmount)n=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(n=t.dataPoints-1),n>t.dataPoints&&0!==t.dataPoints&&(n=t.dataPoints-1);else if("dataPoints"===e.xaxis.tickAmount){if(t.series.length>1&&(n=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric){var r=t.maxX-t.minX;r<30&&(n=r-1)}}else n=e.xaxis.tickAmount;if(t.xTickAmount=n,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var s=[],a=t.minX-1;a<t.maxX;a++)s.push(a+1);t.xAxisScale={result:s,niceMin:s[0],niceMax:s[s.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(0,n,n,0,e.xaxis.stepSize),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,n-1,0,e.xaxis.stepSize),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&k.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new Pi(this.ctx);if("datetime"===e.xaxis.type){var n=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),t.minX=new Date(n).getTime();var r=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()+2):r.setDate(r.getDate()+2),t.maxX=new Date(r).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach((function(e,i){if(e.length){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var n=e.slice();n.sort((function(t,e){return t-e})),n.forEach((function(e,i){if(i>0){var r=e-n[i-1];r>0&&(t.minXDiff=Math.min(r,t.minXDiff))}})),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}}))}},{key:"_setStackedMinMax",value:function(){var t=this,e=this.w.globals;if(e.series.length){var i=e.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map((function(t){return t}))]);var n={},r={};i.forEach((function(i){n[i]=[],r[i]=[],t.w.config.series.map((function(t,n){return i.indexOf(e.seriesNames[n])>-1?n:null})).filter((function(t){return null!==t})).forEach((function(s){for(var a=0;a<e.series[e.maxValsInArrayIndex].length;a++){var o,l,h,c;void 0===n[i][a]&&(n[i][a]=0,r[i][a]=0),(t.w.config.chart.stacked&&!e.comboCharts||t.w.config.chart.stacked&&e.comboCharts&&(!t.w.config.chart.stackOnlyBar||"bar"===(null===(o=t.w.config.series)||void 0===o||null===(l=o[s])||void 0===l?void 0:l.type)||"column"===(null===(h=t.w.config.series)||void 0===h||null===(c=h[s])||void 0===c?void 0:c.type)))&&null!==e.series[s][a]&&k.isNumber(e.series[s][a])&&(e.series[s][a]>0?n[i][a]+=parseFloat(e.series[s][a])+1e-4:r[i][a]+=parseFloat(e.series[s][a]))}}))})),Object.entries(n).forEach((function(t){var i=b(t,1)[0];n[i].forEach((function(t,s){e.maxY=Math.max(e.maxY,n[i][s]),e.minY=Math.min(e.minY,r[i][s])}))}))}}}]),t}(),nn=function(){function t(e,i){s(this,t),this.ctx=e,this.elgrid=i,this.w=e.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX="bottom"===n.config.xaxis.position?n.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new Ii(e)}return o(t,[{key:"drawYaxis",value:function(t){var e=this.w,i=new Mi(this.ctx),n=e.config.yaxis[t].labels.style,r=n.fontSize,s=n.fontFamily,a=n.fontWeight,o=i.group({class:"apexcharts-yaxis",rel:t,transform:"translate(".concat(e.globals.translateYAxisX[t],", 0)")});if(this.axesUtils.isYAxisHidden(t))return o;var l=i.group({class:"apexcharts-yaxis-texts-g"});o.add(l);var h=e.globals.yAxisScale[t].result.length-1,c=e.globals.gridHeight/h,d=e.globals.yLabelFormatters[t],u=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice());if(e.config.yaxis[t].labels.show){var p=e.globals.translateY+e.config.yaxis[t].labels.offsetY;e.globals.isBarHorizontal?p=0:"heatmap"===e.config.chart.type&&(p-=c/2),p+=parseInt(r,10)/3;for(var f=h;f>=0;f--){var g=d(u[f],f,e),m=e.config.yaxis[t].labels.padding;e.config.yaxis[t].opposite&&0!==e.config.yaxis.length&&(m*=-1);var b=this.getTextAnchor(e.config.yaxis[t].labels.align,e.config.yaxis[t].opposite),x=this.axesUtils.getYAxisForeColor(n.colors,t),v=Array.isArray(x)?x[f]:x,y=k.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-label tspan"))).map((function(t){return t.textContent})),w=i.drawText({x:m,y:p,text:y.includes(g)&&!e.config.yaxis[t].labels.showDuplicates?"":g,textAnchor:b,fontSize:r,fontFamily:s,fontWeight:a,maxWidth:e.config.yaxis[t].labels.maxWidth,foreColor:v,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(n.cssClass)});l.add(w),this.addTooltip(w,g),0!==e.config.yaxis[t].labels.rotate&&this.rotateLabel(i,w,firstLabel,e.config.yaxis[t].labels.rotate),p+=c}}return this.addYAxisTitle(i,o,t),this.addAxisBorder(i,o,t,h,c),o}},{key:"getTextAnchor",value:function(t,e){return"left"===t?"start":"center"===t?"middle":"right"===t?"end":e?"start":"end"}},{key:"addTooltip",value:function(t,e){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(e)?e.join(" "):e,t.node.appendChild(i)}},{key:"rotateLabel",value:function(t,e,i,n){var r=t.rotateAroundCenter(i.node),s=t.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(".concat(n," ").concat(r.x," ").concat(s.y,")"))}},{key:"addYAxisTitle",value:function(t,e,i){var n=this.w;if(void 0!==n.config.yaxis[i].title.text){var r=t.group({class:"apexcharts-yaxis-title"}),s=n.config.yaxis[i].opposite?n.globals.translateYAxisX[i]:0,a=t.drawText({x:s,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[i].title.offsetY,text:n.config.yaxis[i].title.text,textAnchor:"end",foreColor:n.config.yaxis[i].title.style.color,fontSize:n.config.yaxis[i].title.style.fontSize,fontWeight:n.config.yaxis[i].title.style.fontWeight,fontFamily:n.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(n.config.yaxis[i].title.style.cssClass)});r.add(a),e.add(r)}}},{key:"addAxisBorder",value:function(t,e,i,n,r){var s=this.w,a=s.config.yaxis[i].axisBorder,o=31+a.offsetX;if(s.config.yaxis[i].opposite&&(o=-31-a.offsetX),a.show){var l=t.drawLine(o,s.globals.translateY+a.offsetY-2,o,s.globals.gridHeight+s.globals.translateY+a.offsetY+2,a.color,0,a.width);e.add(l)}s.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(o,n,a,s.config.yaxis[i].axisTicks,i,r,e)}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new Mi(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);var s=e.globals.yAxisScale[t].result.length-1,a=e.globals.gridWidth/s+.1,o=a+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice()),c=e.globals.timescaleLabels;if(c.length>0&&(this.xaxisLabels=c.slice(),s=(h=c.slice()).length),e.config.xaxis.labels.show)for(var d=c.length?0:s;c.length?d<c.length:d>=0;c.length?d++:d--){var u=l(h[d],d,e),p=e.globals.gridWidth+e.globals.padHorizontal-(o-a+e.config.xaxis.labels.offsetX);if(c.length){var f=this.axesUtils.getLabel(h,c,p,d,this.drawnLabels,this.xaxisFontSize);p=f.x,u=f.text,this.drawnLabels.push(f.text),0===d&&e.globals.skipFirstTimelinelabel&&(u=""),d===h.length-1&&e.globals.skipLastTimelinelabel&&(u="")}var g=i.drawText({x:p,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:u,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(e.config.xaxis.labels.style.cssClass)});r.add(g),g.tspan(u),this.addTooltip(g,u),o+=a}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new Mi(this.ctx),n=e.config.xaxis.axisBorder;if(n.show){var r=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(r-=15);var s=i.drawLine(e.globals.padHorizontal+r+n.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(s):t.add(s)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new Mi(this.ctx);if(void 0!==e.config.xaxis.title.text){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(e.config.xaxis.title.style.cssClass)});n.add(r),t.add(n)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,n=new Mi(this.ctx),r=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g")),s=r?r.getBoundingClientRect():{width:0,height:0},a=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text")),o=a?a.getBoundingClientRect():{width:0,height:0};if(a){var l=this.xPaddingForYAxisTitle(t,s,o,e);a.setAttribute("x",l.xPos-(e?10:0));var h=n.rotateAroundCenter(a);a.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,n){var r=this.w,s=0,a=10;return void 0===r.config.yaxis[t].title.text||t<0?{xPos:s,padd:0}:(n?s=e.width+r.config.yaxis[t].title.offsetX+i.width/2+a/2:(s=-1*e.width+r.config.yaxis[t].title.offsetX+a/2+i.width/2,r.globals.isBarHorizontal&&(a=25,s=-1*e.width-r.config.yaxis[t].title.offsetX-a)),{xPos:s,padd:a})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,n=0,r=0,s=18,a=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach((function(o,l){var h=i.globals.ignoreYAxisIndexes.includes(l)||!o.show||o.floating||0===t[l].width,c=t[l].width+e[l].width;o.opposite?i.globals.isBarHorizontal?(r=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=r-o.labels.offsetX):(r=i.globals.gridWidth+i.globals.translateX+a,h||(a+=c+20),i.globals.translateYAxisX[l]=r-o.labels.offsetX+20):(n=i.globals.translateX-s,h||(s+=c+20),i.globals.translateYAxisX[l]=n+o.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var t=this.w;k.listToArray(t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach((function(e,i){var n=t.config.yaxis[i];if(n&&!n.floating&&void 0!==n.labels.align){var r=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),s=k.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),a=r.getBoundingClientRect();s.forEach((function(t){t.setAttribute("text-anchor",n.labels.align)})),"left"!==n.labels.align||n.opposite?"center"===n.labels.align?r.setAttribute("transform","translate(".concat(a.width/2*(n.opposite?1:-1),", 0)")):"right"===n.labels.align&&n.opposite&&r.setAttribute("transform","translate(".concat(a.width,", 0)")):r.setAttribute("transform","translate(-".concat(a.width,", 0)"))}}))}}]),t}(),rn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.documentEvent=k.bind(this.documentEvent,this)}return o(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var n=i.globals.events[t].indexOf(e);-1!==n&&i.globals.events[t].splice(n,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var n=i.globals.events[t],r=n.length,s=0;s<r;s++)n[s].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,n=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach((function(t){n.addEventListener(t,(function(t){var n=Object.assign({},e,{seriesIndex:e.globals.axisCharts?e.globals.capturedSeriesIndex:0,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,n):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(t,i,n):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,n),i.ctx.events.fireEvent("click",[t,i,n]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(i){e.globals.dom.baseEl.addEventListener(i,t.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var n=e.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&n.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),sn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter((function(e){return e.name===t}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=k.extend(Di,i);this.w.globals.locale=n.options}}]),t}(),an=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawAxis",value:function(t,e){var i,n,r=this,s=this.w.globals,a=this.w.config,o=new Ji(this.ctx,e),l=new nn(this.ctx,e);s.axisCharts&&"radar"!==t&&(s.isBarHorizontal?(n=l.drawYaxisInversed(0),i=o.drawXaxisInversed(0),s.dom.elGraphical.add(i),s.dom.elGraphical.add(n)):(i=o.drawXaxis(),s.dom.elGraphical.add(i),a.yaxis.map((function(t,e){if(-1===s.ignoreYAxisIndexes.indexOf(e)&&(n=l.drawYaxis(e),s.dom.Paper.add(n),"back"===r.w.config.grid.position)){var i=s.dom.Paper.children()[1];i.remove(),s.dom.Paper.add(i)}}))))}}]),t}(),on=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new Mi(this.ctx),i=new _i(this.ctx),n=t.config.xaxis.crosshairs.fill.gradient,r=t.config.xaxis.crosshairs.dropShadow,s=t.config.xaxis.crosshairs.fill.type,a=n.colorFrom,o=n.colorTo,l=n.opacityFrom,h=n.opacityTo,c=n.stops,d=r.enabled,u=r.left,p=r.top,f=r.blur,g=r.color,m=r.opacity,b=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===s&&(b=e.drawGradient("vertical",a,o,l,h,null,c,null));var x=e.drawRect();1===t.config.xaxis.crosshairs.width&&(x=e.drawLine());var v=t.globals.gridHeight;(!k.isNumber(v)||v<0)&&(v=0);var y=t.config.xaxis.crosshairs.width;(!k.isNumber(y)||y<0)&&(y=0),x.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:v,width:y,height:v,fill:b,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),d&&(x=i.dropShadow(x,{left:u,top:p,blur:f,color:g,opacity:m})),t.globals.dom.elGraphical.add(x)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new Mi(this.ctx),i=t.config.yaxis[0].crosshairs,n=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var r=e.drawLine(-n,0,t.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);r.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(r)}var s=e.drawLine(-n,0,t.globals.gridWidth+n,0,i.stroke.color,0,0);s.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(s)}}]),t}(),ln=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,n=i.config;if(0!==n.responsive.length){var r=n.responsive.slice();r.sort((function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0})).reverse();var s=new ji({}),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r[0].breakpoint,a=window.innerWidth>0?window.innerWidth:screen.width;if(a>n){var o=k.clone(i.globals.initialConfig);o.series=k.clone(i.config.series);var l=Ti.extendArrayProps(s,o,i);t=k.extend(l,t),t=k.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var h=0;h<r.length;h++)a<r[h].breakpoint&&(t=Ti.extendArrayProps(s,r[h].options,i),t=k.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var o=Ti.extendArrayProps(s,t,i);o=k.extend(i.config,o),a(o=k.extend(o,t))}else a({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new ji(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),hn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return o(t,[{key:"checkHeatmapDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return"treemap"===e.type&&i.treemap&&i.treemap.distributed||"heatmap"===e.type&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return i.bar&&i.bar.distributed&&("bar"===e.type||"rangeBar"===e.type)}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this.w,e=new k;t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode));var i=x(t.config.colors||t.config.fill.colors||[]);t.globals.colors=this.getColors(i),this.applySeriesColors(t.globals.seriesColors,t.globals.colors),t.config.theme.monochrome.enabled&&(t.globals.colors=this.getMonochromeColors(t.config.theme.monochrome,t.globals.series,e));var n=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),this.applyColorTypes(["fill","stroke"],n),this.applyDataLabelsColors(n),this.applyRadarPolygonsColors(),this.applyMarkersColors(n)}},{key:"getColors",value:function(t){var e=this,i=this.w;return t&&0!==t.length?Array.isArray(t)&&t.length>0&&"function"==typeof t[0]?(this.isColorFn=!0,i.config.series.map((function(n,r){var s=t[r]||t[0];return"function"==typeof s?s({value:i.globals.axisCharts?i.globals.series[r][0]||0:i.globals.series[r],seriesIndex:r,dataPointIndex:r,w:e.w}):s}))):t:this.predefined()}},{key:"applySeriesColors",value:function(t,e){t.forEach((function(t,i){t&&(e[i]=t)}))}},{key:"getMonochromeColors",value:function(t,e,i){var n=t.color,r=t.shadeIntensity,s=t.shadeTo,a=this.isBarDistributed||this.isHeatmapDistributed?e[0].length*e.length:e.length,o=1/(a/r),l=0;return Array.from({length:a},(function(){var t="dark"===s?i.shadeColor(-1*l,n):i.shadeColor(l,n);return l+=o,t}))}},{key:"applyColorTypes",value:function(t,e){var i=this,n=this.w;t.forEach((function(t){n.globals[t].colors=void 0===n.config[t].colors?i.isColorFn?n.config.colors:e:n.config[t].colors.slice(),i.pushExtraColors(n.globals[t].colors)}))}},{key:"applyDataLabelsColors",value:function(t){var e=this.w;e.globals.dataLabels.style.colors=void 0===e.config.dataLabels.style.colors?t:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var t=this.w;t.globals.radarPolygons.fill.colors=void 0===t.config.plotOptions.radar.polygons.fill.colors?["dark"===t.config.theme.mode?"#424242":"none"]:t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(t){var e=this.w;e.globals.markers.colors=void 0===e.config.markers.colors?t:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,r=e||n.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(r=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),t.length<r)for(var s=r-t.length,a=0;a<s;a++)t.push(t[a])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode,i="dark"===e?"palette4":"light"===e?"palette1":t.theme.palette||"palette1",n="dark"===e?"#f6f7f8":"light"===e?"#373d3f":t.chart.foreColor||"#373d3f";return t.tooltip.theme=e||"light",t.chart.foreColor=n,t.theme.palette=i,t}},{key:"predefined",value:function(){var t={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return t[this.w.config.theme.palette]||t.default}}]),t}(),cn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,n=e.globals.svgWidth/2,r=i.offsetY,s="middle";if("left"===i.align?(n=10,s="start"):"right"===i.align&&(n=e.globals.svgWidth-10,s="end"),n+=i.offsetX,r=r+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var a=new Mi(this.ctx).drawText({x:n,y:r,text:i.text,textAnchor:s,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(a)}}}]),t}(),dn=function(){function t(e){s(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,n=0,r="title"===t?e.config.title.floating:e.config.subtitle.floating,s=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==s&&!r){var a=s.getBoundingClientRect();i=a.width,n=e.globals.axisCharts?a.height+5:a.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.elLegendWrap;t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},k.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var t=this,e=this.w,i=[];e.config.series.forEach((function(r,s){r.data.forEach((function(r,a){var o;o=e.globals.series[s][a],n=e.config.dataLabels.formatter(o,{ctx:t.dCtx.ctx,seriesIndex:s,dataPointIndex:a,w:e}),i.push(n)}))}));var n=k.getLargestStringFromArr(i),r=new Mi(this.dCtx.ctx),s=e.config.dataLabels.style,a=r.getTextRects(n,parseInt(s.fontSize),s.fontFamily);return{width:1.05*a.width,height:a.height}}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var n=e.map((function(t,e){return Array.isArray(t)?t.length:1})),r=Math.max.apply(Math,x(n));i=e[n.indexOf(r)]}return i}}]),t}(),un=function(){function t(e){s(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();t={width:n.width,height:n.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var r=e.globals.xLabelFormatter,s=k.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(s,i);e.globals.isBarHorizontal&&(a=s=e.globals.yAxisScale[0].result.reduce((function(t,e){return t.length>e.length?t:e}),0));var o=new Li(this.dCtx.ctx),l=s;s=o.xLabelFormat(r,s,l,{i:void 0,dateFormatter:new Pi(this.dCtx.ctx).formatDate,w:e}),a=o.xLabelFormat(r,a,l,{i:void 0,dateFormatter:new Pi(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===s||""===String(s).trim())&&(a=s="1");var h=new Mi(this.dCtx.ctx),c=h.getTextRects(s,e.config.xaxis.labels.style.fontSize),d=c;if(s!==a&&(d=h.getTextRects(a,e.config.xaxis.labels.style.fontSize)),(t={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var u=function(t){return h.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};c=u(s),s!==a&&(d=u(a)),t.height=(c.height>d.height?c.height:d.height)/1.5,t.width=c.width>d.width?c.width:d.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasXaxisGroups)return{width:0,height:0};var i,n=(null===(t=e.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,r=e.globals.groups.map((function(t){return t.title})),s=k.getLargestStringFromArr(r),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(s,r),o=new Mi(this.dCtx.ctx),l=o.getTextRects(s,n),h=l;return s!==a&&(h=o.getTextRects(a,n)),i={width:l.width>=h.width?l.width:h.width,height:l.height>=h.height?l.height:h.height},e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var n=new Mi(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=n.width,i=n.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(t){return t.value})),n=i.reduce((function(t,e){return void 0===t?0:t.length>e.length?t:e}),0);return 1.05*(t=new Mi(this.dCtx.ctx).getTextRects(n,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,n=i.globals,r=i.config,s=r.xaxis.type,a=t.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var o=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(t,o){r.yaxis.length>1&&function(t){return-1!==n.collapsedSeriesIndices.indexOf(t)}(o)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var o=e.dCtx.timescaleLabels[0],l=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+a/1.75-e.dCtx.yAxisWidthRight,h=o.position-a/1.75+e.dCtx.yAxisWidthLeft,c="right"===i.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0;l>n.svgWidth-n.translateX-c&&(n.skipLastTimelinelabel=!0),h<-(t.show&&!t.floating||"bar"!==r.chart.type&&"candlestick"!==r.chart.type&&"rangeBar"!==r.chart.type&&"boxPlot"!==r.chart.type?10:a/1.75)&&(n.skipFirstTimelinelabel=!0)}else"datetime"===s?e.dCtx.gridPad.right<a&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):"datetime"!==s&&e.dCtx.gridPad.right<a/2-e.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&(e.dCtx.xPadRight=a/2+1)}(t)};r.yaxis.forEach((function(t,i){o?(e.dCtx.gridPad.left<a&&(e.dCtx.xPadLeft=a/2+1),e.dCtx.xPadRight=a/2+1):l(t,i)}))}}]),t}(),pn=function(){function t(e){s(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],n=10,r=new Ii(this.dCtx.ctx);return e.config.yaxis.map((function(s,a){var o={seriesIndex:a,dataPointIndex:-1,w:e},l=e.globals.yAxisScale[a],h=0;if(!r.isYAxisHidden(a)&&s.labels.show&&void 0!==s.labels.minWidth&&(h=s.labels.minWidth),!r.isYAxisHidden(a)&&s.labels.show&&l.result.length){var c=e.globals.yLabelFormatters[a],d=l.niceMin===Number.MIN_VALUE?0:l.niceMin,u=l.result.reduce((function(t,e){var i,n;return(null===(i=String(c(t,o)))||void 0===i?void 0:i.length)>(null===(n=String(c(e,o)))||void 0===n?void 0:n.length)?t:e}),d),p=u=c(u,o);if(void 0!==u&&0!==u.length||(u=l.niceMax),e.globals.isBarHorizontal){n=0;var f=e.globals.labels.slice();u=k.getLargestStringFromArr(f),u=c(u,{seriesIndex:a,dataPointIndex:-1,w:e}),p=t.dCtx.dimHelpers.getLargestStringFromMultiArr(u,f)}var g=new Mi(t.dCtx.ctx),m="rotate(".concat(s.labels.rotate," 0 0)"),b=g.getTextRects(u,s.labels.style.fontSize,s.labels.style.fontFamily,m,!1),x=b;u!==p&&(x=g.getTextRects(p,s.labels.style.fontSize,s.labels.style.fontFamily,m,!1)),i.push({width:(h>x.width||h>b.width?h:x.width>b.width?x.width:b.width)+n,height:x.height>b.height?x.height:b.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=this.w,i=[];return e.config.yaxis.map((function(e,n){if(e.show&&void 0!==e.title.text){var r=new Mi(t.dCtx.ctx),s="rotate(".concat(e.title.rotate," 0 0)"),a=r.getTextRects(e.title.text,e.title.style.fontSize,e.title.style.fontFamily,s,!1);i.push({width:a.width,height:a.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,n=0,r=t.globals.yAxisScale.length>1?10:0,s=new Ii(this.dCtx.ctx),a=function(a,o){var l=t.config.yaxis[o].floating,h=0;a.width>0&&!l?(h=a.width+r,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(o)&&(h=h-a.width-r)):h=l||s.isYAxisHidden(o)?0:5,t.config.yaxis[o].opposite?n+=h:i+=h,e+=h};return t.globals.yLabelsCoords.map((function(t,e){a(t,e)})),t.globals.yTitleCoords.map((function(t,e){a(t,e)})),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,e}}]),t}(),fn=function(){function t(e){s(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w,i=e.config,n=e.globals;if(n.noData||n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.series.length)return 0;var r=function(t){return["bar","rangeBar","candlestick","boxPlot"].includes(t)},s=i.chart.type,a=0,o=r(s)?i.series.length:1;n.comboBarCount>0&&(o=n.comboBarCount),n.collapsedSeries.forEach((function(t){r(t.type)&&(o-=1)})),i.chart.stacked&&(o=1);var l=r(s)||n.comboBarCount>0,h=Math.abs(n.initialMaxX-n.initialMinX);if(l&&n.isXNumeric&&!n.isBarHorizontal&&o>0&&0!==h){h<=3&&(h=n.dataPoints);var c=h/t,d=n.minXDiff&&n.minXDiff/c>0?n.minXDiff/c:0;d>t/2&&(d/=2),(a=d*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),n.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,n=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach((function(r){void 0!==e.config[r].text?n+=e.config[r].margin:n+=t.dCtx.isSparkline||!i.axisCharts?0:5})),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||i.axisCharts||(n+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),s=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=r.height+s.height+n,i.translateY+=r.height+s.height+n}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,n=new Ii(this.dCtx.ctx);i.config.yaxis.forEach((function(r,s){-1!==i.globals.ignoreYAxisIndexes.indexOf(s)||r.floating||n.isYAxisHidden(s)||(r.opposite&&(i.globals.translateX-=e[s].width+t[s].width+parseInt(r.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),t}(),gn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new dn(this),this.dimYAxis=new pn(this),this.dimXAxis=new un(this),this.dimGrid=new fn(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return o(t,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var n=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,x(e.config.stroke.width)):e.config.stroke.width;this.isSparkline&&((e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(e){var i=b(e,2),n=i[0],r=i[1];t.gridPad[n]=Math.max(r,t.w.globals.markers.largestSize/1.5)})),this.gridPad.top=Math.max(n/2,this.gridPad.top),this.gridPad.bottom=Math.max(n/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var r=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*r,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(r>0?r:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,n=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((function(t,i){e.globals.yLabelsCoords.push({width:n[i].width,index:i}),e.globals.yTitleCoords.push({width:r[i].width,index:i})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var s=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),o=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(s,o,a),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var l=this.yAxisWidth,h=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-o.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-s.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var c=10;("radar"===e.config.chart.type||this.isSparkline)&&(l=0,h=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(l=0,h=0,c=0),this.isSparkline||"treemap"===e.config.chart.type||this.dimXAxis.additionalPaddingXLabels(s);var d=function(){i.translateX=l+t.datalabelsCoords.width,i.gridHeight=i.svgHeight-t.lgRect.height-h-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-l-2*t.datalabelsCoords.width};switch("top"===e.config.xaxis.position&&(c=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=c,d();break;case"top":i.translateY=this.lgRect.height+c,d();break;case"left":i.translateY=c,i.translateX=this.lgRect.width+l+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-2*this.datalabelsCoords.width;break;case"right":i.translateY=c,i.translateX=l+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,n),new nn(this.ctx).setYAxisXPosition(n,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,n=0;t.config.legend.show&&!t.config.legend.floating&&(n=20);var r="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",s=i.plotOptions[r].offsetY,a=i.plotOptions[r].offsetX;if(!i.legend.show||i.legend.floating){e.gridHeight=e.svgHeight;var o=e.dom.elWrap.getBoundingClientRect().width;return e.gridWidth=Math.min(o,e.gridHeight),e.translateY=s,void(e.translateX=a+(e.svgWidth-e.gridWidth)/2)}switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=s-10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+s+10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-n,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=s,e.translateX=a+this.lgRect.width+n;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-n-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=s,e.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,i){var n=this.w,r=n.globals.hasXaxisGroups?2:1,s=i.height+t.height+e.height,a=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,o=n.globals.rotateXLabels?22:10,l=n.globals.rotateXLabels&&"bottom"===n.config.legend.position?10:0;this.xAxisHeight=s*a+r*o+l,this.xAxisWidth=t.width,this.xAxisHeight-e.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var h=0,c=0;n.config.yaxis.forEach((function(t){h+=t.labels.minWidth,c+=t.labels.maxWidth})),this.yAxisWidth<h&&(this.yAxisWidth=h),this.yAxisWidth>c&&(this.yAxisWidth=c)}}]),t}(),mn=function(){function t(e){s(this,t),this.w=e.w,this.lgCtx=e}return o(t,[{key:"getLegendStyles",value:function(){var t,e,i,n=document.createElement("style");n.setAttribute("type","text/css");var r=(null===(t=this.lgCtx.ctx)||void 0===t||null===(e=t.opts)||void 0===e||null===(i=e.chart)||void 0===i?void 0:i.nonce)||this.w.config.chart.nonce;r&&n.setAttribute("nonce",r);var s=document.createTextNode("\n      .apexcharts-flip-y {\n        transform: scaleY(-1) translateY(-100%);\n        transform-origin: top;\n        transform-box: fill-box;\n      }\n      .apexcharts-flip-x {\n        transform: scaleX(-1);\n        transform-origin: center;\n        transform-box: fill-box;\n      }\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apexcharts-legend-group-horizontal {\n        flex-direction: column;\n      }\n      .apexcharts-legend-group {\n        display: flex;\n      }\n      .apexcharts-legend-group-vertical {\n        flex-direction: column-reverse;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n        align-items: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n        align-items: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n        align-items: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        margin-right: 1px;\n      }\n\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }\n\n    ");return n.appendChild(s),n}},{key:"getLegendDimensions",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(t,e){var i=this,n=this.w;if(n.globals.axisCharts||"radialBar"===n.config.chart.type){n.globals.resized=!0;var r=null,s=null;n.globals.risingSeries=[],n.globals.axisCharts?(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),s=parseInt(r.getAttribute("data:realIndex"),10)):(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),s=parseInt(r.getAttribute("rel"),10)-1),e?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach((function(t){i.riseCollapsedSeries(t.cs,t.csi,s)})):this.hideSeries({seriesEl:r,realIndex:s})}else{var a=n.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(t+1,"'] path")),o=n.config.chart.type;if("pie"===o||"polarArea"===o||"donut"===o){var l=n.config.plotOptions.pie.donut.labels;new Mi(this.lgCtx.ctx).pathMouseDown(a,null),this.lgCtx.ctx.pie.printDataLabelsInner(a.node,l)}a.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(t){var e=t.realIndex,i=this.w,n=i.globals,r=k.clone(i.config.series);if(n.axisCharts){var s=i.config.yaxis[n.seriesYAxisReverseMap[e]],a={index:e,data:r[e].data.slice(),type:r[e].type||i.config.chart.type};if(s&&s.show&&s.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(e)<0&&(n.ancillaryCollapsedSeries.push(a),n.ancillaryCollapsedSeriesIndices.push(e));else if(n.collapsedSeriesIndices.indexOf(e)<0){n.collapsedSeries.push(a),n.collapsedSeriesIndices.push(e);var o=n.risingSeries.indexOf(e);n.risingSeries.splice(o,1)}}else n.collapsedSeries.push({index:e,data:r[e]}),n.collapsedSeriesIndices.push(e);return n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(r)}},{key:"hideSeries",value:function(t){for(var e=t.seriesEl,i=t.realIndex,n=this.w,r=this.getSeriesAfterCollapsing({realIndex:i}),s=e.childNodes,a=0;a<s.length;a++)s[a].classList.contains("apexcharts-series-markers-wrap")&&(s[a].classList.contains("apexcharts-hide")?s[a].classList.remove("apexcharts-hide"):s[a].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var n=this.w,r=k.clone(n.config.series);if(t.length>0){for(var s=0;s<t.length;s++)t[s].index===i&&(n.globals.axisCharts?r[i].data=t[s].data.slice():r[i]=t[s].data,"number"!=typeof r[i]&&(r[i].hidden=!1),t.splice(s,1),e.splice(s,1),n.globals.risingSeries.push(i));r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w,i=0;return e.globals.axisCharts?t.forEach((function(n,r){e.globals.collapsedSeriesIndices.indexOf(r)<0&&e.globals.ancillaryCollapsedSeriesIndices.indexOf(r)<0||(t[r].data=[],i++)})):t.forEach((function(n,r){!e.globals.collapsedSeriesIndices.indexOf(r)<0&&(t[r]=0,i++)})),e.globals.allSeriesCollapsed=i===t.length,t}}]),t}(),bn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new mn(this)}return o(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config,n=i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1;if(this.legendHelpers.appendToForeignObject(),(n||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(t){var e=t.i,i=t.fillcolor,n=this.w,r=document.createElement("span");r.classList.add("apexcharts-legend-marker");var s=n.config.legend.markers.shape||n.config.markers.shape,a=s;Array.isArray(s)&&(a=s[e]);var o=Array.isArray(n.config.legend.markers.size)?parseFloat(n.config.legend.markers.size[e]):parseFloat(n.config.legend.markers.size),l=Array.isArray(n.config.legend.markers.offsetX)?parseFloat(n.config.legend.markers.offsetX[e]):parseFloat(n.config.legend.markers.offsetX),h=Array.isArray(n.config.legend.markers.offsetY)?parseFloat(n.config.legend.markers.offsetY[e]):parseFloat(n.config.legend.markers.offsetY),c=Array.isArray(n.config.legend.markers.strokeWidth)?parseFloat(n.config.legend.markers.strokeWidth[e]):parseFloat(n.config.legend.markers.strokeWidth),d=r.style;if(d.height=2*(o+c)+"px",d.width=2*(o+c)+"px",d.left=l+"px",d.top=h+"px",n.config.legend.markers.customHTML)d.background="transparent",d.color=i[e],Array.isArray(n.config.legend.markers.customHTML)?n.config.legend.markers.customHTML[e]&&(r.innerHTML=n.config.legend.markers.customHTML[e]()):r.innerHTML=n.config.legend.markers.customHTML();else{var u=new Wi(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(a),seriesIndex:e,strokeWidth:c,size:o}),p=window.SVG().addTo(r).size("100%","100%"),f=new Mi(this.ctx).drawMarker(0,0,g(g({},u),{},{pointFillColor:Array.isArray(i)?i[e]:u.pointFillColor,shape:a}));n.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach((function(t){t.node.classList.contains("apexcharts-marker-triangle")?t.node.style.transform="translate(50%, 45%)":t.node.style.transform="translate(50%, 50%)"})),p.add(f)}return r}},{key:"drawLegends",value:function(){var t=this,e=this,i=this.w,n=i.config.legend.fontFamily,r=i.globals.seriesNames,s=i.config.legend.markers.fillColors?i.config.legend.markers.fillColors.slice():i.globals.colors.slice();if("heatmap"===i.config.chart.type){var a=i.config.plotOptions.heatmap.colorScale.ranges;r=a.map((function(t){return t.name?t.name:t.from+" - "+t.to})),s=a.map((function(t){return t.color}))}else this.isBarsDistributed&&(r=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(r=i.config.legend.customLegendItems);var o=i.globals.legendFormatter,l=i.config.legend.inverseOrder,h=[];i.globals.seriesGroups.length>1&&i.config.legend.clusterGroupedSeries&&i.globals.seriesGroups.forEach((function(t,e){h[e]=document.createElement("div"),h[e].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(e)),"horizontal"===i.config.legend.clusterGroupedSeriesOrientation?i.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):h[e].classList.add("apexcharts-legend-group-vertical")}));for(var c=function(e){var a,l=o(r[e],{seriesIndex:e,w:i}),c=!1,d=!1;if(i.globals.collapsedSeries.length>0)for(var u=0;u<i.globals.collapsedSeries.length;u++)i.globals.collapsedSeries[u].index===e&&(c=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<i.globals.ancillaryCollapsedSeriesIndices.length;p++)i.globals.ancillaryCollapsedSeriesIndices[p]===e&&(d=!0);var f=t.createLegendMarker({i:e,fillcolor:s});Mi.setAttrs(f,{rel:e+1,"data:collapsed":c||d}),(c||d)&&f.classList.add("apexcharts-inactive-legend");var g=document.createElement("div"),m=document.createElement("span");m.classList.add("apexcharts-legend-text"),m.innerHTML=Array.isArray(l)?l.join(" "):l;var b=i.config.legend.labels.useSeriesColors?i.globals.colors[e]:Array.isArray(i.config.legend.labels.colors)?null===(a=i.config.legend.labels.colors)||void 0===a?void 0:a[e]:i.config.legend.labels.colors;b||(b=i.config.chart.foreColor),m.style.color=b,m.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",m.style.fontWeight=i.config.legend.fontWeight,m.style.fontFamily=n||i.config.chart.fontFamily,Mi.setAttrs(m,{rel:e+1,i:e,"data:default-text":encodeURIComponent(l),"data:collapsed":c||d}),g.appendChild(f),g.appendChild(m);var x=new Ti(t.ctx);i.config.legend.showForZeroSeries||0===x.getSeriesTotalByIndex(e)&&x.seriesHaveSameValues(e)&&!x.isSeriesNull(e)&&-1===i.globals.collapsedSeriesIndices.indexOf(e)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(e)&&g.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||x.isSeriesNull(e)&&-1===i.globals.collapsedSeriesIndices.indexOf(e)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(e)&&g.classList.add("apexcharts-hidden-null-series"),h.length?i.globals.seriesGroups.forEach((function(t,n){var r;t.includes(null===(r=i.config.series[e])||void 0===r?void 0:r.name)&&(i.globals.dom.elLegendWrap.appendChild(h[n]),h[n].appendChild(g))})):i.globals.dom.elLegendWrap.appendChild(g),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),g.classList.add("apexcharts-legend-series"),g.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",Mi.setAttrs(g,{rel:e+1,seriesName:k.escapeString(r[e]),"data:collapsed":c||d}),(c||d)&&g.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||g.classList.add("apexcharts-no-click")},d=l?r.length-1:0;l?d>=0:d<=r.length-1;l?d--:d++)c(d);i.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&0===i.config.legend.customLegendItems.length&&(i.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,n=i.globals.dom.elLegendWrap,r=n.clientHeight,s=0,a=0;if("bottom"===i.config.legend.position)a=i.globals.svgHeight-Math.min(r,i.globals.svgHeight/2)-5;else if("top"===i.config.legend.position){var o=new gn(this.ctx),l=o.dimHelpers.getTitleSubtitleCoords("title").height,h=o.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=(l>0?l-10:0)+(h>0?h-10:0)}n.style.position="absolute",s=s+t+i.config.legend.offsetX,a=a+e+i.config.legend.offsetY,n.style.left=s+"px",n.style.top=a+"px","right"===i.config.legend.position&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(t){n.style[t]&&(n.style[t]=parseInt(i.config.legend[t],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.elLegendWrap.style.right=0;var e=new gn(this.ctx),i=e.dimHelpers.getTitleSubtitleCoords("title"),n=e.dimHelpers.getTitleSubtitleCoords("subtitle"),r=0;"top"===t.config.legend.position&&(r=i.height+n.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,r)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendDimensions(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var n=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new $i(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new $i(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,n="true"===t.target.getAttribute("data:collapsed"),r=this.w.config.chart.events.legendClick;"function"==typeof r&&r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var s=this.w.config.legend.markers.onClick;"function"==typeof s&&t.target.classList.contains("apexcharts-legend-marker")&&(s(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),t}(),xn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return o(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=e.config.chart.toolbar.offsetY+"px",n.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(i());var s=[],a=function(i,n,r){var a=i.toLowerCase();t.t[a]&&e.config.chart.zoom.enabled&&s.push({el:n,icon:"string"==typeof t.t[a]?t.t[a]:r,title:t.localeValues[i],class:"apexcharts-".concat(a,"-icon")})};a("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),a("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var o=function(i){t.t[i]&&e.config.chart[i].enabled&&s.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};o("zoom"),o("selection"),this.t.pan&&e.config.chart.zoom.enabled&&s.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&s.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)s.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});s.forEach((function(t,e){t.index&&k.moveIndexInArray(s,e,t.index)}));for(var h=0;h<s.length;h++)Mi.setAttrs(s[h].el,{class:s[h].class,title:s[h].title}),s[h].el.innerHTML=s[h].icon,n.appendChild(s[h].el);this._createHamburgerMenu(n),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),Mi.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,Mi.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))}));for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,n="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[n]=!e.w.globals[n],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(e){e&&e.classList.remove(t.selectedClass)}))}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,n=(this.maxX+e)/2,r=this._getNewMinXMaxX(i,n);t.globals.disableZoomIn||this.zoomUpdateOptions(r.minX,r.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this.minX-(e-this.minX),n=this.maxX-(e-this.maxX),r=this._getNewMinXMaxX(i,n);t.globals.disableZoomOut||this.zoomUpdateOptions(r.minX,r.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var n={min:t,max:e},r=this.getBeforeZoomRange(n);r&&(n=r.xaxis);var s={xaxis:n},a=k.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(s.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(s,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout((function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new Zi(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach((function(t){var e=t.w;if(e.globals.lastXAxis.min=e.globals.initialConfig.xaxis.min,e.globals.lastXAxis.max=e.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var i=e.config.chart.events.beforeResetZoom(t,e);i&&t.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var n=t.ctx.series.emptyCollapsedSeries(k.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(n,e.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),vn=function(){u(e,xn);var t=h(e);function e(i){var n;return s(this,e),(n=t.call(this,i)).ctx=i,n.w=i.w,n.dragged=!1,n.graphics=new Mi(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n.debounceTimer=null,n.debounceDelay=100,n.wheelDelay=400,n}return o(e,[{key:"init",value:function(t){var e=this,i=t.xyRatios,n=this.w,r=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=n.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new Ct(0,0,n.globals.gridWidth,n.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),n.globals.dom.Paper.add(this.zoomRect),n.globals.dom.Paper.add(this.selectionRect),"x"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:n.globals.gridWidth,maxY:n.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):"y"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:n.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=n.globals.dom.baseEl.querySelector("".concat(n.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(t){e.hoverArea.addEventListener(t,r.svgMouseEvents.bind(r,i),{capture:!1,passive:!0})})),n.config.chart.zoom.enabled&&n.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",r.mouseWheelEvent.bind(r),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,n=this.ctx.toolbar,r=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,s=i.config.chart.toolbar.autoSelected;if(e.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan"===s?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(s),this.shiftWasPressed=!1),e.target){var a,o=e.target.classList;if(e.target.parentNode&&null!==e.target.parentNode&&(a=e.target.parentNode.classList),!(o.contains("apexcharts-legend-marker")||o.contains("apexcharts-legend-text")||a&&a.contains("apexcharts-toolbar"))){if(this.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,this.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which||"touchstart"===e.type){var l=this.gridRect.getBoundingClientRect();this.startX=this.clientX-l.left-i.globals.barPadForNumericAxis,this.startY=this.clientY-l.top,this.dragged=!1,this.w.globals.mousedown=!0}("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(this.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:r,xyRatios:t})):(this.w.globals.mousedown&&i.globals.zoomEnabled||this.w.globals.mousedown&&i.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:r}))),"mouseup"!==e.type&&"touchend"!==e.type&&"mouseleave"!==e.type||this.handleMouseUp({zoomtype:r}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(t){var e,i=t.zoomtype,n=t.isResized,r=this.w,s=null===(e=this.gridRect)||void 0===e?void 0:e.getBoundingClientRect();s&&(this.w.globals.mousedown||n)&&(this.endX=this.clientX-s.left-r.globals.barPadForNumericAxis,this.endY=this.clientY-s.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(r.globals.zoomEnabled||r.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:i}),r.globals.panEnabled&&r.config.xaxis.convertedCatToNumeric&&this.delayedPanScrolled()),r.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(t){var e=this,i=this.w;t.preventDefault();var n=Date.now();n-i.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(t),i.globals.lastWheelExecution=n),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){n-i.globals.lastWheelExecution>e.wheelDelay&&(e.executeMouseWheelZoom(t),i.globals.lastWheelExecution=n)}),this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(t){var e,i=this.w;this.minX=i.globals.isRangeBar?i.globals.minY:i.globals.minX,this.maxX=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;var n=null===(e=this.gridRect)||void 0===e?void 0:e.getBoundingClientRect();if(n){var r,s,a,o=(t.clientX-n.left)/n.width,l=this.minX,h=this.maxX,c=h-l;if(t.deltaY<0){var d=l+o*c;s=d-(r=.5*c)/2,a=d+r/2}else s=l-(r=1.5*c)/2,a=h+r/2;if(!i.globals.isRangeBar){s=Math.max(s,i.globals.initialMinX),a=Math.min(a,i.globals.initialMaxX);var u=.01*(i.globals.initialMaxX-i.globals.initialMinX);if(a-s<u){var p=(s+a)/2;s=p-u/2,a=p+u/2}}var f=this._getNewMinXMaxX(s,a);isNaN(f.minX)||isNaN(f.maxX)||this.zoomUpdateOptions(f.minX,f.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var t=this,e=this.w;if(this.selectionRect){var i=this.selectionRect.node.getBoundingClientRect();i.width>0&&i.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(t,e,i,n,r){return"l"===r||"r"===r?t.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):t.circle(0)},updateHandle:function(t,e){return t.center(e[0],e[1])}}).resize().on("resize",(function(){var i=e.globals.zoomEnabled?e.config.chart.zoom.type:e.config.chart.selection.type;t.handleMouseUp({zoomtype:i,isResized:!0})})))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(g(g({},t.globals.selection),{},{translateX:t.globals.translateX,translateY:t.globals.translateY}));else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio,n=t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i;t.globals.isRangeBar&&(i=(t.config.chart.selection.xaxis.min-t.globals.yAxisScale[0].niceMin)/e.invertedYRatio,n=(t.config.chart.selection.xaxis.max-t.config.chart.selection.xaxis.min)/e.invertedYRatio);var r={x:i,y:0,width:n,height:t.globals.gridHeight,translateX:t.globals.translateX,translateY:t.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(r),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,n=t.width,r=t.height,s=t.translateX,a=void 0===s?0:s,o=t.translateY,l=void 0===o?0:o,h=this.w,c=this.zoomRect,d=this.selectionRect;if(this.dragged||null!==h.globals.selection){var u={transform:"translate("+a+", "+l+")"};h.globals.zoomEnabled&&this.dragged&&(n<0&&(n=1),c.attr({x:e,y:i,width:n,height:r,fill:h.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":h.config.chart.zoom.zoomedArea.fill.opacity,stroke:h.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":h.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":h.config.chart.zoom.zoomedArea.stroke.opacity}),Mi.setAttrs(c.node,u)),h.globals.selectionEnabled&&(d.attr({x:e,y:i,width:n>0?n:0,height:r>0?r:0,fill:h.config.chart.selection.fill.color,"fill-opacity":h.config.chart.selection.fill.opacity,stroke:h.config.chart.selection.stroke.color,"stroke-width":h.config.chart.selection.stroke.width,"stroke-dasharray":h.config.chart.selection.stroke.dashArray,"stroke-opacity":h.config.chart.selection.stroke.opacity}),Mi.setAttrs(d.node,u))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e=t.context,i=t.zoomtype,n=this.w,r=e,s=this.gridRect.getBoundingClientRect(),a=r.startX-1,o=r.startY,l=!1,h=!1,c=r.clientX-s.left-n.globals.barPadForNumericAxis,d=r.clientY-s.top,u=c-a,p=d-o,f={translateX:n.globals.translateX,translateY:n.globals.translateY};return Math.abs(u+a)>n.globals.gridWidth?u=n.globals.gridWidth-a:c<0&&(u=a),a>c&&(l=!0,u=Math.abs(u)),o>d&&(h=!0,p=Math.abs(p)),f=g(g({},f="x"===i?{x:l?a-u:a,y:0,width:u,height:n.globals.gridHeight}:"y"===i?{x:0,y:h?o-p:o,width:n.globals.gridWidth,height:p}:{x:l?a-u:a,y:h?o-p:o,width:u,height:p}),{},{translateX:n.globals.translateX,translateY:n.globals.translateY}),r.drawSelectionRect(f),r.selectionDragging("resizing"),f}},{key:"selectionDragging",value:function(t,e){var i=this,n=this.w;if(e){e.preventDefault();var r=e.detail,s=r.handler,a=r.box,o=a.x,l=a.y;o<this.constraints.x&&(o=this.constraints.x),l<this.constraints.y&&(l=this.constraints.y),a.x2>this.constraints.x2&&(o=this.constraints.x2-a.w),a.y2>this.constraints.y2&&(l=this.constraints.y2-a.h),s.move(o,l);var h=this.xyRatios,c=this.selectionRect,d=0;"resizing"===t&&(d=30);var u=function(t){return parseFloat(c.node.getAttribute(t))},p={x:u("x"),y:u("y"),width:u("width"),height:u("height")};n.globals.selection=p,"function"==typeof n.config.chart.events.selection&&n.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var t,e,r,s,a=i.gridRect.getBoundingClientRect(),o=c.node.getBoundingClientRect();n.globals.isRangeBar?(t=n.globals.yAxisScale[0].niceMin+(o.left-a.left)*h.invertedYRatio,e=n.globals.yAxisScale[0].niceMin+(o.right-a.left)*h.invertedYRatio,r=0,s=1):(t=n.globals.xAxisScale.niceMin+(o.left-a.left)*h.xRatio,e=n.globals.xAxisScale.niceMin+(o.right-a.left)*h.xRatio,r=n.globals.yAxisScale[0].niceMin+(a.bottom-o.bottom)*h.yRatio[0],s=n.globals.yAxisScale[0].niceMax-(o.top-a.top)*h.yRatio[0]);var l={xaxis:{min:t,max:e},yaxis:{min:r,max:s}};n.config.chart.events.selection(i.ctx,l),n.config.chart.brush.enabled&&void 0!==n.config.chart.events.brushScrolled&&n.config.chart.events.brushScrolled(i.ctx,l)}),d))}}},{key:"selectionDrawn",value:function(t){var e,i,n=t.context,r=t.zoomtype,s=this.w,a=n,o=this.xyRatios,l=this.ctx.toolbar,h=s.globals.zoomEnabled?a.zoomRect.node.getBoundingClientRect():a.selectionRect.node.getBoundingClientRect(),c=a.gridRect.getBoundingClientRect(),d=h.left-c.left-s.globals.barPadForNumericAxis,u=h.right-c.left-s.globals.barPadForNumericAxis,p=h.top-c.top,f=h.bottom-c.top;s.globals.isRangeBar?(e=s.globals.yAxisScale[0].niceMin+d*o.invertedYRatio,i=s.globals.yAxisScale[0].niceMin+u*o.invertedYRatio):(e=s.globals.xAxisScale.niceMin+d*o.xRatio,i=s.globals.xAxisScale.niceMin+u*o.xRatio);var g=[],m=[];if(s.config.yaxis.forEach((function(t,e){var i=s.globals.seriesYAxisMap[e][0],n=s.globals.yAxisScale[e].niceMax-o.yRatio[i]*p,r=s.globals.yAxisScale[e].niceMax-o.yRatio[i]*f;g.push(n),m.push(r)})),a.dragged&&(a.dragX>10||a.dragY>10)&&e!==i)if(s.globals.zoomEnabled){var b=k.clone(s.globals.initialConfig.yaxis),x=k.clone(s.globals.initialConfig.xaxis);if(s.globals.zoomed=!0,s.config.xaxis.convertedCatToNumeric&&(e=Math.floor(e),i=Math.floor(i),e<1&&(e=1,i=s.globals.dataPoints),i-e<2&&(i=e+1)),"xy"!==r&&"x"!==r||(x={min:e,max:i}),"xy"!==r&&"y"!==r||b.forEach((function(t,e){b[e].min=m[e],b[e].max=g[e]})),l){var v=l.getBeforeZoomRange(x,b);v&&(x=v.xaxis?v.xaxis:x,b=v.yaxis?v.yaxis:b)}var y={xaxis:x};s.config.chart.group||(y.yaxis=b),a.ctx.updateHelpers._updateOptions(y,!1,a.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof s.config.chart.events.zoomed&&l.zoomCallback(x,b)}else if(s.globals.selectionEnabled){var w,A=null;w={min:e,max:i},"xy"!==r&&"y"!==r||(A=k.clone(s.config.yaxis)).forEach((function(t,e){A[e].min=m[e],A[e].max=g[e]})),s.globals.selection=a.selection,"function"==typeof s.config.chart.events.selection&&s.config.chart.events.selection(a.ctx,{xaxis:w,yaxis:A})}}},{key:"panDragging",value:function(t){var e=t.context,i=this.w,n=e;if(void 0!==i.globals.lastClientPosition.x){var r=i.globals.lastClientPosition.x-n.clientX,s=i.globals.lastClientPosition.y-n.clientY;Math.abs(r)>Math.abs(s)&&r>0?this.moveDirection="left":Math.abs(r)>Math.abs(s)&&r<0?this.moveDirection="right":Math.abs(s)>Math.abs(r)&&s>0?this.moveDirection="up":Math.abs(s)>Math.abs(r)&&s<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:n.clientX,y:n.clientY};var a=i.globals.isRangeBar?i.globals.minY:i.globals.minX,o=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||n.panScrolled(a,o)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,n=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+n,i=t.globals.maxX+n):"right"===this.moveDirection&&(e=t.globals.minX-n,i=t.globals.maxX-n),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,n=this.xyRatios,r=k.clone(i.globals.initialConfig.yaxis),s=n.xRatio,a=i.globals.minX,o=i.globals.maxX;i.globals.isRangeBar&&(s=n.invertedYRatio,a=i.globals.minY,o=i.globals.maxY),"left"===this.moveDirection?(t=a+i.globals.gridWidth/15*s,e=o+i.globals.gridWidth/15*s):"right"===this.moveDirection&&(t=a-i.globals.gridWidth/15*s,e=o-i.globals.gridWidth/15*s),i.globals.isRangeBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=a,e=o);var l={xaxis:{min:t,max:e}};i.config.chart.group||(l.yaxis=r),this.updateScrolledChart(l,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var n=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof n.config.chart.events.scrolled&&n.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),e}(),yn=function(){function t(e){s(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return o(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,n=t.clientX,r=t.clientY,s=this.w,a=i.getBoundingClientRect(),o=a.width,l=a.height,h=o/(s.globals.dataPoints-1),c=l/s.globals.dataPoints,d=this.hasBars();!s.globals.comboCharts&&!d||s.config.xaxis.convertedCatToNumeric||(h=o/s.globals.dataPoints);var u=n-a.left-s.globals.barPadForNumericAxis,p=r-a.top;u<0||p<0||u>o||p>l?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):s.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):s.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var f=Math.round(u/h),g=Math.floor(p/c);d&&!s.config.xaxis.convertedCatToNumeric&&(f=Math.ceil(u/h),f-=1);var m=null,b=null,x=s.globals.seriesXvalues.map((function(t){return t.filter((function(t){return k.isNumber(t)}))})),v=s.globals.seriesYvalues.map((function(t){return t.filter((function(t){return k.isNumber(t)}))}));if(s.globals.isXNumeric){var y=this.ttCtx.getElGrid().getBoundingClientRect(),w=u*(y.width/o),A=p*(y.height/l);m=(b=this.closestInMultiArray(w,A,x,v)).index,f=b.j,null!==m&&s.globals.hasNullValues&&(x=s.globals.seriesXvalues[m],f=(b=this.closestInArray(w,x)).j)}return s.globals.capturedSeriesIndex=null===m?-1:m,(!f||f<1)&&(f=0),s.globals.isBarHorizontal?s.globals.capturedDataPointIndex=g:s.globals.capturedDataPointIndex=f,{capturedSeries:m,j:s.globals.isBarHorizontal?g:f,hoverX:u,hoverY:p}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,n=t.map((function(t,e){return t.length>0?e:-1})),r=0;r<n.length;r++)if(-1!==n[r]&&-1===e.globals.collapsedSeriesIndices.indexOf(r)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(r)){i=n[r];break}return i}},{key:"closestInMultiArray",value:function(t,e,i,n){for(var r,s=this.w,a=1/0,o=null,l=null,h=0;h<i.length;h++)if(r=h,-1===s.globals.collapsedSeriesIndices.indexOf(r)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(r))for(var c=i[h],d=n[h],u=Math.min(c.length,d.length),p=0;p<u;p++){var f=t-c[p],g=Math.sqrt(f*f);if(!s.globals.allSeriesHasEqualX){var m=e-d[p];g=Math.sqrt(f*f+m*m)}g<a&&(a=g,o=h,l=p)}return{index:o,j:l}}},{key:"closestInArray",value:function(t,e){for(var i=e[0],n=null,r=Math.abs(t-i),s=0;s<e.length;s++){var a=Math.abs(t-e[s]);a<r&&(r=a,n=s)}return{j:n}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter((function(t){return void 0!==t[0]}));if(i.length>0)for(var n=0;n<i.length-1;n++)void 0!==i[n][t]&&void 0!==i[n+1][t]&&i[n][t]!==i[n+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return x(t).reduce((function(t,e){return t+e.getBBox().height}),0)}},{key:"getElMarkers",value:function(t){return"number"==typeof t?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");i=x(i),e&&(i=i.filter((function(e){var i=Number(e.getAttribute("data:realIndex"));return-1===t.w.globals.collapsedSeriesIndices.indexOf(i)}))),i.sort((function(t,e){var i=Number(t.getAttribute("data:realIndex")),n=Number(e.getAttribute("data:realIndex"));return n<i?1:n>i?-1:0}));var n=[];return i.forEach((function(t){n.push(t.querySelector(".apexcharts-marker"))})),n}},{key:"hasMarkers",value:function(t){return this.getElMarkers(t).length>0}},{key:"getPathFromPoint",value:function(t,e){var i=Number(t.getAttribute("cx")),n=Number(t.getAttribute("cy")),r=t.getAttribute("shape");return new Mi(this.ctx).getMarkerPath(i,n,r,e)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,r=0;r<n.length;r++)"enable"===t?(n[r].classList.add("apexcharts-active"),n[r].style.display=e.config.tooltip.items.display):(n[r].classList.remove("apexcharts-active"),n[r].style.display="none")}}]),t}(),wn=function(){function t(e){s(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new yn(e)}return o(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,n=t.ttItems,r=t.i,s=void 0===r?0:r,a=t.j,o=void 0===a?null:a,l=t.y1,h=t.y2,c=t.e,d=this.w;void 0!==d.config.tooltip.custom?this.handleCustomTooltip({i:s,j:o,y1:l,y2:h,w:d}):this.toggleActiveInactiveSeries(i,s);var u=this.getValuesToPrint({i:s,j:o});this.printLabels({i:s,j:o,values:u,ttItems:n,shared:i,e:c});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,n=t.i,r=t.j,s=t.values,a=t.ttItems,o=t.shared,l=t.e,h=this.w,c=[],d=function(t){return h.globals.seriesGoals[t]&&h.globals.seriesGoals[t][r]&&Array.isArray(h.globals.seriesGoals[t][r])},u=s.xVal,p=s.zVal,f=s.xAxisTTVal,m="",b=h.globals.colors[n];null!==r&&h.config.plotOptions.bar.distributed&&(b=h.globals.colors[r]);for(var x=function(t,s){var x=i.getFormatters(n);m=i.getSeriesName({fn:x.yLbTitleFormatter,index:n,seriesIndex:n,j:r}),"treemap"===h.config.chart.type&&(m=x.yLbTitleFormatter(String(h.config.series[n].data[r].x),{series:h.globals.series,seriesIndex:n,dataPointIndex:r,w:h}));var v=h.config.tooltip.inverseOrder?s:t;if(h.globals.axisCharts){var y=function(t){var e,i,n,s;return h.globals.isRangeData?x.yLbFormatter(null===(e=h.globals.seriesRangeStart)||void 0===e||null===(i=e[t])||void 0===i?void 0:i[r],{series:h.globals.seriesRangeStart,seriesIndex:t,dataPointIndex:r,w:h})+" - "+x.yLbFormatter(null===(n=h.globals.seriesRangeEnd)||void 0===n||null===(s=n[t])||void 0===s?void 0:s[r],{series:h.globals.seriesRangeEnd,seriesIndex:t,dataPointIndex:r,w:h}):x.yLbFormatter(h.globals.series[t][r],{series:h.globals.series,seriesIndex:t,dataPointIndex:r,w:h})};if(o)x=i.getFormatters(v),m=i.getSeriesName({fn:x.yLbTitleFormatter,index:v,seriesIndex:n,j:r}),b=h.globals.colors[v],e=y(v),d(v)&&(c=h.globals.seriesGoals[v][r].map((function(t){return{attrs:t,val:x.yLbFormatter(t.value,{seriesIndex:v,dataPointIndex:r,w:h})}})));else{var w,k=null==l||null===(w=l.target)||void 0===w?void 0:w.getAttribute("fill");k&&(-1!==k.indexOf("url")?-1!==k.indexOf("Pattern")&&(b=h.globals.dom.baseEl.querySelector(k.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):b=k),e=y(n),d(n)&&Array.isArray(h.globals.seriesGoals[n][r])&&(c=h.globals.seriesGoals[n][r].map((function(t){return{attrs:t,val:x.yLbFormatter(t.value,{seriesIndex:n,dataPointIndex:r,w:h})}})))}}null===r&&(e=x.yLbFormatter(h.globals.series[n],g(g({},h),{},{seriesIndex:n,dataPointIndex:n}))),i.DOMHandling({i:n,t:v,j:r,ttItems:a,values:{val:e,goalVals:c,xVal:u,xAxisTTVal:f,zVal:p},seriesName:m,shared:o,pColor:b})},v=0,y=h.globals.series.length-1;v<h.globals.series.length;v++,y--)x(v,y)}},{key:"getFormatters",value:function(t){var e,i=this.w,n=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(n=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof n&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t?t+": ":""}),{yLbFormatter:n,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,n=t.seriesIndex,r=t.j,s=this.w;return e(String(s.globals.seriesNames[i]),{series:s.globals.series,seriesIndex:n,dataPointIndex:r,w:s})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=t.j,n=t.ttItems,r=t.values,s=t.seriesName,a=t.shared,o=t.pColor,l=this.w,h=this.ttCtx,c=r.val,d=r.goalVals,u=r.xVal,p=r.xAxisTTVal,f=r.zVal,g=null;g=n[e].children,l.config.tooltip.fillSeriesColor&&(n[e].style.color=o,g[0].style.display="none"),h.showTooltipTitle&&(null===h.tooltipTitle&&(h.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=u),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=""!==p?p:u);var m=n[e].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=s||"");var b=n[e].querySelector(".apexcharts-tooltip-text-y-value");b&&(b.innerHTML=void 0!==c?c:""),g[0]&&g[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(o=l.config.tooltip.marker.fillColors[e]),g[0].style.color=o),l.config.tooltip.marker.show||(g[0].style.display="none");var x=n[e].querySelector(".apexcharts-tooltip-text-goals-label"),v=n[e].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&l.globals.seriesGoals[e]){var y=function(){var t="<div>",e="<div>";d.forEach((function(i,n){t+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),e+="<div>".concat(i.val,"</div>")})),x.innerHTML=t+"</div>",v.innerHTML=e+"</div>"};a?l.globals.seriesGoals[e][i]&&Array.isArray(l.globals.seriesGoals[e][i])?y():(x.innerHTML="",v.innerHTML=""):y()}else x.innerHTML="",v.innerHTML="";if(null!==f&&(n[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,n[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==f?f:""),a&&g[0]){if(l.config.tooltip.hideEmptySeries){var w=n[e].querySelector(".apexcharts-tooltip-marker"),k=n[e].querySelector(".apexcharts-tooltip-text");0==parseFloat(c)?(w.style.display="none",k.style.display="none"):(w.style.display="block",k.style.display="block")}null==c||l.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||l.globals.collapsedSeriesIndices.indexOf(e)>-1||Array.isArray(h.tConfig.enabledOnSeries)&&-1===h.tConfig.enabledOnSeries.indexOf(e)?g[0].parentNode.style.display="none":g[0].parentNode.style.display=l.config.tooltip.items.display}else Array.isArray(h.tConfig.enabledOnSeries)&&-1===h.tConfig.enabledOnSeries.indexOf(e)&&(g[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(t,e){var i=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(e));n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,n=this.w,r=this.ctx.series.filteredSeriesX(),s="",a="",o=null,l=null,h={series:n.globals.series,seriesIndex:e,dataPointIndex:i,w:n},c=n.globals.ttZFormatter;null===i?l=n.globals.series[e]:n.globals.isXNumeric&&"treemap"!==n.config.chart.type?(s=r[e][i],0===r[e].length&&(s=r[this.tooltipUtil.getFirstActiveXArray(r)][i])):s=new Ki(this.ctx).isFormatXY()?void 0!==n.config.series[e].data[i]?n.config.series[e].data[i].x:"":void 0!==n.globals.labels[i]?n.globals.labels[i]:"";var d=s;return s=n.globals.isXNumeric&&"datetime"===n.config.xaxis.type?new Li(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new Pi(this.ctx).formatDate,w:this.w}):n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](d,h):n.globals.xLabelFormatter(d,h),void 0!==n.config.tooltip.x.formatter&&(s=n.globals.ttKeyFormatter(d,h)),n.globals.seriesZ.length>0&&n.globals.seriesZ[e].length>0&&(o=c(n.globals.seriesZ[e][i],n)),a="function"==typeof n.config.xaxis.tooltip.formatter?n.globals.xaxisTooltipFormatter(d,h):s,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(s)?s.join(" "):s,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:o}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,n=t.y1,r=t.y2,s=t.w,a=this.ttCtx.getElTooltip(),o=s.config.tooltip.custom;Array.isArray(o)&&o[e]&&(o=o[e]);var l=o({ctx:this.ctx,series:s.globals.series,seriesIndex:e,dataPointIndex:i,y1:n,y2:r,w:s});"string"==typeof l?a.innerHTML=l:(l instanceof Element||"string"==typeof l.nodeName)&&(a.innerHTML="",a.appendChild(l.cloneNode(!0)))}}]),t}(),kn=function(){function t(e){s(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return o(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,n=this.w,r=i.getElXCrosshairs(),s=t-i.xcrosshairsWidth/2,a=n.globals.labels.slice().length;if(null!==e&&(s=n.globals.gridWidth/a*e),null===r||n.globals.isBarHorizontal||(r.setAttribute("x",s),r.setAttribute("x1",s),r.setAttribute("x2",s),r.setAttribute("y2",n.globals.gridHeight),r.classList.add("apexcharts-active")),s<0&&(s=0),s>n.globals.gridWidth&&(s=n.globals.gridWidth),i.isXAxisTooltipEnabled){var o=s;"tickWidth"!==n.config.xaxis.crosshairs.width&&"barWidth"!==n.config.xaxis.crosshairs.width||(o=s+i.xcrosshairsWidth/2),this.moveXAxisTooltip(o)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&Mi.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&Mi.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var n,r=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t))t+=e.globals.translateX,n=new Mi(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=n.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=r+"px"}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),r=e.globals.translateY+n,s=i.yaxisTTEls[t].getBoundingClientRect().height,a=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(a-=26),r-=s/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=r+"px",i.yaxisTTEls[t].style.left=a+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,r=this.ttCtx,s=r.getElTooltip(),a=r.tooltipRect,o=null!==i?parseFloat(i):1,l=parseFloat(t)+o+5,h=parseFloat(e)+o/2;if(l>n.globals.gridWidth/2&&(l=l-a.ttWidth-o-10),l>n.globals.gridWidth-a.ttWidth-10&&(l=n.globals.gridWidth-a.ttWidth),l<-20&&(l=-20),n.config.tooltip.followCursor){var c=r.getElGrid().getBoundingClientRect();(l=r.e.clientX-c.left)>n.globals.gridWidth/2&&(l-=r.tooltipRect.ttWidth),(h=r.e.clientY+n.globals.translateY-c.top)>n.globals.gridHeight/2&&(h-=r.tooltipRect.ttHeight)}else n.globals.isBarHorizontal||a.ttHeight/2+h>n.globals.gridHeight&&(h=n.globals.gridHeight-a.ttHeight+n.globals.translateY);isNaN(l)||(l+=n.globals.translateX,s.style.left=l+"px",s.style.top=h+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[t]>0)for(var r=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),s=0;s<r.length;s++)parseInt(r[s].getAttribute("rel"),10)===e&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(e,r[s]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,n,r,s,a=this.w,o=this.ttCtx,l=new Mi(this.ctx),h=a.globals.pointsArray,c=o.tooltipUtil.getHoverMarkerSize(e),d=a.config.series[e].type;if(!d||"column"!==d&&"candlestick"!==d&&"boxPlot"!==d){r=null===(i=h[e][t])||void 0===i?void 0:i[0],s=(null===(n=h[e][t])||void 0===n?void 0:n[1])||0;var u=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers path"));if(u&&s<a.globals.gridHeight&&s>0){var p=u.getAttribute("shape"),f=l.getMarkerPath(r,s,p,1.5*c);u.setAttribute("d",f)}this.moveXCrosshairs(r),o.fixedTooltip||this.moveTooltip(r,s,c)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,n=i.w,r=0,s=0,a=n.globals.pointsArray,o=new $i(this.ctx),l=new Mi(this.ctx);e=o.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var h=i.tooltipUtil.getHoverMarkerSize(e);if(a[e]&&(r=a[e][t][0],s=a[e][t][1]),!isNaN(r)){var c=i.tooltipUtil.getAllMarkers();if(c.length)for(var d=0;d<n.globals.series.length;d++){var u=a[d];if(n.globals.comboCharts&&void 0===u&&c.splice(d,0,null),u&&u.length){var p=a[d][t][1],f=void 0;c[d].setAttribute("cx",r);var g=c[d].getAttribute("shape");if("rangeArea"===n.config.chart.type&&!n.globals.comboCharts){var m=t+n.globals.series[d].length;f=a[d][m][1],p-=Math.abs(p-f)/2}if(null!==p&&!isNaN(p)&&p<n.globals.gridHeight+h&&p+h>0){var b=l.getMarkerPath(r,p,g,h);c[d].setAttribute("d",b)}else c[d].setAttribute("d","")}}this.moveXCrosshairs(r),i.fixedTooltip||this.moveTooltip(r,s||n.globals.gridHeight,h)}}},{key:"moveStickyTooltipOverBars",value:function(t,e){var i=this.w,n=this.ttCtx,r=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length;i.config.chart.stacked&&(r=i.globals.barGroups.length);var s=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1;i.globals.isBarHorizontal&&(s=new $i(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(s,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"']"));a||"number"!=typeof e||(a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"']")));var o=a?parseFloat(a.getAttribute("cx")):0,l=a?parseFloat(a.getAttribute("cy")):0,h=a?parseFloat(a.getAttribute("barWidth")):0,c=n.getElGrid().getBoundingClientRect(),d=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(a&&!d&&(o-=r%2!=0?h/2:0),a&&d&&(o-=h/2)):i.globals.isBarHorizontal||(o=n.xAxisTicksPositions[t-1]+n.dataPointsDividedWidth/2,isNaN(o)&&(o=n.xAxisTicksPositions[t]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?l-=n.tooltipRect.ttHeight:i.config.tooltip.followCursor?l=n.e.clientY-c.top-n.tooltipRect.ttHeight/2:l+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(l=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(o),n.fixedTooltip||this.moveTooltip(o,l||i.globals.gridHeight)}}]),t}(),An=function(){function t(e){s(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new kn(e)}return o(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new Mi(this.ctx),i=new Wi(this.ctx),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=x(n),t.config.chart.stacked&&n.sort((function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))}));for(var r=0;r<n.length;r++){var s=n[r].querySelector(".apexcharts-series-markers-wrap");if(null!==s){var a=void 0,o="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(o+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:o,seriesIndex:Number(s.getAttribute("data:realIndex"))});(a=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(a.node),s.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w;"bubble"!==r.config.chart.type&&this.newPointSize(t,e);var s=e.getAttribute("cx"),a=e.getAttribute("cy");if(null!==i&&null!==n&&(s=i,a=n),this.tooltipPosition.moveXCrosshairs(s),!this.fixedTooltip){if("radar"===r.config.chart.type){var o=this.ttCtx.getElGrid().getBoundingClientRect();s=this.ttCtx.e.clientX-o.left}this.tooltipPosition.moveTooltip(s,a,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,n=this.ttCtx,r=t,s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=e.config.markers.hover.size,o=0;o<s.length;o++){var l=s[o].getAttribute("rel"),h=s[o].getAttribute("index");if(void 0===a&&(a=e.globals.markers.size[h]+e.config.markers.hover.sizeOffset),r===parseInt(l,10)){i.newPointSize(r,s[o]);var c=s[o].getAttribute("cx"),d=s[o].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(c),n.fixedTooltip||i.tooltipPosition.moveTooltip(c,d,a)}else i.oldPointSize(s[o])}}},{key:"newPointSize",value:function(t,e){var i=this.w,n=i.config.markers.hover.size,r=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==r.getAttribute("default-marker-size")){var s=parseInt(r.getAttribute("index"),10);void 0===n&&(n=i.globals.markers.size[s]+i.config.markers.hover.sizeOffset),n<0&&(n=0);var a=this.ttCtx.tooltipUtil.getPathFromPoint(e,n);e.setAttribute("d",a)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(t,e);t.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));if(k.isNumber(i)&&i>0){var n=this.ttCtx.tooltipUtil.getPathFromPoint(t[e],i);t[e].setAttribute("d",n)}else t[e].setAttribute("d","M0,0")}}}]),t}(),Sn=function(){function t(e){s(this,t),this.w=e.w;var i=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&"rangeBar"===i.config.chart.type&&i.config.plotOptions.bar.rangeBarGroupRows}return o(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,n=t.x,r=t.y,s=t.type,a=this.ttCtx,o=this.w;if(e.target.classList.contains("apexcharts-".concat(s,"-rect"))){var l=this.getAttr(e,"i"),h=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),d=this.getAttr(e,"cy"),u=this.getAttr(e,"width"),p=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:h,shared:!1,e}),o.globals.capturedSeriesIndex=l,o.globals.capturedDataPointIndex=h,n=c+a.tooltipRect.ttWidth/2+u,r=d+a.tooltipRect.ttHeight/2-p/2,a.tooltipPosition.moveXCrosshairs(c+u/2),n>o.globals.gridWidth/2&&(n=c-a.tooltipRect.ttWidth/2+u),a.w.config.tooltip.followCursor){var f=o.globals.dom.elWrap.getBoundingClientRect();n=o.globals.clientX-f.left-(n>o.globals.gridWidth/2?a.tooltipRect.ttWidth:0),r=o.globals.clientY-f.top-(r>o.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:n,y:r}}},{key:"handleMarkerTooltip",value:function(t){var e,i,n=t.e,r=t.opt,s=t.x,a=t.y,o=this.w,l=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var h=parseInt(r.paths.getAttribute("cx"),10),c=parseInt(r.paths.getAttribute("cy"),10),d=parseFloat(r.paths.getAttribute("val"));if(i=parseInt(r.paths.getAttribute("rel"),10),e=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var u=k.findAncestor(r.paths,"apexcharts-series");u&&(e=parseInt(u.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:e,j:i,shared:!l.showOnIntersect&&o.config.tooltip.shared,e:n}),"mouseup"===n.type&&l.markerClick(n,e,i),o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=i,s=h,a=c+o.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var p=l.getElGrid().getBoundingClientRect();a=l.e.clientY+o.globals.translateY-p.top}d<0&&(a=c),l.marker.enlargeCurrentPoint(i,r.paths,s,a)}return{x:s,y:a}}},{key:"handleBarTooltip",value:function(t){var e,i,n=t.e,r=t.opt,s=this.w,a=this.ttCtx,o=a.getElTooltip(),l=0,h=0,c=0,d=this.getBarTooltipXY({e:n,opt:r});if(null!==d.j||0!==d.barHeight||0!==d.barWidth){e=d.i;var u=d.j;if(s.globals.capturedSeriesIndex=e,s.globals.capturedDataPointIndex=u,s.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!s.config.tooltip.shared?(h=d.x,c=d.y,i=Array.isArray(s.config.stroke.width)?s.config.stroke.width[e]:s.config.stroke.width,l=h):s.globals.comboCharts||s.config.tooltip.shared||(l/=2),isNaN(c)&&(c=s.globals.svgHeight-a.tooltipRect.ttHeight),parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10),h+a.tooltipRect.ttWidth>s.globals.gridWidth?h-=a.tooltipRect.ttWidth:h<0&&(h=0),a.w.config.tooltip.followCursor){var p=a.getElGrid().getBoundingClientRect();c=a.e.clientY-p.top}null===a.tooltip&&(a.tooltip=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),s.config.tooltip.shared||(s.globals.comboBarCount>0?a.tooltipPosition.moveXCrosshairs(l+i/2):a.tooltipPosition.moveXCrosshairs(l)),!a.fixedTooltip&&(!s.config.tooltip.shared||s.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(c=c+s.globals.translateY-a.tooltipRect.ttHeight/2,o.style.left=h+s.globals.translateX+"px",o.style.top=c+"px")}}},{key:"getBarTooltipXY",value:function(t){var e=this,i=t.e,n=t.opt,r=this.w,s=null,a=this.ttCtx,o=0,l=0,h=0,c=0,d=0,u=i.target.classList;if(u.contains("apexcharts-bar-area")||u.contains("apexcharts-candlestick-area")||u.contains("apexcharts-boxPlot-area")||u.contains("apexcharts-rangebar-area")){var p=i.target,f=p.getBoundingClientRect(),g=n.elGrid.getBoundingClientRect(),m=f.height;d=f.height;var b=f.width,x=parseInt(p.getAttribute("cx"),10),v=parseInt(p.getAttribute("cy"),10);c=parseFloat(p.getAttribute("barWidth"));var y="touchmove"===i.type?i.touches[0].clientX:i.clientX;s=parseInt(p.getAttribute("j"),10),o=parseInt(p.parentNode.getAttribute("rel"),10)-1;var w=p.getAttribute("data-range-y1"),k=p.getAttribute("data-range-y2");r.globals.comboCharts&&(o=parseInt(p.parentNode.getAttribute("data:realIndex"),10));var A=function(t){return r.globals.isXNumeric?x-b/2:e.isVerticalGroupedRangeBar?x+b/2:x-a.dataPointsDividedWidth+b/2},S=function(){return v-a.dataPointsDividedHeight+m/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:o,j:s,y1:w?parseInt(w,10):null,y2:k?parseInt(k,10):null,shared:!a.showOnIntersect&&r.config.tooltip.shared,e:i}),r.config.tooltip.followCursor?r.globals.isBarHorizontal?(l=y-g.left+15,h=S()):(l=A(),h=i.clientY-g.top-a.tooltipRect.ttHeight/2-15):r.globals.isBarHorizontal?((l=x)<a.xyRatios.baseLineInvertedY&&(l=x-a.tooltipRect.ttWidth),h=S()):(l=A(),h=v)}return{x:l,y:h,barHeight:d,barWidth:c,i:o,j:s}}}]),t}(),Cn=function(){function t(e){s(this,t),this.w=e.w,this.ttCtx=e}return o(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=0;i<t.config.yaxis.length;i++){var n=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=n?t.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),s=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+t.config.tooltip.theme),s.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var n=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==n&&"barWidth"===t.config.xaxis.crosshairs.width){var r=parseFloat(n.getAttribute("barWidth"));e.xcrosshairsWidth=r}else if("tickWidth"===t.config.xaxis.crosshairs.width){var s=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/s}}else if("tickWidth"===t.config.xaxis.crosshairs.width){var a=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/a}else if("barWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o){var l=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=l}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var n=this.ttCtx,r=this.w,s=r.globals,a=s.seriesYAxisMap[t];if(n.yaxisTooltips[t]&&a.length>0){var o=s.yLabelFormatters[t],l=n.getElGrid().getBoundingClientRect(),h=a[0],c=0;i.yRatio.length>1&&(c=h);var d=(e-l.top)*i.yRatio[c],u=s.maxYArr[h]-s.minYArr[h],p=s.minYArr[h]+(u-d);r.config.yaxis[t].reversed&&(p=s.maxYArr[h]-(u-d)),n.tooltipPosition.moveYCrosshairs(e-l.top),n.yaxisTooltipText[t].innerHTML=o(p),n.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),_n=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new yn(this),this.tooltipLabels=new wn(this),this.tooltipPosition=new kn(this),this.marker=new An(this),this.intersect=new Sn(this),this.axesTooltip=new Cn(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return o(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map((function(t,i){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)})),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&i.classList.add(e.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new Ji(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var r=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,n=[],r=this.getElTooltip(),s=function(s){var a=document.createElement("div");a.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(s)),a.style.order=i.config.tooltip.inverseOrder?t-s:s+1;var o=document.createElement("span");o.classList.add("apexcharts-tooltip-marker"),o.style.color=i.globals.colors[s];var l=i.config.markers.shape,h=l;Array.isArray(l)&&(h=l[s]),o.setAttribute("shape",h),a.appendChild(o);var c=document.createElement("div");c.classList.add("apexcharts-tooltip-text"),c.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,c.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach((function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(i);var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(n),c.appendChild(e)})),a.appendChild(c),r.appendChild(a),n.push(a)},a=0;a<t;a++)s(a);return n}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),n=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),r="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,s=t.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var o,l=[],h=[],c={hoverArea:s,elGrid:a,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(r?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),o&&o.length))for(var d=0;d<o.length;d++)l.push(o[d].getAttribute("cy")),h.push(o[d].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([s],c);else if(n&&!t.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(c);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var u=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(u,c)}if(this.showOnIntersect){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,c),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(c)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),n=i.width+10,r=i.height+10,s=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,o=this.tConfig.fixed.position.toLowerCase();return o.indexOf("right")>-1&&(s=s+t.globals.svgWidth-n+10),o.indexOf("bottom")>-1&&(a=a+t.globals.svgHeight-r-10),e.style.left=s+"px",e.style.top=a+"px",{x:s,y:a,ttWidth:n,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,n=function(n){var r={paths:t[n],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(e){return t[n].addEventListener(e,i.onSeriesHover.bind(i,r),{capture:!1,passive:!0})}))},r=0;r<t.length;r++)n(r)}},{key:"onSeriesHover",value:function(t,e){var i=this,n=Date.now()-this.lastHoverTime;n>=20?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(t,e)}),20-n))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var n=[],r=this.w;r.config.chart.group&&(n=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||0===r.globals.dataPoints)||(n.length?n.forEach((function(n){var r=i.getElTooltip(n),s={paths:t.paths,tooltipEl:r,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:n.w.globals.tooltip.ttItems};n.w.globals.minX===i.w.globals.minX&&n.w.globals.maxX===i.w.globals.maxX&&n.w.globals.tooltip.seriesHoverByContext({chartCtx:n,ttCtx:n.w.globals.tooltip,opt:s,e})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,n=t.opt,r=t.e,s=e.w,a=this.getElTooltip(e);a&&(i.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},i.e=r,!i.tooltipUtil.hasBars()||s.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new $i(e).toggleSeriesOnHover(r,r.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),s.globals.axisCharts?i.axisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,i,n=t.e,r=t.opt,s=this.w,a=r.elGrid.getBoundingClientRect(),o="touchmove"===n.type?n.touches[0].clientX:n.clientX,l="touchmove"===n.type?n.touches[0].clientY:n.clientY;if(this.clientY=l,this.clientX=o,s.globals.capturedSeriesIndex=-1,s.globals.capturedDataPointIndex=-1,l<a.top||l>a.top+a.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!s.config.tooltip.shared){var h=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(r)}var c=this.getElTooltip(),d=this.getElXCrosshairs(),u=[];s.config.chart.group&&(u=this.ctx.getSyncedCharts());var p=s.globals.xyCharts||"bar"===s.config.chart.type&&!s.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||s.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===n.type||"touchmove"===n.type||"mouseup"===n.type){if(s.globals.collapsedSeries.length+s.globals.ancillaryCollapsedSeries.length===s.globals.series.length)return;null!==d&&d.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter((function(t){return!0===t}));if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),p&&!this.showOnIntersect||u.length>1)this.handleStickyTooltip(n,o,l,r);else if("heatmap"===s.config.chart.type||"treemap"===s.config.chart.type){var g=this.intersect.handleHeatTreeTooltip({e:n,opt:r,x:e,y:i,type:s.config.chart.type});e=g.x,i=g.y,c.style.left=e+"px",c.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:r,x:e,y:i});if(this.yaxisTooltips.length)for(var m=0;m<s.config.yaxis.length;m++)this.axesTooltip.drawYaxisTooltipText(m,l,this.xyRatios);s.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),r.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==n.type&&"touchend"!==n.type||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,n=t.tooltipRect,r=this.w,s=i.paths.getAttribute("rel"),a=this.getElTooltip(),o=r.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){r.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(s,10)-1,shared:!1});var l=r.globals.clientX-o.left-n.ttWidth/2,h=r.globals.clientY-o.top-n.ttHeight-10;if(a.style.left=l+"px",a.style.top=h+"px",r.config.legend.tooltipHoverFormatter){var c=s-1,d=(0,r.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:r});this.legendLabels[c].innerHTML=d}}else"mouseout"!==e.type&&"touchend"!==e.type||(a.classList.remove("apexcharts-active"),r.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})))}},{key:"handleStickyTooltip",value:function(t,e,i,n){var r=this.w,s=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:e,clientY:i}),a=s.j,o=s.capturedSeries;r.globals.collapsedSeriesIndices.includes(o)&&(o=null);var l=n.elGrid.getBoundingClientRect();if(s.hoverX<0||s.hoverX>l.width)this.handleMouseOut(n);else if(null!==o)this.handleStickyCapturedSeries(t,o,n,a);else if(this.tooltipUtil.isXoverlap(a)||r.globals.isBarHorizontal){var h=r.globals.series.findIndex((function(t,e){return!r.globals.collapsedSeriesIndices.includes(e)}));this.create(t,this,h,a,n.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(t,e,i,n){var r=this.w;if(this.tConfig.shared||null!==r.globals.series[e][n]){if(void 0!==r.globals.series[e][n])this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,n,i.ttItems):this.create(t,this,e,n,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(n)){var s=r.globals.series.findIndex((function(t,e){return!r.globals.collapsedSeriesIndices.includes(e)}));this.create(t,this,s,n,i.ttItems)}}else this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new Mi(this.ctx),i=t.globals.dom.Paper.find(".apexcharts-bar-area"),n=0;n<i.length;n++)e.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(e.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"markerClick",value:function(t,e,i){var n=this.w;"function"==typeof n.config.chart.events.markerClick&&n.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}])}},{key:"create",value:function(t,e,i,n,r){var s,a,o,l,h,c,d,u,p,f,m,b,x,v,y,w,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,A=this.w,S=e;"mouseup"===t.type&&this.markerClick(t,i,n),null===k&&(k=this.tConfig.shared);var C=this.tooltipUtil.hasMarkers(i),_=this.tooltipUtil.getElBars(),M=function(){A.globals.markers.largestSize>0?S.marker.enlargePoints(n):S.tooltipPosition.moveDynamicPointsOnHover(n)};if(A.config.legend.tooltipHoverFormatter){var T=A.config.legend.tooltipHoverFormatter,E=Array.from(this.legendLabels);E.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}));for(var N=0;N<E.length;N++){var P=E[N],L=parseInt(P.getAttribute("i"),10),I=decodeURIComponent(P.getAttribute("data:default-text")),R=T(I,{seriesIndex:k?L:i,dataPointIndex:n,w:A});if(k)P.innerHTML=A.globals.collapsedSeriesIndices.indexOf(L)<0?R:I;else if(P.innerHTML=L===i?R:I,i===L)break}}var O=g(g({ttItems:r,i,j:n},void 0!==(null===(s=A.globals.seriesRange)||void 0===s||null===(a=s[i])||void 0===a||null===(o=a[n])||void 0===o||null===(l=o.y[0])||void 0===l?void 0:l.y1)&&{y1:null===(h=A.globals.seriesRange)||void 0===h||null===(c=h[i])||void 0===c||null===(d=c[n])||void 0===d||null===(u=d.y[0])||void 0===u?void 0:u.y1}),void 0!==(null===(p=A.globals.seriesRange)||void 0===p||null===(f=p[i])||void 0===f||null===(m=f[n])||void 0===m||null===(b=m.y[0])||void 0===b?void 0:b.y2)&&{y2:null===(x=A.globals.seriesRange)||void 0===x||null===(v=x[i])||void 0===v||null===(y=v[n])||void 0===y||null===(w=y.y[0])||void 0===w?void 0:w.y2});if(k){if(S.tooltipLabels.drawSeriesTexts(g(g({},O),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),C)M();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(_),this.barSeriesHeight>0)){var D=new Mi(this.ctx),z=A.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),S.tooltipPosition.moveStickyTooltipOverBars(n,i),S.tooltipUtil.getAllMarkers(!0).length&&M();for(var F=0;F<z.length;F++)D.pathMouseEnter(z[F])}}else S.tooltipLabels.drawSeriesTexts(g({shared:!1},O)),this.tooltipUtil.hasBars()&&S.tooltipPosition.moveStickyTooltipOverBars(n,i),C&&S.tooltipPosition.moveMarkers(i,n)}}]),t}(),Mn=function(){function t(e){s(this,t),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return o(t,[{key:"handleBarDataLabels",value:function(t){var e,i,n=t.x,r=t.y,s=t.y1,a=t.y2,o=t.i,l=t.j,h=t.realIndex,c=t.columnGroupIndex,d=t.series,u=t.barHeight,p=t.barWidth,f=t.barXPosition,m=t.barYPosition,b=t.visibleSeries,x=t.renderedPath,v=this.w,y=new Mi(this.barCtx.ctx),w=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth;v.globals.isXNumeric&&!v.globals.isBarHorizontal?(e=n+parseFloat(p*(b+1)),i=r+parseFloat(u*(b+1))-w):(e=n+parseFloat(p*b),i=r+parseFloat(u*b));var k,A,S=null,C=n,_=r,M=v.config.dataLabels,T=this.barCtx.barOptions.dataLabels,E=this.barCtx.barOptions.dataLabels.total;void 0!==m&&this.barCtx.isRangeBar&&(i=m,_=m),void 0!==f&&this.barCtx.isVerticalGroupedRangeBar&&(e=f,C=f);var N=M.offsetX,P=M.offsetY,L={width:0,height:0};if(v.config.dataLabels.enabled){var I=v.globals.series[o][l];L=y.getTextRects(v.config.dataLabels.formatter?v.config.dataLabels.formatter(I,g(g({},v),{},{seriesIndex:o,dataPointIndex:l,w:v})):v.globals.yLabelFormatters[0](I),parseFloat(M.style.fontSize))}var R={x:n,y:r,i:o,j:l,realIndex:h,columnGroupIndex:c,renderedPath:x,bcx:e,bcy:i,barHeight:u,barWidth:p,textRects:L,strokeWidth:w,dataLabelsX:C,dataLabelsY:_,dataLabelsConfig:M,barDataLabelsConfig:T,barTotalDataLabelsConfig:E,offX:N,offY:P};return A=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(R):this.calculateColumnsDataLabelsPosition(R),x.attr({cy:A.bcy,cx:A.bcx,j:l,val:v.globals.series[o][l],barHeight:u,barWidth:p}),k=this.drawCalculatedDataLabels({x:A.dataLabelsX,y:A.dataLabelsY,val:this.barCtx.isRangeBar?[s,a]:"100%"===v.config.chart.stackType?d[h][l]:v.globals.series[h][l],i:h,j:l,barWidth:p,barHeight:u,textRects:L,dataLabelsConfig:M}),v.config.chart.stacked&&E.enabled&&(S=this.drawTotalDataLabels({x:A.totalDataLabelsX,y:A.totalDataLabelsY,barWidth:p,barHeight:u,realIndex:h,textAnchor:A.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:h,j:l}),dataLabelsConfig:M,barTotalDataLabelsConfig:E})),{dataLabels:k,totalDataLabels:S}}},{key:"getStackedTotalDataLabel",value:function(t){var e=t.realIndex,i=t.j,n=this.w,r=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(r=this.totalFormatter(r,g(g({},n),{},{seriesIndex:e,dataPointIndex:i,w:n}))),r}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e=this,i=this.w,n=t.i,r=t.j,s=t.realIndex;t.columnGroupIndex;var a,o,l=t.y,h=t.bcx,c=t.barWidth,d=t.barHeight,u=t.textRects,p=t.dataLabelsX,f=t.dataLabelsY,g=t.dataLabelsConfig,m=t.barDataLabelsConfig,b=t.barTotalDataLabelsConfig,x=t.strokeWidth,v=t.offX,y=t.offY,w=h;d=Math.abs(d);var k="vertical"===i.config.plotOptions.bar.dataLabels.orientation,A=this.barCtx.barHelpers.getZeroValueEncounters({i:n,j:r}).zeroEncounters;h-=x/2;var S=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?p+=c/2:(p=i.globals.isXNumeric?h-c/2+v:h-S+c/2+v,A>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(p-=c*A)),k&&(p=p+u.height/2-x/2-2);var C=i.globals.series[n][r]<0,_=l;switch(this.barCtx.isReversed&&(_=l+(C?d:-d)),m.position){case"center":f=k?C?_-d/2+y:_+d/2-y:C?_-d/2+u.height/2+y:_+d/2+u.height/2-y;break;case"bottom":f=k?C?_-d+y:_+d-y:C?_-d+u.height+x+y:_+d-u.height/2+x-y;break;case"top":f=k?C?_+y:_-y:C?_-u.height/2-y:_+u.height+y}var M=_;if(i.globals.seriesGroups.forEach((function(t){var i;null===(i=e.barCtx[t.join(",")])||void 0===i||i.prevY.forEach((function(t){M=C?Math.max(t[r],M):Math.min(t[r],M)}))})),this.barCtx.lastActiveBarSerieIndex===s&&b.enabled){var T=new Mi(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:s,j:r}),g.fontSize);a=C?M-T.height/2-y-b.offsetY+18:M+T.height+y+b.offsetY-18;var E=S;o=w+(i.globals.isXNumeric?-c*i.globals.barGroups.length/2:i.globals.barGroups.length*c/2-(i.globals.barGroups.length-1)*c-E)+b.offsetX}return i.config.chart.stacked||(f<0?f=0+x:f+u.height/3>i.globals.gridHeight&&(f=i.globals.gridHeight-x)),{bcx:h,bcy:l,dataLabelsX:p,dataLabelsY:f,totalDataLabelsX:o,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this,i=this.w,n=t.x,r=t.i,s=t.j,a=t.realIndex,o=t.bcy,l=t.barHeight,h=t.barWidth,c=t.textRects,d=t.dataLabelsX,u=t.strokeWidth,p=t.dataLabelsConfig,f=t.barDataLabelsConfig,g=t.barTotalDataLabelsConfig,m=t.offX,b=t.offY,x=i.globals.gridHeight/i.globals.dataPoints;h=Math.abs(h);var v,y,w=o-(this.barCtx.isRangeBar?0:x)+l/2+c.height/2+b-3,k="start",A=i.globals.series[r][s]<0,S=n;switch(this.barCtx.isReversed&&(S=n+(A?-h:h),k=A?"start":"end"),f.position){case"center":d=A?S+h/2-m:Math.max(c.width/2,S-h/2)+m;break;case"bottom":d=A?S+h-u-m:S-h+u+m;break;case"top":d=A?S-u-m:S-u+m}var C=S;if(i.globals.seriesGroups.forEach((function(t){var i;null===(i=e.barCtx[t.join(",")])||void 0===i||i.prevX.forEach((function(t){C=A?Math.min(t[s],C):Math.max(t[s],C)}))})),this.barCtx.lastActiveBarSerieIndex===a&&g.enabled){var _=new Mi(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:s}),p.fontSize);A?(v=C-u-m-g.offsetX,k="end"):v=C+m+g.offsetX+(this.barCtx.isReversed?-(h+u):u),y=w-c.height/2+_.height/2+g.offsetY+u,i.globals.barGroups.length>1&&(y-=i.globals.barGroups.length/2*(l/2))}return i.config.chart.stacked||("start"===p.textAnchor?d-c.width<0?d=A?c.width+u:u:d+c.width>i.globals.gridWidth&&(d=A?i.globals.gridWidth-u:i.globals.gridWidth-c.width-u):"middle"===p.textAnchor?d-c.width/2<0?d=c.width/2+u:d+c.width/2>i.globals.gridWidth&&(d=i.globals.gridWidth-c.width/2-u):"end"===p.textAnchor&&(d<1?d=c.width+u:d+1>i.globals.gridWidth&&(d=i.globals.gridWidth-c.width-u))),{bcx:n,bcy:o,dataLabelsX:d,dataLabelsY:w,totalDataLabelsX:v,totalDataLabelsY:y,totalDataLabelsAnchor:k}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,n=t.val,r=t.i,s=t.j,a=t.textRects,o=t.barHeight,l=t.barWidth,h=t.dataLabelsConfig,c=this.w,d="rotate(0)";"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(e,", ").concat(i,")"));var u=new Ui(this.barCtx.ctx),p=new Mi(this.barCtx.ctx),f=h.formatter,m=null,b=c.globals.collapsedSeriesIndices.indexOf(r)>-1;if(h.enabled&&!b){m=p.group({class:"apexcharts-data-labels",transform:d});var x="";void 0!==n&&(x=f(n,g(g({},c),{},{seriesIndex:r,dataPointIndex:s,w:c}))),!n&&c.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(x="");var v=c.globals.series[r][s]<0,y=c.config.plotOptions.bar.dataLabels.position;"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&("top"===y&&(h.textAnchor=v?"end":"start"),"center"===y&&(h.textAnchor="middle"),"bottom"===y&&(h.textAnchor=v?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&l<p.getTextRects(x,parseFloat(h.style.fontSize)).width&&(x=""),c.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(l)&&(x=""):a.height/1.6>Math.abs(o)&&(x=""));var w=g({},h);this.barCtx.isHorizontal&&n<0&&("start"===h.textAnchor?w.textAnchor="end":"end"===h.textAnchor&&(w.textAnchor="start")),u.plotDataLabelsText({x:e,y:i,text:x,i:r,j:s,parent:m,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}},{key:"drawTotalDataLabels",value:function(t){var e=t.x,i=t.y,n=t.val,r=t.realIndex,s=t.textAnchor,a=t.barTotalDataLabelsConfig;this.w;var o,l=new Mi(this.barCtx.ctx);return a.enabled&&void 0!==e&&void 0!==i&&this.barCtx.lastActiveBarSerieIndex===r&&(o=l.drawText({x:e,y:i,foreColor:a.style.color,text:n,textAnchor:s,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight})),o}}]),t}(),Tn=function(){function t(e){s(this,t),this.w=e.w,this.barCtx=e}return o(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var n=0;n<t[i].length;n++)e.globals.seriesX[i][n]>e.globals.minX&&e.globals.seriesX[i][n]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(e.globals.series),0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(t){var e,i,n,r,s,a,o,l,h=this.w,c=h.globals.dataPoints;this.barCtx.isRangeBar&&(c=h.globals.labels.length);var d=this.barCtx.seriesLen;if(h.config.plotOptions.bar.rangeBarGroupRows&&(d=1),this.barCtx.isHorizontal)s=(n=h.globals.gridHeight/c)/d,h.globals.isXNumeric&&(s=(n=h.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),s=s*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(s=parseInt(this.barCtx.barOptions.barHeight,10)),l=this.barCtx.baseLineInvertedY+h.globals.padHorizontal+(this.barCtx.isReversed?h.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(l=h.globals.gridWidth/2),i=(n-s*this.barCtx.seriesLen)/2;else{if(r=h.globals.gridWidth/this.barCtx.visibleItems,h.config.xaxis.convertedCatToNumeric&&(r=h.globals.gridWidth/h.globals.dataPoints),a=r/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100,h.globals.isXNumeric){var u=this.barCtx.xRatio;h.globals.minXDiff&&.5!==h.globals.minXDiff&&h.globals.minXDiff/u>0&&(r=h.globals.minXDiff/u),(a=r/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(a=parseInt(this.barCtx.barOptions.columnWidth,10)),o=h.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?h.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),e=h.globals.isXNumeric?this.barCtx.getBarXForNumericXAxis({x:e,j:0,realIndex:t,barWidth:a}).x:h.globals.padHorizontal+k.noExponents(r-a*this.barCtx.seriesLen)/2}return h.globals.barHeight=s,h.globals.barWidth=a,{x:e,y:i,yDivision:n,xDivision:r,barHeight:s,barWidth:a,zeroH:o,zeroW:l}}},{key:"initializeStackedPrevVars",value:function(t){t.w.globals.seriesGroups.forEach((function(e){t[e]||(t[e]={}),t[e].prevY=[],t[e].prevX=[],t[e].prevYF=[],t[e].prevXF=[],t[e].prevYVal=[],t[e].prevXVal=[]}))}},{key:"initializeStackedXYVars",value:function(t){t.w.globals.seriesGroups.forEach((function(e){t[e]||(t[e]={}),t[e].xArrj=[],t[e].xArrjF=[],t[e].xArrjVal=[],t[e].yArrj=[],t[e].yArrjF=[],t[e].yArrjVal=[]}))}},{key:"getPathFillColor",value:function(t,e,i,n){var r,s,a,o,l=this.w,h=this.barCtx.ctx.fill,c=null,d=this.barCtx.barOptions.distributed?i:e,u=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(n){t[e][i]>=n.from&&t[e][i]<=n.to&&(c=n.color,u=!0)})),{color:h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?d:n,dataPointIndex:i,color:c,value:t[e][i],fillConfig:null===(r=l.config.series[e].data[i])||void 0===r?void 0:r.fill,fillType:null!==(s=l.config.series[e].data[i])&&void 0!==s&&null!==(a=s.fill)&&void 0!==a&&a.type?null===(o=l.config.series[e].data[i])||void 0===o?void 0:o.fill.type:Array.isArray(l.config.fill.type)?l.config.fill.type[n]:l.config.fill.type}),useRangeColor:u}}},{key:"getStrokeWidth",value:function(t,e,i){var n=0,r=this.w;return this.barCtx.series[t][e]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,r.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"createBorderRadiusArr",value:function(t){var e,i=this.w,n=!this.w.config.chart.stacked||i.config.plotOptions.bar.borderRadius<=0,r=t.length,s=0|(null===(e=t[0])||void 0===e?void 0:e.length),a=Array.from({length:r},(function(){return Array(s).fill(n?"top":"none")}));if(n)return a;for(var o=0;o<s;o++){for(var h=[],c=[],d=0,u=0;u<r;u++){var p=t[u][o];p>0?(h.push(u),d++):p<0&&(c.push(u),d++)}if(h.length>0&&0===c.length)if(1===h.length)a[h[0]][o]="both";else{var f,g=h[0],m=h[h.length-1],b=l(h);try{for(b.s();!(f=b.n()).done;){var x=f.value;a[x][o]=x===g?"bottom":x===m?"top":"none"}}catch(t){b.e(t)}finally{b.f()}}else if(c.length>0&&0===h.length)if(1===c.length)a[c[0]][o]="both";else{var v,y=Math.max.apply(Math,c),w=Math.min.apply(Math,c),k=l(c);try{for(k.s();!(v=k.n()).done;){var A=v.value;a[A][o]=A===y?"bottom":A===w?"top":"none"}}catch(t){k.e(t)}finally{k.f()}}else if(h.length>0&&c.length>0){var S,C=h[h.length-1],_=l(h);try{for(_.s();!(S=_.n()).done;){var M=S.value;a[M][o]=M===C?"top":"none"}}catch(t){_.e(t)}finally{_.f()}var T,E=Math.max.apply(Math,c),N=l(c);try{for(N.s();!(T=N.n()).done;){var P=T.value;a[P][o]=P===E?"bottom":"none"}}catch(t){N.e(t)}finally{N.f()}}else 1===d&&(a[h[0]||c[0]][o]="both")}return a}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,n=t.x1,r=t.x2,s=t.y1,a=t.y2,o=t.elSeries,l=this.w,h=new Mi(this.barCtx.ctx),c=new $i(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&c===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[e],u=h.drawRect(void 0!==n?n:0,void 0!==s?s:0,void 0!==r?r:l.globals.gridWidth,void 0!==a?a:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);o.add(u),u.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e,i=t.barWidth,n=t.barXPosition,r=t.y1,s=t.y2,a=t.strokeWidth,o=t.isReversed,l=t.series,h=t.seriesGroup,c=t.realIndex,d=t.i,u=t.j,p=t.w,f=new Mi(this.barCtx.ctx);(a=Array.isArray(a)?a[c]:a)||(a=0);var g=i,m=n;null!==(e=p.config.series[c].data[u])&&void 0!==e&&e.columnWidthOffset&&(m=n-p.config.series[c].data[u].columnWidthOffset/2,g=i+p.config.series[c].data[u].columnWidthOffset);var b=a/2,x=m+b,v=m+g-b,y=(l[d][u]>=0?1:-1)*(o?-1:1);r+=.001-b*y,s+=.001+b*y;var w=f.move(x,r),k=f.move(x,r),A=f.line(v,r);if(p.globals.previousPaths.length>0&&(k=this.barCtx.getPreviousPath(c,u,!1)),w=w+f.line(x,s)+f.line(v,s)+A+("around"===p.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[c][u]?" Z":" z"),k=k+f.line(x,r)+A+A+A+A+A+f.line(x,r)+("around"===p.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[c][u]?" Z":" z"),"none"!==this.arrBorderRadius[c][u]&&(w=f.roundPathCorners(w,p.config.plotOptions.bar.borderRadius)),p.config.chart.stacked){var S=this.barCtx;(S=this.barCtx[h]).yArrj.push(s-b*y),S.yArrjF.push(Math.abs(r-s+a*y)),S.yArrjVal.push(this.barCtx.series[d][u])}return{pathTo:w,pathFrom:k}}},{key:"getBarpaths",value:function(t){var e,i=t.barYPosition,n=t.barHeight,r=t.x1,s=t.x2,a=t.strokeWidth,o=t.isReversed,l=t.series,h=t.seriesGroup,c=t.realIndex,d=t.i,u=t.j,p=t.w,f=new Mi(this.barCtx.ctx);(a=Array.isArray(a)?a[c]:a)||(a=0);var g=i,m=n;null!==(e=p.config.series[c].data[u])&&void 0!==e&&e.barHeightOffset&&(g=i-p.config.series[c].data[u].barHeightOffset/2,m=n+p.config.series[c].data[u].barHeightOffset);var b=a/2,x=g+b,v=g+m-b,y=(l[d][u]>=0?1:-1)*(o?-1:1);r+=.001+b*y,s+=.001-b*y;var w=f.move(r,x),k=f.move(r,x);p.globals.previousPaths.length>0&&(k=this.barCtx.getPreviousPath(c,u,!1));var A=f.line(r,v);if(w=w+f.line(s,x)+f.line(s,v)+A+("around"===p.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[c][u]?" Z":" z"),k=k+f.line(r,x)+A+A+A+A+A+f.line(r,x)+("around"===p.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[c][u]?" Z":" z"),"none"!==this.arrBorderRadius[c][u]&&(w=f.roundPathCorners(w,p.config.plotOptions.bar.borderRadius)),p.config.chart.stacked){var S=this.barCtx;(S=this.barCtx[h]).xArrj.push(s+b*y),S.xArrjF.push(Math.abs(r-s-a*y)),S.xArrjVal.push(this.barCtx.series[d][u])}return{pathTo:w,pathFrom:k}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,n=0;n<e.length;n++){for(var r=0,s=0;s<e[i.globals.maxValsInArrayIndex].length;s++)r+=e[n][s];0===r&&this.barCtx.zeroSerieses.push(n)}}},{key:"getXForValue",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:e;return null!=t&&(i=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?null:e;return null!=t&&(n=e-t/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[i]:0)),n}},{key:"getGoalValues",value:function(t,e,i,n,r,s){var a=this,o=this.w,l=[],h=function(n,r){var o;l.push((c(o={},t,"x"===t?a.getXForValue(n,e,!1):a.getYForValue(n,i,s,!1)),c(o,"attrs",r),o))};if(o.globals.seriesGoals[n]&&o.globals.seriesGoals[n][r]&&Array.isArray(o.globals.seriesGoals[n][r])&&o.globals.seriesGoals[n][r].forEach((function(t){h(t.value,t)})),this.barCtx.barOptions.isDumbbell&&o.globals.seriesRange.length){var d=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:o.globals.colors,u={strokeHeight:"x"===t?0:o.globals.markers.size[n],strokeWidth:"x"===t?o.globals.markers.size[n]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(d[n])?d[n][0]:d[n]};h(o.globals.seriesRangeStart[n][r],u),h(o.globals.seriesRangeEnd[n][r],g(g({},u),{},{strokeColor:Array.isArray(d[n])?d[n][1]:d[n]}))}return l}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,n=t.goalX,r=t.goalY,s=t.barWidth,a=t.barHeight,o=new Mi(this.barCtx.ctx),l=o.group({className:"apexcharts-bar-goals-groups"});l.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:l.node}),l.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var h=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach((function(t){if(t.x>=-1&&t.x<=o.w.globals.gridWidth+1){var e=void 0!==t.attrs.strokeHeight?t.attrs.strokeHeight:a/2,n=i+e+a/2;h=o.drawLine(t.x,n-2*e,t.x,n,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeWidth?t.attrs.strokeWidth:2,t.attrs.strokeLineCap),l.add(h)}})):Array.isArray(r)&&r.forEach((function(t){if(t.y>=-1&&t.y<=o.w.globals.gridHeight+1){var i=void 0!==t.attrs.strokeWidth?t.attrs.strokeWidth:s/2,n=e+i+s/2;h=o.drawLine(n-2*i,t.y,n,t.y,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeHeight?t.attrs.strokeHeight:2,t.attrs.strokeLineCap),l.add(h)}})),l}},{key:"drawBarShadow",value:function(t){var e=t.prevPaths,i=t.currPaths,n=t.color,r=this.w,s=e.x,a=e.x1,o=e.barYPosition,l=i.x,h=i.x1,c=i.barYPosition,d=o+i.barHeight,u=new Mi(this.barCtx.ctx),p=new k,f=u.move(a,d)+u.line(s,d)+u.line(l,c)+u.line(h,c)+u.line(a,d)+("around"===r.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[realIndex][j]?" Z":" z");return u.drawPath({d:f,fill:p.shadeColor(.5,k.rgb2hex(n)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(t){var e,i=t.i,n=t.j,r=this.w,s=0,a=0;return(r.config.plotOptions.bar.horizontal?r.globals.series.map((function(t,e){return e})):(null===(e=r.globals.columnSeries)||void 0===e?void 0:e.i.map((function(t){return t})))||[]).forEach((function(t){var e=r.globals.seriesPercent[t][n];e&&s++,t<i&&0===e&&a++})),{nonZeroColumns:s,zeroEncounters:a}}},{key:"getGroupIndex",value:function(t){var e=this.w,i=e.globals.seriesGroups.findIndex((function(i){return i.indexOf(e.globals.seriesNames[t])>-1})),n=this.barCtx.columnGroupIndices,r=n.indexOf(i);return r<0&&(n.push(i),r=n.length-1),{groupIndex:i,columnGroupIndex:r}}}]),t}(),En=function(){function t(e,i){s(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!n.globals.isBarHorizontal&&n.globals.seriesRange.length&&n.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var r=new $i(this.ctx);this.lastActiveBarSerieIndex=r.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var a=r.getBarSeriesIndices(),o=new Ti(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map((function(t,e){return-1===a.indexOf(e)?e:-1})).filter((function(t){return-1!==t}))),this.barHelpers=new Tn(this)}return o(t,[{key:"draw",value:function(t,e){var i=this.w,n=new Mi(this.ctx),r=new Ti(this.ctx,i);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var s=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&(this.totalItems,this.barOptions.dataLabels.maxItems);for(var a=0,o=0;a<t.length;a++,o++){var l,h,c,d,u=void 0,p=void 0,f=[],m=[],b=i.globals.comboCharts?e[a]:a,x=this.barHelpers.getGroupIndex(b).columnGroupIndex,v=n.group({class:"apexcharts-series",rel:a+1,seriesName:k.escapeString(i.globals.seriesNames[b]),"data:realIndex":b});this.ctx.series.addCollapsedClassToSeries(v,b),t[a].length>0&&(this.visibleI=this.visibleI+1);var y=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[b],this.translationsIndex=b);var A=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var S=this.barHelpers.initialPositions(b);p=S.y,y=S.barHeight,h=S.yDivision,d=S.zeroW,u=S.x,w=S.barWidth,l=S.xDivision,c=S.zeroH,this.isHorizontal||m.push(u+w/2);var C=n.group({class:"apexcharts-datalabels","data:realIndex":b});i.globals.delayedElements.push({el:C.node}),C.node.classList.add("apexcharts-element-hidden");var _=n.group({class:"apexcharts-bar-goals-markers"}),M=n.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:M.node}),M.node.classList.add("apexcharts-element-hidden");for(var T=0;T<t[a].length;T++){var E=this.barHelpers.getStrokeWidth(a,T,b),N=null,P={indexes:{i:a,j:T,realIndex:b,translationsIndex:A,bc:o},x:u,y:p,strokeWidth:E,elSeries:v};this.isHorizontal?(N=this.drawBarPaths(g(g({},P),{},{barHeight:y,zeroW:d,yDivision:h})),w=this.series[a][T]/this.invertedYRatio):(N=this.drawColumnPaths(g(g({},P),{},{xDivision:l,barWidth:w,zeroH:c})),y=this.series[a][T]/this.yRatio[A]);var L=this.barHelpers.getPathFillColor(t,a,T,b);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&T>0){var I,R=this.barHelpers.drawBarShadow({color:"string"==typeof L.color&&-1===(null===(I=L.color)||void 0===I?void 0:I.indexOf("url"))?L.color:k.hexToRgba(i.globals.colors[a]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:N});M.add(R),i.config.chart.dropShadow.enabled&&new _i(this.ctx).dropShadow(R,i.config.chart.dropShadow,b)}this.pathArr.push(N);var O=this.barHelpers.drawGoalLine({barXPosition:N.barXPosition,barYPosition:N.barYPosition,goalX:N.goalX,goalY:N.goalY,barHeight:y,barWidth:w});O&&_.add(O),p=N.y,u=N.x,T>0&&m.push(u+w/2),f.push(p),this.renderSeries(g(g({realIndex:b,pathFill:L.color},L.useRangeColor?{lineFill:L.color}:{}),{},{j:T,i:a,columnGroupIndex:x,pathFrom:N.pathFrom,pathTo:N.pathTo,strokeWidth:E,elSeries:v,x:u,y:p,series:t,barHeight:Math.abs(N.barHeight?N.barHeight:y),barWidth:Math.abs(N.barWidth?N.barWidth:w),elDataLabelsWrap:C,elGoalsMarkers:_,elBarShadows:M,visibleSeries:this.visibleI,type:"bar"}))}i.globals.seriesXvalues[b]=m,i.globals.seriesYvalues[b]=f,s.add(v)}return s}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,n=t.lineFill,r=t.j,s=t.i,a=t.columnGroupIndex,o=t.pathFrom,l=t.pathTo,h=t.strokeWidth,c=t.elSeries,d=t.x,u=t.y,p=t.y1,f=t.y2,g=t.series,m=t.barHeight,b=t.barWidth,x=t.barXPosition,v=t.barYPosition,y=t.elDataLabelsWrap,w=t.elGoalsMarkers,k=t.elBarShadows,A=t.visibleSeries,S=t.type,C=t.classes,_=this.w,M=new Mi(this.ctx);if(!n){var T="function"==typeof _.globals.stroke.colors[e]?function(t){var e,i=_.config.stroke.colors;return Array.isArray(i)&&i.length>0&&((e=i[t])||(e=""),"function"==typeof e)?e({value:_.globals.series[t][r],dataPointIndex:r,w:_}):e}(e):_.globals.stroke.colors[e];n=this.barOptions.distributed?_.globals.stroke.colors[r]:T}_.config.series[s].data[r]&&_.config.series[s].data[r].strokeColor&&(n=_.config.series[s].data[r].strokeColor),this.isNullValue&&(i="none");var E=r/_.config.chart.animations.animateGradually.delay*(_.config.chart.animations.speed/_.globals.dataPoints)/2.4,N=M.renderPaths({i:s,j:r,realIndex:e,pathFrom:o,pathTo:l,stroke:n,strokeWidth:h,strokeLineCap:_.config.stroke.lineCap,fill:i,animationDelay:E,initialSpeed:_.config.chart.animations.speed,dataChangeSpeed:_.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(S,"-area ").concat(C),chartType:S});N.attr("clip-path","url(#gridRectBarMask".concat(_.globals.cuid,")"));var P=_.config.forecastDataPoints;P.count>0&&r>=_.globals.dataPoints-P.count&&(N.node.setAttribute("stroke-dasharray",P.dashArray),N.node.setAttribute("stroke-width",P.strokeWidth),N.node.setAttribute("fill-opacity",P.fillOpacity)),void 0!==p&&void 0!==f&&(N.attr("data-range-y1",p),N.attr("data-range-y2",f)),new _i(this.ctx).setSelectionFilter(N,e,r),c.add(N);var L=new Mn(this).handleBarDataLabels({x:d,y:u,y1:p,y2:f,i:s,j:r,series:g,realIndex:e,columnGroupIndex:a,barHeight:m,barWidth:b,barXPosition:x,barYPosition:v,renderedPath:N,visibleSeries:A});return null!==L.dataLabels&&y.add(L.dataLabels),L.totalDataLabels&&y.add(L.totalDataLabels),c.add(y),w&&c.add(w),k&&c.add(k),c}},{key:"drawBarPaths",value:function(t){var e,i=t.indexes,n=t.barHeight,r=t.strokeWidth,s=t.zeroW,a=t.x,o=t.y,l=t.yDivision,h=t.elSeries,c=this.w,d=i.i,u=i.j;if(c.globals.isXNumeric)e=(o=(c.globals.seriesX[d][u]-c.globals.minX)/this.invertedXRatio-n)+n*this.visibleI;else if(c.config.plotOptions.bar.hideZeroBarsWhenGrouped){var p=0,f=0;c.globals.seriesPercent.forEach((function(t,e){t[u]&&p++,e<d&&0===t[u]&&f++})),p>0&&(n=this.seriesLen*n/p),e=o+n*this.visibleI,e-=n*f}else e=o+n*this.visibleI;this.isFunnel&&(s-=(this.barHelpers.getXForValue(this.series[d][u],s)-s)/2),a=this.barHelpers.getXForValue(this.series[d][u],s);var g=this.barHelpers.getBarpaths({barYPosition:e,barHeight:n,x1:s,x2:a,strokeWidth:r,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:d,j:u,w:c});return c.globals.isXNumeric||(o+=l),this.barHelpers.barBackground({j:u,i:d,y1:e-n*this.visibleI,y2:n*this.seriesLen,elSeries:h}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x1:s,x:a,y:o,goalX:this.barHelpers.getGoalValues("x",s,null,d,u),barYPosition:e,barHeight:n}}},{key:"drawColumnPaths",value:function(t){var e,i=t.indexes,n=t.x,r=t.y,s=t.xDivision,a=t.barWidth,o=t.zeroH,l=t.strokeWidth,h=t.elSeries,c=this.w,d=i.realIndex,u=i.translationsIndex,p=i.i,f=i.j,g=i.bc;if(c.globals.isXNumeric){var m=this.getBarXForNumericXAxis({x:n,j:f,realIndex:d,barWidth:a});n=m.x,e=m.barXPosition}else if(c.config.plotOptions.bar.hideZeroBarsWhenGrouped){var b=this.barHelpers.getZeroValueEncounters({i:p,j:f}),x=b.nonZeroColumns,v=b.zeroEncounters;x>0&&(a=this.seriesLen*a/x),e=n+a*this.visibleI,e-=a*v}else e=n+a*this.visibleI;r=this.barHelpers.getYForValue(this.series[p][f],o,u);var y=this.barHelpers.getColumnPaths({barXPosition:e,barWidth:a,y1:o,y2:r,strokeWidth:l,isReversed:this.isReversed,series:this.series,realIndex:d,i:p,j:f,w:c});return c.globals.isXNumeric||(n+=s),this.barHelpers.barBackground({bc:g,j:f,i:p,x1:e-l/2-a*this.visibleI,x2:a*this.seriesLen+l/2,elSeries:h}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x:n,y:r,goalY:this.barHelpers.getGoalValues("y",null,o,p,f,u),barXPosition:e,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(t){var e=t.x,i=t.barWidth,n=t.realIndex,r=t.j,s=this.w,a=n;return s.globals.seriesX[n].length||(a=s.globals.maxValsInArrayIndex),k.isNumber(s.globals.seriesX[a][r])&&(e=(s.globals.seriesX[a][r]-s.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:e+i*this.visibleI,x:e}}},{key:"getPreviousPath",value:function(t,e){for(var i,n=this.w,r=0;r<n.globals.previousPaths.length;r++){var s=n.globals.previousPaths[r];s.paths&&s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(t,10)&&void 0!==n.globals.previousPaths[r].paths[e]&&(i=n.globals.previousPaths[r].paths[e].d)}return i}}]),t}(),Nn=function(){u(e,En);var t=h(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(t,e){var i=this,n=this.w;this.graphics=new Mi(this.ctx),this.bar=new En(this.ctx,this.xyRatios);var r=new Ti(this.ctx,n);t=r.getLogSeries(t),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===n.config.chart.stackType&&(t=n.globals.comboCharts?e.map((function(t){return n.globals.seriesPercent[t]})):n.globals.seriesPercent.slice()),this.series=t,this.barHelpers.initializeStackedPrevVars(this);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),a=0,o=0,l=function(r,l){var h=void 0,c=void 0,d=void 0,u=void 0,p=n.globals.comboCharts?e[r]:r,f=i.barHelpers.getGroupIndex(p),m=f.groupIndex,b=f.columnGroupIndex;i.groupCtx=i[n.globals.seriesGroups[m]];var x=[],v=[],y=0;i.yRatio.length>1&&(i.yaxisIndex=n.globals.seriesYAxisReverseMap[p][0],y=p),i.isReversed=n.config.yaxis[i.yaxisIndex]&&n.config.yaxis[i.yaxisIndex].reversed;var w=i.graphics.group({class:"apexcharts-series",seriesName:k.escapeString(n.globals.seriesNames[p]),rel:r+1,"data:realIndex":p});i.ctx.series.addCollapsedClassToSeries(w,p);var A=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":p}),S=i.graphics.group({class:"apexcharts-bar-goals-markers"}),C=0,_=0,M=i.initialPositions(a,o,h,c,d,u,y);o=M.y,C=M.barHeight,c=M.yDivision,u=M.zeroW,a=M.x,_=M.barWidth,h=M.xDivision,d=M.zeroH,n.globals.barHeight=C,n.globals.barWidth=_,i.barHelpers.initializeStackedXYVars(i),1===i.groupCtx.prevY.length&&i.groupCtx.prevY[0].every((function(t){return isNaN(t)}))&&(i.groupCtx.prevY[0]=i.groupCtx.prevY[0].map((function(){return d})),i.groupCtx.prevYF[0]=i.groupCtx.prevYF[0].map((function(){return 0})));for(var T=0;T<n.globals.dataPoints;T++){var E=i.barHelpers.getStrokeWidth(r,T,p),N={indexes:{i:r,j:T,realIndex:p,translationsIndex:y,bc:l},strokeWidth:E,x:a,y:o,elSeries:w,columnGroupIndex:b,seriesGroup:n.globals.seriesGroups[m]},P=null;i.isHorizontal?(P=i.drawStackedBarPaths(g(g({},N),{},{zeroW:u,barHeight:C,yDivision:c})),_=i.series[r][T]/i.invertedYRatio):(P=i.drawStackedColumnPaths(g(g({},N),{},{xDivision:h,barWidth:_,zeroH:d})),C=i.series[r][T]/i.yRatio[y]);var L=i.barHelpers.drawGoalLine({barXPosition:P.barXPosition,barYPosition:P.barYPosition,goalX:P.goalX,goalY:P.goalY,barHeight:C,barWidth:_});L&&S.add(L),o=P.y,a=P.x,x.push(a),v.push(o);var I=i.barHelpers.getPathFillColor(t,r,T,p),R="",O=n.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";("bottom"===i.barHelpers.arrBorderRadius[p][T]&&n.globals.series[p][T]>0||"top"===i.barHelpers.arrBorderRadius[p][T]&&n.globals.series[p][T]<0)&&(R=O),w=i.renderSeries(g(g({realIndex:p,pathFill:I.color},I.useRangeColor?{lineFill:I.color}:{}),{},{j:T,i:r,columnGroupIndex:b,pathFrom:P.pathFrom,pathTo:P.pathTo,strokeWidth:E,elSeries:w,x:a,y:o,series:t,barHeight:C,barWidth:_,elDataLabelsWrap:A,elGoalsMarkers:S,type:"bar",visibleSeries:b,classes:R}))}n.globals.seriesXvalues[p]=x,n.globals.seriesYvalues[p]=v,i.groupCtx.prevY.push(i.groupCtx.yArrj),i.groupCtx.prevYF.push(i.groupCtx.yArrjF),i.groupCtx.prevYVal.push(i.groupCtx.yArrjVal),i.groupCtx.prevX.push(i.groupCtx.xArrj),i.groupCtx.prevXF.push(i.groupCtx.xArrjF),i.groupCtx.prevXVal.push(i.groupCtx.xArrjVal),s.add(w)},h=0,c=0;h<t.length;h++,c++)l(h,c);return s}},{key:"initialPositions",value:function(t,e,i,n,r,s,a){var o,l,h=this.w;if(this.isHorizontal){n=h.globals.gridHeight/h.globals.dataPoints;var c=h.config.plotOptions.bar.barHeight;o=-1===String(c).indexOf("%")?parseInt(c,10):n*parseInt(c,10)/100,s=h.globals.padHorizontal+(this.isReversed?h.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),e=(n-o)/2}else{l=i=h.globals.gridWidth/h.globals.dataPoints;var d=h.config.plotOptions.bar.columnWidth;h.globals.isXNumeric&&h.globals.dataPoints>1?l=(i=h.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:-1===String(d).indexOf("%")?l=parseInt(d,10):l*=parseInt(d,10)/100,r=this.isReversed?this.baseLineY[a]:h.globals.gridHeight-this.baseLineY[a],t=h.globals.padHorizontal+(i-l)/2}var u=h.globals.barGroups.length||1;return{x:t,y:e,yDivision:n,xDivision:i,barHeight:o/u,barWidth:l/u,zeroH:r,zeroW:s}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i=t.indexes,n=t.barHeight,r=t.strokeWidth,s=t.zeroW,a=t.x,o=t.y,l=t.columnGroupIndex,h=t.seriesGroup,c=t.yDivision,d=t.elSeries,u=this.w,p=o+l*n,f=i.i,g=i.j,m=i.realIndex,b=i.translationsIndex,x=0,v=0;v<this.groupCtx.prevXF.length;v++)x+=this.groupCtx.prevXF[v][g];var y;if((y=h.indexOf(u.config.series[m].name))>0){var w=s;this.groupCtx.prevXVal[y-1][g]<0?w=this.series[f][g]>=0?this.groupCtx.prevX[y-1][g]+x-2*(this.isReversed?x:0):this.groupCtx.prevX[y-1][g]:this.groupCtx.prevXVal[y-1][g]>=0&&(w=this.series[f][g]>=0?this.groupCtx.prevX[y-1][g]:this.groupCtx.prevX[y-1][g]-x+2*(this.isReversed?x:0)),e=w}else e=s;a=null===this.series[f][g]?e:e+this.series[f][g]/this.invertedYRatio-2*(this.isReversed?this.series[f][g]/this.invertedYRatio:0);var k=this.barHelpers.getBarpaths({barYPosition:p,barHeight:n,x1:e,x2:a,strokeWidth:r,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,seriesGroup:h,i:f,j:g,w:u});return this.barHelpers.barBackground({j:g,i:f,y1:p,y2:n,elSeries:d}),o+=c,{pathTo:k.pathTo,pathFrom:k.pathFrom,goalX:this.barHelpers.getGoalValues("x",s,null,f,g,b),barXPosition:e,barYPosition:p,x:a,y:o}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,i=t.x,n=t.y,r=t.xDivision,s=t.barWidth,a=t.zeroH,o=t.columnGroupIndex,l=t.seriesGroup,h=t.elSeries,c=this.w,d=e.i,u=e.j,p=e.bc,f=e.realIndex,g=e.translationsIndex;if(c.globals.isXNumeric){var m=c.globals.seriesX[f][u];m||(m=0),i=(m-c.globals.minX)/this.xRatio-s/2*c.globals.barGroups.length}for(var b,x=i+o*s,v=0,y=0;y<this.groupCtx.prevYF.length;y++)v+=isNaN(this.groupCtx.prevYF[y][u])?0:this.groupCtx.prevYF[y][u];var w=d;if(l&&(w=l.indexOf(c.globals.seriesNames[f])),w>0&&!c.globals.isXNumeric||w>0&&c.globals.isXNumeric&&c.globals.seriesX[f-1][u]===c.globals.seriesX[f][u]){var k,A,S,C=Math.min(this.yRatio.length+1,f+1);if(void 0!==this.groupCtx.prevY[w-1]&&this.groupCtx.prevY[w-1].length)for(var _=1;_<C;_++){var M;if(!isNaN(null===(M=this.groupCtx.prevY[w-_])||void 0===M?void 0:M[u])){S=this.groupCtx.prevY[w-_][u];break}}for(var T=1;T<C;T++){var E,N;if((null===(E=this.groupCtx.prevYVal[w-T])||void 0===E?void 0:E[u])<0){A=this.series[d][u]>=0?S-v+2*(this.isReversed?v:0):S;break}if((null===(N=this.groupCtx.prevYVal[w-T])||void 0===N?void 0:N[u])>=0){A=this.series[d][u]>=0?S:S+v-2*(this.isReversed?v:0);break}}void 0===A&&(A=c.globals.gridHeight),b=null!==(k=this.groupCtx.prevYF[0])&&void 0!==k&&k.every((function(t){return 0===t}))&&this.groupCtx.prevYF.slice(1,w).every((function(t){return t.every((function(t){return isNaN(t)}))}))?a:A}else b=a;n=this.series[d][u]?b-this.series[d][u]/this.yRatio[g]+2*(this.isReversed?this.series[d][u]/this.yRatio[g]:0):b;var P=this.barHelpers.getColumnPaths({barXPosition:x,barWidth:s,y1:b,y2:n,yRatio:this.yRatio[g],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:l,realIndex:e.realIndex,i:d,j:u,w:c});return this.barHelpers.barBackground({bc:p,j:u,i:d,x1:x,x2:s,elSeries:h}),{pathTo:P.pathTo,pathFrom:P.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,a,d,u),barXPosition:x,x:c.globals.isXNumeric?i:i+r,y:n}}}]),e}(),Pn=function(){u(e,En);var t=h(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(t,e,i){var n=this,r=this.w,s=new Mi(this.ctx),a=r.globals.comboCharts?e:r.config.chart.type,o=new Vi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=r.config.plotOptions.bar.horizontal;var l=new Ti(this.ctx,r);t=l.getLogSeries(t),this.series=t,this.yRatio=l.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var h=s.group({class:"apexcharts-".concat(a,"-series apexcharts-plot-series")}),c=function(e){n.isBoxPlot="boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[e].type;var a,l,c,d,u=void 0,p=void 0,f=[],m=[],b=r.globals.comboCharts?i[e]:e,x=n.barHelpers.getGroupIndex(b).columnGroupIndex,v=s.group({class:"apexcharts-series",seriesName:k.escapeString(r.globals.seriesNames[b]),rel:e+1,"data:realIndex":b});n.ctx.series.addCollapsedClassToSeries(v,b),t[e].length>0&&(n.visibleI=n.visibleI+1);var y,w,A=0;n.yRatio.length>1&&(n.yaxisIndex=r.globals.seriesYAxisReverseMap[b][0],A=b);var S=n.barHelpers.initialPositions(b);p=S.y,y=S.barHeight,l=S.yDivision,d=S.zeroW,u=S.x,w=S.barWidth,a=S.xDivision,c=S.zeroH,m.push(u+w/2);for(var C=s.group({class:"apexcharts-datalabels","data:realIndex":b}),_=s.group({class:"apexcharts-bar-goals-markers"}),M=function(i){var s=n.barHelpers.getStrokeWidth(e,i,b),h=null,k={indexes:{i:e,j:i,realIndex:b,translationsIndex:A},x:u,y:p,strokeWidth:s,elSeries:v};h=n.isHorizontal?n.drawHorizontalBoxPaths(g(g({},k),{},{yDivision:l,barHeight:y,zeroW:d})):n.drawVerticalBoxPaths(g(g({},k),{},{xDivision:a,barWidth:w,zeroH:c})),p=h.y,u=h.x;var S=n.barHelpers.drawGoalLine({barXPosition:h.barXPosition,barYPosition:h.barYPosition,goalX:h.goalX,goalY:h.goalY,barHeight:y,barWidth:w});S&&_.add(S),i>0&&m.push(u+w/2),f.push(p),h.pathTo.forEach((function(a,l){var c=!n.isBoxPlot&&n.candlestickOptions.wick.useFillColor?h.color[l]:r.globals.stroke.colors[e],d=o.fillPath({seriesNumber:b,dataPointIndex:i,color:h.color[l],value:t[e][i]});n.renderSeries({realIndex:b,pathFill:d,lineFill:c,j:i,i:e,pathFrom:h.pathFrom,pathTo:a,strokeWidth:s,elSeries:v,x:u,y:p,series:t,columnGroupIndex:x,barHeight:y,barWidth:w,elDataLabelsWrap:C,elGoalsMarkers:_,visibleSeries:n.visibleI,type:r.config.chart.type})}))},T=0;T<r.globals.dataPoints;T++)M(T);r.globals.seriesXvalues[b]=m,r.globals.seriesYvalues[b]=f,h.add(v)},d=0;d<t.length;d++)c(d);return h}},{key:"drawVerticalBoxPaths",value:function(t){var e=t.indexes,i=t.x;t.y;var n=t.xDivision,r=t.barWidth,s=t.zeroH,a=t.strokeWidth,o=this.w,l=new Mi(this.ctx),h=e.i,c=e.j,d=o.config.plotOptions.candlestick.colors,u=this.boxOptions.colors,p=e.realIndex,f=function(t){return Array.isArray(t)?t[p]:t},g=f(d.upward),m=f(d.downward),b=this.yRatio[e.translationsIndex],x=this.getOHLCValue(p,c),v=s,y=s,w=x.o<x.c?[g]:[m];this.isBoxPlot&&(w=[f(u.lower),f(u.upper)]);var k=Math.min(x.o,x.c),A=Math.max(x.o,x.c),S=x.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[p][c]-o.globals.minX)/this.xRatio-r/2);var C=i+r*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(k=s,A=s):(k=s-k/b,A=s-A/b,v=s-x.h/b,y=s-x.l/b,S=s-x.m/b);var _=l.move(C,s),M=l.move(C+r/2,k);return o.globals.previousPaths.length>0&&(M=this.getPreviousPath(p,c,!0)),_=this.isBoxPlot?[l.move(C,k)+l.line(C+r/2,k)+l.line(C+r/2,v)+l.line(C+r/4,v)+l.line(C+r-r/4,v)+l.line(C+r/2,v)+l.line(C+r/2,k)+l.line(C+r,k)+l.line(C+r,S)+l.line(C,S)+l.line(C,k+a/2),l.move(C,S)+l.line(C+r,S)+l.line(C+r,A)+l.line(C+r/2,A)+l.line(C+r/2,y)+l.line(C+r-r/4,y)+l.line(C+r/4,y)+l.line(C+r/2,y)+l.line(C+r/2,A)+l.line(C,A)+l.line(C,S)+"z"]:[l.move(C,A)+l.line(C+r/2,A)+l.line(C+r/2,v)+l.line(C+r/2,A)+l.line(C+r,A)+l.line(C+r,k)+l.line(C+r/2,k)+l.line(C+r/2,y)+l.line(C+r/2,k)+l.line(C,k)+l.line(C,A-a/2)],M+=l.move(C,k),o.globals.isXNumeric||(i+=n),{pathTo:_,pathFrom:M,x:i,y:A,goalY:this.barHelpers.getGoalValues("y",null,s,h,c,e.translationsIndex),barXPosition:C,color:w}}},{key:"drawHorizontalBoxPaths",value:function(t){var e=t.indexes;t.x;var i=t.y,n=t.yDivision,r=t.barHeight,s=t.zeroW,a=t.strokeWidth,o=this.w,l=new Mi(this.ctx),h=e.i,c=e.j,d=this.boxOptions.colors.lower;this.isBoxPlot&&(d=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var u=this.invertedYRatio,p=e.realIndex,f=this.getOHLCValue(p,c),g=s,m=s,b=Math.min(f.o,f.c),x=Math.max(f.o,f.c),v=f.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[p][c]-o.globals.minX)/this.invertedXRatio-r/2);var y=i+r*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(b=s,x=s):(b=s+b/u,x=s+x/u,g=s+f.h/u,m=s+f.l/u,v=s+f.m/u);var w=l.move(s,y),k=l.move(b,y+r/2);return o.globals.previousPaths.length>0&&(k=this.getPreviousPath(p,c,!0)),w=[l.move(b,y)+l.line(b,y+r/2)+l.line(g,y+r/2)+l.line(g,y+r/2-r/4)+l.line(g,y+r/2+r/4)+l.line(g,y+r/2)+l.line(b,y+r/2)+l.line(b,y+r)+l.line(v,y+r)+l.line(v,y)+l.line(b+a/2,y),l.move(v,y)+l.line(v,y+r)+l.line(x,y+r)+l.line(x,y+r/2)+l.line(m,y+r/2)+l.line(m,y+r-r/4)+l.line(m,y+r/4)+l.line(m,y+r/2)+l.line(x,y+r/2)+l.line(x,y)+l.line(v,y)+"z"],k+=l.move(b,y),o.globals.isXNumeric||(i+=n),{pathTo:w,pathFrom:k,x,y:i,goalX:this.barHelpers.getGoalValues("x",s,null,h,c),barYPosition:y,color:d}}},{key:"getOHLCValue",value:function(t,e){var i=this.w,n=new Ti(this.ctx,i),r=n.getLogValAtSeriesIndex(i.globals.seriesCandleH[t][e],t),s=n.getLogValAtSeriesIndex(i.globals.seriesCandleO[t][e],t),a=n.getLogValAtSeriesIndex(i.globals.seriesCandleM[t][e],t),o=n.getLogValAtSeriesIndex(i.globals.seriesCandleC[t][e],t),l=n.getLogValAtSeriesIndex(i.globals.seriesCandleL[t][e],t);return{o:this.isBoxPlot?r:s,h:this.isBoxPlot?s:r,m:a,l:this.isBoxPlot?o:l,c:this.isBoxPlot?l:o}}}]),e}(),Ln=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(t,i){t.from<=0&&(e=!0)})),e}},{key:"getShadeColor",value:function(t,e,i,n){var r=this.w,s=1,a=r.config.plotOptions[t].shadeIntensity,o=this.determineColor(t,e,i);r.globals.hasNegs||n?s=r.config.plotOptions[t].reverseNegativeShade?o.percent<0?o.percent/100*(1.25*a):(1-o.percent/100)*(1.25*a):o.percent<=0?1-(1+o.percent/100)*a:(1-o.percent/100)*a:(s=1-o.percent/100,"treemap"===t&&(s=(1-o.percent/100)*(1.25*a)));var l=o.color,h=new k;if(r.config.plotOptions[t].enableShades)if("dark"===this.w.config.theme.mode){var c=h.shadeColor(-1*s,o.color);l=k.hexToRgba(k.isColorHex(c)?c:k.rgb2hex(c),r.config.fill.opacity)}else{var d=h.shadeColor(s,o.color);l=k.hexToRgba(k.isColorHex(d)?d:k.rgb2hex(d),r.config.fill.opacity)}return{color:l,colorProps:o}}},{key:"determineColor",value:function(t,e,i){var n=this.w,r=n.globals.series[e][i],s=n.config.plotOptions[t],a=s.colorScale.inverse?i:e;s.distributed&&"treemap"===n.config.chart.type&&(a=i);var o=n.globals.colors[a],l=null,h=Math.min.apply(Math,x(n.globals.series[e])),c=Math.max.apply(Math,x(n.globals.series[e]));s.distributed||"heatmap"!==t||(h=n.globals.minY,c=n.globals.maxY),void 0!==s.colorScale.min&&(h=s.colorScale.min<n.globals.minY?s.colorScale.min:n.globals.minY,c=s.colorScale.max>n.globals.maxY?s.colorScale.max:n.globals.maxY);var d=Math.abs(c)+Math.abs(h),u=100*r/(0===d?d-1e-6:d);return s.colorScale.ranges.length>0&&s.colorScale.ranges.map((function(t,e){if(r>=t.from&&r<=t.to){o=t.color,l=t.foreColor?t.foreColor:null,h=t.from,c=t.to;var i=Math.abs(c)+Math.abs(h);u=100*r/(0===i?i-1e-6:i)}})),{color:o,foreColor:l,percent:u}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,n=t.y,r=t.i,s=t.j,a=t.colorProps,o=t.fontSize,l=this.w.config.dataLabels,h=new Mi(this.ctx),c=new Ui(this.ctx),d=null;if(l.enabled){d=h.group({class:"apexcharts-data-labels"});var u=l.offsetX,p=l.offsetY,f=i+u,g=n+parseFloat(l.style.fontSize)/3+p;c.plotDataLabelsText({x:f,y:g,text:e,i:r,j:s,color:a.foreColor,parent:d,fontSize:o,dataLabelsConfig:l})}return d}},{key:"addListeners",value:function(t){var e=new Mi(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),In=function(){function t(e,i){s(this,t),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ln(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return o(t,[{key:"draw",value:function(t){var e=this.w,i=new Mi(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var r=e.globals.gridWidth/e.globals.dataPoints,s=e.globals.gridHeight/e.globals.series.length,a=0,o=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(o=!0,l.reverse());for(var h=o?0:l.length-1;o?h<l.length:h>=0;o?h++:h--){var c=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:k.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(c,h),e.config.chart.dropShadow.enabled){var d=e.config.chart.dropShadow;new _i(this.ctx).dropShadow(c,d,h)}for(var u=0,p=e.config.plotOptions.heatmap.shadeIntensity,f=0,g=0;g<e.globals.dataPoints;g++)if(e.globals.seriesX.length&&!e.globals.allSeriesHasEqualX&&e.globals.minX+e.globals.minXDiff*g<e.globals.seriesX[h][f])u+=r;else{if(f>=l[h].length)break;var m=this.helpers.getShadeColor(e.config.chart.type,h,f,this.negRange),b=m.color,x=m.colorProps;"image"===e.config.fill.type&&(b=new Vi(this.ctx).fillPath({seriesNumber:h,dataPointIndex:f,opacity:e.globals.hasNegs?x.percent<0?1-(1+x.percent/100):p+x.percent/100:x.percent/100,patternID:k.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:r,height:e.config.fill.image.height?e.config.fill.image.height:s}));var v=this.rectRadius,y=i.drawRect(u,a,r,s,v);if(y.attr({cx:u,cy:a}),y.node.classList.add("apexcharts-heatmap-rect"),c.add(y),y.attr({fill:b,i:h,index:h,j:f,val:t[h][f],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?b:e.globals.stroke.colors[0],color:b}),this.helpers.addListeners(y),e.config.chart.animations.enabled&&!e.globals.dataChanged){var w=1;e.globals.resized||(w=e.config.chart.animations.speed),this.animateHeatMap(y,u,a,r,s,w)}if(e.globals.dataChanged){var A=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){A=this.dynamicAnim.speed;var S=e.globals.previousPaths[h]&&e.globals.previousPaths[h][f]&&e.globals.previousPaths[h][f].color;S||(S="rgba(255, 255, 255, 0)"),this.animateHeatColor(y,k.isColorHex(S)?S:k.rgb2hex(S),k.isColorHex(b)?b:k.rgb2hex(b),A)}}var C=(0,e.config.dataLabels.formatter)(e.globals.series[h][f],{value:e.globals.series[h][f],seriesIndex:h,dataPointIndex:f,w:e}),_=this.helpers.calculateDataLabels({text:C,x:u+r/2,y:a+s/2,i:h,j:f,colorProps:x,series:l});null!==_&&c.add(_),u+=r,f++}a+=s,n.add(c)}var M=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?M.unshift(""):M.push(""),e.globals.yAxisScale[0].result=M,n}},{key:"animateHeatMap",value:function(t,e,i,n,r,s){var a=new A(this.ctx);a.animateRect(t,{x:e+n/2,y:i+r/2,width:0,height:0},{x:e,y:i,width:n,height:r},s,(function(){a.animationCompleted(t)}))}},{key:"animateHeatColor",value:function(t,e,i,n){t.attr({fill:e}).animate(n).attr({fill:i})}}]),t}(),Rn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawYAxisTexts",value:function(t,e,i,n){var r=this.w,s=r.config.yaxis[0],a=r.globals.yLabelFormatters[0];return new Mi(this.ctx).drawText({x:t+s.labels.offsetX,y:e+s.labels.offsetY,text:a(n,i),textAnchor:"middle",fontSize:s.labels.style.fontSize,fontFamily:s.labels.style.fontFamily,foreColor:Array.isArray(s.labels.style.colors)?s.labels.style.colors[i]:s.labels.style.colors})}}]),t}(),On=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100;var n=i.config.plotOptions.pie.customScale,r=i.globals.gridWidth/2,a=i.globals.gridHeight/2;this.translateX=r-r*n,this.translateY=a-a*n,this.dataLabelsGroup=new Mi(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,n=new Mi(this.ctx),r=n.group({class:"apexcharts-pie"});if(i.globals.noData)return r;for(var s=0,a=0;a<t.length;a++)s+=k.negToZero(t[a]);var o=[],l=n.group();0===s&&(s=1e-5),t.forEach((function(t){e.maxY=Math.max(e.maxY,t)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(r);for(var h=0;h<t.length;h++){var c=this.fullAngle*k.negToZero(t[h])/s;o.push(c),"polarArea"===this.chartType?(o[h]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[h]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var d,u=0,p=0;p<i.globals.previousPaths.length;p++)u+=k.negToZero(i.globals.previousPaths[p]);for(var f=0;f<i.globals.previousPaths.length;f++)d=this.fullAngle*k.negToZero(i.globals.previousPaths[f])/u,this.prevSectorAngleArr.push(d)}if(this.donutSize<0&&(this.donutSize=0),"donut"===this.chartType){var g=n.drawCircle(this.donutSize);g.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),l.add(g)}var m=this.drawArcs(o,t);if(this.sliceLabels.forEach((function(t){m.add(t)})),l.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),l.add(m),r.add(l),this.donutDataLabels.show){var b=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});r.add(b)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(r),r}},{key:"drawArcs",value:function(t,e){var i=this.w,n=new _i(this.ctx),r=new Mi(this.ctx),s=new Vi(this.ctx),a=r.group({class:"apexcharts-slices"}),o=this.initialAngle,l=this.initialAngle,h=this.initialAngle,c=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var d=0;d<t.length;d++){var u=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:k.escapeString(i.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});a.add(u),l=c,h=(o=h)+t[d],c=l+this.prevSectorAngleArr[d];var p=h<o?this.fullAngle+h-o:h-o,f=s.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:e[d]}),g=this.getChangedPath(l,c),m=r.drawPath({d:g,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:f,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(m.attr({index:0,j:d}),n.setSelectionFilter(m,0,d),i.config.chart.dropShadow.enabled){var b=i.config.chart.dropShadow;n.dropShadow(m,b,d)}this.addListeners(m,this.donutDataLabels),Mi.setAttrs(m.node,{"data:angle":p,"data:startAngle":o,"data:strokeWidth":this.strokeWidth,"data:value":e[d]});var x={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?x=k.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(o+p/2)%this.fullAngle):"donut"===this.chartType&&(x=k.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(o+p/2)%this.fullAngle)),u.add(m);var v=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(v=p/this.fullAngle*i.config.chart.animations.speed)&&(v=1),this.animDur=v+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:o,prevStartAngle:l,prevEndAngle:c,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:o,i:d,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:v}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&m.node.addEventListener("mouseup",this.pieClicked.bind(this,d)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),i.config.dataLabels.enabled){var y=x.x,w=x.y,A=100*p/this.fullAngle+"%";if(0!==p&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[d]){var S=i.config.dataLabels.formatter;void 0!==S&&(A=S(i.globals.seriesPercent[d][0],{seriesIndex:d,w:i}));var C=i.globals.dataLabels.style.colors[d],_=r.group({class:"apexcharts-datalabels"}),M=r.drawText({x:y,y:w,text:A,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:C});if(_.add(M),i.config.dataLabels.dropShadow.enabled){var T=i.config.dataLabels.dropShadow;n.dropShadow(M,T)}M.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(M.node.classList.add("apexcharts-pie-label-delay"),M.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(_)}}}return a}},{key:"addListeners",value:function(t,e){var i=new Mi(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,n=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,r=n,s=e.startAngle,a=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(s=e.prevEndAngle,r=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(n+a>this.fullAngle?e.endAngle=e.endAngle-(n+a):n+a<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(n+a)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(t,s,a,n,r,e)}},{key:"animateArc",value:function(t,e,i,n,r,s){var a,o=this,l=this.w,h=new A(this.ctx),c=s.size;(isNaN(e)||isNaN(r))&&(e=i,r=n,s.dur=0);var d=n,u=i,p=e<i?this.fullAngle+e-i:e-i;l.globals.dataChanged&&s.shouldSetPrevPaths&&s.prevEndAngle&&(a=o.getPiePath({me:o,startAngle:s.prevStartAngle,angle:s.prevEndAngle<s.prevStartAngle?this.fullAngle+s.prevEndAngle-s.prevStartAngle:s.prevEndAngle-s.prevStartAngle,size:c}),t.attr({d:a})),0!==s.dur?t.animate(s.dur,s.animBeginArr[s.i]).after((function(){"pie"!==o.chartType&&"donut"!==o.chartType&&"polarArea"!==o.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":o.strokeWidth}),s.i===l.config.series.length-1&&h.animationCompleted(t)})).during((function(l){d=p+(n-p)*l,s.animateStartingPos&&(d=r+(n-r)*l,u=e-r+(i-(e-r))*l),a=o.getPiePath({me:o,startAngle:u,angle:d,size:c}),t.node.setAttribute("data:pathOrig",a),t.attr({d:a})})):(a=o.getPiePath({me:o,startAngle:u,angle:n,size:c}),s.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",a),t.attr({d:a,"stroke-width":o.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,n=this,r=n.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),s=i.globals.dom.Paper.findOne(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(t));if("true"!==s.attr("data:pieClicked")){var a=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,(function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");e&&t.setAttribute("d",e)})),i.globals.capturedDataPointIndex=t,s.attr("data:pieClicked","true");var o=parseInt(s.attr("data:startAngle"),10),l=parseInt(s.attr("data:angle"),10);e=n.getPiePath({me:n,startAngle:o,angle:l,size:r}),360!==l&&s.plot(e)}else{s.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(s.node,this.donutDataLabels);var h=s.attr("data:pathOrig");s.attr({d:h})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e,i=t.me,n=t.startAngle,r=t.angle,s=t.size,a=new Mi(this.ctx),o=n,l=Math.PI*(o-90)/180,h=r+n;Math.ceil(h)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(h=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(h)>this.fullAngle&&(h-=this.fullAngle);var c=Math.PI*(h-90)/180,d=i.centerX+s*Math.cos(l),u=i.centerY+s*Math.sin(l),p=i.centerX+s*Math.cos(c),f=i.centerY+s*Math.sin(c),g=k.polarToCartesian(i.centerX,i.centerY,i.donutSize,h),m=k.polarToCartesian(i.centerX,i.centerY,i.donutSize,o),b=r>180?1:0,x=["M",d,u,"A",s,s,0,b,1,p,f];return e="donut"===i.chartType?[].concat(x,["L",g.x,g.y,"A",i.donutSize,i.donutSize,0,b,0,m.x,m.y,"L",d,u,"z"]).join(" "):"pie"===i.chartType||"polarArea"===i.chartType?[].concat(x,["L",i.centerX,i.centerY,"L",d,u]).join(" "):[].concat(x).join(" "),a.roundPathCorners(e,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new tn(this.ctx),n=new Mi(this.ctx),r=new Rn(this.ctx),s=n.group(),a=n.group(),o=i.niceScale(0,Math.ceil(this.maxY),0),l=o.result.reverse(),h=o.result.length;this.maxY=o.niceMax;for(var c=e.globals.radialSize,d=c/(h-1),u=0;u<h-1;u++){var p=n.drawCircle(c);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var f=r.drawYAxisTexts(this.centerX,this.centerY-c+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,u,l[u]);a.add(f)}s.add(p),c-=d}this.drawSpokes(t),t.add(s),t.add(a)}},{key:"renderInnerDataLabels",value:function(t,e,i){var n=this.w,r=new Mi(this.ctx),s=e.total.show;t.node.innerHTML="",t.node.style.opacity=i.opacity;var a,o,l=i.centerX,h=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;a=void 0===e.name.color?n.globals.colors[0]:e.name.color;var c=e.name.fontSize,d=e.name.fontFamily,u=e.name.fontWeight;o=void 0===e.value.color?n.config.chart.foreColor:e.value.color;var p=e.value.formatter,f="",g="";if(s?(a=e.total.color,c=e.total.fontSize,d=e.total.fontFamily,u=e.total.fontWeight,g=this.donutDataLabels.total.label?e.total.label:"",f=e.total.formatter(n)):1===n.globals.series.length&&(f=p(n.globals.series[0],n),g=n.globals.seriesNames[0]),g&&(g=e.name.formatter(g,e.total.show,n)),e.name.show){var m=r.drawText({x:l,y:h+parseFloat(e.name.offsetY),text:g,textAnchor:"middle",foreColor:a,fontSize:c,fontWeight:u,fontFamily:d});m.node.classList.add("apexcharts-datalabel-label"),t.add(m)}if(e.value.show){var b=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,x=r.drawText({x:l,y:h+b,text:f,textAnchor:"middle",foreColor:o,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});x.node.classList.add("apexcharts-datalabel-value"),t.add(x)}return t}},{key:"printInnerLabels",value:function(t,e,i,n){var r,s=this.w;n?r=void 0===t.name.color?s.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:t.name.color:s.globals.series.length>1&&t.total.show&&(r=t.total.color);var a=s.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),o=s.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,s),n||"function"!=typeof t.total.formatter||(i=t.total.formatter(s));var l=e===t.total.label;e=this.donutDataLabels.total.label?t.name.formatter(e,l,s):"",null!==a&&(a.textContent=e),null!==o&&(o.textContent=i),null!==a&&(a.style.fill=r)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,n=t.getAttribute("data:value"),r=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,r,n,t);var s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==s&&(s.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,n=new Mi(this.ctx),r=i.config.plotOptions.polarArea.spokes;if(0!==r.strokeWidth){for(var s=[],a=360/i.globals.series.length,o=0;o<i.globals.series.length;o++)s.push(k.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+a*o));s.forEach((function(i,s){var a=n.drawLine(i.x,i.y,e.centerX,e.centerY,Array.isArray(r.connectorColors)?r.connectorColors[s]:r.connectorColors);t.add(a)}))}}},{key:"revertDataLabelsInner",value:function(){var t=this.w;if(this.donutDataLabels.show){var e=t.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),i=this.renderInnerDataLabels(e,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});t.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(i)}}}]),t}(),Dn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new Mi(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.logBase=i.config.yaxis[0].logBase,this.coreUtils=new Ti(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,n=new Vi(this.ctx),r=[],s=new Ui(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var a=i.globals.gridWidth/2,o=i.globals.gridHeight/2,l=a+i.config.plotOptions.radar.offsetX,h=o+i.config.plotOptions.radar.offsetY,c=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(l||0,", ").concat(h||0,")")}),d=[],u=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach((function(t,a){var o=t.length===i.globals.dataPoints,l=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":o,seriesName:k.escapeString(i.globals.seriesNames[a]),rel:a+1,"data:realIndex":a});e.dataRadiusOfPercent[a]=[],e.dataRadius[a]=[],e.angleArr[a]=[],t.forEach((function(t,i){var n=Math.abs(e.maxValue-e.minValue);t-=e.minValue,e.isLog&&(t=e.coreUtils.getLogVal(e.logBase,t,0)),e.dataRadiusOfPercent[a][i]=t/n,e.dataRadius[a][i]=e.dataRadiusOfPercent[a][i]*e.size,e.angleArr[a][i]=i*e.disAngle})),d=e.getDataPointsPos(e.dataRadius[a],e.angleArr[a]);var h=e.createPaths(d,{x:0,y:0});u=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":a}),i.globals.delayedElements.push({el:u.node,index:a});var c={i:a,realIndex:a,animationDelay:a,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[a],strokeLineCap:i.config.stroke.lineCap},f=null;i.globals.previousPaths.length>0&&(f=e.getPreviousPath(a));for(var m=0;m<h.linePathsTo.length;m++){var b=e.graphics.renderPaths(g(g({},c),{},{pathFrom:null===f?h.linePathsFrom[m]:f,pathTo:h.linePathsTo[m],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[a]:e.strokeWidth,fill:"none",drawShadow:!1}));l.add(b);var x=n.fillPath({seriesNumber:a}),v=e.graphics.renderPaths(g(g({},c),{},{pathFrom:null===f?h.areaPathsFrom[m]:f,pathTo:h.areaPathsTo[m],strokeWidth:0,fill:x,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var y=new _i(e.ctx),w=i.config.chart.dropShadow;y.dropShadow(v,Object.assign({},w,{noUserSpaceOnUse:!0}),a)}l.add(v)}t.forEach((function(t,n){var r=new Wi(e.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:a,dataPointIndex:n}),o=e.graphics.drawMarker(d[n].x,d[n].y,r);o.attr("rel",n),o.attr("j",n),o.attr("index",a),o.node.setAttribute("default-marker-size",r.pSize);var h=e.graphics.group({class:"apexcharts-series-markers"});h&&h.add(o),u.add(h),l.add(u);var c=i.config.dataLabels;if(c.enabled){var f=c.formatter(i.globals.series[a][n],{seriesIndex:a,dataPointIndex:n,w:i});s.plotDataLabelsText({x:d[n].x,y:d[n].y,text:f,textAnchor:"middle",i:a,j:a,parent:p,offsetCorrection:!1,dataLabelsConfig:g({},c)})}l.add(p)})),r.push(l)})),this.drawPolygons({parent:c}),i.config.xaxis.labels.show){var f=this.drawXAxisTexts();c.add(f)}return r.forEach((function(t){c.add(t)})),c.add(this.yaxisLabels),c}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,n=t.parent,r=new Rn(this.ctx),s=i.globals.yAxisScale[0].result.reverse(),a=s.length,o=[],l=this.size/(a-1),h=0;h<a;h++)o[h]=l*h;o.reverse();var c=[],d=[];o.forEach((function(t,i){var n=k.getPolygonPos(t,e.dataPointsLen),r="";n.forEach((function(t,n){if(0===i){var s=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[n]:e.polygons.connectorColors);d.push(s)}0===n&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),r+=t.x+","+t.y+" "})),c.push(r)})),c.forEach((function(t,r){var s=e.polygons.strokeColors,a=e.polygons.strokeWidth,o=e.graphics.drawPolygon(t,Array.isArray(s)?s[r]:s,Array.isArray(a)?a[r]:a,i.globals.radarPolygons.fill.colors[r]);n.add(o)})),d.forEach((function(t){n.add(t)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(t,i){var n=r.drawYAxisTexts(t.x,t.y,i,s[i]);e.yaxisLabels.add(n)}))}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),r=k.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach((function(s,a){var o=e.config.xaxis.labels.formatter,l=new Ui(t.ctx);if(r[a]){var h=t.getTextPos(r[a],t.size),c=o(s,{seriesIndex:-1,dataPointIndex:a,w:e});l.plotDataLabelsText({x:h.newX,y:h.newY,text:c,textAnchor:h.textAnchor,i:a,j:a,parent:n,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[a]?i.style.colors[a]:"#a8a8a8",dataLabelsConfig:g({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",(function(i){if("function"==typeof e.config.chart.events.xAxisLabelClick){var n=Object.assign({},e,{labelIndex:a});e.config.chart.events.xAxisLabelClick(i,t.ctx,n)}}))}})),n}},{key:"createPaths",value:function(t,e){var i=this,n=[],r=[],s=[],a=[];if(t.length){r=[this.graphics.move(e.x,e.y)],a=[this.graphics.move(e.x,e.y)];var o=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach((function(e,n){o+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),n===t.length-1&&(o+="Z",l+="Z")})),n.push(o),s.push(l)}return{linePathsFrom:r,linePathsTo:n,areaPathsFrom:a,areaPathsTo:s}}},{key:"getTextPos",value:function(t,e){var i="middle",n=t.x,r=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",n+=10):t.x<0&&(i="end",n-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?r-=10:t.y>0&&(r+=10)),{textAnchor:i,newX:n,newY:r}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,n=0;n<e.globals.previousPaths.length;n++){var r=e.globals.previousPaths[n];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[n].paths[0]&&(i=e.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var n=[],r=0;r<i;r++){var s={};s.x=t[r]*Math.sin(e[r]),s.y=-t[r]*Math.cos(e[r]),n.push(s)}return n}}]),t}(),zn=function(){u(e,On);var t=h(e);function e(i){var n;s(this,e),(n=t.call(this,i)).ctx=i,n.w=i.w,n.animBeginArr=[0],n.animDur=0;var a=n.w;return n.startAngle=a.config.plotOptions.radialBar.startAngle,n.endAngle=a.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(a.config.plotOptions.radialBar.endAngle-a.config.plotOptions.radialBar.startAngle),n.trackStartAngle=a.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=a.config.plotOptions.radialBar.track.endAngle,n.barLabels=n.w.config.plotOptions.radialBar.barLabels,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),360===n.endAngle&&(n.endAngle=359.99),n.margin=parseInt(a.config.plotOptions.radialBar.track.margin,10),n.onBarLabelClick=n.onBarLabelClick.bind(r(n)),n}return o(e,[{key:"draw",value:function(t){var e=this.w,i=new Mi(this.ctx),n=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return n;var r=i.group(),s=this.defaultSize/2,a=e.globals.gridWidth/2,o=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(o=o-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var h=this.drawTracks({size:o,centerX:a,centerY:s,colorArr:l,series:t});r.add(h)}var c=this.drawArcs({size:o,centerX:a,centerY:s,colorArr:l,series:t}),d=360;e.config.plotOptions.radialBar.startAngle<0&&(d=this.totalAngle);var u=(360-d)/360;if(e.globals.radialSize=o-o*u,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=p*u}return r.add(c.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(c.g.add(c.elHollow),c.dataLabels&&c.g.add(c.dataLabels)),n.add(r),n}},{key:"drawTracks",value:function(t){var e=this.w,i=new Mi(this.ctx),n=i.group({class:"apexcharts-tracks"}),r=new _i(this.ctx),s=new Vi(this.ctx),a=this.getStrokeWidth(t);t.size=t.size-a/2;for(var o=0;o<t.series.length;o++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});n.add(l),l.attr({rel:o+1}),t.size=t.size-a-this.margin;var h=e.config.plotOptions.radialBar.track,c=s.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[o]:h.background,solid:!0}),d=this.trackStartAngle,u=this.trackEndAngle;Math.abs(u)+Math.abs(d)>=360&&(u=360-Math.abs(this.startAngle)-.1);var p=i.drawPath({d:"",stroke:c,strokeWidth:a*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});if(h.dropShadow.enabled){var f=h.dropShadow;r.dropShadow(p,f)}l.add(p),p.attr("id","apexcharts-radialbarTrack-"+o),this.animatePaths(p,{centerX:t.centerX,centerY:t.centerY,endAngle:u,startAngle:d,size:t.size,i:o,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return n}},{key:"drawArcs",value:function(t){var e=this.w,i=new Mi(this.ctx),n=new Vi(this.ctx),r=new _i(this.ctx),s=i.group(),a=this.getStrokeWidth(t);t.size=t.size-a/2;var o=e.config.plotOptions.radialBar.hollow.background,l=t.size-a*t.series.length-this.margin*t.series.length-a*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(o=this.drawHollowImage(t,s,l,o));var c=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:o||"transparent"});if(e.config.plotOptions.radialBar.hollow.dropShadow.enabled){var d=e.config.plotOptions.radialBar.hollow.dropShadow;r.dropShadow(c,d)}var u=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(u=0);var p=null;if(this.radialDataLabels.show){var f=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group");p=this.renderInnerDataLabels(f,this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:u})}"back"===e.config.plotOptions.radialBar.hollow.position&&(s.add(c),p&&s.add(p));var g=!1;e.config.plotOptions.radialBar.inverseOrder&&(g=!0);for(var m=g?t.series.length-1:0;g?m>=0:m<t.series.length;g?m--:m++){var b=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:k.escapeString(e.globals.seriesNames[m])});s.add(b),b.attr({rel:m+1,"data:realIndex":m}),this.ctx.series.addCollapsedClassToSeries(b,m),t.size=t.size-a-this.margin;var x=n.fillPath({seriesNumber:m,size:t.size,value:t.series[m]}),v=this.startAngle,y=void 0,w=k.negToZero(t.series[m]>100?100:t.series[m])/100,A=Math.round(this.totalAngle*w)+this.startAngle,S=void 0;e.globals.dataChanged&&(y=this.startAngle,S=Math.round(this.totalAngle*k.negToZero(e.globals.previousPaths[m])/100)+y),Math.abs(A)+Math.abs(v)>360&&(A-=.01),Math.abs(S)+Math.abs(y)>360&&(S-=.01);var C=A-v,_=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[m]:e.config.stroke.dashArray,M=i.drawPath({d:"",stroke:x,strokeWidth:a,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+m,strokeDashArray:_});if(Mi.setAttrs(M.node,{"data:angle":C,"data:value":t.series[m]}),e.config.chart.dropShadow.enabled){var T=e.config.chart.dropShadow;r.dropShadow(M,T,m)}if(r.setSelectionFilter(M,0,m),this.addListeners(M,this.radialDataLabels),b.add(M),M.attr({index:0,j:m}),this.barLabels.enabled){var E=k.polarToCartesian(t.centerX,t.centerY,t.size,v),N=this.barLabels.formatter(e.globals.seriesNames[m],{seriesIndex:m,w:e}),P=["apexcharts-radialbar-label"];this.barLabels.onClick||P.push("apexcharts-no-click");var L=this.barLabels.useSeriesColors?e.globals.colors[m]:e.config.chart.foreColor;L||(L=e.config.chart.foreColor);var I=E.x+this.barLabels.offsetX,R=E.y+this.barLabels.offsetY,O=i.drawText({x:I,y:R,text:N,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:L,cssClass:P.join(" ")});O.on("click",this.onBarLabelClick),O.attr({rel:m+1}),0!==v&&O.attr({"transform-origin":"".concat(I," ").concat(R),transform:"rotate(".concat(v," 0 0)")}),b.add(O)}var D=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(D=e.config.chart.animations.speed),e.globals.dataChanged&&(D=e.config.chart.animations.dynamicAnimation.speed),this.animDur=D/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(M,{centerX:t.centerX,centerY:t.centerY,endAngle:A,startAngle:v,prevEndAngle:S,prevStartAngle:y,size:t.size,i:m,totalItems:2,animBeginArr:this.animBeginArr,dur:D,shouldSetPrevPaths:!0})}return{g:s,elHollow:c,dataLabels:p}}},{key:"drawHollow",value:function(t){var e=new Mi(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,n){var r=this.w,s=new Vi(this.ctx),a=k.randomId(),o=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)s.clippedImgArea({width:i,height:i,image:o,patternID:"pattern".concat(r.globals.cuid).concat(a)}),n="url(#pattern".concat(r.globals.cuid).concat(a,")");else{var l=r.config.plotOptions.radialBar.hollow.imageWidth,h=r.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===h){var c=r.globals.dom.Paper.image(o,(function(e){this.move(t.centerX-e.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}));e.add(c)}else{var d=r.globals.dom.Paper.image(o,(function(e){this.move(t.centerX-l/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-h/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,h)}));e.add(d)}}return n}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(t){var e=parseInt(t.target.getAttribute("rel"),10)-1,i=this.barLabels.onClick,n=this.w;i&&i(n.globals.seriesNames[e],{w:n,seriesIndex:e})}}]),e}(),Fn=function(){u(e,En);var t=h(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(t,e){var i=this.w,n=new Mi(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var r=n.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),s=0;s<t.length;s++){var a,o,l,h,c=void 0,d=void 0,u=i.globals.comboCharts?e[s]:s,p=this.barHelpers.getGroupIndex(u).columnGroupIndex,f=n.group({class:"apexcharts-series",seriesName:k.escapeString(i.globals.seriesNames[u]),rel:s+1,"data:realIndex":u});this.ctx.series.addCollapsedClassToSeries(f,u),t[s].length>0&&(this.visibleI=this.visibleI+1);var m=0,b=0,x=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[u][0],x=u);var v=this.barHelpers.initialPositions(u);d=v.y,h=v.zeroW,c=v.x,b=v.barWidth,m=v.barHeight,a=v.xDivision,o=v.yDivision,l=v.zeroH;for(var y=n.group({class:"apexcharts-datalabels","data:realIndex":u}),w=n.group({class:"apexcharts-rangebar-goals-markers"}),A=0;A<i.globals.dataPoints;A++){var S=this.barHelpers.getStrokeWidth(s,A,u),C=this.seriesRangeStart[s][A],_=this.seriesRangeEnd[s][A],M=null,T=null,E=null,N={x:c,y:d,strokeWidth:S,elSeries:f},P=this.seriesLen;if(i.config.plotOptions.bar.rangeBarGroupRows&&(P=1),void 0===i.config.series[s].data[A])break;if(this.isHorizontal){E=d+m*this.visibleI;var L=(o-m*P)/2;if(i.config.series[s].data[A].x){var I=this.detectOverlappingBars({i:s,j:A,barYPosition:E,srty:L,barHeight:m,yDivision:o,initPositions:v});m=I.barHeight,E=I.barYPosition}b=(M=this.drawRangeBarPaths(g({indexes:{i:s,j:A,realIndex:u},barHeight:m,barYPosition:E,zeroW:h,yDivision:o,y1:C,y2:_},N))).barWidth}else{i.globals.isXNumeric&&(c=(i.globals.seriesX[s][A]-i.globals.minX)/this.xRatio-b/2),T=c+b*this.visibleI;var R=(a-b*P)/2;if(i.config.series[s].data[A].x){var O=this.detectOverlappingBars({i:s,j:A,barXPosition:T,srtx:R,barWidth:b,xDivision:a,initPositions:v});b=O.barWidth,T=O.barXPosition}m=(M=this.drawRangeColumnPaths(g({indexes:{i:s,j:A,realIndex:u,translationsIndex:x},barWidth:b,barXPosition:T,zeroH:l,xDivision:a},N))).barHeight}var D=this.barHelpers.drawGoalLine({barXPosition:M.barXPosition,barYPosition:E,goalX:M.goalX,goalY:M.goalY,barHeight:m,barWidth:b});D&&w.add(D),d=M.y,c=M.x;var z=this.barHelpers.getPathFillColor(t,s,A,u);this.renderSeries({realIndex:u,pathFill:z.color,lineFill:z.useRangeColor?z.color:i.globals.stroke.colors[u],j:A,i:s,x:c,y:d,y1:C,y2:_,pathFrom:M.pathFrom,pathTo:M.pathTo,strokeWidth:S,elSeries:f,series:t,barHeight:m,barWidth:b,barXPosition:T,barYPosition:E,columnGroupIndex:p,elDataLabelsWrap:y,elGoalsMarkers:w,visibleSeries:this.visibleI,type:"rangebar"})}r.add(f)}return r}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,n=t.barYPosition,r=t.barXPosition,s=t.srty,a=t.srtx,o=t.barHeight,l=t.barWidth,h=t.yDivision,c=t.xDivision,d=t.initPositions,u=this.w,p=[],f=u.config.series[e].data[i].rangeName,g=u.config.series[e].data[i].x,m=Array.isArray(g)?g.join(" "):g,b=u.globals.labels.map((function(t){return Array.isArray(t)?t.join(" "):t})).indexOf(m),x=u.globals.seriesRange[e].findIndex((function(t){return t.x===m&&t.overlaps.length>0}));return this.isHorizontal?(n=u.config.plotOptions.bar.rangeBarGroupRows?s+h*b:s+o*this.visibleI+h*b,x>-1&&!u.config.plotOptions.bar.rangeBarOverlap&&(p=u.globals.seriesRange[e][x].overlaps).indexOf(f)>-1&&(n=(o=d.barHeight/p.length)*this.visibleI+h*(100-parseInt(this.barOptions.barHeight,10))/100/2+o*(this.visibleI+p.indexOf(f))+h*b)):(b>-1&&!u.globals.timescaleLabels.length&&(r=u.config.plotOptions.bar.rangeBarGroupRows?a+c*b:a+l*this.visibleI+c*b),x>-1&&!u.config.plotOptions.bar.rangeBarOverlap&&(p=u.globals.seriesRange[e][x].overlaps).indexOf(f)>-1&&(r=(l=d.barWidth/p.length)*this.visibleI+c*(100-parseInt(this.barOptions.barWidth,10))/100/2+l*(this.visibleI+p.indexOf(f))+c*b)),{barYPosition:n,barXPosition:r,barHeight:o,barWidth:l}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x,n=t.xDivision,r=t.barWidth,s=t.barXPosition,a=t.zeroH,o=this.w,l=e.i,h=e.j,c=e.realIndex,d=e.translationsIndex,u=this.yRatio[d],p=this.getRangeValue(c,h),f=Math.min(p.start,p.end),g=Math.max(p.start,p.end);void 0===this.series[l][h]||null===this.series[l][h]?f=a:(f=a-f/u,g=a-g/u);var m=Math.abs(g-f),b=this.barHelpers.getColumnPaths({barXPosition:s,barWidth:r,y1:f,y2:g,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:c,i:c,j:h,w:o});if(o.globals.isXNumeric){var x=this.getBarXForNumericXAxis({x:i,j:h,realIndex:c,barWidth:r});i=x.x,s=x.barXPosition}else i+=n;return{pathTo:b.pathTo,pathFrom:b.pathFrom,barHeight:m,x:i,y:p.start<0&&p.end<0?f:g,goalY:this.barHelpers.getGoalValues("y",null,a,l,h,d),barXPosition:s}}},{key:"preventBarOverflow",value:function(t){var e=this.w;return t<0&&(t=0),t>e.globals.gridWidth&&(t=e.globals.gridWidth),t}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,n=t.y1,r=t.y2,s=t.yDivision,a=t.barHeight,o=t.barYPosition,l=t.zeroW,h=this.w,c=e.realIndex,d=e.j,u=this.preventBarOverflow(l+n/this.invertedYRatio),p=this.preventBarOverflow(l+r/this.invertedYRatio),f=this.getRangeValue(c,d),g=Math.abs(p-u),m=this.barHelpers.getBarpaths({barYPosition:o,barHeight:a,x1:u,x2:p,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:c,realIndex:c,j:d,w:h});return h.globals.isXNumeric||(i+=s),{pathTo:m.pathTo,pathFrom:m.pathFrom,barWidth:g,x:f.start<0&&f.end<0?u:p,goalX:this.barHelpers.getGoalValues("x",l,null,c,d),y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}}]),e}(),Bn=function(){function t(e){s(this,t),this.w=e.w,this.lineCtx=e}return o(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if(("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new Ti(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var n=e[t].slice();n[n.length-1]=n[n.length-1]+1e-6,e[t]=n}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,n=t.x,r=t.y,s=t.i,a=t.j,o=t.prevY,l=this.w,h=[],c=[],d=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;return l.globals.isXNumeric&&(d=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),0===a&&(h.push(d),c.push(k.isNumber(e[s][0])?o+l.config.markers.offsetY:null)),h.push(n+l.config.markers.offsetX),c.push(k.isNumber(e[s][a+1])?r+l.config.markers.offsetY:null),{x:h,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,n=t.realIndex,r=this.w,s=0;s<r.globals.previousPaths.length;s++){var a=r.globals.previousPaths[s];("line"===a.type||"area"===a.type)&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(n,10)&&("line"===a.type?(this.lineCtx.appendPathFrom=!1,e=r.globals.previousPaths[s].paths[0].d):"area"===a.type&&(this.lineCtx.appendPathFrom=!1,i=r.globals.previousPaths[s].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[s].paths[1]&&(e=r.globals.previousPaths[s].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e,i,n,r=t.i,s=t.realIndex,a=t.series,o=t.prevY,l=t.lineYPosition,h=t.translationsIndex,c=this.w,d=c.config.chart.stacked&&!c.globals.comboCharts||c.config.chart.stacked&&c.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[s])||void 0===e?void 0:e.type)||"column"===(null===(i=this.w.config.series[s])||void 0===i?void 0:i.type));if(void 0!==(null===(n=a[r])||void 0===n?void 0:n[0]))o=(l=d&&r>0?this.lineCtx.prevSeriesY[r-1][0]:this.lineCtx.zeroY)-a[r][0]/this.lineCtx.yRatio[h]+2*(this.lineCtx.isReversed?a[r][0]/this.lineCtx.yRatio[h]:0);else if(d&&r>0&&void 0===a[r][0])for(var u=r-1;u>=0;u--)if(null!==a[u][0]&&void 0!==a[u][0]){o=l=this.lineCtx.prevSeriesY[u][0];break}return{prevY:o,lineYPosition:l}}}]),t}(),Hn=function(t){var e=function(t){for(var e,i,n,r,s=function(t){for(var e=[],i=t[0],n=t[1],r=e[0]=jn(i,n),s=1,a=t.length-1;s<a;s++)i=n,n=t[s+1],e[s]=.5*(r+(r=jn(i,n)));return e[s]=r,e}(t),a=t.length-1,o=[],l=0;l<a;l++)n=jn(t[l],t[l+1]),Math.abs(n)<1e-6?s[l]=s[l+1]=0:(r=(e=s[l]/n)*e+(i=s[l+1]/n)*i)>9&&(r=3*n/Math.sqrt(r),s[l]=r*e,s[l+1]=r*i);for(var h=0;h<=a;h++)r=(t[Math.min(a,h+1)][0]-t[Math.max(0,h-1)][0])/(6*(1+s[h]*s[h])),o.push([r||0,s[h]*r||0]);return o}(t),i=t[1],n=t[0],r=[],s=e[1],a=e[0];r.push(n,[n[0]+a[0],n[1]+a[1],i[0]-s[0],i[1]-s[1],i[0],i[1]]);for(var o=2,l=e.length;o<l;o++){var h=t[o],c=e[o];r.push([h[0]-c[0],h[1]-c[1],h[0],h[1]])}return r},qn=function(t,e,i){var n=t.slice(e,i);if(e){if(i-e>1&&n[1].length<6){var r=n[0].length;n[1]=[2*n[0][r-2]-n[0][r-4],2*n[0][r-1]-n[0][r-3]].concat(n[1])}n[0]=n[0].slice(-2)}return n};function jn(t,e){return(e[1]-t[1])/(e[0]-t[0])}var Gn=function(){function t(e,i,n){s(this,t),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||n,this.scatter=new Yi(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Bn(this),this.markers=new Wi(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return o(t,[{key:"draw",value:function(t,e,i,n){var r,s=this.w,a=new Mi(this.ctx),o=s.globals.comboCharts?e:s.config.chart.type,l=a.group({class:"apexcharts-".concat(o,"-series apexcharts-plot-series")}),h=new Ti(this.ctx,s);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=h.getLogSeries(t),this.yRatio=h.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var c=[],d=0;d<t.length;d++){t=this.lineHelpers.sameValueSeriesFix(d,t);var u=s.globals.comboCharts?i[d]:d,p=this.yRatio.length>1?u:0;this._initSerieVariables(t,d,u);var f=[],m=[],b=[],x=s.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,u),s.globals.isXNumeric&&s.globals.seriesX.length>0&&(x=(s.globals.seriesX[u][0]-s.globals.minX)/this.xRatio),b.push(x);var v,y=x,w=void 0,k=y,A=this.zeroY,S=this.zeroY;A=this.lineHelpers.determineFirstPrevY({i:d,realIndex:u,series:t,prevY:A,lineYPosition:0,translationsIndex:p}).prevY,"monotoneCubic"===s.config.stroke.curve&&null===t[d][0]?f.push(null):f.push(A),v=A,"rangeArea"===o&&(w=S=this.lineHelpers.determineFirstPrevY({i:d,realIndex:u,series:n,prevY:S,lineYPosition:0,translationsIndex:p}).prevY,m.push(null!==f[0]?S:null));var C=this._calculatePathsFrom({type:o,series:t,i:d,realIndex:u,translationsIndex:p,prevX:k,prevY:A,prevY2:S}),_=[f[0]],M=[m[0]],T={type:o,series:t,realIndex:u,translationsIndex:p,i:d,x,y:1,pX:y,pY:v,pathsFrom:C,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:b,yArrj:f,y2Arrj:m,seriesRangeEnd:n},E=this._iterateOverDataPoints(g(g({},T),{},{iterations:"rangeArea"===o?t[d].length-1:void 0,isRangeStart:!0}));if("rangeArea"===o){for(var N=this._calculatePathsFrom({series:n,i:d,realIndex:u,prevX:k,prevY:S}),P=this._iterateOverDataPoints(g(g({},T),{},{series:n,xArrj:[x],yArrj:_,y2Arrj:M,pY:w,areaPaths:E.areaPaths,pathsFrom:N,iterations:n[d].length-1,isRangeStart:!1})),L=E.linePaths.length/2,I=0;I<L;I++)E.linePaths[I]=P.linePaths[I+L]+E.linePaths[I];E.linePaths.splice(L),E.pathFromLine=P.pathFromLine+E.pathFromLine}else E.pathFromArea+="z";this._handlePaths({type:o,realIndex:u,i:d,paths:E}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),c.push(this.elSeries)}if(void 0!==(null===(r=s.config.series[0])||void 0===r?void 0:r.zIndex)&&c.sort((function(t,e){return Number(t.node.getAttribute("zIndex"))-Number(e.node.getAttribute("zIndex"))})),s.config.chart.stacked)for(var R=c.length-1;R>=0;R--)l.add(c[R]);else for(var O=0;O<c.length;O++)l.add(c[O]);return l}},{key:"_initSerieVariables",value:function(t,e,i){var n=this.w,r=new Mi(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-("on"===n.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width;var s=0;if(this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[i],s=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[s]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[s]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||"end"===n.config.plotOptions.area.fillTo)&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",zIndex:void 0!==n.config.series[i].zIndex?n.config.series[i].zIndex:i,seriesName:k.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),n.globals.hasNullValues){var a=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[n.globals.gridHeight+n.globals.markers.largestSize]},seriesIndex:e,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});null!==a&&this.elPointsMain.add(a)}this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":i});var o=t[e].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":o,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,n,r,s=t.type,a=t.series,o=t.i,l=t.realIndex,h=t.translationsIndex,c=t.prevX,d=t.prevY,u=t.prevY2,p=this.w,f=new Mi(this.ctx);if(null===a[o][0]){for(var g=0;g<a[o].length;g++)if(null!==a[o][g]){c=this.xDivision*g,d=this.zeroY-a[o][g]/this.yRatio[h],e=f.move(c,d),i=f.move(c,this.areaBottomY);break}}else e=f.move(c,d),"rangeArea"===s&&(e=f.move(c,u)+f.line(c,d)),i=f.move(c,this.areaBottomY)+f.line(c,d);if(n=f.move(0,this.areaBottomY)+f.line(0,this.areaBottomY),r=f.move(0,this.areaBottomY)+f.line(0,this.areaBottomY),p.globals.previousPaths.length>0){var m=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:r,realIndex:l});n=m.pathFromLine,r=m.pathFromArea}return{prevX:c,prevY:d,linePath:e,areaPath:i,pathFromLine:n,pathFromArea:r}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,n=t.i,r=t.paths,s=this.w,a=new Mi(this.ctx),o=new Vi(this.ctx);this.prevSeriesY.push(r.yArrj),s.globals.seriesXvalues[i]=r.xArrj,s.globals.seriesYvalues[i]=r.yArrj;var l=s.config.forecastDataPoints;if(l.count>0&&"rangeArea"!==e){var h=s.globals.seriesXvalues[i][s.globals.seriesXvalues[i].length-l.count-1],c=a.drawRect(h,0,s.globals.gridWidth,s.globals.gridHeight,0);s.globals.dom.elForecastMask.appendChild(c.node);var d=a.drawRect(0,0,h,s.globals.gridHeight,0);s.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||s.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var u={i:n,realIndex:i,animationDelay:n,initialSpeed:s.config.chart.animations.speed,dataChangeSpeed:s.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var p=o.fillPath({seriesNumber:i}),f=0;f<r.areaPaths.length;f++){var m=a.renderPaths(g(g({},u),{},{pathFrom:r.pathFromArea,pathTo:r.areaPaths[f],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(m)}if(s.config.stroke.show&&!this.pointsChart){var b=null;if("line"===e)b=o.fillPath({seriesNumber:i,i:n});else if("solid"===s.config.stroke.fill.type)b=s.globals.stroke.colors[i];else{var x=s.config.fill;s.config.fill=s.config.stroke.fill,b=o.fillPath({seriesNumber:i,i:n}),s.config.fill=x}for(var v=0;v<r.linePaths.length;v++){var y=b;"rangeArea"===e&&(y=o.fillPath({seriesNumber:i}));var w=g(g({},u),{},{pathFrom:r.pathFromLine,pathTo:r.linePaths[v],stroke:b,strokeWidth:this.strokeWidth,strokeLineCap:s.config.stroke.lineCap,fill:"rangeArea"===e?y:"none"}),k=a.renderPaths(w);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),l.count>0&&"rangeArea"!==e){var A=a.renderPaths(w);A.node.setAttribute("stroke-dasharray",l.dashArray),l.strokeWidth&&A.node.setAttribute("stroke-width",l.strokeWidth),this.elSeries.add(A),A.attr("clip-path","url(#forecastMask".concat(s.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(s.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){var e,i,n=this,r=t.type,s=t.series,a=t.iterations,o=t.realIndex,l=t.translationsIndex,h=t.i,c=t.x,d=t.y,u=t.pX,p=t.pY,f=t.pathsFrom,g=t.linePaths,m=t.areaPaths,b=t.seriesIndex,x=t.lineYPosition,v=t.xArrj,y=t.yArrj,w=t.y2Arrj,A=t.isRangeStart,S=t.seriesRangeEnd,C=this.w,_=new Mi(this.ctx),M=this.yRatio,T=f.prevY,E=f.linePath,N=f.areaPath,P=f.pathFromLine,L=f.pathFromArea,I=k.isNumber(C.globals.minYArr[o])?C.globals.minYArr[o]:C.globals.minY;a||(a=C.globals.dataPoints>1?C.globals.dataPoints-1:C.globals.dataPoints);var R=function(t,e){return e-t/M[l]+2*(n.isReversed?t/M[l]:0)},O=d,D=C.config.chart.stacked&&!C.globals.comboCharts||C.config.chart.stacked&&C.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[o])||void 0===e?void 0:e.type)||"column"===(null===(i=this.w.config.series[o])||void 0===i?void 0:i.type)),z=C.config.stroke.curve;Array.isArray(z)&&(z=Array.isArray(b)?z[b[h]]:z[h]);for(var F,B=0,H=0;H<a&&0!==s[h].length;H++){var q=void 0===s[h][H+1]||null===s[h][H+1];if(C.globals.isXNumeric){var j=C.globals.seriesX[o][H+1];void 0===C.globals.seriesX[o][H+1]&&(j=C.globals.seriesX[o][a-1]),c=(j-C.globals.minX)/this.xRatio}else c+=this.xDivision;x=D&&h>0&&C.globals.collapsedSeries.length<C.config.series.length-1?this.prevSeriesY[function(t){for(var e=t;e>0;e--){if(!(C.globals.collapsedSeriesIndices.indexOf((null==b?void 0:b[e])||e)>-1))return e;e--}return 0}(h-1)][H+1]:this.zeroY,q?d=R(I,x):(d=R(s[h][H+1],x),"rangeArea"===r&&(O=R(S[h][H+1],x))),v.push(null===s[h][H+1]?null:c),!q||"smooth"!==C.config.stroke.curve&&"monotoneCubic"!==C.config.stroke.curve?(y.push(d),w.push(O)):(y.push(null),w.push(null));var G=this.lineHelpers.calculatePoints({series:s,x:c,y:d,realIndex:o,i:h,j:H,prevY:T}),X=this._createPaths({type:r,series:s,i:h,realIndex:o,j:H,x:c,y:d,y2:O,xArrj:v,yArrj:y,y2Arrj:w,pX:u,pY:p,pathState:B,segmentStartX:F,linePath:E,areaPath:N,linePaths:g,areaPaths:m,curve:z,isRangeStart:A});m=X.areaPaths,g=X.linePaths,u=X.pX,p=X.pY,B=X.pathState,F=X.segmentStartX,N=X.areaPath,E=X.linePath,!this.appendPathFrom||C.globals.hasNullValues||"monotoneCubic"===z&&"rangeArea"===r||(P+=_.line(c,this.areaBottomY),L+=_.line(c,this.areaBottomY)),this.handleNullDataPoints(s,G,h,H,o),this._handleMarkersAndLabels({type:r,pointsPos:G,i:h,j:H,realIndex:o,isRangeStart:A})}return{yArrj:y,xArrj:v,pathFromArea:L,areaPaths:m,pathFromLine:P,linePaths:g,linePath:E,areaPath:N}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.type,i=t.pointsPos,n=t.isRangeStart,r=t.i,s=t.j,a=t.realIndex,o=this.w,l=new Ui(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,s,{realIndex:a,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{o.globals.series[r].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var h=this.markers.plotChartMarkers({pointsPos:i,seriesIndex:a,j:s+1});null!==h&&this.elPointsMain.add(h)}var c=l.drawDataLabel({type:e,isRangeStart:n,pos:i,i:a,j:s+1});null!==c&&this.elDataLabelsWrap.add(c)}},{key:"_createPaths",value:function(t){var e=t.type,i=t.series,n=t.i;t.realIndex;var r,s=t.j,a=t.x,o=t.y,l=t.xArrj,h=t.yArrj,c=t.y2,d=t.y2Arrj,u=t.pX,p=t.pY,f=t.pathState,g=t.segmentStartX,m=t.linePath,b=t.areaPath,x=t.linePaths,v=t.areaPaths,y=t.curve,w=t.isRangeStart,k=new Mi(this.ctx),A=this.areaBottomY,S="rangeArea"===e,C="rangeArea"===e&&w;switch(y){case"monotoneCubic":var _=w?h:d;switch(f){case 0:if(null===_[s+1])break;f=1;case 1:if(!(S?l.length===i[n].length:s===i[n].length-2))break;case 2:var M=w?l:l.slice().reverse(),T=w?_:_.slice().reverse(),E=(r=T,M.map((function(t,e){return[t,r[e]]})).filter((function(t){return null!==t[1]}))),N=E.length>1?Hn(E):E,P=[];S&&(C?v=E:P=v.reverse());var L=0,I=0;if(function(t,e){for(var i=function(t){var e=[],i=0;return t.forEach((function(t){null!==t?i++:i>0&&(e.push(i),i=0)})),i>0&&e.push(i),e}(t),n=[],r=0,s=0;r<i.length;s+=i[r++])n[r]=qn(e,s,s+i[r]);return n}(T,N).forEach((function(t){L++;var e=function(t){for(var e="",i=0;i<t.length;i++){var n=t[i],r=n.length;r>4?(e+="C".concat(n[0],", ").concat(n[1]),e+=", ".concat(n[2],", ").concat(n[3]),e+=", ".concat(n[4],", ").concat(n[5])):r>2&&(e+="S".concat(n[0],", ").concat(n[1]),e+=", ".concat(n[2],", ").concat(n[3]))}return e}(t),i=I,n=(I+=t.length)-1;C?m=k.move(E[i][0],E[i][1])+e:S?m=k.move(P[i][0],P[i][1])+k.line(E[i][0],E[i][1])+e+k.line(P[n][0],P[n][1]):(m=k.move(E[i][0],E[i][1])+e,b=m+k.line(E[n][0],A)+k.line(E[i][0],A)+"z",v.push(b)),x.push(m)})),S&&L>1&&!C){var R=x.slice(L).reverse();x.splice(L),R.forEach((function(t){return x.push(t)}))}f=0}break;case"smooth":var O=.35*(a-u);if(null===i[n][s])f=0;else switch(f){case 0:if(g=u,m=C?k.move(u,d[s])+k.line(u,p):k.move(u,p),b=k.move(u,p),null===i[n][s+1]||void 0===i[n][s+1]){x.push(m),v.push(b);break}if(f=1,s<i[n].length-2){var D=k.curve(u+O,p,a-O,o,a,o);m+=D,b+=D;break}case 1:if(null===i[n][s+1])m+=C?k.line(u,c):k.move(u,p),b+=k.line(u,A)+k.line(g,A)+"z",x.push(m),v.push(b),f=-1;else{var z=k.curve(u+O,p,a-O,o,a,o);m+=z,b+=z,s>=i[n].length-2&&(C&&(m+=k.curve(a,o,a,o,a,c)+k.move(a,c)),b+=k.curve(a,o,a,o,a,A)+k.line(g,A)+"z",x.push(m),v.push(b),f=-1)}}u=a,p=o;break;default:var F=function(t,e,i){var n=[];switch(t){case"stepline":n=k.line(e,null,"H")+k.line(null,i,"V");break;case"linestep":n=k.line(null,i,"V")+k.line(e,null,"H");break;case"straight":n=k.line(e,i)}return n};if(null===i[n][s])f=0;else switch(f){case 0:if(g=u,m=C?k.move(u,d[s])+k.line(u,p):k.move(u,p),b=k.move(u,p),null===i[n][s+1]||void 0===i[n][s+1]){x.push(m),v.push(b);break}if(f=1,s<i[n].length-2){var B=F(y,a,o);m+=B,b+=B;break}case 1:if(null===i[n][s+1])m+=C?k.line(u,c):k.move(u,p),b+=k.line(u,A)+k.line(g,A)+"z",x.push(m),v.push(b),f=-1;else{var H=F(y,a,o);m+=H,b+=H,s>=i[n].length-2&&(C&&(m+=k.line(a,c)),b+=k.line(a,A)+k.line(g,A)+"z",x.push(m),v.push(b),f=-1)}}u=a,p=o}return{linePaths:x,areaPaths:v,pX:u,pY:p,pathState:f,segmentStartX:g,linePath:m,areaPath:b}}},{key:"handleNullDataPoints",value:function(t,e,i,n,r){var s=this.w;if(null===t[i][n]&&s.config.markers.showNullDataPoints||1===t[i].length){var a=this.strokeWidth-s.config.markers.strokeWidth/2;a>0||(a=0);var o=this.markers.plotChartMarkers({pointsPos:e,seriesIndex:r,j:n+1,pSize:a,alwaysDrawMarker:!0});null!==o&&this.elPointsMain.add(o)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(e,i,n,r){this.xoffset=e,this.yoffset=i,this.height=r,this.width=n,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],n=this.xoffset,r=this.yoffset,a=s(t)/this.height,o=s(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([n,r,n+a,r+t[e]/a]),r+=t[e]/a;else for(e=0;e<t.length;e++)i.push([n,r,n+t[e]/o,r+o]),n+=t[e]/o;return i},this.cutArea=function(e){var i;if(this.width>=this.height){var n=e/this.height,r=this.width-n;i=new t(this.xoffset+n,this.yoffset,r,this.height)}else{var s=e/this.width,a=this.height-s;i=new t(this.xoffset,this.yoffset+s,this.width,a)}return i}}function e(e,n,r,a,o){a=void 0===a?0:a,o=void 0===o?0:o;var l=i(function(t,e){var i,n=[],r=e/s(t);for(i=0;i<t.length;i++)n[i]=t[i]*r;return n}(e,n*r),[],new t(a,o,n,r),[]);return function(t){var e,i,n=[];for(e=0;e<t.length;e++)for(i=0;i<t[e].length;i++)n.push(t[e][i]);return n}(l)}function i(t,e,r,a){var o,l,h;if(0!==t.length)return o=r.shortestEdge(),function(t,e,i){var r;return 0===t.length||((r=t.slice()).push(e),n(t,i)>=n(r,i))}(e,l=t[0],o)?(e.push(l),i(t.slice(1),e,r,a)):(h=r.cutArea(s(e),a),a.push(r.getCoordinates(e)),i(t,[],h,a)),a;a.push(r.getCoordinates(e))}function n(t,e){var i=Math.min.apply(Math,t),n=Math.max.apply(Math,t),r=s(t);return Math.max(Math.pow(e,2)*n/Math.pow(r,2),Math.pow(r,2)/(Math.pow(e,2)*i))}function r(t){return t&&t.constructor===Array}function s(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e];return i}function a(t){var e,i=0;if(r(t[0]))for(e=0;e<t.length;e++)i+=a(t[e]);else i=s(t);return i}return function t(i,n,s,o,l){o=void 0===o?0:o,l=void 0===l?0:l;var h,c,d=[],u=[];if(r(i[0])){for(c=0;c<i.length;c++)d[c]=a(i[c]);for(h=e(d,n,s,o,l),c=0;c<i.length;c++)u.push(t(i[c],h[c][2]-h[c][0],h[c][3]-h[c][1],h[c][0],h[c][1]))}else u=e(i,n,s,o,l);return u}}();var Xn=function(){function t(e,i){s(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ln(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,n=new Mi(this.ctx),r=new Vi(this.ctx),s=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return s;var a=[];return t.forEach((function(t){var e=t.map((function(t){return Math.abs(t)}));a.push(e)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(t,i){t.data.forEach((function(t){Array.isArray(e.labels[i])||(e.labels[i]=[]),e.labels[i].push(t.x)}))})),window.TreemapSquared.generate(a,i.globals.gridWidth,i.globals.gridHeight).forEach((function(a,o){var l=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:k.escapeString(i.globals.seriesNames[o]),rel:o+1,"data:realIndex":o});if(i.config.chart.dropShadow.enabled){var h=i.config.chart.dropShadow;new _i(e.ctx).dropShadow(s,h,o)}var c=n.group({class:"apexcharts-data-labels"}),d={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};a.forEach((function(s,a){var h=s[0],c=s[1],u=s[2],p=s[3];d.xMin=Math.min(d.xMin,h),d.yMin=Math.min(d.yMin,c),d.xMax=Math.max(d.xMax,u),d.yMax=Math.max(d.yMax,p);var f=e.helpers.getShadeColor(i.config.chart.type,o,a,e.negRange),g=f.color,m=r.fillPath({color:g,seriesNumber:o,dataPointIndex:a}),b=n.drawRect(h,c,u-h,p-c,i.config.plotOptions.treemap.borderRadius,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?g:i.globals.stroke.colors[o]);b.attr({cx:h,cy:c,index:o,i:o,j:a,width:u-h,height:p-c,fill:m}),b.node.classList.add("apexcharts-treemap-rect"),e.helpers.addListeners(b);var x={x:h+(u-h)/2,y:c+(p-c)/2,width:0,height:0},v={x:h,y:c,width:u-h,height:p-c};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var y=1;i.globals.resized||(y=i.config.chart.animations.speed),e.animateTreemap(b,x,v,y)}if(i.globals.dataChanged){var w=1;e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(w=e.dynamicAnim.speed,i.globals.previousPaths[o]&&i.globals.previousPaths[o][a]&&i.globals.previousPaths[o][a].rect&&(x=i.globals.previousPaths[o][a].rect),e.animateTreemap(b,x,v,w))}var k=e.getFontSize(s),A=i.config.dataLabels.formatter(e.labels[o][a],{value:i.globals.series[o][a],seriesIndex:o,dataPointIndex:a,w:i});"truncate"===i.config.plotOptions.treemap.dataLabels.format&&(k=parseInt(i.config.dataLabels.style.fontSize,10),A=e.truncateLabels(A,k,h,c,u,p));var S=null;i.globals.series[o][a]&&(S=e.helpers.calculateDataLabels({text:A,x:(h+u)/2,y:(c+p)/2+e.strokeWidth/2+k/3,i:o,j:a,colorProps:f,fontSize:k,series:t})),i.config.dataLabels.enabled&&S&&e.rotateToFitLabel(S,k,A,h,c,u,p),l.add(b),null!==S&&l.add(S)}));var u=i.config.plotOptions.treemap.seriesTitle;if(i.config.series.length>1&&u&&u.show){var p=i.config.series[o].name||"";if(p&&d.xMin<1/0&&d.yMin<1/0){var f=u.offsetX,g=u.offsetY,m=u.borderColor,b=u.borderWidth,x=u.borderRadius,v=u.style,y=v.color||i.config.chart.foreColor,w={left:v.padding.left,right:v.padding.right,top:v.padding.top,bottom:v.padding.bottom},A=n.getTextRects(p,v.fontSize,v.fontFamily),S=A.width+w.left+w.right,C=A.height+w.top+w.bottom,_=d.xMin+(f||0),M=d.yMin+(g||0),T=n.drawRect(_,M,S,C,x,v.background,1,b,m),E=n.drawText({x:_+w.left,y:M+w.top+.75*A.height,text:p,fontSize:v.fontSize,fontFamily:v.fontFamily,fontWeight:v.fontWeight,foreColor:y,cssClass:v.cssClass||""});l.add(T),l.add(E)}}l.add(c),s.add(l)})),s}},{key:"getFontSize",value:function(t){var e=this.w,i=function t(e){var i,n=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)n+=t(e[i]);else for(i=0;i<e.length;i++)n+=e[i].length;return n}(this.labels)/function t(e){var i,n=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)n+=t(e[i]);else for(i=0;i<e.length;i++)n+=1;return n}(this.labels);return function(t,n){var r=t*n,s=Math.pow(r,.5);return Math.min(s/i,parseInt(e.config.dataLabels.style.fontSize,10))}(t[2]-t[0],t[3]-t[1])}},{key:"rotateToFitLabel",value:function(t,e,i,n,r,s,a){var o=new Mi(this.ctx),l=o.getTextRects(i,e);if(l.width+this.w.config.stroke.width+5>s-n&&l.width<=a-r){var h=o.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(h.x," ").concat(h.y,") translate(").concat(l.height/3,")"))}}},{key:"truncateLabels",value:function(t,e,i,n,r,s){var a=new Mi(this.ctx),o=a.getTextRects(t,e).width+this.w.config.stroke.width+5>r-i&&s-n>r-i?s-n:r-i,l=a.getTextBasedOnMaxWidth({text:t,maxWidth:o,fontSize:e});return t.length!==l.length&&o/e<5?"":l}},{key:"animateTreemap",value:function(t,e,i,n){var r=new A(this.ctx);r.animateRect(t,e,i,n,(function(){r.animationCompleted(t)}))}}]),t}(),Vn=10/86400,Wn=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return o(t,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var r=new Pi(this.ctx),s=(e-t)/864e5;this.determineInterval(s),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,s<Vn?n.globals.disableZoomIn=!0:s>5e4&&(n.globals.disableZoomOut=!0);var a=r.getTimeUnitsfromTimestamp(t,e,this.utc),o=n.globals.gridWidth/s,l=o/24,h=l/60,c=h/60,d=Math.floor(24*s),u=Math.floor(1440*s),p=Math.floor(86400*s),f=Math.floor(s),m=Math.floor(s/30),b=Math.floor(s/365),x={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},v={firstVal:x,currentMillisecond:x.minMillisecond,currentSecond:x.minSecond,currentMinute:x.minMinute,currentHour:x.minHour,currentMonthDate:x.minDate,currentDate:x.minDate,currentMonth:x.minMonth,currentYear:x.minYear,daysWidthOnXAxis:o,hoursWidthOnXAxis:l,minutesWidthOnXAxis:h,secondsWidthOnXAxis:c,numberOfSeconds:p,numberOfMinutes:u,numberOfHours:d,numberOfDays:f,numberOfMonths:m,numberOfYears:b};switch(this.tickInterval){case"years":this.generateYearScale(v);break;case"months":case"half_year":this.generateMonthScale(v);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(v);break;case"hours":this.generateHourScale(v);break;case"minutes_fives":case"minutes":this.generateMinuteScale(v);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(v)}var y=this.timeScaleArray.map((function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?g(g({},e),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?g(g({},e),{},{value:t.value}):"minute"===t.unit?g(g({},e),{},{value:t.value,minute:t.value}):"second"===t.unit?g(g({},e),{},{value:t.value,minute:t.minute,second:t.second}):t}));return y.filter((function(t){var e=1,r=Math.ceil(n.globals.gridWidth/120),s=t.value;void 0!==n.config.xaxis.tickAmount&&(r=n.config.xaxis.tickAmount),y.length>r&&(e=Math.floor(y.length/r));var a=!1,o=!1;switch(i.tickInterval){case"years":"year"===t.unit&&(a=!0);break;case"half_year":e=7,"year"===t.unit&&(a=!0);break;case"months":e=1,"year"===t.unit&&(a=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(a=!0),30===s&&(o=!0);break;case"months_days":e=10,"month"===t.unit&&(a=!0),30===s&&(o=!0);break;case"week_days":e=8,"month"===t.unit&&(a=!0);break;case"days":e=1,"month"===t.unit&&(a=!0);break;case"hours":"day"===t.unit&&(a=!0);break;case"minutes_fives":case"seconds_fives":s%5!=0&&(o=!0);break;case"seconds_tens":s%10!=0&&(o=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!o)return!0}else if((s%e==0||a)&&!o)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,n=this.formatDates(t),r=this.removeOverlappingTS(n);i.globals.timescaleLabels=r.slice(),new gn(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,r=t.daysWidthOnXAxis,s=t.numberOfYears,a=e.minYear,o=0,l=new Pi(this.ctx),h="year";if(e.minDate>1||e.minMonth>0){var c=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);o=(l.determineDaysOfYear(e.minYear)-c+1)*r,a=e.minYear+1,this.timeScaleArray.push({position:o,value:a,unit:h,year:a,month:k.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:o,value:a,unit:h,year:n,month:k.monthMod(i+1)});for(var d=a,u=o,p=0;p<s;p++)d++,u=l.determineDaysOfYear(d-1)*r+u,this.timeScaleArray.push({position:u,value:d,unit:h,year:d,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,n=t.currentMonth,r=t.currentYear,s=t.daysWidthOnXAxis,a=t.numberOfMonths,o=n,l=0,h=new Pi(this.ctx),c="month",d=0;if(e.minDate>1){l=(h.determineDaysOfMonths(n+1,e.minYear)-i+1)*s,o=k.monthMod(n+1);var u=r+d,p=k.monthMod(o),f=o;0===o&&(c="year",f=u,p=1,u+=d+=1),this.timeScaleArray.push({position:l,value:f,unit:c,year:u,month:p})}else this.timeScaleArray.push({position:l,value:o,unit:c,year:r,month:k.monthMod(n)});for(var g=o+1,m=l,b=0,x=1;b<a;b++,x++){0===(g=k.monthMod(g))?(c="year",d+=1):c="month";var v=this._getYear(r,g,d);m=h.determineDaysOfMonths(g,v)*s+m;var y=0===g?v:g;this.timeScaleArray.push({position:m,value:y,unit:c,year:v,month:0===g?1:g}),g++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,r=t.hoursWidthOnXAxis,s=t.numberOfDays,a=new Pi(this.ctx),o="day",l=e.minDate+1,h=l,c=function(t,e,i){return t>a.determineDaysOfMonths(e+1,i)?(h=1,o="month",u=e+=1,e):e},d=(24-e.minHour)*r,u=l,p=c(h,i,n);0===e.minHour&&1===e.minDate?(d=0,u=k.monthMod(e.minMonth),o="month",h=e.minDate):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(d=0,l=e.minDate,u=l,p=c(h=l,i,n),1!==u&&(o="day")),this.timeScaleArray.push({position:d,value:u,unit:o,year:this._getYear(n,p,0),month:k.monthMod(p),day:h});for(var f=d,g=0;g<s;g++){o="day",p=c(h+=1,p,this._getYear(n,p,0));var m=this._getYear(n,p,0);f=24*r+f;var b=1===h?k.monthMod(p):h;this.timeScaleArray.push({position:f,value:b,unit:o,year:m,month:k.monthMod(p),day:b})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,n=t.currentMonth,r=t.currentYear,s=t.minutesWidthOnXAxis,a=t.numberOfHours,o=new Pi(this.ctx),l="hour",h=function(t,e){return t>o.determineDaysOfMonths(e+1,r)&&(g=1,e+=1),{month:e,date:g}},c=function(t,e){return t>o.determineDaysOfMonths(e+1,r)?e+=1:e},d=60-(e.minMinute+e.minSecond/60),u=d*s,p=e.minHour+1,f=p;60===d&&(u=0,f=p=e.minHour);var g=i;f>=24&&(f=0,l="day",p=g+=1);var m=h(g,n).month;m=c(g,m),p>31&&(p=g=1),this.timeScaleArray.push({position:u,value:p,unit:l,day:g,hour:f,year:r,month:k.monthMod(m)}),f++;for(var b=u,x=0;x<a;x++){l="hour",f>=24&&(f=0,l="day",m=h(g+=1,m).month,m=c(g,m));var v=this._getYear(r,m,0);b=60*s+b;var y=0===f?g:f;this.timeScaleArray.push({position:b,value:y,unit:l,hour:f,day:g,year:v,month:k.monthMod(m)}),f++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,n=t.currentMinute,r=t.currentHour,s=t.currentDate,a=t.currentMonth,o=t.currentYear,l=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,c=t.numberOfMinutes,d=n+1,u=s,p=a,f=o,g=r,m=(60-i-e/1e3)*h,b=0;b<c;b++)d>=60&&(d=0,24===(g+=1)&&(g=0)),this.timeScaleArray.push({position:m,value:d,unit:"minute",hour:g,minute:d,day:u,year:this._getYear(f,p,0),month:k.monthMod(p)}),m+=l,d++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,n=t.currentMinute,r=t.currentHour,s=t.currentDate,a=t.currentMonth,o=t.currentYear,l=t.secondsWidthOnXAxis,h=t.numberOfSeconds,c=i+1,d=n,u=s,p=a,f=o,g=r,m=(1e3-e)/1e3*l,b=0;b<h;b++)c>=60&&(c=0,++d>=60&&(d=0,24==++g&&(g=0))),this.timeScaleArray.push({position:m,value:c,unit:"second",hour:g,minute:d,second:c,day:u,year:this._getYear(f,p,0),month:k.monthMod(p)}),m+=l,c++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?i+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day?t.day:"1")).slice(-2),"hour"===t.unit?i+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),"minute"===t.unit?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map((function(t){var n=t.value.toString(),r=new Pi(e.ctx),s=e.createRawDateString(t,n),a=r.getDate(r.parseDate(s));if(e.utc||(a=r.getDate(r.parseDateWithTimezone(s))),void 0===i.config.xaxis.labels.format){var o="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(o=l.year),"month"===t.unit&&(o=l.month),"day"===t.unit&&(o=l.day),"hour"===t.unit&&(o=l.hour),"minute"===t.unit&&(o=l.minute),"second"===t.unit&&(o=l.second),n=r.formatDate(a,o)}else n=r.formatDate(a,i.config.xaxis.labels.format);return{dateString:s,position:t.position,value:n,unit:t.unit,year:t.year,month:t.month}}))}},{key:"removeOverlappingTS",value:function(t){var e,i=this,n=new Mi(this.ctx),r=!1;t.length>0&&t[0].value&&t.every((function(e){return e.value.length===t[0].value.length}))&&(r=!0,e=n.getTextRects(t[0].value).width);var s=0,a=t.map((function(a,o){if(o>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=r?e:n.getTextRects(t[s].value).width,h=t[s].position;return a.position>h+l+10?(s=o,a):null}return a}));return a.filter((function(t){return null!==t}))}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),Yn=function(){function t(e,i){s(this,t),this.ctx=i,this.w=i.w,this.el=e}return o(t,[{key:"setupElements",value:function(){var t=this.w,e=t.globals,i=t.config,n=i.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(n),e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(n),e.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(n)&&i.plotOptions.bar.horizontal,e.chartClass=".apexcharts".concat(e.chartID),e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),Mi.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas ".concat(e.chartClass.substring(1))}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=window.SVG().addTo(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),e.dom.Paper.node.style.background="dark"!==i.theme.mode||i.chart.background?"light"!==i.theme.mode||i.chart.background?i.chart.background:"#fff":"#424242",this.setSVGDimensions(),e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject"),Mi.setAttrs(e.dom.elLegendForeign,{x:0,y:0,width:e.svgWidth,height:e.svgHeight}),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.dom.elLegendForeign.appendChild(e.dom.elLegendWrap),e.dom.Paper.node.appendChild(e.dom.elLegendForeign),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,n=this.ctx,r=i.config,s=i.globals,a={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},column:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},o=r.chart.type||"line",l=0;s.series.forEach((function(e,n){var r=t[n].type||o;a[r]?("rangeArea"===r?(a[r].series.push(s.seriesRangeStart[n]),a[r].seriesRangeEnd.push(s.seriesRangeEnd[n])):a[r].series.push(e),a[r].i.push(n),"column"!==r&&"bar"!==r||(i.globals.columnSeries=a.column)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(r)?r:"bar"===r&&(a.column.series.push(e),a.column.i.push(n)),o!==r&&"scatter"!==r&&l++})),l>0&&a.column.series.length>0&&r.plotOptions.bar.horizontal&&(l-=a.column.series.length,a.column={series:[],i:[]},i.globals.columnSeries={series:[],i:[]}),s.comboCharts||(s.comboCharts=l>0);var h=new Gn(n,e),c=new Pn(n,e);n.pie=new On(n);var d=new zn(n);n.rangeBar=new Fn(n,e);var u=new Dn(n),p=[];if(s.comboCharts){var f,g,m=new Ti(n);if(a.area.series.length>0&&(f=p).push.apply(f,x(m.drawSeriesByGroup(a.area,s.areaGroups,"area",h))),a.column.series.length>0)if(r.chart.stacked){var b=new Nn(n,e);p.push(b.draw(a.column.series,a.column.i))}else n.bar=new En(n,e),p.push(n.bar.draw(a.column.series,a.column.i));if(a.rangeArea.series.length>0&&p.push(h.draw(a.rangeArea.series,"rangeArea",a.rangeArea.i,a.rangeArea.seriesRangeEnd)),a.line.series.length>0&&(g=p).push.apply(g,x(m.drawSeriesByGroup(a.line,s.lineGroups,"line",h))),a.candlestick.series.length>0&&p.push(c.draw(a.candlestick.series,"candlestick",a.candlestick.i)),a.boxPlot.series.length>0&&p.push(c.draw(a.boxPlot.series,"boxPlot",a.boxPlot.i)),a.rangeBar.series.length>0&&p.push(n.rangeBar.draw(a.rangeBar.series,a.rangeBar.i)),a.scatter.series.length>0){var v=new Gn(n,e,!0);p.push(v.draw(a.scatter.series,"scatter",a.scatter.i))}if(a.bubble.series.length>0){var y=new Gn(n,e,!0);p.push(y.draw(a.bubble.series,"bubble",a.bubble.i))}}else switch(r.chart.type){case"line":p=h.draw(s.series,"line");break;case"area":p=h.draw(s.series,"area");break;case"bar":r.chart.stacked?p=new Nn(n,e).draw(s.series):(n.bar=new En(n,e),p=n.bar.draw(s.series));break;case"candlestick":p=new Pn(n,e).draw(s.series,"candlestick");break;case"boxPlot":p=new Pn(n,e).draw(s.series,r.chart.type);break;case"rangeBar":p=n.rangeBar.draw(s.series);break;case"rangeArea":p=h.draw(s.seriesRangeStart,"rangeArea",void 0,s.seriesRangeEnd);break;case"heatmap":p=new In(n,e).draw(s.series);break;case"treemap":p=new Xn(n,e).draw(s.series);break;case"pie":case"donut":case"polarArea":p=n.pie.draw(s.series);break;case"radialBar":p=d.draw(s.series);break;case"radar":p=u.draw(s.series);break;default:p=h.draw(s.series)}return p}},{key:"setSVGDimensions",value:function(){var t=this.w,e=t.globals,i=t.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",e.svgWidth=i.chart.width,e.svgHeight=i.chart.height;var n=k.getDimensions(this.el),r=i.chart.width.toString().split(/[0-9]+/g).pop();"%"===r?k.isNumber(n[0])&&(0===n[0].width&&(n=k.getDimensions(this.el.parentNode)),e.svgWidth=n[0]*parseInt(i.chart.width,10)/100):"px"!==r&&""!==r||(e.svgWidth=parseInt(i.chart.width,10));var s=String(i.chart.height).toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===s){var a=k.getDimensions(this.el.parentNode);e.svgHeight=a[1]*parseInt(i.chart.height,10)/100}else e.svgHeight=parseInt(i.chart.height,10);else e.svgHeight=e.axisCharts?e.svgWidth/1.61:e.svgWidth/1.2;if(e.svgWidth=Math.max(e.svgWidth,0),e.svgHeight=Math.max(e.svgHeight,0),Mi.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==s){var o=i.chart.sparkline.enabled?0:e.axisCharts?i.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(e.svgHeight+o,"px")}e.dom.elWrap.style.width="".concat(e.svgWidth,"px"),e.dom.elWrap.style.height="".concat(e.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,i=t.translateX;Mi.setAttrs(t.dom.elGraphical.node,{transform:"translate(".concat(i,", ").concat(e,")")})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,n=t.config.chart.sparkline.enabled?1:15;n+=t.config.grid.padding.bottom,["top","bottom"].includes(t.config.legend.position)&&t.config.legend.show&&!t.config.legend.floating&&(i=new bn(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var r=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),s=2.05*t.globals.radialSize;if(r&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var a=k.getBoundingClientRect(r);s=a.bottom;var o=a.bottom-a.top;s=Math.max(2.05*t.globals.radialSize,o)}var l=Math.ceil(s+e.translateY+i+n);e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),t.config.chart.height&&String(t.config.chart.height).includes("%")||(e.dom.elWrap.style.height="".concat(l,"px"),Mi.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(l,"px"))}},{key:"coreCalculations",value:function(){new en(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map((function(){return[]}))},i=new Gi,n=this.w.globals;i.initGlobalVars(n),n.seriesXvalues=e(),n.seriesYvalues=e()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var t=this.w,e=null;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new on(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new on(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Wn(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new Ti(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.ctx,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var n=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];n.forEach((function(i){var n=e.constructor.getChartByID(i);n.w.globals.brushSource=t.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){return t.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){return t.updateSourceChart(n)})})),i.config.chart.events.selection=function(t,i){n.forEach((function(t){e.constructor.getChartByID(t).ctx.updateHelpers._updateOptions({xaxis:{min:i.xaxis.min,max:i.xaxis.max}},!1,!1,!1,!1)}))}}}}]),t}(),Un=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(a){var o=[e.ctx];r&&(o=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(o=[e.ctx],e.ctx.w.globals.isExecCalled=!1),o.forEach((function(r,l){var h=r.w;if(h.globals.shouldAnimate=n,i||(h.globals.resized=!0,h.globals.dataChanged=!0,n&&r.series.getPreviousPaths()),t&&"object"===y(t)&&(r.config=new ji(t),t=Ti.extendArrayProps(r.config,t,h),r.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,h.config=k.extend(h.config,t),s&&(h.globals.lastXAxis=t.xaxis?k.clone(t.xaxis):[],h.globals.lastYAxis=t.yaxis?k.clone(t.yaxis):[],h.globals.initialConfig=k.extend({},h.config),h.globals.initialSeries=k.clone(h.config.series),t.series))){for(var c=0;c<h.globals.collapsedSeriesIndices.length;c++){var d=h.config.series[h.globals.collapsedSeriesIndices[c]];h.globals.collapsedSeries[c].data=h.globals.axisCharts?d.data.slice():d}for(var u=0;u<h.globals.ancillaryCollapsedSeriesIndices.length;u++){var p=h.config.series[h.globals.ancillaryCollapsedSeriesIndices[u]];h.globals.ancillaryCollapsedSeries[u].data=h.globals.axisCharts?p.data.slice():p}r.series.emptyCollapsedSeries(h.config.series)}return r.update(t).then((function(){l===o.length-1&&a(r)}))}))}))}},{key:"_updateSeries",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){var s,a=i.w;return a.globals.shouldAnimate=e,a.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),a.globals.axisCharts?(0===(s=t.map((function(t,e){return i._extendSeries(t,e)}))).length&&(s=[{data:[]}]),a.config.series=s):a.config.series=t.slice(),n&&(a.globals.initialConfig.series=k.clone(a.config.series),a.globals.initialSeries=k.clone(a.config.series)),i.ctx.update().then((function(){r(i.ctx)}))}))}},{key:"_extendSeries",value:function(t,e){var i=this.w,n=i.config.series[e];return g(g({},i.config.series[e]),{},{name:t.name?t.name:null==n?void 0:n.name,color:t.color?t.color:null==n?void 0:n.color,type:t.type?t.type:null==n?void 0:n.type,group:t.group?t.group:null==n?void 0:n.group,hidden:void 0!==t.hidden?t.hidden:null==n?void 0:n.hidden,data:t.data?t.data:null==n?void 0:n.data,zIndex:void 0!==t.zIndex?t.zIndex:e})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,n=null,r=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.findOne("".concat(r," path[j='").concat(e,"'], ").concat(r," circle[j='").concat(e,"'], ").concat(r," rect[j='").concat(e,"']")):void 0===e&&(n=i.globals.dom.Paper.findOne("".concat(r," path[j='").concat(t,"']")),"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),n?(new Mi(this.ctx).pathMouseDown(n,null),n.node?n.node:null):null}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach((function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])})),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new qi(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&"100%"===t.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,n=i.globals.lastXAxis,r=i.globals.lastYAxis;t&&t.xaxis&&(n=t.xaxis),t&&t.yaxis&&(r=t.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max;i.config.yaxis.map((function(t,n){i.globals.zoomed||void 0!==r[n]?function(t){void 0!==r[t]&&(i.config.yaxis[t].min=r[t].min,i.config.yaxis[t].max=r[t].max)}(n):void 0!==e.ctx.opts.yaxis[n]&&(t.min=e.ctx.opts.yaxis[n].min,t.max=e.ctx.opts.yaxis[n].max)}))}}]),t}();!function(){function t(){for(var t=arguments.length>0&&arguments[0]!==h?arguments[0]:[],r=arguments.length>1?arguments[1]:h,s=arguments.length>2?arguments[2]:h,a=arguments.length>3?arguments[3]:h,o=arguments.length>4?arguments[4]:h,l=arguments.length>5?arguments[5]:h,h=arguments.length>6?arguments[6]:h,c=t.slice(r,s||h),d=a.slice(o,l||h),u=0,p={pos:[0,0],start:[0,0]},f={pos:[0,0],start:[0,0]};c[u]=e.call(p,c[u]),d[u]=e.call(f,d[u]),c[u][0]!=d[u][0]||"M"==c[u][0]||"A"==c[u][0]&&(c[u][4]!=d[u][4]||c[u][5]!=d[u][5])?(Array.prototype.splice.apply(c,[u,1].concat(n.call(p,c[u]))),Array.prototype.splice.apply(d,[u,1].concat(n.call(f,d[u])))):(c[u]=i.call(p,c[u]),d[u]=i.call(f,d[u])),++u!=c.length||u!=d.length;)u==c.length&&c.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),u==d.length&&d.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]);return{start:c,dest:d}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function n(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":e=function(t,e){var i,n,r,s,a,o,l,h,c,d,u,p,f,g,m,b,x,v,y,w,k,A,S,C,_,M,T=Math.abs(e[1]),E=Math.abs(e[2]),N=e[3]%360,P=e[4],L=e[5],I=e[6],R=e[7],O=new yt(t),D=new yt(I,R),z=[];if(0===T||0===E||O.x===D.x&&O.y===D.y)return[["C",O.x,O.y,D.x,D.y,D.x,D.y]];for((n=(i=new yt((O.x-D.x)/2,(O.y-D.y)/2).transform((new kt).rotate(N))).x*i.x/(T*T)+i.y*i.y/(E*E))>1&&(T*=n=Math.sqrt(n),E*=n),r=(new kt).rotate(N).scale(1/T,1/E).rotate(-N),O=O.transform(r),o=(s=[(D=D.transform(r)).x-O.x,D.y-O.y])[0]*s[0]+s[1]*s[1],a=Math.sqrt(o),s[0]/=a,s[1]/=a,l=o<4?Math.sqrt(1-o/4):0,P===L&&(l*=-1),h=new yt((D.x+O.x)/2+l*-s[1],(D.y+O.y)/2+l*s[0]),c=new yt(O.x-h.x,O.y-h.y),d=new yt(D.x-h.x,D.y-h.y),u=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(u*=-1),p=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(p*=-1),L&&u>p&&(p+=2*Math.PI),!L&&u<p&&(p-=2*Math.PI),b=[],x=u,f=(p-u)/(g=Math.ceil(2*Math.abs(u-p)/Math.PI)),m=4*Math.tan(f/4)/3,k=0;k<=g;k++)y=Math.cos(x),v=Math.sin(x),w=new yt(h.x+y,h.y+v),b[k]=[new yt(w.x+m*v,w.y-m*y),w,new yt(w.x-m*v,w.y+m*y)],x+=f;for(b[0][0]=b[0][1].clone(),b[b.length-1][2]=b[b.length-1][1].clone(),r=(new kt).rotate(N).scale(T,E).rotate(-N),k=0,A=b.length;k<A;k++)b[k][0]=b[k][0].transform(r),b[k][1]=b[k][1].transform(r),b[k][2]=b[k][2].transform(r);for(k=1,A=b.length;k<A;k++)S=(w=b[k-1][2]).x,C=w.y,_=(w=b[k][0]).x,M=w.y,I=(w=b[k][1]).x,R=w.y,z.push(["C",S,C,_,M,I,R]);return z}(this.pos,t),t=e[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(!1===e)return!1;for(var i=e,n=t.length;i<n;++i)if("M"==t[i][0])return i;return!1}et(Re,{morph:function(e,i,n,s,a){for(var o=this.parse(e),l=this.parse(i),h=0,c=0,d=!1,u=!1;!1!==h||!1!==c;){var p;d=r(o,!1!==h&&h+1),u=r(l,!1!==c&&c+1),!1===h&&(h=0==(p=new Re(f.start).bbox()).height||0==p.width?o.push(o[0])-1:o.push(["M",p.x+p.width/2,p.y+p.height/2])-1),!1===c&&(c=0==(p=new Re(f.dest).bbox()).height||0==p.width?l.push(l[0])-1:l.push(["M",p.x+p.width/2,p.y+p.height/2])-1);var f=t(o,h,d,l,c,u);o=o.slice(0,h).concat(f.start,!1===d?[]:o.slice(d)),l=l.slice(0,c).concat(f.dest,!1===u?[]:l.slice(u)),h=!1!==d&&h+f.start.length,c=!1!==u&&c+f.dest.length}this._array=o,this.destination=new Re,this.destination._array=l;var g=this.fromArray(o.map((function(t,e){var i=l[e].map((function(i,r){return 0===r?i:s.step(t[r],l[e][r],n,a[e],a)}));return i})));return g}})}();const $n=t=>(t.changedTouches&&(t=t.changedTouches[0]),{x:t.clientX,y:t.clientY});class Kn{constructor(t){t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(t){t?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(t){const e=!t.type.indexOf("mouse");if(e&&1!==t.which&&0!==t.buttons)return;if(this.el.dispatch("beforedrag",{event:t,handler:this}).defaultPrevented)return;t.preventDefault(),t.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point($n(t));const i=(e?"mouseup":"touchend")+".drag";Rt(window,(e?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),Rt(window,i,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:t,handler:this,box:this.box})}drag(t){const{box:e,lastClick:i}=this,n=this.el.point($n(t)),r=n.x-i.x,s=n.y-i.y;if(!r&&!s)return e;const a=e.x+r,o=e.y+s;this.box=new Ct(a,o,e.w,e.h),this.lastClick=n,this.el.dispatch("dragmove",{event:t,handler:this,box:this.box}).defaultPrevented||this.move(a,o)}move(t,e){"svg"===this.el.type?pi.prototype.move.call(this.el,t,e):this.el.move(t,e)}endDrag(t){this.drag(t),this.el.fire("dragend",{event:t,handler:this,box:this.box}),Ot(window,"mousemove.drag"),Ot(window,"touchmove.drag"),Ot(window,"mouseup.drag"),Ot(window,"touchend.drag"),this.init(!0)}}function Zn(t,e,i,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY;e.fire(t,{x:s,y:a,event:r,index:n,points:i})}}function Jn([t,e],{a:i,b:n,c:r,d:s,e:a,f:o}){return[t*i+e*r+a,t*n+e*s+o]}et(Xt,{draggable(t=!0){return(this.remember("_draggable")||new Kn(this)).init(t),this}});let Qn=class{constructor(t){this.el=t,t.remember("_selectHandler",this),this.selection=new pi,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=q();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.createRot=t.createRot||this.createRotFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.updateRot=t.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((t,e,i)=>{const n=this.order[e];this.createHandle.call(this,this.selection,t,e,i,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",Zn(n,this.el,this.handlePoints,e))}))}createHandleFn(t){t.polyline()}updateHandleFn(t,e,i,n){const r=n.at(i-1),s=n[(i+1)%n.length],a=e,o=[a[0]-r[0],a[1]-r[1]],l=[a[0]-s[0],a[1]-s[1]],h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(l[0]*l[0]+l[1]*l[1]),d=[o[0]/h,o[1]/h],u=[l[0]/c,l[1]/c],p=[a[0]-10*d[0],a[1]-10*d[1]],f=[a[0]-10*u[0],a[1]-10*u[1]];t.plot([p,a,f])}updateResizeHandles(){this.handlePoints.forEach(((t,e,i)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),t,e,i,n)}))}createRotFn(t){t.line(),t.circle(5)}getPoint(t){return this.handlePoints[this.order.indexOf(t)]}getPointHandle(t){return this.selection.get(this.order.indexOf(t)+1)}updateRotFn(t,e){const i=this.getPoint("t");t.get(0).plot(i[0],i[1],e[0],e[1]),t.get(1).center(e[0],e[1])}createRotationHandle(){const t=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Zn("rot",this.el,this.handlePoints));this.createRot.call(this,t)}updateRotationHandle(){const t=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(t,this.rotationPoint,this.handlePoints)}updatePoints(){const t=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(t).map((t=>Jn(t,e))),this.rotationPoint=Jn(this.getRotationPoint(t),e)}getHandlePoints({x:t,x2:e,y:i,y2:n,cx:r,cy:s}=this.el.bbox()){return[[t,i],[r,i],[e,i],[e,s],[e,n],[r,n],[t,n],[t,s]]}getRotationPoint({y:t,cx:e}=this.el.bbox()){return[e,t-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const tr=t=>function(e=!0,i={}){"object"==typeof e&&(i=e,e=!0);let n=this.remember("_"+t.name);return n||(e.prototype instanceof Qn?(n=new e(this),e=!0):n=new t(this),this.remember("_"+t.name,n)),n.active(e,i),this};function er(t,e,i,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY;e.fire(t,{x:s,y:a,event:r,index:n,points:i})}}function ir([t,e],{a:i,b:n,c:r,d:s,e:a,f:o}){return[t*i+e*r+a,t*n+e*s+o]}et(Xt,{select:tr(Qn)}),et([Xe,Ve,me],{pointSelect:tr(class{constructor(t){this.el=t,t.remember("_pointSelectHandler",this),this.selection=new pi,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=q();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((t,e,i)=>{this.createHandle.call(this,this.selection,t,e,i),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Zn("point",this.el,this.points,e))}))}createHandleFn(t){t.circle(5)}updateHandleFn(t,e){t.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((t,e,i)=>{this.updateHandle.call(this,this.selection.get(e+1),t,e,i)}))}updatePoints(){const t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>Jn(e,t)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class nr{constructor(t){this.el=t,t.remember("_selectHandler",this),this.selection=new pi,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=q();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.createRot=t.createRot||this.createRotFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.updateRot=t.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((t,e,i)=>{const n=this.order[e];this.createHandle.call(this,this.selection,t,e,i,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",er(n,this.el,this.handlePoints,e))}))}createHandleFn(t){t.polyline()}updateHandleFn(t,e,i,n){const r=n.at(i-1),s=n[(i+1)%n.length],a=e,o=[a[0]-r[0],a[1]-r[1]],l=[a[0]-s[0],a[1]-s[1]],h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(l[0]*l[0]+l[1]*l[1]),d=[o[0]/h,o[1]/h],u=[l[0]/c,l[1]/c],p=[a[0]-10*d[0],a[1]-10*d[1]],f=[a[0]-10*u[0],a[1]-10*u[1]];t.plot([p,a,f])}updateResizeHandles(){this.handlePoints.forEach(((t,e,i)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),t,e,i,n)}))}createRotFn(t){t.line(),t.circle(5)}getPoint(t){return this.handlePoints[this.order.indexOf(t)]}getPointHandle(t){return this.selection.get(this.order.indexOf(t)+1)}updateRotFn(t,e){const i=this.getPoint("t");t.get(0).plot(i[0],i[1],e[0],e[1]),t.get(1).center(e[0],e[1])}createRotationHandle(){const t=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",er("rot",this.el,this.handlePoints));this.createRot.call(this,t)}updateRotationHandle(){const t=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(t,this.rotationPoint,this.handlePoints)}updatePoints(){const t=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(t).map((t=>ir(t,e))),this.rotationPoint=ir(this.getRotationPoint(t),e)}getHandlePoints({x:t,x2:e,y:i,y2:n,cx:r,cy:s}=this.el.bbox()){return[[t,i],[r,i],[e,i],[e,s],[e,n],[r,n],[t,n],[t,s]]}getRotationPoint({y:t,cx:e}=this.el.bbox()){return[e,t-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const rr=t=>function(e=!0,i={}){"object"==typeof e&&(i=e,e=!0);let n=this.remember("_"+t.name);return n||(e.prototype instanceof nr?(n=new e(this),e=!0):n=new t(this),this.remember("_"+t.name,n)),n.active(e,i),this};et(Xt,{select:rr(nr)}),et([Xe,Ve,me],{pointSelect:rr(class{constructor(t){this.el=t,t.remember("_pointSelectHandler",this),this.selection=new pi,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=q();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((t,e,i)=>{this.createHandle.call(this,this.selection,t,e,i),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",er("point",this.el,this.points,e))}))}createHandleFn(t){t.circle(5)}updateHandleFn(t,e){t.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((t,e,i)=>{this.updateHandle.call(this,this.selection.get(e+1),t,e,i)}))}updatePoints(){const t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>ir(e,t)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const sr=t=>(t.changedTouches&&(t=t.changedTouches[0]),{x:t.clientX,y:t.clientY}),ar=t=>{let e=1/0,i=1/0,n=-1/0,r=-1/0;for(let s=0;s<t.length;s++){const a=t[s];e=Math.min(e,a[0]),i=Math.min(i,a[1]),n=Math.max(n,a[0]),r=Math.max(r,a[1])}return new Ct(e,i,n-e,r-i)};class or{constructor(t){this.el=t,t.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(t,e){this.preserveAspectRatio=e.preserveAspectRatio??!1,this.aroundCenter=e.aroundCenter??!1,this.grid=e.grid??0,this.degree=e.degree??0,this.el.off(".resize"),t&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&("rot"===this.eventType?this.rotate(this.lastEvent):"point"===this.eventType?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(t){this.eventType=t.type;const{event:e,index:i,points:n}=t.detail,r=!e.type.indexOf("mouse");if(r&&1!==(e.which||e.buttons))return;if(this.el.dispatch("beforeresize",{event:t,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(sr(e)),this.index=i,this.points=n.slice();const s=(r?"mousemove":"touchmove")+".resize",a=(r?"mouseup":"touchcancel.resize touchend")+".resize";"point"===t.type?Rt(window,s,this.movePoint):"rot"===t.type?Rt(window,s,this.rotate):Rt(window,s,this.resize),Rt(window,a,this.endResize)}resize(t){this.lastEvent=t;const e=this.snapToGrid(this.el.point(sr(t)));let i=e.x-this.startPoint.x,n=e.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(i*=2,n*=2);const r=this.box.x+i,s=this.box.y+n,a=this.box.x2+i,o=this.box.y2+n;let l=new Ct(this.box);if(this.eventType.includes("l")&&(l.x=Math.min(r,this.box.x2),l.x2=Math.max(r,this.box.x2)),this.eventType.includes("r")&&(l.x=Math.min(a,this.box.x),l.x2=Math.max(a,this.box.x)),this.eventType.includes("t")&&(l.y=Math.min(s,this.box.y2),l.y2=Math.max(s,this.box.y2)),this.eventType.includes("b")&&(l.y=Math.min(o,this.box.y),l.y2=Math.max(o,this.box.y)),l.width=l.x2-l.x,l.height=l.y2-l.y,this.preserveAspectRatio){const t=l.width/this.box.width,e=l.height/this.box.height,i=["lt","t","rt","r","rb","b","lb","l"],n=(i.indexOf(this.eventType)+4)%i.length,r=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[n];let s=this.eventType.includes("t")||this.eventType.includes("b")?e:t;s=2===this.eventType.length?Math.max(t,e):s,l=function(t,e,i){const n=[[t.x,t.y],[t.x+t.width,t.y],[t.x+t.width,t.y+t.height],[t.x,t.y+t.height]].map((([t,n])=>{const r=t-e[0],s=(n-e[1])*i;return[r*i+e[0],s+e[1]]}));return ar(n)}(this.box,r,s)}this.el.dispatch("resize",{box:new Ct(l),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.size(l.width,l.height).move(l.x,l.y)}movePoint(t){this.lastEvent=t;const{x:e,y:i}=this.snapToGrid(this.el.point(sr(t))),n=this.el.array().slice();n[this.index]=[e,i],this.el.dispatch("resize",{box:ar(n),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.plot(n)}rotate(t){this.lastEvent=t;const e=this.startPoint,i=this.el.point(sr(t)),{cx:n,cy:r}=this.box,s=e.x-n,a=e.y-r,o=i.x-n,l=i.y-r,h=Math.sqrt(s*s+a*a)*Math.sqrt(o*o+l*l);if(0===h)return;let c=Math.acos((s*o+a*l)/h)/Math.PI*180;if(!c)return;i.x<e.x&&(c=-c);const d=new kt(this.el),{x:u,y:p}=new yt(n,r).transformO(d),{rotate:f}=d.decompose(),g=this.snapToAngle(f+c)-f;this.el.dispatch("resize",{box:this.box,angle:g,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.transform(d.rotateO(g,u,p))}endResize(t){"rot"!==this.eventType&&"point"!==this.eventType&&this.resize(t),this.lastEvent=null,this.eventType="",Ot(window,"mousemove.resize touchmove.resize"),Ot(window,"mouseup.resize touchend.resize")}snapToGrid(t){return this.grid&&(t.x=Math.round(t.x/this.grid)*this.grid,t.y=Math.round(t.y/this.grid)*this.grid),t}snapToAngle(t){return this.degree&&(t=Math.round(t/this.degree)*this.degree),t}}et(Xt,{resize:function(t=!0,e={}){"object"==typeof t&&(e=t,t=!0);let i=this.remember("_ResizeHandler");return i||(t.prototype instanceof or?(i=new t(this),t=!0):i=new or(this),this.remember("_resizeHandler",i)),i.active(t,e),this}}),void 0===window.SVG&&(window.SVG=yi),void 0===window.Apex&&(window.Apex={});var lr=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new A(this.ctx),this.ctx.axes=new an(this.ctx),this.ctx.core=new Yn(this.ctx.el,this.ctx),this.ctx.config=new ji({}),this.ctx.data=new Ki(this.ctx),this.ctx.grid=new Qi(this.ctx),this.ctx.graphics=new Mi(this.ctx),this.ctx.coreUtils=new Ti(this.ctx),this.ctx.crosshairs=new on(this.ctx),this.ctx.events=new rn(this.ctx),this.ctx.exports=new Zi(this.ctx),this.ctx.fill=new Vi(this.ctx),this.ctx.localization=new sn(this.ctx),this.ctx.options=new zi,this.ctx.responsive=new ln(this.ctx),this.ctx.series=new $i(this.ctx),this.ctx.theme=new hn(this.ctx),this.ctx.formatters=new Li(this.ctx),this.ctx.titleSubtitle=new cn(this.ctx),this.ctx.legend=new bn(this.ctx),this.ctx.toolbar=new xn(this.ctx),this.ctx.tooltip=new _n(this.ctx),this.ctx.dimensions=new gn(this.ctx),this.ctx.updateHelpers=new Un(this.ctx),this.ctx.zoomPanSelection=new vn(this.ctx),this.ctx.w.globals.tooltip=new _n(this.ctx)}}]),t}(),hr=function(){function t(e){s(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each((function(){this.removeClass("*"),this.off()}),!0),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!i&&(n.parentNode.parentNode.style.minHeight="unset");var r=this.w.globals.dom.baseEl;r&&this.ctx.eventList.forEach((function(t){r.removeEventListener(t,e.ctx.events.documentEvent)}));var s=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(s.Paper),s.Paper.remove(),s.elWrap=null,s.elGraphical=null,s.elLegendWrap=null,s.elLegendForeign=null,s.baseEl=null,s.elGridRect=null,s.elGridRectMask=null,s.elGridRectBarMask=null,s.elGridRectMarkerMask=null,s.elForecastMask=null,s.elNonForecastMask=null,s.elDefs=null}}]),t}(),cr=new WeakMap,dr=function(){function t(e,i){s(this,t),this.opts=i,this.ctx=this,this.w=new Xi(i).init(),this.el=e,this.w.globals.cuid=k.randomId(),this.w.globals.chartID=this.w.config.chart.id?k.escapeString(this.w.config.chart.id):this.w.globals.cuid,new lr(this).initModules(),this.create=k.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return o(t,[{key:"render",value:function(){var t=this;return new Promise((function(e,i){if(k.elementExists(t.el)){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var n=t.w.config.chart.events.beforeMount;"function"==typeof n&&n(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(t,e){var i=!1;if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var n=t.getBoundingClientRect();"none"!==t.style.display&&0!==n.width||(i=!0)}var r=new ResizeObserver((function(n){i&&e.call(t,n),i=!0}));t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach((function(t){return r.observe(t)})):r.observe(t),cr.set(e,r)}(t.el.parentNode,t.parentResizeHandler);var r=t.el.getRootNode&&t.el.getRootNode(),s=k.is("ShadowRoot",r),a=t.el.ownerDocument,o=s?r.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!o){var l;(o=document.createElement("style")).id="apexcharts-css",o.textContent='@keyframes opaque {\n  0% {\n    opacity: 0\n  }\n\n  to {\n    opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n\n  0%,\n  to {\n    opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  direction: ltr !important;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\nrect.legend-mouseover-inactive,\n.legend-mouseover-inactive rect,\n.legend-mouseover-inactive path,\n.legend-mouseover-inactive circle,\n.legend-mouseover-inactive line,\n.legend-mouseover-inactive text.apexcharts-yaxis-title-text,\n.legend-mouseover-inactive text.apexcharts-yaxis-label {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, .96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, .8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, .7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-z-value:empty,\n.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,\n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,\n.apexcharts-tooltip-text-goals-label,\n.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  display: inline-block;\n  position: relative;\n  width: 16px;\n  height: 16px;\n  font-size: 16px;\n  line-height: 16px;\n  margin-right: 4px;\n  text-align: center;\n  vertical-align: middle;\n  color: inherit;\n}\n\n.apexcharts-tooltip-marker::before {\n  content: "";\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: currentcolor;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  font-size: 26px;\n  line-height: 14px;\n  font-weight: 900;\n}\n\n.apexcharts-tooltip-marker[shape="circle"]::before {\n  content: "\\25CF";\n}\n\n.apexcharts-tooltip-marker[shape="square"]::before,\n.apexcharts-tooltip-marker[shape="rect"]::before {\n  content: "\\25A0";\n  transform: translate(-1px, -2px);\n}\n\n.apexcharts-tooltip-marker[shape="line"]::before {\n  content: "\\2500";\n}\n\n.apexcharts-tooltip-marker[shape="diamond"]::before {\n  content: "\\25C6";\n  font-size: 28px;\n}\n\n.apexcharts-tooltip-marker[shape="triangle"]::before {\n  content: "\\25B2";\n  font-size: 22px;\n}\n\n.apexcharts-tooltip-marker[shape="cross"]::before {\n  content: "\\2715";\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="plus"]::before {\n  content: "\\2715";\n  transform: rotate(45deg) translate(-1px, -1px);\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="star"]::before {\n  content: "\\2605";\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="sparkle"]::before {\n  content: "\\2726";\n  font-size: 20px;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,\n.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, .7);\n  border: 1px solid rgba(0, 0, 0, .5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, .7);\n  border: 1px solid rgba(0, 0, 0, .5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_shape {\n  stroke-width: 1;\n  stroke-dasharray: 10 10;\n  stroke: black;\n  stroke-opacity: 0.1;\n  pointer-events: none;\n  fill: none;\n}\n\n.svg_select_handle {\n  stroke-width: 3;\n  stroke: black;\n  fill: none;\n}\n\n.svg_select_handle_r {\n  cursor: e-resize;\n}\n\n.svg_select_handle_l {\n  cursor: w-resize;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,\n.apexcharts-pan-icon,\n.apexcharts-reset-icon,\n.apexcharts-selection-icon,\n.apexcharts-toolbar-custom-icon,\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,\n.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,\n.apexcharts-reset-icon,\n.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, .7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,\n.apexcharts-datalabel.apexcharts-element-hidden,\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value,\n.apexcharts-datalabels,\n.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-gridline,\n.apexcharts-line,\n.apexcharts-point-annotation-label,\n.apexcharts-radar-series path:not(.apexcharts-marker),\n.apexcharts-radar-series polygon,\n.apexcharts-toolbar svg,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-xaxis-annotation-label,\n.apexcharts-yaxis-annotation-label,\n.apexcharts-zoom-rect,\n.no-pointer-events {\n  pointer-events: none\n}\n\n.apexcharts-tooltip-active .apexcharts-marker {\n  transition: .15s ease all\n}\n\n.apexcharts-radar-series .apexcharts-yaxis {\n  pointer-events: none;\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,\n.resize-triggers,\n.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers {\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows {\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers {\n  pointer-events: none\n}';var h=(null===(l=t.opts.chart)||void 0===l?void 0:l.nonce)||t.w.config.chart.nonce;h&&o.setAttribute("nonce",h),s?r.prepend(o):a.head.appendChild(o)}var c=t.create(t.w.config.series,{});if(!c)return e(t);t.mount(c).then((function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(c)})).catch((function(t){i(t)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(t,e){var i=this,n=this.w;new lr(this).initModules();var r=this.w.globals;if(r.noData=!1,r.animationEnded=!1,!k.elementExists(this.el))return r.animationEnded=!0,this.destroy(),null;if(this.responsive.checkResponsiveConfig(e),n.config.xaxis.convertedCatToNumeric&&new qi(n.config).convertCatToNumericXaxis(n.config,this.ctx),this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===r.svgWidth)return r.animationEnded=!0,null;var s=t;t.forEach((function(t,e){t.hidden&&(s=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:e}))}));var a=Ti.checkComboSeries(s,n.config.chart.type);r.comboCharts=a.comboCharts,r.comboBarCount=a.comboBarCount;var o=s.every((function(t){return t.data&&0===t.data.length}));(0===s.length||o&&r.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(s),this.theme.init(),new Wi(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),r.noData&&r.collapsedSeries.length!==r.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),r.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new Ti(this).getLargestMarkerSize(),this.dimensions.plotCoords();var l=this.core.xySettings();this.grid.createGridMask();var h=this.core.plotChartType(s,l),c=new Ui(this);return c.bringForward(),n.config.dataLabels.background.enabled&&c.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:h,xyRatios:l,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=i.w;return new Promise((function(r,s){if(null===i.el)return s(new Error("Not enough data to display or target element not found"));(null===e||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new Qi(i);var a,o,l=i.grid.drawGrid();if(i.annotations=new Fi(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===n.config.grid.position&&(l&&n.globals.dom.elGraphical.add(l.el),null!=l&&null!==(a=l.elGridBorders)&&void 0!==a&&a.node&&n.globals.dom.elGraphical.add(l.elGridBorders)),Array.isArray(e.elGraph))for(var h=0;h<e.elGraph.length;h++)n.globals.dom.elGraphical.add(e.elGraph[h]);else n.globals.dom.elGraphical.add(e.elGraph);"front"===n.config.grid.position&&(l&&n.globals.dom.elGraphical.add(l.el),null!=l&&null!==(o=l.elGridBorders)&&void 0!==o&&o.node&&n.globals.dom.elGraphical.add(l.elGridBorders)),"front"===n.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===n.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"treemap"!==n.config.chart.type&&i.axes.drawAxis(n.config.chart.type,l);var c=new Ji(t.ctx,l),d=new nn(t.ctx,l);if(null!==l&&(c.xAxisLabelCorrections(l.xAxisTickWidth),d.setYAxisTextAlignments(),n.config.yaxis.map((function(t,e){-1===n.globals.ignoreYAxisIndexes.indexOf(e)&&d.yAxisTitleRotate(e,t.opposite)}))),i.annotations.drawAxesAnnotations(),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var u=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(t){u[t]=!1}))}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach((function(t){t.method(t.params,!1,t.context)})),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),r(i)}))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(t,e){var i=cr.get(e);i&&(i.disconnect(),cr.delete(e))}(this.el.parentNode,this.parentResizeHandler);var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach((function(e,i){e.id===k.escapeString(t)&&Apex._chartInstances.splice(i,1)})),new hr(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w;return a.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map((function(t,i){return e.updateHelpers._extendSeries(t,i)}))),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,n,r,s)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w.config.series.slice();return n.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),r=0;r<n.length;r++)if(null!==t[r]&&void 0!==t[r])for(var s=0;s<t[r].data.length;s++)n[r].data.push(t[r].data[s]);return i.w.config.series=n,e&&(i.w.globals.initialSeries=k.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise((function(i,n){new hr(e.ctx).clear({isUpdating:!0});var r=e.create(e.w.config.series,t);if(!r)return i(e);e.mount(r).then((function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)})).catch((function(t){n(t)}))}))}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach((function(t){e.push(t)}))),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(e){return t.w.config.chart.group===e.group?e.chart:t}))}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"highlightSeries",value:function(t){this.series.highlightSeries(t)}},{key:"isSeriesHidden",value:function(t){this.series.isSeriesHidden(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(t,e,n)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(t,e,n)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(t,e,n)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new en(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new en(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new Zi(this.ctx).dataURI(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Zi(this.ctx).exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=k.escapeString(t);if(Apex._chartInstances){var i=Apex._chartInstances.filter((function(t){return t.id===e}))[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var n=null;if(-1!==i.publicMethods.indexOf(e)){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];n=i[e].apply(i,s)}return n}}},{key:"merge",value:function(t,e){return k.extend(t,e)}}]),t}()},30228:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,s||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,e,n,r,s,a){var o=i?i+t:t;if(!this._events[o])return!1;var l,h,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,s),!0;case 6:return c.fn.call(c.context,e,n,r,s,a),!0}for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var u,p=c.length;for(h=0;h<p;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),d){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,n);break;case 4:c[h].fn.call(c[h].context,e,n,r);break;default:if(!l)for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c[h].fn.apply(c[h].context,l)}}return!0},o.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,h=[],c=o.length;l<c;l++)(o[l].fn!==e||r&&!o[l].once||n&&o[l].context!==n)&&h.push(o[l]);h.length?this._events[s]=1===h.length?h[0]:h:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},85606:t=>{var e=-1;function i(t,p,f,g,m){if(t===p)return t?[[0,t]]:[];if(null!=f){var x=function(t,e,i){var n="number"==typeof i?{index:i,length:0}:i.oldRange,r="number"==typeof i?null:i.newRange,s=t.length,a=e.length;if(0===n.length&&(null===r||0===r.length)){var o=n.index,l=t.slice(0,o),h=t.slice(o),c=r?r.index:null,d=o+a-s;if((null===c||c===d)&&!(d<0||d>a)){var u=e.slice(0,d);if((g=e.slice(d))===h){var p=Math.min(o,d);if((x=l.slice(0,p))===(y=u.slice(0,p)))return b(x,l.slice(p),u.slice(p),h)}}if(null===c||c===o){var f=o,g=(u=e.slice(0,f),e.slice(f));if(u===l){var m=Math.min(s-f,a-f);if((v=h.slice(h.length-m))===(w=g.slice(g.length-m)))return b(l,h.slice(0,h.length-m),g.slice(0,g.length-m),v)}}}if(n.length>0&&r&&0===r.length){var x=t.slice(0,n.index),v=t.slice(n.index+n.length);if(!(a<(p=x.length)+(m=v.length))){var y=e.slice(0,p),w=e.slice(a-m);if(x===y&&v===w)return b(x,t.slice(p,s-m),e.slice(p,a-m),v)}}return null}(t,p,f);if(x)return x}var v=r(t,p),y=t.substring(0,v);v=a(t=t.substring(v),p=p.substring(v));var w=t.substring(t.length-v),k=function(t,s){var o;if(!t)return[[1,s]];if(!s)return[[e,t]];var l=t.length>s.length?t:s,h=t.length>s.length?s:t,c=l.indexOf(h);if(-1!==c)return o=[[1,l.substring(0,c)],[0,h],[1,l.substring(c+h.length)]],t.length>s.length&&(o[0][0]=o[2][0]=e),o;if(1===h.length)return[[e,t],[1,s]];var d=function(t,e){var i=t.length>e.length?t:e,n=t.length>e.length?e:t;if(i.length<4||2*n.length<i.length)return null;function s(t,e,i){for(var n,s,o,l,h=t.substring(i,i+Math.floor(t.length/4)),c=-1,d="";-1!==(c=e.indexOf(h,c+1));){var u=r(t.substring(i),e.substring(c)),p=a(t.substring(0,i),e.substring(0,c));d.length<p+u&&(d=e.substring(c-p,c)+e.substring(c,c+u),n=t.substring(0,i-p),s=t.substring(i+u),o=e.substring(0,c-p),l=e.substring(c+u))}return 2*d.length>=t.length?[n,s,o,l,d]:null}var o,l,h,c,d,u=s(i,n,Math.ceil(i.length/4)),p=s(i,n,Math.ceil(i.length/2));if(!u&&!p)return null;o=p?u&&u[4].length>p[4].length?u:p:u;t.length>e.length?(l=o[0],h=o[1],c=o[2],d=o[3]):(c=o[0],d=o[1],l=o[2],h=o[3]);var f=o[4];return[l,h,c,d,f]}(t,s);if(d){var u=d[0],p=d[1],f=d[2],g=d[3],m=d[4],b=i(u,f),x=i(p,g);return b.concat([[0,m]],x)}return function(t,i){for(var r=t.length,s=i.length,a=Math.ceil((r+s)/2),o=a,l=2*a,h=new Array(l),c=new Array(l),d=0;d<l;d++)h[d]=-1,c[d]=-1;h[o+1]=0,c[o+1]=0;for(var u=r-s,p=u%2!=0,f=0,g=0,m=0,b=0,x=0;x<a;x++){for(var v=-x+f;v<=x-g;v+=2){for(var y=o+v,w=(_=v===-x||v!==x&&h[y-1]<h[y+1]?h[y+1]:h[y-1]+1)-v;_<r&&w<s&&t.charAt(_)===i.charAt(w);)_++,w++;if(h[y]=_,_>r)g+=2;else if(w>s)f+=2;else if(p){if((S=o+u-v)>=0&&S<l&&-1!==c[S])if(_>=(A=r-c[S]))return n(t,i,_,w)}}for(var k=-x+m;k<=x-b;k+=2){for(var A,S=o+k,C=(A=k===-x||k!==x&&c[S-1]<c[S+1]?c[S+1]:c[S-1]+1)-k;A<r&&C<s&&t.charAt(r-A-1)===i.charAt(s-C-1);)A++,C++;if(c[S]=A,A>r)b+=2;else if(C>s)m+=2;else if(!p){if((y=o+u-k)>=0&&y<l&&-1!==h[y]){var _;w=o+(_=h[y])-y;if(_>=(A=r-A))return n(t,i,_,w)}}}}return[[e,t],[1,i]]}(t,s)}(t=t.substring(0,t.length-v),p=p.substring(0,p.length-v));return y&&k.unshift([0,y]),w&&k.push([0,w]),u(k,m),g&&function(t){var i=!1,n=[],r=0,p=null,f=0,g=0,m=0,b=0,x=0;for(;f<t.length;)0==t[f][0]?(n[r++]=f,g=b,m=x,b=0,x=0,p=t[f][1]):(1==t[f][0]?b+=t[f][1].length:x+=t[f][1].length,p&&p.length<=Math.max(g,m)&&p.length<=Math.max(b,x)&&(t.splice(n[r-1],0,[e,p]),t[n[r-1]+1][0]=1,r--,f=--r>0?n[r-1]:-1,g=0,m=0,b=0,x=0,p=null,i=!0)),f++;i&&u(t);(function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),n=e.charAt(0),r=i.match(o),s=n.match(o),a=r&&i.match(l),u=s&&n.match(l),p=a&&i.match(h),f=u&&n.match(h),g=p&&t.match(c),m=f&&e.match(d);return g||m?5:p||f?4:r&&!a&&u?3:a||u?2:r||s?1:0}var i=1;for(;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var n=t[i-1][1],r=t[i][1],s=t[i+1][1],u=a(n,r);if(u){var p=r.substring(r.length-u);n=n.substring(0,n.length-u),r=p+r.substring(0,r.length-u),s=p+s}for(var f=n,g=r,m=s,b=e(n,r)+e(r,s);r.charAt(0)===s.charAt(0);){n+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var x=e(n,r)+e(r,s);x>=b&&(b=x,f=n,g=r,m=s)}t[i-1][1]!=f&&(f?t[i-1][1]=f:(t.splice(i-1,1),i--),t[i][1]=g,m?t[i+1][1]=m:(t.splice(i+1,1),i--))}i++}})(t),f=1;for(;f<t.length;){if(t[f-1][0]==e&&1==t[f][0]){var v=t[f-1][1],y=t[f][1],w=s(v,y),k=s(y,v);w>=k?(w>=v.length/2||w>=y.length/2)&&(t.splice(f,0,[0,y.substring(0,w)]),t[f-1][1]=v.substring(0,v.length-w),t[f+1][1]=y.substring(w),f++):(k>=v.length/2||k>=y.length/2)&&(t.splice(f,0,[0,v.substring(0,k)]),t[f-1][0]=1,t[f-1][1]=y.substring(0,y.length-k),t[f+1][0]=e,t[f+1][1]=v.substring(k),f++),f++}f++}}(k),k}function n(t,e,n,r){var s=t.substring(0,n),a=e.substring(0,r),o=t.substring(n),l=e.substring(r),h=i(s,a),c=i(o,l);return h.concat(c)}function r(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(s,r)==e.substring(s,r)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return p(t.charCodeAt(r-1))&&r--,r}function s(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;i>n?t=t.substring(i-n):i<n&&(e=e.substring(0,i));var r=Math.min(i,n);if(t==e)return r;for(var s=0,a=1;;){var o=t.substring(r-a),l=e.indexOf(o);if(-1==l)return s;a+=l,0!=l&&t.substring(r-a)!=e.substring(0,a)||(s=a,a++)}}function a(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return f(t.charCodeAt(t.length-r))&&r--,r}var o=/[^a-zA-Z0-9]/,l=/\s/,h=/[\r\n]/,c=/\n\r?\n$/,d=/^\r?\n\r?\n/;function u(t,i){t.push([0,""]);for(var n,s=0,o=0,l=0,h="",c="";s<t.length;)if(s<t.length-1&&!t[s][1])t.splice(s,1);else switch(t[s][0]){case 1:l++,c+=t[s][1],s++;break;case e:o++,h+=t[s][1],s++;break;case 0:var d=s-l-o-1;if(i){if(d>=0&&m(t[d][1])){var p=t[d][1].slice(-1);if(t[d][1]=t[d][1].slice(0,-1),h=p+h,c=p+c,!t[d][1]){t.splice(d,1),s--;var f=d-1;t[f]&&1===t[f][0]&&(l++,c=t[f][1]+c,f--),t[f]&&t[f][0]===e&&(o++,h=t[f][1]+h,f--),d=f}}if(g(t[s][1])){p=t[s][1].charAt(0);t[s][1]=t[s][1].slice(1),h+=p,c+=p}}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(h.length>0||c.length>0){h.length>0&&c.length>0&&(0!==(n=r(c,h))&&(d>=0?t[d][1]+=c.substring(0,n):(t.splice(0,0,[0,c.substring(0,n)]),s++),c=c.substring(n),h=h.substring(n)),0!==(n=a(c,h))&&(t[s][1]=c.substring(c.length-n)+t[s][1],c=c.substring(0,c.length-n),h=h.substring(0,h.length-n)));var b=l+o;0===h.length&&0===c.length?(t.splice(s-b,b),s-=b):0===h.length?(t.splice(s-b,b,[1,c]),s=s-b+1):0===c.length?(t.splice(s-b,b,[e,h]),s=s-b+1):(t.splice(s-b,b,[e,h],[1,c]),s=s-b+2)}0!==s&&0===t[s-1][0]?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,l=0,o=0,h="",c=""}""===t[t.length-1][1]&&t.pop();var x=!1;for(s=1;s<t.length-1;)0===t[s-1][0]&&0===t[s+1][0]&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),x=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),x=!0)),s++;x&&u(t,i)}function p(t){return t>=55296&&t<=56319}function f(t){return t>=56320&&t<=57343}function g(t){return f(t.charCodeAt(0))}function m(t){return p(t.charCodeAt(t.length-1))}function b(t,i,n,r){return m(t)||g(r)?null:function(t){for(var e=[],i=0;i<t.length;i++)t[i][1].length>0&&e.push(t[i]);return e}([[0,t],[e,i],[1,n],[0,r]])}function x(t,e,n,r){return i(t,e,n,r,!0)}x.INSERT=1,x.DELETE=e,x.EQUAL=0,t.exports=x},85619:function(t,e,i){var n;"undefined"!=typeof self&&self,n=function(t){return function(){"use strict";var e={757:function(e){e.exports=t}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={};n.d(r,{default:function(){return u}});var s=n(757),a=n.n(s);const o=function(t,e,i){let n=i,r=0;const s=t.length;for(;n<e.length;){const i=e[n];if(r<=0&&e.slice(n,n+s)===t)return n;"\\"===i?n++:"{"===i?r++:"}"===i&&r--,n++}return-1},l=/^\\begin{/;var h=function(t,e){let i;const n=[],r=new RegExp("("+e.map((t=>t.left.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|")+")");for(;i=t.search(r),-1!==i;){i>0&&(n.push({type:"text",data:t.slice(0,i)}),t=t.slice(i));const r=e.findIndex((e=>t.startsWith(e.left)));if(i=o(e[r].right,t,e[r].left.length),-1===i)break;const s=t.slice(0,i+e[r].right.length),a=l.test(s)?s:t.slice(e[r].left.length,i);n.push({type:"math",data:a,rawData:s,display:e[r].display}),t=t.slice(i+e[r].right.length)}return""!==t&&n.push({type:"text",data:t}),n};const c=function(t,e){const i=h(t,e.delimiters);if(1===i.length&&"text"===i[0].type)return null;const n=document.createDocumentFragment();for(let t=0;t<i.length;t++)if("text"===i[t].type)n.appendChild(document.createTextNode(i[t].data));else{const r=document.createElement("span");let s=i[t].data;e.displayMode=i[t].display;try{e.preProcess&&(s=e.preProcess(s)),a().render(s,r,e)}catch(r){if(!(r instanceof a().ParseError))throw r;e.errorCallback("KaTeX auto-render: Failed to parse `"+i[t].data+"` with ",r),n.appendChild(document.createTextNode(i[t].rawData));continue}n.appendChild(r)}return n},d=function(t,e){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(3===n.nodeType){let r=n.textContent,s=n.nextSibling,a=0;for(;s&&s.nodeType===Node.TEXT_NODE;)r+=s.textContent,s=s.nextSibling,a++;const o=c(r,e);if(o){for(let t=0;t<a;t++)n.nextSibling.remove();i+=o.childNodes.length-1,t.replaceChild(o,n)}else i+=a}else if(1===n.nodeType){const t=" "+n.className+" ";-1===e.ignoredTags.indexOf(n.nodeName.toLowerCase())&&e.ignoredClasses.every((e=>-1===t.indexOf(" "+e+" ")))&&d(n,e)}}};var u=function(t,e){if(!t)throw new Error("No element provided to render");const i={};for(const t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);i.delimiters=i.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],i.ignoredTags=i.ignoredTags||["script","noscript","style","textarea","pre","code","option"],i.ignoredClasses=i.ignoredClasses||[],i.errorCallback=i.errorCallback||console.error,i.macros=i.macros||{},d(t,i)};return r=r.default}()},t.exports=n(i(89890))},27377:function(t,e,i){var n;"undefined"!=typeof self&&self,n=function(t){return function(){"use strict";var e={757:function(e){e.exports=t}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={},s=n(757),a=n.n(s);a().__defineMacro("\\ce",(function(t){return o(t.consumeArgs(1)[0],"ce")})),a().__defineMacro("\\pu",(function(t){return o(t.consumeArgs(1)[0],"pu")})),a().__defineMacro("\\tripledash","{\\vphantom{-}\\raisebox{2.56mu}{$\\mkern2mu\\tiny\\text{-}\\mkern1mu\\text{-}\\mkern1mu\\text{-}\\mkern2mu$}}");var o=function(t,e){for(var i="",n=t.length&&t[t.length-1].loc.start,r=t.length-1;r>=0;r--)t[r].loc.start>n&&(i+=" ",n=t[r].loc.start),i+=t[r].text,n+=t[r].text.length;return h.go(l.go(i,e))},l={go:function(t,e){if(!t)return[];void 0===e&&(e="ce");var i,n="0",r={parenthesisLevel:0};t=(t=(t=t.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var s=10,a=[];;){i!==t?(s=10,i=t):s--;var o=l.stateMachines[e],h=o.transitions[n]||o.transitions["*"];t:for(var c=0;c<h.length;c++){var d=l.patterns.match_(h[c].pattern,t);if(d){for(var u=h[c].task,p=0;p<u.action_.length;p++){var f;if(o.actions[u.action_[p].type_])f=o.actions[u.action_[p].type_](r,d.match_,u.action_[p].option);else{if(!l.actions[u.action_[p].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+u.action_[p].type_+")"];f=l.actions[u.action_[p].type_](r,d.match_,u.action_[p].option)}l.concatArray(a,f)}if(n=u.nextState||n,!(t.length>0))return a;if(u.revisit||(t=d.remainder),!u.toContinue)break t}}if(s<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=l.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var i=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return i?{match_:i[0],remainder:t.substr(i[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return l.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return l.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return l.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return l.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return l.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return l.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return l.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return l.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return l.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return l.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return l.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return l.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return l.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return l.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return l.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return l.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return l.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return l.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return l.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return l.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:e[0],remainder:t.substr(e[0].length)};var i=l.patterns.findObserveGroups(t,"","$","$","");return i&&(e=i.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,i,n,r,s,a,o,l,h){var c=function(t,e){if("string"==typeof e)return 0!==t.indexOf(e)?null:e;var i=t.match(e);return i?i[0]:null},d=c(t,e);if(null===d)return null;if(t=t.substr(d.length),null===(d=c(t,i)))return null;var u=function(t,e,i){for(var n=0;e<t.length;){var r=t.charAt(e),s=c(t.substr(e),i);if(null!==s&&0===n)return{endMatchBegin:e,endMatchEnd:e+s.length};if("{"===r)n++;else if("}"===r){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}e++}return null}(t,d.length,n||r);if(null===u)return null;var p=t.substring(0,n?u.endMatchEnd:u.endMatchBegin);if(s||a){var f=this.findObserveGroups(t.substr(u.endMatchEnd),s,a,o,l);if(null===f)return null;var g=[p,f.match_];return{match_:h?g.join(""):g,remainder:f.remainder}}return{match_:p,remainder:t.substr(u.endMatchEnd)}},match_:function(t,e){var i=l.patterns.patterns[t];if(void 0===i)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if("function"==typeof i)return l.patterns.patterns[t](e);var n=e.match(i);return n?{match_:n[2]?[n[1],n[2]]:n[1]?n[1]:n[0],remainder:e.substr(n[0].length)}:null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,i){return{type_:i}},"insert+p1":function(t,e,i){return{type_:i,p1:e}},"insert+p1+p2":function(t,e,i){return{type_:i,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return l.go(e,"text")},"{text}":function(t,e){var i=["{"];return l.concatArray(i,l.go(e,"text")),i.push("}"),i},"tex-math":function(t,e){return l.go(e,"tex-math")},"tex-math tight":function(t,e){return l.go(e,"tex-math tight")},bond:function(t,e,i){return{type_:"bond",kind_:i||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return l.go(e)},"1/2":function(t,e){var i=[];e.match(/^[+\-]/)&&(i.push(e.substr(0,1)),e=e.substr(1));var n=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),i.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),i.push({type_:"tex-math",p1:n[3]})),i},"9,9":function(t,e){return l.go(e,"9,9")}},createTransitions:function(t){var e,i,n,r,s={};for(e in t)for(i in t[e])for(n=i.split("|"),t[e][i].stateArray=n,r=0;r<n.length;r++)s[n[r]]=[];for(e in t)for(i in t[e])for(n=t[e][i].stateArray||[],r=0;r<n.length;r++){var a=t[e][i];if(a.action_){a.action_=[].concat(a.action_);for(var o=0;o<a.action_.length;o++)"string"==typeof a.action_[o]&&(a.action_[o]={type_:a.action_[o]})}else a.action_=[];for(var l=e.split("|"),h=0;h<l.length;h++)if("*"===n[r])for(var c in s)s[c].push({pattern:l[h],task:a});else s[n[r]].push({pattern:l[h],task:a})}return s},stateMachines:{}};l.stateMachines={ce:{transitions:l.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var i;if((t.d||"").match(/^[0-9]+$/)){var n=t.d;t.d=void 0,i=this.output(t),t.b=n}else i=this.output(t);return l.actions["o="](t,e),i},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var i=[];return l.concatArray(i,this.output(t)),l.concatArray(i,l.actions.bond(t,e,"-")),i}t.d=e},"- after o/d":function(t,e,i){var n=l.patterns.match_("orbital",t.o||""),r=l.patterns.match_("one lowercase greek letter $",t.o||""),s=l.patterns.match_("one lowercase latin letter $",t.o||""),a=l.patterns.match_("$one lowercase latin letter$ $",t.o||""),o="-"===e&&(n&&""===n.remainder||r||s||a);!o||t.a||t.b||t.p||t.d||t.q||n||!s||(t.o="$"+t.o+"$");var h=[];return o?(l.concatArray(h,this.output(t)),h.push({type_:"hyphen"})):(n=l.patterns.match_("digits",t.d||""),i&&n&&""===n.remainder?(l.concatArray(h,l.actions["d="](t,e)),l.concatArray(h,this.output(t))):(l.concatArray(h,this.output(t)),l.concatArray(h,l.actions.bond(t,e,"-")))),h},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:l.go(e,"o")}},comma:function(t,e){var i=e.replace(/\s*$/,"");return i!==e&&0===t.parenthesisLevel?{type_:"comma enumeration L",p1:i}:{type_:"comma enumeration M",p1:i}},output:function(t,e,i){var n,r,s;for(var a in t.r?(r="M"===t.rdt?l.go(t.rd,"tex-math"):"T"===t.rdt?[{type_:"text",p1:t.rd||""}]:l.go(t.rd),s="M"===t.rqt?l.go(t.rq,"tex-math"):"T"===t.rqt?[{type_:"text",p1:t.rq||""}]:l.go(t.rq),n={type_:"arrow",r:t.r,rd:r,rq:s}):(n=[],(t.a||t.b||t.p||t.o||t.q||t.d||i)&&(t.sb&&n.push({type_:"entitySkip"}),t.o||t.q||t.d||t.b||t.p||2===i?t.o||t.q||t.d||!t.b&&!t.p?t.o&&"kv"===t.dType&&l.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&"kv"===t.dType&&!t.q&&(t.dType=void 0):(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):(t.o=t.a,t.a=void 0),n.push({type_:"chemfive",a:l.go(t.a,"a"),b:l.go(t.b,"bd"),p:l.go(t.p,"pq"),o:l.go(t.o,"o"),q:l.go(t.q,"pq"),d:l.go(t.d,"oxidation"===t.dType?"oxidation":"bd"),dType:t.dType}))),t)"parenthesisLevel"!==a&&"beginsWithBond"!==a&&delete t[a];return n},"oxidation-output":function(t,e){var i=["{"];return l.concatArray(i,l.go(e,"oxidation")),i.push("}"),i},"frac-output":function(t,e){return{type_:"frac-ce",p1:l.go(e[0]),p2:l.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:l.go(e[0]),p2:l.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:l.go(e[0]),p2:l.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:l.go(e[0]),p2:l.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:l.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,i){return{type_:"operator",kind_:i||e}}}},a:{transitions:l.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:l.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:l.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var i in t)delete t[i];return e}}}},pq:{transitions:l.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:l.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:l.go(e[1],"pq")}}}},bd:{transitions:l.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:l.go(e[1],"bd")}}}},oxidation:{transitions:l.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:l.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var i in t)delete t[i];return e}}}},"tex-math tight":{transitions:l.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var i in t)delete t[i];return e}}}},"9,9":{transitions:l.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:l.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var i=[];return"+-"===e[0]||"+/-"===e[0]?i.push("\\pm "):e[0]&&i.push(e[0]),e[1]&&(l.concatArray(i,l.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?l.concatArray(i,l.go(e[2],"pu-9,9")):i.push(e[2])),e[3]=e[4]||e[3],e[3]&&(e[3]=e[3].trim(),"e"===e[3]||"*"===e[3].substr(0,1)?i.push({type_:"cdot"}):i.push({type_:"times"}))),e[3]&&i.push("10^{"+e[5]+"}"),i},"number^":function(t,e){var i=[];return"+-"===e[0]||"+/-"===e[0]?i.push("\\pm "):e[0]&&i.push(e[0]),l.concatArray(i,l.go(e[1],"pu-9,9")),i.push("^{"+e[2]+"}"),i},operator:function(t,e,i){return{type_:"operator",kind_:i||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,i=l.patterns.match_("{(...)}",t.d||"");i&&""===i.remainder&&(t.d=i.match_);var n=l.patterns.match_("{(...)}",t.q||"");if(n&&""===n.remainder&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var r={d:l.go(t.d,"pu"),q:l.go(t.q,"pu")};"//"===t.o?e={type_:"pu-frac",p1:r.d,p2:r.q}:(e=r.d,r.d.length>1||r.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),l.concatArray(e,r.q))}else e=l.go(t.d,"pu-2");for(var s in t)delete t[s];return e}}},"pu-2":{transitions:l.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var i=l.patterns.match_("{(...)}",t.rm||"");e=i&&""===i.remainder?l.go(i.match_,"pu"):{type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return e}}},"pu-9,9":{transitions:l.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var i=t.text_.length%3;0===i&&(i=3);for(var n=t.text_.length-3;n>0;n-=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,i)),e.reverse()}else e.push(t.text_);for(var r in t)delete t[r];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var i=t.text_.length-3,n=0;n<i;n+=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(n))}else e.push(t.text_);for(var r in t)delete t[r];return e}}}};var h={go:function(t,e){if(!t)return"";for(var i="",n=!1,r=0;r<t.length;r++){var s=t[r];"string"==typeof s?i+=s:(i+=h._go2(s),"1st-level escape"===s.type_&&(n=!0))}return e||n||!i||(i="{"+i+"}"),i},_goInner:function(t){return t?h.go(t,!0):t},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var i={a:h._goInner(t.a),b:h._goInner(t.b),p:h._goInner(t.p),o:h._goInner(t.o),q:h._goInner(t.q),d:h._goInner(t.d)};i.a&&(i.a.match(/^[+\-]/)&&(i.a="{"+i.a+"}"),e+=i.a+"\\,"),(i.b||i.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(i.b||"")+"}}_{\\hphantom{"+(i.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(i.b||"")+"}}",e+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(i.p||"")+"}}}"),i.o&&(i.o.match(/^[+\-]/)&&(i.o="{"+i.o+"}"),e+=i.o),"kv"===t.dType?((i.d||i.q)&&(e+="{\\vphantom{X}}"),i.d&&(e+="^{"+i.d+"}"),i.q&&(e+="_{\\smash[t]{"+i.q+"}}")):"oxidation"===t.dType?(i.d&&(e+="{\\vphantom{X}}",e+="^{"+i.d+"}"),i.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+i.q+"}}")):(i.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+i.q+"}}"),i.d&&(e+="{\\vphantom{X}}",e+="^{"+i.d+"}"));break;case"rm":case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+h._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+h._goInner(t.p1);break;case"bond":if(!(e=h._getBond(t.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var r="\\frac{"+h._goInner(t.p1)+"}{"+h._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+r+"}{"+r+"}{"+r+"}{"+r+"}";break;case"tex-math":case"1st-level escape":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+h._goInner(t.p1)+"}{"+h._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+h._goInner(t.p1)+"}{"+h._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+h._goInner(t.p1)+"}{"+h._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+h._goInner(t.p1)+"}_{"+h._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+h._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var s={rd:h._goInner(t.rd),rq:h._goInner(t.rq)},a="\\x"+h._getArrow(t.r);s.rq&&(a+="[{"+s.rq+"}]"),e=a+=s.rd?"{"+s.rd+"}":"{}";break;case"operator":e=h._getOperator(t.kind_);break;case"space":e=" ";break;case"entitySkip":case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":case"":case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};return r=r.default}()},t.exports=n(i(89890))},89890:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(){"use strict";var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Vn}});class i{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let n,r,s="KaTeX parse error: "+t;const a=e&&e.loc;if(a&&a.start<=a.end){const t=a.lexer.input;n=a.start,r=a.end,n===t.length?s+=" at end of input: ":s+=" at position "+(n+1)+": ";const e=t.slice(n,r).replace(/[^]/g,"$&");let i,o;i=n>15?""+t.slice(n-15,n):t.slice(0,n),o=r+15<t.length?t.slice(r,r+15)+"":t.slice(r),s+=i+e+o}const o=new Error(s);return o.name="ParseError",o.__proto__=i.prototype,o.position=n,null!=n&&null!=r&&(o.length=r-n),o.rawMessage=t,o}}i.prototype.__proto__=Error.prototype;var n=i;const r=/([A-Z])/g,s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g,o=function(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?o(t.body[0]):t:"font"===t.type?o(t.body):t};var l={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(t){return String(t).replace(a,(t=>s[t]))},hyphenate:function(t){return t.replace(r,"-$1").toLowerCase()},getBaseElem:o,isCharacterBox:function(t){const e=o(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},protocolFromUrl:function(t){const e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?":"!==e[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?e[1].toLowerCase():null:"_relative"}};const h={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>"Infinity"===t?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function c(t){if(t.default)return t.default;const e=t.type,i=Array.isArray(e)?e[0]:e;if("string"!=typeof i)return i.enum[0];switch(i){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class d{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(const e in h)if(h.hasOwnProperty(e)){const i=h[e];this[e]=void 0!==t[e]?i.processor?i.processor(t[e]):t[e]:c(i)}}reportNonstrict(t,e,i){let r=this.strict;if("function"==typeof r&&(r=r(t,e,i)),r&&"ignore"!==r&&(!0===r||"error"===r))throw new n("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",i)}useStrictBehavior(t,e,i){let n=this.strict;if("function"==typeof n)try{n=n(t,e,i)}catch(t){n="error"}return!(!n||"ignore"===n||!0!==n&&"error"!==n)}isTrusted(t){if(t.url&&!t.protocol){const e=l.protocolFromUrl(t.url);if(null==e)return!1;t.protocol=e}const e="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(e)}}class u{constructor(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}sup(){return p[f[this.id]]}sub(){return p[g[this.id]]}fracNum(){return p[m[this.id]]}fracDen(){return p[b[this.id]]}cramp(){return p[x[this.id]]}text(){return p[v[this.id]]}isTight(){return this.size>=2}}const p=[new u(0,0,!1),new u(1,0,!0),new u(2,1,!1),new u(3,1,!0),new u(4,2,!1),new u(5,2,!0),new u(6,3,!1),new u(7,3,!0)],f=[4,5,4,5,6,7,6,7],g=[5,5,5,5,7,7,7,7],m=[2,3,4,5,6,7,6,7],b=[3,3,5,5,7,7,7,7],x=[1,1,3,3,5,5,7,7],v=[0,1,2,3,2,3,2,3];var y={DISPLAY:p[0],TEXT:p[2],SCRIPT:p[4],SCRIPTSCRIPT:p[6]};const w=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],k=[];function A(t){for(let e=0;e<k.length;e+=2)if(t>=k[e]&&t<=k[e+1])return!0;return!1}w.forEach((t=>t.blocks.forEach((t=>k.push(...t)))));const S=80,C={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class _{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return l.contains(this.classes,t)}toNode(){const t=document.createDocumentFragment();for(let e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){return this.children.map((t=>t.toText())).join("")}}var M={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const T={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},E={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function N(t,e,i){if(!M[e])throw new Error("Font metrics not found for font: "+e+".");let n=t.charCodeAt(0),r=M[e][n];if(!r&&t[0]in E&&(n=E[t[0]].charCodeAt(0),r=M[e][n]),r||"text"!==i||A(n)&&(r=M[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}const P={},L=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],I=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],R=function(t,e){return e.size<2?t:L[t-1][e.size-1]};class O{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||O.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=I[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){const e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return new O(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:R(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:I[t-1]})}havingBaseStyle(t){t=t||this.style.text();const e=R(O.BASESIZE,t);return this.size===e&&this.textSize===O.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){let t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==O.BASESIZE?["sizing","reset-size"+this.size,"size"+O.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(t){let e;if(e=t>=5?0:t>=3?1:2,!P[e]){const t=P[e]={cssEmPerMu:T.quad[e]/18};for(const i in T)T.hasOwnProperty(i)&&(t[i]=T[i][e])}return P[e]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}O.BASESIZE=6;var D=O;const z={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},F={ex:!0,em:!0,mu:!0},B=function(t){return"string"!=typeof t&&(t=t.unit),t in z||t in F||"ex"===t},H=function(t,e){let i;if(t.unit in z)i=z[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)i=e.fontMetrics().cssEmPerMu;else{let r;if(r=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)i=r.fontMetrics().xHeight;else{if("em"!==t.unit)throw new n("Invalid unit: '"+t.unit+"'");i=r.fontMetrics().quad}r!==e&&(i*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},q=function(t){return+t.toFixed(4)+"em"},j=function(t){return t.filter((t=>t)).join(" ")},G=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");const t=e.getColor();t&&(this.style.color=t)}},X=function(t){const e=document.createElement(t);e.className=j(this.classes);for(const t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);for(const t in this.attributes)this.attributes.hasOwnProperty(t)&&e.setAttribute(t,this.attributes[t]);for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e},V=/[\s"'>/=\x00-\x1f]/,W=function(t){let e="<"+t;this.classes.length&&(e+=' class="'+l.escape(j(this.classes))+'"');let i="";for(const t in this.style)this.style.hasOwnProperty(t)&&(i+=l.hyphenate(t)+":"+this.style[t]+";");i&&(e+=' style="'+l.escape(i)+'"');for(const t in this.attributes)if(this.attributes.hasOwnProperty(t)){if(V.test(t))throw new n("Invalid attribute name '"+t+"'");e+=" "+t+'="'+l.escape(this.attributes[t])+'"'}e+=">";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e+="</"+t+">",e};class Y{constructor(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,G.call(this,t,i,n),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return l.contains(this.classes,t)}toNode(){return X.call(this,"span")}toMarkup(){return W.call(this,"span")}}class U{constructor(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,G.call(this,e,n),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return l.contains(this.classes,t)}toNode(){return X.call(this,"a")}toMarkup(){return W.call(this,"a")}}class ${constructor(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return l.contains(this.classes,t)}toNode(){const t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(const e in this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){let t='<img src="'+l.escape(this.src)+'" alt="'+l.escape(this.alt)+'"',e="";for(const t in this.style)this.style.hasOwnProperty(t)&&(e+=l.hyphenate(t)+":"+this.style[t]+";");return e&&(t+=' style="'+l.escape(e)+'"'),t+="'/>",t}}const K={:"",:"",:"",:""};class Z{constructor(t,e,i,n,r,s,a,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=n||0,this.skew=r||0,this.width=s||0,this.classes=a||[],this.style=o||{},this.maxFontSize=0;const l=function(t){for(let e=0;e<w.length;e++){const i=w[e];for(let e=0;e<i.blocks.length;e++){const n=i.blocks[e];if(t>=n[0]&&t<=n[1])return i.name}}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=K[this.text])}hasClass(t){return l.contains(this.classes,t)}toNode(){const t=document.createTextNode(this.text);let e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=q(this.italic)),this.classes.length>0&&(e=e||document.createElement("span"),e.className=j(this.classes));for(const t in this.style)this.style.hasOwnProperty(t)&&(e=e||document.createElement("span"),e.style[t]=this.style[t]);return e?(e.appendChild(t),e):t}toMarkup(){let t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=l.escape(j(this.classes)),e+='"');let i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(const t in this.style)this.style.hasOwnProperty(t)&&(i+=l.hyphenate(t)+":"+this.style[t]+";");i&&(t=!0,e+=' style="'+l.escape(i)+'"');const n=l.escape(this.text);return t?(e+=">",e+=n,e+="</span>",e):n}}class J{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(let e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){let t='<svg xmlns="http://www.w3.org/2000/svg"';for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+l.escape(this.attributes[e])+'"');t+=">";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t+="</svg>",t}}class Q{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",C[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+l.escape(this.alternate)+'"/>':'<path d="'+l.escape(C[this.pathName])+'"/>'}}class tt{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){const t=document.createElementNS("http://www.w3.org/2000/svg","line");for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t}toMarkup(){let t="<line";for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+l.escape(this.attributes[e])+'"');return t+="/>",t}}function et(t){if(t instanceof Z)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}const it={bin:1,close:1,inner:1,open:1,punct:1,rel:1},nt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},rt={math:{},text:{}};var st=rt;function at(t,e,i,n,r,s){rt[t][r]={font:e,group:i,replace:n},s&&n&&(rt[t][n]=rt[t][r])}const ot="math",lt="text",ht="main",ct="ams",dt="accent-token",ut="bin",pt="close",ft="inner",gt="mathord",mt="op-token",bt="open",xt="punct",vt="rel",yt="spacing",wt="textord";at(ot,ht,vt,"","\\equiv",!0),at(ot,ht,vt,"","\\prec",!0),at(ot,ht,vt,"","\\succ",!0),at(ot,ht,vt,"","\\sim",!0),at(ot,ht,vt,"","\\perp"),at(ot,ht,vt,"","\\preceq",!0),at(ot,ht,vt,"","\\succeq",!0),at(ot,ht,vt,"","\\simeq",!0),at(ot,ht,vt,"","\\mid",!0),at(ot,ht,vt,"","\\ll",!0),at(ot,ht,vt,"","\\gg",!0),at(ot,ht,vt,"","\\asymp",!0),at(ot,ht,vt,"","\\parallel"),at(ot,ht,vt,"","\\bowtie",!0),at(ot,ht,vt,"","\\smile",!0),at(ot,ht,vt,"","\\sqsubseteq",!0),at(ot,ht,vt,"","\\sqsupseteq",!0),at(ot,ht,vt,"","\\doteq",!0),at(ot,ht,vt,"","\\frown",!0),at(ot,ht,vt,"","\\ni",!0),at(ot,ht,vt,"","\\propto",!0),at(ot,ht,vt,"","\\vdash",!0),at(ot,ht,vt,"","\\dashv",!0),at(ot,ht,vt,"","\\owns"),at(ot,ht,xt,".","\\ldotp"),at(ot,ht,xt,"","\\cdotp"),at(ot,ht,wt,"#","\\#"),at(lt,ht,wt,"#","\\#"),at(ot,ht,wt,"&","\\&"),at(lt,ht,wt,"&","\\&"),at(ot,ht,wt,"","\\aleph",!0),at(ot,ht,wt,"","\\forall",!0),at(ot,ht,wt,"","\\hbar",!0),at(ot,ht,wt,"","\\exists",!0),at(ot,ht,wt,"","\\nabla",!0),at(ot,ht,wt,"","\\flat",!0),at(ot,ht,wt,"","\\ell",!0),at(ot,ht,wt,"","\\natural",!0),at(ot,ht,wt,"","\\clubsuit",!0),at(ot,ht,wt,"","\\wp",!0),at(ot,ht,wt,"","\\sharp",!0),at(ot,ht,wt,"","\\diamondsuit",!0),at(ot,ht,wt,"","\\Re",!0),at(ot,ht,wt,"","\\heartsuit",!0),at(ot,ht,wt,"","\\Im",!0),at(ot,ht,wt,"","\\spadesuit",!0),at(ot,ht,wt,"","\\S",!0),at(lt,ht,wt,"","\\S"),at(ot,ht,wt,"","\\P",!0),at(lt,ht,wt,"","\\P"),at(ot,ht,wt,"","\\dag"),at(lt,ht,wt,"","\\dag"),at(lt,ht,wt,"","\\textdagger"),at(ot,ht,wt,"","\\ddag"),at(lt,ht,wt,"","\\ddag"),at(lt,ht,wt,"","\\textdaggerdbl"),at(ot,ht,pt,"","\\rmoustache",!0),at(ot,ht,bt,"","\\lmoustache",!0),at(ot,ht,pt,"","\\rgroup",!0),at(ot,ht,bt,"","\\lgroup",!0),at(ot,ht,ut,"","\\mp",!0),at(ot,ht,ut,"","\\ominus",!0),at(ot,ht,ut,"","\\uplus",!0),at(ot,ht,ut,"","\\sqcap",!0),at(ot,ht,ut,"","\\ast"),at(ot,ht,ut,"","\\sqcup",!0),at(ot,ht,ut,"","\\bigcirc",!0),at(ot,ht,ut,"","\\bullet",!0),at(ot,ht,ut,"","\\ddagger"),at(ot,ht,ut,"","\\wr",!0),at(ot,ht,ut,"","\\amalg"),at(ot,ht,ut,"&","\\And"),at(ot,ht,vt,"","\\longleftarrow",!0),at(ot,ht,vt,"","\\Leftarrow",!0),at(ot,ht,vt,"","\\Longleftarrow",!0),at(ot,ht,vt,"","\\longrightarrow",!0),at(ot,ht,vt,"","\\Rightarrow",!0),at(ot,ht,vt,"","\\Longrightarrow",!0),at(ot,ht,vt,"","\\leftrightarrow",!0),at(ot,ht,vt,"","\\longleftrightarrow",!0),at(ot,ht,vt,"","\\Leftrightarrow",!0),at(ot,ht,vt,"","\\Longleftrightarrow",!0),at(ot,ht,vt,"","\\mapsto",!0),at(ot,ht,vt,"","\\longmapsto",!0),at(ot,ht,vt,"","\\nearrow",!0),at(ot,ht,vt,"","\\hookleftarrow",!0),at(ot,ht,vt,"","\\hookrightarrow",!0),at(ot,ht,vt,"","\\searrow",!0),at(ot,ht,vt,"","\\leftharpoonup",!0),at(ot,ht,vt,"","\\rightharpoonup",!0),at(ot,ht,vt,"","\\swarrow",!0),at(ot,ht,vt,"","\\leftharpoondown",!0),at(ot,ht,vt,"","\\rightharpoondown",!0),at(ot,ht,vt,"","\\nwarrow",!0),at(ot,ht,vt,"","\\rightleftharpoons",!0),at(ot,ct,vt,"","\\nless",!0),at(ot,ct,vt,"","\\@nleqslant"),at(ot,ct,vt,"","\\@nleqq"),at(ot,ct,vt,"","\\lneq",!0),at(ot,ct,vt,"","\\lneqq",!0),at(ot,ct,vt,"","\\@lvertneqq"),at(ot,ct,vt,"","\\lnsim",!0),at(ot,ct,vt,"","\\lnapprox",!0),at(ot,ct,vt,"","\\nprec",!0),at(ot,ct,vt,"","\\npreceq",!0),at(ot,ct,vt,"","\\precnsim",!0),at(ot,ct,vt,"","\\precnapprox",!0),at(ot,ct,vt,"","\\nsim",!0),at(ot,ct,vt,"","\\@nshortmid"),at(ot,ct,vt,"","\\nmid",!0),at(ot,ct,vt,"","\\nvdash",!0),at(ot,ct,vt,"","\\nvDash",!0),at(ot,ct,vt,"","\\ntriangleleft"),at(ot,ct,vt,"","\\ntrianglelefteq",!0),at(ot,ct,vt,"","\\subsetneq",!0),at(ot,ct,vt,"","\\@varsubsetneq"),at(ot,ct,vt,"","\\subsetneqq",!0),at(ot,ct,vt,"","\\@varsubsetneqq"),at(ot,ct,vt,"","\\ngtr",!0),at(ot,ct,vt,"","\\@ngeqslant"),at(ot,ct,vt,"","\\@ngeqq"),at(ot,ct,vt,"","\\gneq",!0),at(ot,ct,vt,"","\\gneqq",!0),at(ot,ct,vt,"","\\@gvertneqq"),at(ot,ct,vt,"","\\gnsim",!0),at(ot,ct,vt,"","\\gnapprox",!0),at(ot,ct,vt,"","\\nsucc",!0),at(ot,ct,vt,"","\\nsucceq",!0),at(ot,ct,vt,"","\\succnsim",!0),at(ot,ct,vt,"","\\succnapprox",!0),at(ot,ct,vt,"","\\ncong",!0),at(ot,ct,vt,"","\\@nshortparallel"),at(ot,ct,vt,"","\\nparallel",!0),at(ot,ct,vt,"","\\nVDash",!0),at(ot,ct,vt,"","\\ntriangleright"),at(ot,ct,vt,"","\\ntrianglerighteq",!0),at(ot,ct,vt,"","\\@nsupseteqq"),at(ot,ct,vt,"","\\supsetneq",!0),at(ot,ct,vt,"","\\@varsupsetneq"),at(ot,ct,vt,"","\\supsetneqq",!0),at(ot,ct,vt,"","\\@varsupsetneqq"),at(ot,ct,vt,"","\\nVdash",!0),at(ot,ct,vt,"","\\precneqq",!0),at(ot,ct,vt,"","\\succneqq",!0),at(ot,ct,vt,"","\\@nsubseteqq"),at(ot,ct,ut,"","\\unlhd"),at(ot,ct,ut,"","\\unrhd"),at(ot,ct,vt,"","\\nleftarrow",!0),at(ot,ct,vt,"","\\nrightarrow",!0),at(ot,ct,vt,"","\\nLeftarrow",!0),at(ot,ct,vt,"","\\nRightarrow",!0),at(ot,ct,vt,"","\\nleftrightarrow",!0),at(ot,ct,vt,"","\\nLeftrightarrow",!0),at(ot,ct,vt,"","\\vartriangle"),at(ot,ct,wt,"","\\hslash"),at(ot,ct,wt,"","\\triangledown"),at(ot,ct,wt,"","\\lozenge"),at(ot,ct,wt,"","\\circledS"),at(ot,ct,wt,"","\\circledR"),at(lt,ct,wt,"","\\circledR"),at(ot,ct,wt,"","\\measuredangle",!0),at(ot,ct,wt,"","\\nexists"),at(ot,ct,wt,"","\\mho"),at(ot,ct,wt,"","\\Finv",!0),at(ot,ct,wt,"","\\Game",!0),at(ot,ct,wt,"","\\backprime"),at(ot,ct,wt,"","\\blacktriangle"),at(ot,ct,wt,"","\\blacktriangledown"),at(ot,ct,wt,"","\\blacksquare"),at(ot,ct,wt,"","\\blacklozenge"),at(ot,ct,wt,"","\\bigstar"),at(ot,ct,wt,"","\\sphericalangle",!0),at(ot,ct,wt,"","\\complement",!0),at(ot,ct,wt,"","\\eth",!0),at(lt,ht,wt,"",""),at(ot,ct,wt,"","\\diagup"),at(ot,ct,wt,"","\\diagdown"),at(ot,ct,wt,"","\\square"),at(ot,ct,wt,"","\\Box"),at(ot,ct,wt,"","\\Diamond"),at(ot,ct,wt,"","\\yen",!0),at(lt,ct,wt,"","\\yen",!0),at(ot,ct,wt,"","\\checkmark",!0),at(lt,ct,wt,"","\\checkmark"),at(ot,ct,wt,"","\\beth",!0),at(ot,ct,wt,"","\\daleth",!0),at(ot,ct,wt,"","\\gimel",!0),at(ot,ct,wt,"","\\digamma",!0),at(ot,ct,wt,"","\\varkappa"),at(ot,ct,bt,"","\\@ulcorner",!0),at(ot,ct,pt,"","\\@urcorner",!0),at(ot,ct,bt,"","\\@llcorner",!0),at(ot,ct,pt,"","\\@lrcorner",!0),at(ot,ct,vt,"","\\leqq",!0),at(ot,ct,vt,"","\\leqslant",!0),at(ot,ct,vt,"","\\eqslantless",!0),at(ot,ct,vt,"","\\lesssim",!0),at(ot,ct,vt,"","\\lessapprox",!0),at(ot,ct,vt,"","\\approxeq",!0),at(ot,ct,ut,"","\\lessdot"),at(ot,ct,vt,"","\\lll",!0),at(ot,ct,vt,"","\\lessgtr",!0),at(ot,ct,vt,"","\\lesseqgtr",!0),at(ot,ct,vt,"","\\lesseqqgtr",!0),at(ot,ct,vt,"","\\doteqdot"),at(ot,ct,vt,"","\\risingdotseq",!0),at(ot,ct,vt,"","\\fallingdotseq",!0),at(ot,ct,vt,"","\\backsim",!0),at(ot,ct,vt,"","\\backsimeq",!0),at(ot,ct,vt,"","\\subseteqq",!0),at(ot,ct,vt,"","\\Subset",!0),at(ot,ct,vt,"","\\sqsubset",!0),at(ot,ct,vt,"","\\preccurlyeq",!0),at(ot,ct,vt,"","\\curlyeqprec",!0),at(ot,ct,vt,"","\\precsim",!0),at(ot,ct,vt,"","\\precapprox",!0),at(ot,ct,vt,"","\\vartriangleleft"),at(ot,ct,vt,"","\\trianglelefteq"),at(ot,ct,vt,"","\\vDash",!0),at(ot,ct,vt,"","\\Vvdash",!0),at(ot,ct,vt,"","\\smallsmile"),at(ot,ct,vt,"","\\smallfrown"),at(ot,ct,vt,"","\\bumpeq",!0),at(ot,ct,vt,"","\\Bumpeq",!0),at(ot,ct,vt,"","\\geqq",!0),at(ot,ct,vt,"","\\geqslant",!0),at(ot,ct,vt,"","\\eqslantgtr",!0),at(ot,ct,vt,"","\\gtrsim",!0),at(ot,ct,vt,"","\\gtrapprox",!0),at(ot,ct,ut,"","\\gtrdot"),at(ot,ct,vt,"","\\ggg",!0),at(ot,ct,vt,"","\\gtrless",!0),at(ot,ct,vt,"","\\gtreqless",!0),at(ot,ct,vt,"","\\gtreqqless",!0),at(ot,ct,vt,"","\\eqcirc",!0),at(ot,ct,vt,"","\\circeq",!0),at(ot,ct,vt,"","\\triangleq",!0),at(ot,ct,vt,"","\\thicksim"),at(ot,ct,vt,"","\\thickapprox"),at(ot,ct,vt,"","\\supseteqq",!0),at(ot,ct,vt,"","\\Supset",!0),at(ot,ct,vt,"","\\sqsupset",!0),at(ot,ct,vt,"","\\succcurlyeq",!0),at(ot,ct,vt,"","\\curlyeqsucc",!0),at(ot,ct,vt,"","\\succsim",!0),at(ot,ct,vt,"","\\succapprox",!0),at(ot,ct,vt,"","\\vartriangleright"),at(ot,ct,vt,"","\\trianglerighteq"),at(ot,ct,vt,"","\\Vdash",!0),at(ot,ct,vt,"","\\shortmid"),at(ot,ct,vt,"","\\shortparallel"),at(ot,ct,vt,"","\\between",!0),at(ot,ct,vt,"","\\pitchfork",!0),at(ot,ct,vt,"","\\varpropto"),at(ot,ct,vt,"","\\blacktriangleleft"),at(ot,ct,vt,"","\\therefore",!0),at(ot,ct,vt,"","\\backepsilon"),at(ot,ct,vt,"","\\blacktriangleright"),at(ot,ct,vt,"","\\because",!0),at(ot,ct,vt,"","\\llless"),at(ot,ct,vt,"","\\gggtr"),at(ot,ct,ut,"","\\lhd"),at(ot,ct,ut,"","\\rhd"),at(ot,ct,vt,"","\\eqsim",!0),at(ot,ht,vt,"","\\Join"),at(ot,ct,vt,"","\\Doteq",!0),at(ot,ct,ut,"","\\dotplus",!0),at(ot,ct,ut,"","\\smallsetminus"),at(ot,ct,ut,"","\\Cap",!0),at(ot,ct,ut,"","\\Cup",!0),at(ot,ct,ut,"","\\doublebarwedge",!0),at(ot,ct,ut,"","\\boxminus",!0),at(ot,ct,ut,"","\\boxplus",!0),at(ot,ct,ut,"","\\divideontimes",!0),at(ot,ct,ut,"","\\ltimes",!0),at(ot,ct,ut,"","\\rtimes",!0),at(ot,ct,ut,"","\\leftthreetimes",!0),at(ot,ct,ut,"","\\rightthreetimes",!0),at(ot,ct,ut,"","\\curlywedge",!0),at(ot,ct,ut,"","\\curlyvee",!0),at(ot,ct,ut,"","\\circleddash",!0),at(ot,ct,ut,"","\\circledast",!0),at(ot,ct,ut,"","\\centerdot"),at(ot,ct,ut,"","\\intercal",!0),at(ot,ct,ut,"","\\doublecap"),at(ot,ct,ut,"","\\doublecup"),at(ot,ct,ut,"","\\boxtimes",!0),at(ot,ct,vt,"","\\dashrightarrow",!0),at(ot,ct,vt,"","\\dashleftarrow",!0),at(ot,ct,vt,"","\\leftleftarrows",!0),at(ot,ct,vt,"","\\leftrightarrows",!0),at(ot,ct,vt,"","\\Lleftarrow",!0),at(ot,ct,vt,"","\\twoheadleftarrow",!0),at(ot,ct,vt,"","\\leftarrowtail",!0),at(ot,ct,vt,"","\\looparrowleft",!0),at(ot,ct,vt,"","\\leftrightharpoons",!0),at(ot,ct,vt,"","\\curvearrowleft",!0),at(ot,ct,vt,"","\\circlearrowleft",!0),at(ot,ct,vt,"","\\Lsh",!0),at(ot,ct,vt,"","\\upuparrows",!0),at(ot,ct,vt,"","\\upharpoonleft",!0),at(ot,ct,vt,"","\\downharpoonleft",!0),at(ot,ht,vt,"","\\origof",!0),at(ot,ht,vt,"","\\imageof",!0),at(ot,ct,vt,"","\\multimap",!0),at(ot,ct,vt,"","\\leftrightsquigarrow",!0),at(ot,ct,vt,"","\\rightrightarrows",!0),at(ot,ct,vt,"","\\rightleftarrows",!0),at(ot,ct,vt,"","\\twoheadrightarrow",!0),at(ot,ct,vt,"","\\rightarrowtail",!0),at(ot,ct,vt,"","\\looparrowright",!0),at(ot,ct,vt,"","\\curvearrowright",!0),at(ot,ct,vt,"","\\circlearrowright",!0),at(ot,ct,vt,"","\\Rsh",!0),at(ot,ct,vt,"","\\downdownarrows",!0),at(ot,ct,vt,"","\\upharpoonright",!0),at(ot,ct,vt,"","\\downharpoonright",!0),at(ot,ct,vt,"","\\rightsquigarrow",!0),at(ot,ct,vt,"","\\leadsto"),at(ot,ct,vt,"","\\Rrightarrow",!0),at(ot,ct,vt,"","\\restriction"),at(ot,ht,wt,"","`"),at(ot,ht,wt,"$","\\$"),at(lt,ht,wt,"$","\\$"),at(lt,ht,wt,"$","\\textdollar"),at(ot,ht,wt,"%","\\%"),at(lt,ht,wt,"%","\\%"),at(ot,ht,wt,"_","\\_"),at(lt,ht,wt,"_","\\_"),at(lt,ht,wt,"_","\\textunderscore"),at(ot,ht,wt,"","\\angle",!0),at(ot,ht,wt,"","\\infty",!0),at(ot,ht,wt,"","\\prime"),at(ot,ht,wt,"","\\triangle"),at(ot,ht,wt,"","\\Gamma",!0),at(ot,ht,wt,"","\\Delta",!0),at(ot,ht,wt,"","\\Theta",!0),at(ot,ht,wt,"","\\Lambda",!0),at(ot,ht,wt,"","\\Xi",!0),at(ot,ht,wt,"","\\Pi",!0),at(ot,ht,wt,"","\\Sigma",!0),at(ot,ht,wt,"","\\Upsilon",!0),at(ot,ht,wt,"","\\Phi",!0),at(ot,ht,wt,"","\\Psi",!0),at(ot,ht,wt,"","\\Omega",!0),at(ot,ht,wt,"A",""),at(ot,ht,wt,"B",""),at(ot,ht,wt,"E",""),at(ot,ht,wt,"Z",""),at(ot,ht,wt,"H",""),at(ot,ht,wt,"I",""),at(ot,ht,wt,"K",""),at(ot,ht,wt,"M",""),at(ot,ht,wt,"N",""),at(ot,ht,wt,"O",""),at(ot,ht,wt,"P",""),at(ot,ht,wt,"T",""),at(ot,ht,wt,"X",""),at(ot,ht,wt,"","\\neg",!0),at(ot,ht,wt,"","\\lnot"),at(ot,ht,wt,"","\\top"),at(ot,ht,wt,"","\\bot"),at(ot,ht,wt,"","\\emptyset"),at(ot,ct,wt,"","\\varnothing"),at(ot,ht,gt,"","\\alpha",!0),at(ot,ht,gt,"","\\beta",!0),at(ot,ht,gt,"","\\gamma",!0),at(ot,ht,gt,"","\\delta",!0),at(ot,ht,gt,"","\\epsilon",!0),at(ot,ht,gt,"","\\zeta",!0),at(ot,ht,gt,"","\\eta",!0),at(ot,ht,gt,"","\\theta",!0),at(ot,ht,gt,"","\\iota",!0),at(ot,ht,gt,"","\\kappa",!0),at(ot,ht,gt,"","\\lambda",!0),at(ot,ht,gt,"","\\mu",!0),at(ot,ht,gt,"","\\nu",!0),at(ot,ht,gt,"","\\xi",!0),at(ot,ht,gt,"","\\omicron",!0),at(ot,ht,gt,"","\\pi",!0),at(ot,ht,gt,"","\\rho",!0),at(ot,ht,gt,"","\\sigma",!0),at(ot,ht,gt,"","\\tau",!0),at(ot,ht,gt,"","\\upsilon",!0),at(ot,ht,gt,"","\\phi",!0),at(ot,ht,gt,"","\\chi",!0),at(ot,ht,gt,"","\\psi",!0),at(ot,ht,gt,"","\\omega",!0),at(ot,ht,gt,"","\\varepsilon",!0),at(ot,ht,gt,"","\\vartheta",!0),at(ot,ht,gt,"","\\varpi",!0),at(ot,ht,gt,"","\\varrho",!0),at(ot,ht,gt,"","\\varsigma",!0),at(ot,ht,gt,"","\\varphi",!0),at(ot,ht,ut,"","*",!0),at(ot,ht,ut,"+","+"),at(ot,ht,ut,"","-",!0),at(ot,ht,ut,"","\\cdot",!0),at(ot,ht,ut,"","\\circ",!0),at(ot,ht,ut,"","\\div",!0),at(ot,ht,ut,"","\\pm",!0),at(ot,ht,ut,"","\\times",!0),at(ot,ht,ut,"","\\cap",!0),at(ot,ht,ut,"","\\cup",!0),at(ot,ht,ut,"","\\setminus",!0),at(ot,ht,ut,"","\\land"),at(ot,ht,ut,"","\\lor"),at(ot,ht,ut,"","\\wedge",!0),at(ot,ht,ut,"","\\vee",!0),at(ot,ht,wt,"","\\surd"),at(ot,ht,bt,"","\\langle",!0),at(ot,ht,bt,"","\\lvert"),at(ot,ht,bt,"","\\lVert"),at(ot,ht,pt,"?","?"),at(ot,ht,pt,"!","!"),at(ot,ht,pt,"","\\rangle",!0),at(ot,ht,pt,"","\\rvert"),at(ot,ht,pt,"","\\rVert"),at(ot,ht,vt,"=","="),at(ot,ht,vt,":",":"),at(ot,ht,vt,"","\\approx",!0),at(ot,ht,vt,"","\\cong",!0),at(ot,ht,vt,"","\\ge"),at(ot,ht,vt,"","\\geq",!0),at(ot,ht,vt,"","\\gets"),at(ot,ht,vt,">","\\gt",!0),at(ot,ht,vt,"","\\in",!0),at(ot,ht,vt,"","\\@not"),at(ot,ht,vt,"","\\subset",!0),at(ot,ht,vt,"","\\supset",!0),at(ot,ht,vt,"","\\subseteq",!0),at(ot,ht,vt,"","\\supseteq",!0),at(ot,ct,vt,"","\\nsubseteq",!0),at(ot,ct,vt,"","\\nsupseteq",!0),at(ot,ht,vt,"","\\models"),at(ot,ht,vt,"","\\leftarrow",!0),at(ot,ht,vt,"","\\le"),at(ot,ht,vt,"","\\leq",!0),at(ot,ht,vt,"<","\\lt",!0),at(ot,ht,vt,"","\\rightarrow",!0),at(ot,ht,vt,"","\\to"),at(ot,ct,vt,"","\\ngeq",!0),at(ot,ct,vt,"","\\nleq",!0),at(ot,ht,yt,"","\\ "),at(ot,ht,yt,"","\\space"),at(ot,ht,yt,"","\\nobreakspace"),at(lt,ht,yt,"","\\ "),at(lt,ht,yt,""," "),at(lt,ht,yt,"","\\space"),at(lt,ht,yt,"","\\nobreakspace"),at(ot,ht,yt,null,"\\nobreak"),at(ot,ht,yt,null,"\\allowbreak"),at(ot,ht,xt,",",","),at(ot,ht,xt,";",";"),at(ot,ct,ut,"","\\barwedge",!0),at(ot,ct,ut,"","\\veebar",!0),at(ot,ht,ut,"","\\odot",!0),at(ot,ht,ut,"","\\oplus",!0),at(ot,ht,ut,"","\\otimes",!0),at(ot,ht,wt,"","\\partial",!0),at(ot,ht,ut,"","\\oslash",!0),at(ot,ct,ut,"","\\circledcirc",!0),at(ot,ct,ut,"","\\boxdot",!0),at(ot,ht,ut,"","\\bigtriangleup"),at(ot,ht,ut,"","\\bigtriangledown"),at(ot,ht,ut,"","\\dagger"),at(ot,ht,ut,"","\\diamond"),at(ot,ht,ut,"","\\star"),at(ot,ht,ut,"","\\triangleleft"),at(ot,ht,ut,"","\\triangleright"),at(ot,ht,bt,"{","\\{"),at(lt,ht,wt,"{","\\{"),at(lt,ht,wt,"{","\\textbraceleft"),at(ot,ht,pt,"}","\\}"),at(lt,ht,wt,"}","\\}"),at(lt,ht,wt,"}","\\textbraceright"),at(ot,ht,bt,"{","\\lbrace"),at(ot,ht,pt,"}","\\rbrace"),at(ot,ht,bt,"[","\\lbrack",!0),at(lt,ht,wt,"[","\\lbrack",!0),at(ot,ht,pt,"]","\\rbrack",!0),at(lt,ht,wt,"]","\\rbrack",!0),at(ot,ht,bt,"(","\\lparen",!0),at(ot,ht,pt,")","\\rparen",!0),at(lt,ht,wt,"<","\\textless",!0),at(lt,ht,wt,">","\\textgreater",!0),at(ot,ht,bt,"","\\lfloor",!0),at(ot,ht,pt,"","\\rfloor",!0),at(ot,ht,bt,"","\\lceil",!0),at(ot,ht,pt,"","\\rceil",!0),at(ot,ht,wt,"\\","\\backslash"),at(ot,ht,wt,"","|"),at(ot,ht,wt,"","\\vert"),at(lt,ht,wt,"|","\\textbar",!0),at(ot,ht,wt,"","\\|"),at(ot,ht,wt,"","\\Vert"),at(lt,ht,wt,"","\\textbardbl"),at(lt,ht,wt,"~","\\textasciitilde"),at(lt,ht,wt,"\\","\\textbackslash"),at(lt,ht,wt,"^","\\textasciicircum"),at(ot,ht,vt,"","\\uparrow",!0),at(ot,ht,vt,"","\\Uparrow",!0),at(ot,ht,vt,"","\\downarrow",!0),at(ot,ht,vt,"","\\Downarrow",!0),at(ot,ht,vt,"","\\updownarrow",!0),at(ot,ht,vt,"","\\Updownarrow",!0),at(ot,ht,mt,"","\\coprod"),at(ot,ht,mt,"","\\bigvee"),at(ot,ht,mt,"","\\bigwedge"),at(ot,ht,mt,"","\\biguplus"),at(ot,ht,mt,"","\\bigcap"),at(ot,ht,mt,"","\\bigcup"),at(ot,ht,mt,"","\\int"),at(ot,ht,mt,"","\\intop"),at(ot,ht,mt,"","\\iint"),at(ot,ht,mt,"","\\iiint"),at(ot,ht,mt,"","\\prod"),at(ot,ht,mt,"","\\sum"),at(ot,ht,mt,"","\\bigotimes"),at(ot,ht,mt,"","\\bigoplus"),at(ot,ht,mt,"","\\bigodot"),at(ot,ht,mt,"","\\oint"),at(ot,ht,mt,"","\\oiint"),at(ot,ht,mt,"","\\oiiint"),at(ot,ht,mt,"","\\bigsqcup"),at(ot,ht,mt,"","\\smallint"),at(lt,ht,ft,"","\\textellipsis"),at(ot,ht,ft,"","\\mathellipsis"),at(lt,ht,ft,"","\\ldots",!0),at(ot,ht,ft,"","\\ldots",!0),at(ot,ht,ft,"","\\@cdots",!0),at(ot,ht,ft,"","\\ddots",!0),at(ot,ht,wt,"","\\varvdots"),at(lt,ht,wt,"","\\varvdots"),at(ot,ht,dt,"","\\acute"),at(ot,ht,dt,"","\\grave"),at(ot,ht,dt,"","\\ddot"),at(ot,ht,dt,"~","\\tilde"),at(ot,ht,dt,"","\\bar"),at(ot,ht,dt,"","\\breve"),at(ot,ht,dt,"","\\check"),at(ot,ht,dt,"^","\\hat"),at(ot,ht,dt,"","\\vec"),at(ot,ht,dt,"","\\dot"),at(ot,ht,dt,"","\\mathring"),at(ot,ht,gt,"","\\@imath"),at(ot,ht,gt,"","\\@jmath"),at(ot,ht,wt,"",""),at(ot,ht,wt,"",""),at(lt,ht,wt,"","\\i",!0),at(lt,ht,wt,"","\\j",!0),at(lt,ht,wt,"","\\ss",!0),at(lt,ht,wt,"","\\ae",!0),at(lt,ht,wt,"","\\oe",!0),at(lt,ht,wt,"","\\o",!0),at(lt,ht,wt,"","\\AE",!0),at(lt,ht,wt,"","\\OE",!0),at(lt,ht,wt,"","\\O",!0),at(lt,ht,dt,"","\\'"),at(lt,ht,dt,"","\\`"),at(lt,ht,dt,"","\\^"),at(lt,ht,dt,"","\\~"),at(lt,ht,dt,"","\\="),at(lt,ht,dt,"","\\u"),at(lt,ht,dt,"","\\."),at(lt,ht,dt,"","\\c"),at(lt,ht,dt,"","\\r"),at(lt,ht,dt,"","\\v"),at(lt,ht,dt,"",'\\"'),at(lt,ht,dt,"","\\H"),at(lt,ht,dt,"","\\textcircled");const kt={"--":!0,"---":!0,"``":!0,"''":!0};at(lt,ht,wt,"","--",!0),at(lt,ht,wt,"","\\textendash"),at(lt,ht,wt,"","---",!0),at(lt,ht,wt,"","\\textemdash"),at(lt,ht,wt,"","`",!0),at(lt,ht,wt,"","\\textquoteleft"),at(lt,ht,wt,"","'",!0),at(lt,ht,wt,"","\\textquoteright"),at(lt,ht,wt,"","``",!0),at(lt,ht,wt,"","\\textquotedblleft"),at(lt,ht,wt,"","''",!0),at(lt,ht,wt,"","\\textquotedblright"),at(ot,ht,wt,"","\\degree",!0),at(lt,ht,wt,"","\\degree"),at(lt,ht,wt,"","\\textdegree",!0),at(ot,ht,wt,"","\\pounds"),at(ot,ht,wt,"","\\mathsterling",!0),at(lt,ht,wt,"","\\pounds"),at(lt,ht,wt,"","\\textsterling",!0),at(ot,ct,wt,"","\\maltese"),at(lt,ct,wt,"","\\maltese");const At='0123456789/@."';for(let t=0;t<14;t++){const e=At.charAt(t);at(ot,ht,wt,e,e)}const St='0123456789!@*()-=+";:?/.,';for(let t=0;t<25;t++){const e=St.charAt(t);at(lt,ht,wt,e,e)}const Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let t=0;t<52;t++){const e=Ct.charAt(t);at(ot,ht,gt,e,e),at(lt,ht,wt,e,e)}at(ot,ct,wt,"C",""),at(lt,ct,wt,"C",""),at(ot,ct,wt,"H",""),at(lt,ct,wt,"H",""),at(ot,ct,wt,"N",""),at(lt,ct,wt,"N",""),at(ot,ct,wt,"P",""),at(lt,ct,wt,"P",""),at(ot,ct,wt,"Q",""),at(lt,ct,wt,"Q",""),at(ot,ct,wt,"R",""),at(lt,ct,wt,"R",""),at(ot,ct,wt,"Z",""),at(lt,ct,wt,"Z",""),at(ot,ht,gt,"h",""),at(lt,ht,gt,"h","");let _t="";for(let t=0;t<52;t++){const e=Ct.charAt(t);_t=String.fromCharCode(55349,56320+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56372+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56424+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56580+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56684+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56736+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56788+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56840+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56944+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),t<26&&(_t=String.fromCharCode(55349,56632+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,56476+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t))}_t=String.fromCharCode(55349,56668),at(ot,ht,gt,"k",_t),at(lt,ht,wt,"k",_t);for(let t=0;t<10;t++){const e=t.toString();_t=String.fromCharCode(55349,57294+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,57314+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,57324+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t),_t=String.fromCharCode(55349,57334+t),at(ot,ht,gt,e,_t),at(lt,ht,wt,e,_t)}const Mt="";for(let t=0;t<3;t++){const e=Mt.charAt(t);at(ot,ht,gt,e,e),at(lt,ht,wt,e,e)}const Tt=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Et=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Nt=function(t,e,i){return st[i][t]&&st[i][t].replace&&(t=st[i][t].replace),{value:t,metrics:N(t,e,i)}},Pt=function(t,e,i,n,r){const s=Nt(t,e,i),a=s.metrics;let o;if(t=s.value,a){let e=a.italic;("text"===i||n&&"mathit"===n.font)&&(e=0),o=new Z(t,a.height,a.depth,e,a.skew,a.width,r)}else o=new Z(t,0,0,0,0,0,r);if(n){o.maxFontSize=n.sizeMultiplier,n.style.isTight()&&o.classes.push("mtight");const t=n.getColor();t&&(o.style.color=t)}return o},Lt=(t,e)=>{if(j(t.classes)!==j(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(1===t.classes.length){const e=t.classes[0];if("mbin"===e||"mord"===e)return!1}for(const i in t.style)if(t.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;for(const i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},It=function(t){let e=0,i=0,n=0;for(let r=0;r<t.children.length;r++){const s=t.children[r];s.height>e&&(e=s.height),s.depth>i&&(i=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=n},Rt=function(t,e,i,n){const r=new Y(t,e,i,n);return It(r),r},Ot=(t,e,i,n)=>new Y(t,e,i,n),Dt=function(t){const e=new _(t);return It(e),e},zt=function(t,e,i){let n,r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}return n="textbf"===e&&"textit"===i?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular",r+"-"+n},Ft={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Bt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var Ht={fontMap:Ft,makeSymbol:Pt,mathsym:function(t,e,i,n){return void 0===n&&(n=[]),"boldsymbol"===i.font&&Nt(t,"Main-Bold",e).metrics?Pt(t,"Main-Bold",e,i,n.concat(["mathbf"])):"\\"===t||"main"===st[e][t].font?Pt(t,"Main-Regular",e,i,n):Pt(t,"AMS-Regular",e,i,n.concat(["amsrm"]))},makeSpan:Rt,makeSvgSpan:Ot,makeLineSpan:function(t,e,i){const n=Rt([t],[],e);return n.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),n.style.borderBottomWidth=q(n.height),n.maxFontSize=1,n},makeAnchor:function(t,e,i,n){const r=new U(t,e,i,n);return It(r),r},makeFragment:Dt,wrapFragment:function(t,e){return t instanceof _?Rt([],[t],e):t},makeVList:function(t,e){const{children:i,depth:n}=function(t){if("individualShift"===t.positionType){const e=t.children,i=[e[0]],n=-e[0].shift-e[0].elem.depth;let r=n;for(let t=1;t<e.length;t++){const n=-e[t].shift-r-e[t].elem.depth,s=n-(e[t-1].elem.height+e[t-1].elem.depth);r+=n,i.push({type:"kern",size:s}),i.push(e[t])}return{children:i,depth:n}}let e;if("top"===t.positionType){let i=t.positionData;for(let e=0;e<t.children.length;e++){const n=t.children[e];i-="kern"===n.type?n.size:n.elem.height+n.elem.depth}e=i}else if("bottom"===t.positionType)e=-t.positionData;else{const i=t.children[0];if("elem"!==i.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)e=-i.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");e=-i.elem.depth}}return{children:t.children,depth:e}}(t);let r=0;for(let t=0;t<i.length;t++){const e=i[t];if("elem"===e.type){const t=e.elem;r=Math.max(r,t.maxFontSize,t.height)}}r+=2;const s=Rt(["pstrut"],[]);s.style.height=q(r);const a=[];let o=n,l=n,h=n;for(let t=0;t<i.length;t++){const e=i[t];if("kern"===e.type)h+=e.size;else{const t=e.elem,i=e.wrapperClasses||[],n=e.wrapperStyle||{},o=Rt(i,[s,t],void 0,n);o.style.top=q(-r-h-t.depth),e.marginLeft&&(o.style.marginLeft=e.marginLeft),e.marginRight&&(o.style.marginRight=e.marginRight),a.push(o),h+=t.height+t.depth}o=Math.min(o,h),l=Math.max(l,h)}const c=Rt(["vlist"],a);let d;if(c.style.height=q(l),o<0){const t=Rt([],[]),e=Rt(["vlist"],[t]);e.style.height=q(-o);const i=Rt(["vlist-s"],[new Z("")]);d=[Rt(["vlist-r"],[c,i]),Rt(["vlist-r"],[e])]}else d=[Rt(["vlist-r"],[c])];const u=Rt(["vlist-t"],d);return 2===d.length&&u.classes.push("vlist-t2"),u.height=l,u.depth=-o,u},makeOrd:function(t,e,i){const r=t.mode,s=t.text,a=["mord"],o="math"===r||"text"===r&&e.font,l=o?e.font:e.fontFamily;let h="",c="";if(55349===s.charCodeAt(0)&&([h,c]=function(t,e){const i=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,r="math"===e?0:1;if(119808<=i&&i<120484){const t=Math.floor((i-119808)/26);return[Tt[t][2],Tt[t][r]]}if(120782<=i&&i<=120831){const t=Math.floor((i-120782)/10);return[Et[t][2],Et[t][r]]}if(120485===i||120486===i)return[Tt[0][2],Tt[0][r]];if(120486<i&&i<120782)return["",""];throw new n("Unsupported character: "+t)}(s,r)),h.length>0)return Pt(s,h,r,e,a.concat(c));if(l){let t,n;if("boldsymbol"===l){const e=function(t,e,i,n,r){return"textord"!==r&&Nt(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(s,r,0,0,i);t=e.fontName,n=[e.fontClass]}else o?(t=Ft[l].fontName,n=[l]):(t=zt(l,e.fontWeight,e.fontShape),n=[l,e.fontWeight,e.fontShape]);if(Nt(s,t,r).metrics)return Pt(s,t,r,e,a.concat(n));if(kt.hasOwnProperty(s)&&"Typewriter"===t.slice(0,10)){const i=[];for(let o=0;o<s.length;o++)i.push(Pt(s[o],t,r,e,a.concat(n)));return Dt(i)}}if("mathord"===i)return Pt(s,"Math-Italic",r,e,a.concat(["mathnormal"]));if("textord"===i){const t=st[r][s]&&st[r][s].font;if("ams"===t){const t=zt("amsrm",e.fontWeight,e.fontShape);return Pt(s,t,r,e,a.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==t&&t){const i=zt(t,e.fontWeight,e.fontShape);return Pt(s,i,r,e,a.concat(i,e.fontWeight,e.fontShape))}{const t=zt("textrm",e.fontWeight,e.fontShape);return Pt(s,t,r,e,a.concat(e.fontWeight,e.fontShape))}}throw new Error("unexpected type: "+i+" in makeOrd")},makeGlue:(t,e)=>{const i=Rt(["mspace"],[],e),n=H(t,e);return i.style.marginRight=q(n),i},staticSvg:function(t,e){const[i,n,r]=Bt[t],s=new Q(i),a=new J([s],{width:q(n),height:q(r),style:"width:"+q(n),viewBox:"0 0 "+1e3*n+" "+1e3*r,preserveAspectRatio:"xMinYMin"}),o=Ot(["overlay"],[a],e);return o.height=r,o.style.height=q(r),o.style.width=q(n),o},svgData:Bt,tryCombineChars:t=>{for(let e=0;e<t.length-1;e++){const i=t[e],n=t[e+1];i instanceof Z&&n instanceof Z&&Lt(i,n)&&(i.text+=n.text,i.height=Math.max(i.height,n.height),i.depth=Math.max(i.depth,n.depth),i.italic=n.italic,t.splice(e+1,1),e--)}return t}};const qt={number:3,unit:"mu"},jt={number:4,unit:"mu"},Gt={number:5,unit:"mu"},Xt={mord:{mop:qt,mbin:jt,mrel:Gt,minner:qt},mop:{mord:qt,mop:qt,mrel:Gt,minner:qt},mbin:{mord:jt,mop:jt,mopen:jt,minner:jt},mrel:{mord:Gt,mop:Gt,mopen:Gt,minner:Gt},mopen:{},mclose:{mop:qt,mbin:jt,mrel:Gt,minner:qt},mpunct:{mord:qt,mop:qt,mrel:Gt,mopen:qt,mclose:qt,mpunct:qt,minner:qt},minner:{mord:qt,mop:qt,mbin:jt,mrel:Gt,mopen:qt,mpunct:qt,minner:qt}},Vt={mord:{mop:qt},mop:{mord:qt,mop:qt},mbin:{},mrel:{},mopen:{},mclose:{mop:qt},mpunct:{},minner:{mop:qt}},Wt={},Yt={},Ut={};function $t(t){let{type:e,names:i,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=t;const o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r};for(let t=0;t<i.length;++t)Wt[i[t]]=o;e&&(s&&(Yt[e]=s),a&&(Ut[e]=a))}function Kt(t){let{type:e,htmlBuilder:i,mathmlBuilder:n}=t;$t({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:i,mathmlBuilder:n})}const Zt=function(t){return"ordgroup"===t.type&&1===t.body.length?t.body[0]:t},Jt=function(t){return"ordgroup"===t.type?t.body:[t]},Qt=Ht.makeSpan,te=["leftmost","mbin","mopen","mrel","mop","mpunct"],ee=["rightmost","mrel","mclose","mpunct"],ie={display:y.DISPLAY,text:y.TEXT,script:y.SCRIPT,scriptscript:y.SCRIPTSCRIPT},ne={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},re=function(t,e,i,n){void 0===n&&(n=[null,null]);const r=[];for(let i=0;i<t.length;i++){const n=ce(t[i],e);if(n instanceof _){const t=n.children;r.push(...t)}else r.push(n)}if(Ht.tryCombineChars(r),!i)return r;let s=e;if(1===t.length){const i=t[0];"sizing"===i.type?s=e.havingSize(i.size):"styling"===i.type&&(s=e.havingStyle(ie[i.style]))}const a=Qt([n[0]||"leftmost"],[],e),o=Qt([n[1]||"rightmost"],[],e),h="root"===i;return se(r,((t,e)=>{const i=e.classes[0],n=t.classes[0];"mbin"===i&&l.contains(ee,n)?e.classes[0]="mord":"mbin"===n&&l.contains(te,i)&&(t.classes[0]="mord")}),{node:a},o,h),se(r,((t,e)=>{const i=le(e),n=le(t),r=i&&n?t.hasClass("mtight")?Vt[i][n]:Xt[i][n]:null;if(r)return Ht.makeGlue(r,s)}),{node:a},o,h),r},se=function(t,e,i,n,r){n&&t.push(n);let s=0;for(;s<t.length;s++){const n=t[s],a=ae(n);if(a){se(a.children,e,i,null,r);continue}const o=!n.hasClass("mspace");if(o){const r=e(n,i.node);r&&(i.insertAfter?i.insertAfter(r):(t.unshift(r),s++))}o?i.node=n:r&&n.hasClass("newline")&&(i.node=Qt(["leftmost"])),i.insertAfter=(e=>i=>{t.splice(e+1,0,i),s++})(s)}n&&t.pop()},ae=function(t){return t instanceof _||t instanceof U||t instanceof Y&&t.hasClass("enclosing")?t:null},oe=function(t,e){const i=ae(t);if(i){const t=i.children;if(t.length){if("right"===e)return oe(t[t.length-1],"right");if("left"===e)return oe(t[0],"left")}}return t},le=function(t,e){return t?(e&&(t=oe(t,e)),ne[t.classes[0]]||null):null},he=function(t,e){const i=["nulldelimiter"].concat(t.baseSizingClasses());return Qt(e.concat(i))},ce=function(t,e,i){if(!t)return Qt();if(Yt[t.type]){let n=Yt[t.type](t,e);if(i&&e.size!==i.size){n=Qt(e.sizingClasses(i),[n],e);const t=e.sizeMultiplier/i.sizeMultiplier;n.height*=t,n.depth*=t}return n}throw new n("Got group of unknown type: '"+t.type+"'")};function de(t,e){const i=Qt(["base"],t,e),n=Qt(["strut"]);return n.style.height=q(i.height+i.depth),i.depth&&(n.style.verticalAlign=q(-i.depth)),i.children.unshift(n),i}function ue(t,e){let i=null;1===t.length&&"tag"===t[0].type&&(i=t[0].tag,t=t[0].body);const n=re(t,e,"root");let r;2===n.length&&n[1].hasClass("tag")&&(r=n.pop());const s=[];let a,o=[];for(let t=0;t<n.length;t++)if(o.push(n[t]),n[t].hasClass("mbin")||n[t].hasClass("mrel")||n[t].hasClass("allowbreak")){let i=!1;for(;t<n.length-1&&n[t+1].hasClass("mspace")&&!n[t+1].hasClass("newline");)t++,o.push(n[t]),n[t].hasClass("nobreak")&&(i=!0);i||(s.push(de(o,e)),o=[])}else n[t].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(de(o,e)),o=[]),s.push(n[t]));o.length>0&&s.push(de(o,e)),i?(a=de(re(i,e,!0)),a.classes=["tag"],s.push(a)):r&&s.push(r);const l=Qt(["katex-html"],s);if(l.setAttribute("aria-hidden","true"),a){const t=a.children[0];t.style.height=q(l.height+l.depth),l.depth&&(t.style.verticalAlign=q(-l.depth))}return l}function pe(t){return new _(t)}class fe{constructor(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){const t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=j(this.classes));for(let e=0;e<this.children.length;e++)if(this.children[e]instanceof ge&&this.children[e+1]instanceof ge){let i=this.children[e].toText()+this.children[++e].toText();for(;this.children[e+1]instanceof ge;)i+=this.children[++e].toText();t.appendChild(new ge(i).toNode())}else t.appendChild(this.children[e].toNode());return t}toMarkup(){let t="<"+this.type;for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=l.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+l.escape(j(this.classes))+'"'),t+=">";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map((t=>t.toText())).join("")}}class ge{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return l.escape(this.toText())}toText(){return this.text}}var me={MathNode:fe,TextNode:ge,SpaceNode:class{constructor(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?"":t>=.1666&&t<=.1667?"":t>=.2222&&t<=.2223?"":t>=.2777&&t<=.2778?"":t>=-.05556&&t<=-.05555?"":t>=-.1667&&t<=-.1666?"":t>=-.2223&&t<=-.2222?"":t>=-.2778&&t<=-.2777?"":null}toNode(){if(this.character)return document.createTextNode(this.character);{const t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",q(this.width)),t}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+q(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:pe};const be=function(t,e,i){return!st[e][t]||!st[e][t].replace||55349===t.charCodeAt(0)||kt.hasOwnProperty(t)&&i&&(i.fontFamily&&"tt"===i.fontFamily.slice(4,6)||i.font&&"tt"===i.font.slice(4,6))||(t=st[e][t].replace),new me.TextNode(t)},xe=function(t){return 1===t.length?t[0]:new me.MathNode("mrow",t)},ve=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";const i=e.font;if(!i||"mathnormal"===i)return null;const n=t.mode;if("mathit"===i)return"italic";if("boldsymbol"===i)return"textord"===t.type?"bold":"bold-italic";if("mathbf"===i)return"bold";if("mathbb"===i)return"double-struck";if("mathsfit"===i)return"sans-serif-italic";if("mathfrak"===i)return"fraktur";if("mathscr"===i||"mathcal"===i)return"script";if("mathsf"===i)return"sans-serif";if("mathtt"===i)return"monospace";let r=t.text;return l.contains(["\\imath","\\jmath"],r)?null:(st[n][r]&&st[n][r].replace&&(r=st[n][r].replace),N(r,Ht.fontMap[i].fontName,n)?Ht.fontMap[i].variant:null)};function ye(t){if(!t)return!1;if("mi"===t.type&&1===t.children.length){const e=t.children[0];return e instanceof ge&&"."===e.text}if("mo"===t.type&&1===t.children.length&&"true"===t.getAttribute("separator")&&"0em"===t.getAttribute("lspace")&&"0em"===t.getAttribute("rspace")){const e=t.children[0];return e instanceof ge&&","===e.text}return!1}const we=function(t,e,i){if(1===t.length){const n=Ae(t[0],e);return i&&n instanceof fe&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}const n=[];let r;for(let i=0;i<t.length;i++){const s=Ae(t[i],e);if(s instanceof fe&&r instanceof fe){if("mtext"===s.type&&"mtext"===r.type&&s.getAttribute("mathvariant")===r.getAttribute("mathvariant")){r.children.push(...s.children);continue}if("mn"===s.type&&"mn"===r.type){r.children.push(...s.children);continue}if(ye(s)&&"mn"===r.type){r.children.push(...s.children);continue}if("mn"===s.type&&ye(r))s.children=[...r.children,...s.children],n.pop();else if(("msup"===s.type||"msub"===s.type)&&s.children.length>=1&&("mn"===r.type||ye(r))){const t=s.children[0];t instanceof fe&&"mn"===t.type&&(t.children=[...r.children,...t.children],n.pop())}else if("mi"===r.type&&1===r.children.length){const t=r.children[0];if(t instanceof ge&&""===t.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){const t=s.children[0];t instanceof ge&&t.text.length>0&&(t.text=t.text.slice(0,1)+""+t.text.slice(1),n.pop())}}}n.push(s),r=s}return n},ke=function(t,e,i){return xe(we(t,e,i))},Ae=function(t,e){if(!t)return new me.MathNode("mrow");if(Ut[t.type])return Ut[t.type](t,e);throw new n("Got group of unknown type: '"+t.type+"'")};function Se(t,e,i,n,r){const s=we(t,i);let a;a=1===s.length&&s[0]instanceof fe&&l.contains(["mrow","mtable"],s[0].type)?s[0]:new me.MathNode("mrow",s);const o=new me.MathNode("annotation",[new me.TextNode(e)]);o.setAttribute("encoding","application/x-tex");const h=new me.MathNode("semantics",[a,o]),c=new me.MathNode("math",[h]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");const d=r?"katex":"katex-mathml";return Ht.makeSpan([d],[c])}const Ce=function(t){return new D({style:t.displayMode?y.DISPLAY:y.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},_e=function(t,e){if(e.displayMode){const i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=Ht.makeSpan(i,[t])}return t},Me={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Te={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]};var Ee=function(t,e,i,n,r){let s;const a=t.height+t.depth+i+n;if(/fbox|color|angl/.test(e)){if(s=Ht.makeSpan(["stretchy",e],[],r),"fbox"===e){const t=r.color&&r.getColor();t&&(s.style.borderColor=t)}}else{const t=[];/^[bx]cancel$/.test(e)&&t.push(new tt({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&t.push(new tt({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const i=new J(t,{width:"100%",height:q(a)});s=Ht.makeSvgSpan([],[i],r)}return s.height=a,s.style.height=q(a),s},Ne=function(t){const e=new me.MathNode("mo",[new me.TextNode(Me[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},Pe=function(t,e){const{span:i,minWidth:n,height:r}=function(){let i=4e5;const n=t.label.slice(1);if(l.contains(["widehat","widecheck","widetilde","utilde"],n)){const s="ordgroup"===(r=t.base).type?r.body.length:1;let a,o,l;if(s>5)"widehat"===n||"widecheck"===n?(a=420,i=2364,l=.42,o=n+"4"):(a=312,i=2340,l=.34,o="tilde4");else{const t=[1,1,2,2,3,3][s];"widehat"===n||"widecheck"===n?(i=[0,1062,2364,2364,2364][t],a=[0,239,300,360,420][t],l=[0,.24,.3,.3,.36,.42][t],o=n+t):(i=[0,600,1033,2339,2340][t],a=[0,260,286,306,312][t],l=[0,.26,.286,.3,.306,.34][t],o="tilde"+t)}const h=new Q(o),c=new J([h],{width:"100%",height:q(l),viewBox:"0 0 "+i+" "+a,preserveAspectRatio:"none"});return{span:Ht.makeSvgSpan([],[c],e),minWidth:0,height:l}}{const t=[],r=Te[n],[s,a,o]=r,l=o/1e3,h=s.length;let c,d;if(1===h)c=["hide-tail"],d=[r[3]];else if(2===h)c=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==h)throw new Error("Correct katexImagesData or update code here to support\n                    "+h+" children.");c=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(let n=0;n<h;n++){const r=new Q(s[n]),u=new J([r],{width:"400em",height:q(l),viewBox:"0 0 "+i+" "+o,preserveAspectRatio:d[n]+" slice"}),p=Ht.makeSvgSpan([c[n]],[u],e);if(1===h)return{span:p,minWidth:a,height:l};p.style.height=q(l),t.push(p)}return{span:Ht.makeSpan(["stretchy"],t,e),minWidth:a,height:l}}var r}();return i.height=r,i.style.height=q(r),n>0&&(i.style.minWidth=q(n)),i};function Le(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function Ie(t){const e=Re(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Re(t){return t&&("atom"===t.type||nt.hasOwnProperty(t.type))?t:null}const Oe=(t,e)=>{let i,n,r;t&&"supsub"===t.type?(n=Le(t.base,"accent"),i=n.base,t.base=i,r=function(t){if(t instanceof Y)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(ce(t,e)),t.base=n):(n=Le(t,"accent"),i=n.base);const s=ce(i,e.havingCrampedStyle());let a=0;if(n.isShifty&&l.isCharacterBox(i)){const t=l.getBaseElem(i);a=et(ce(t,e.havingCrampedStyle())).skew}const o="\\c"===n.label;let h,c=o?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight);if(n.isStretchy)h=Pe(n,e),h=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+q(2*a)+")",marginLeft:q(2*a)}:void 0}]},e);else{let t,i;"\\vec"===n.label?(t=Ht.staticSvg("vec",e),i=Ht.svgData.vec[1]):(t=Ht.makeOrd({mode:n.mode,text:n.label},e,"textord"),t=et(t),t.italic=0,i=t.width,o&&(c+=t.depth)),h=Ht.makeSpan(["accent-body"],[t]);const r="\\textcircled"===n.label;r&&(h.classes.push("accent-full"),c=s.height);let l=a;r||(l-=i/2),h.style.left=q(l),"\\textcircled"===n.label&&(h.style.top=".2em"),h=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-c},{type:"elem",elem:h}]},e)}const d=Ht.makeSpan(["mord","accent"],[h],e);return r?(r.children[0]=d,r.height=Math.max(d.height,r.height),r.classes[0]="mord",r):d},De=(t,e)=>{const i=t.isStretchy?Ne(t.label):new me.MathNode("mo",[be(t.label,t.mode)]),n=new me.MathNode("mover",[Ae(t.base,e),i]);return n.setAttribute("accent","true"),n},ze=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((t=>"\\"+t)).join("|"));$t({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{const i=Zt(e[0]),n=!ze.test(t.funcName),r=!n||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:r,base:i}},htmlBuilder:Oe,mathmlBuilder:De}),$t({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{const i=e[0];let n=t.parser.mode;return"math"===n&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:i}},htmlBuilder:Oe,mathmlBuilder:De}),$t({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0];return{type:"accentUnder",mode:i.mode,label:n,base:r}},htmlBuilder:(t,e)=>{const i=ce(t.base,e),n=Pe(t,e),r="\\utilde"===t.label?.12:0,s=Ht.makeVList({positionType:"top",positionData:i.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:i}]},e);return Ht.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{const i=Ne(t.label),n=new me.MathNode("munder",[Ae(t.base,e),i]);return n.setAttribute("accentunder","true"),n}});const Fe=t=>{const e=new me.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};$t({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){let{parser:n,funcName:r}=t;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:i[0]}},htmlBuilder(t,e){const i=e.style;let n=e.havingStyle(i.sup());const r=Ht.wrapFragment(ce(t.body,n,e),e),s="\\x"===t.label.slice(0,2)?"x":"cd";let a;r.classes.push(s+"-arrow-pad"),t.below&&(n=e.havingStyle(i.sub()),a=Ht.wrapFragment(ce(t.below,n,e),e),a.classes.push(s+"-arrow-pad"));const o=Pe(t,e),l=-e.fontMetrics().axisHeight+.5*o.height;let h,c=-e.fontMetrics().axisHeight-.5*o.height-.111;if((r.depth>.25||"\\xleftequilibrium"===t.label)&&(c-=r.depth),a){const t=-e.fontMetrics().axisHeight+a.height+.5*o.height+.111;h=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l},{type:"elem",elem:a,shift:t}]},e)}else h=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l}]},e);return h.children[0].children[0].children[1].classes.push("svg-align"),Ht.makeSpan(["mrel","x-arrow"],[h],e)},mathmlBuilder(t,e){const i=Ne(t.label);let n;if(i.setAttribute("minsize","x"===t.label.charAt(0)?"1.75em":"3.0em"),t.body){const r=Fe(Ae(t.body,e));if(t.below){const s=Fe(Ae(t.below,e));n=new me.MathNode("munderover",[i,s,r])}else n=new me.MathNode("mover",[i,r])}else if(t.below){const r=Fe(Ae(t.below,e));n=new me.MathNode("munder",[i,r])}else n=Fe(),n=new me.MathNode("mover",[i,n]);return n}});const Be=Ht.makeSpan;function He(t,e){const i=re(t.body,e,!0);return Be([t.mclass],i,e)}function qe(t,e){let i;const n=we(t.body,e);return"minner"===t.mclass?i=new me.MathNode("mpadded",n):"mord"===t.mclass?t.isCharacterBox?(i=n[0],i.type="mi"):i=new me.MathNode("mi",n):(t.isCharacterBox?(i=n[0],i.type="mo"):i=new me.MathNode("mo",n),"mbin"===t.mclass?(i.attributes.lspace="0.22em",i.attributes.rspace="0.22em"):"mpunct"===t.mclass?(i.attributes.lspace="0em",i.attributes.rspace="0.17em"):"mopen"===t.mclass||"mclose"===t.mclass?(i.attributes.lspace="0em",i.attributes.rspace="0em"):"minner"===t.mclass&&(i.attributes.lspace="0.0556em",i.attributes.width="+0.1111em")),i}$t({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){let{parser:i,funcName:n}=t;const r=e[0];return{type:"mclass",mode:i.mode,mclass:"m"+n.slice(5),body:Jt(r),isCharacterBox:l.isCharacterBox(r)}},htmlBuilder:He,mathmlBuilder:qe});const je=t=>{const e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};$t({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){let{parser:i}=t;return{type:"mclass",mode:i.mode,mclass:je(e[0]),body:Jt(e[1]),isCharacterBox:l.isCharacterBox(e[1])}}}),$t({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){let{parser:i,funcName:n}=t;const r=e[1],s=e[0];let a;a="\\stackrel"!==n?je(r):"mrel";const o={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==n,body:Jt(r)},h={type:"supsub",mode:s.mode,base:o,sup:"\\underset"===n?null:s,sub:"\\underset"===n?s:null};return{type:"mclass",mode:i.mode,mclass:a,body:[h],isCharacterBox:l.isCharacterBox(h)}},htmlBuilder:He,mathmlBuilder:qe}),$t({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){let{parser:i}=t;return{type:"pmb",mode:i.mode,mclass:je(e[0]),body:Jt(e[0])}},htmlBuilder(t,e){const i=re(t.body,e,!0),n=Ht.makeSpan([t.mclass],i,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){const i=we(t.body,e),n=new me.MathNode("mstyle",i);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});const Ge={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Xe=t=>"textord"===t.type&&"@"===t.text;function Ve(t,e,i){const n=Ge[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return i.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{const t={type:"atom",text:n,mode:"math",family:"rel"},r={type:"ordgroup",mode:"math",body:[i.callFunction("\\\\cdleft",[e[0]],[]),i.callFunction("\\Big",[t],[]),i.callFunction("\\\\cdright",[e[1]],[])]};return i.callFunction("\\\\cdparent",[r],[])}case"\\\\cdlongequal":return i.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const t={type:"textord",text:"\\Vert",mode:"math"};return i.callFunction("\\Big",[t],[])}default:return{type:"textord",text:" ",mode:"math"}}}$t({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){let{parser:i,funcName:n}=t;return{type:"cdlabel",mode:i.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){const i=e.havingStyle(e.style.sup()),n=Ht.wrapFragment(ce(t.label,i,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=q(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){let i=new me.MathNode("mrow",[Ae(t.label,e)]);return i=new me.MathNode("mpadded",[i]),i.setAttribute("width","0"),"left"===t.side&&i.setAttribute("lspace","-1width"),i.setAttribute("voffset","0.7em"),i=new me.MathNode("mstyle",[i]),i.setAttribute("displaystyle","false"),i.setAttribute("scriptlevel","1"),i}}),$t({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){let{parser:i}=t;return{type:"cdlabelparent",mode:i.mode,fragment:e[0]}},htmlBuilder(t,e){const i=Ht.wrapFragment(ce(t.fragment,e),e);return i.classes.push("cd-vert-arrow"),i},mathmlBuilder:(t,e)=>new me.MathNode("mrow",[Ae(t.fragment,e)])}),$t({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){let{parser:i}=t;const r=Le(e[0],"ordgroup").body;let s="";for(let t=0;t<r.length;t++)s+=Le(r[t],"textord").text;let a,o=parseInt(s);if(isNaN(o))throw new n("\\@char has non-numeric argument "+s);if(o<0||o>=1114111)throw new n("\\@char with invalid code point "+s);return o<=65535?a=String.fromCharCode(o):(o-=65536,a=String.fromCharCode(55296+(o>>10),56320+(1023&o))),{type:"textord",mode:i.mode,text:a}}});const We=(t,e)=>{const i=re(t.body,e.withColor(t.color),!1);return Ht.makeFragment(i)},Ye=(t,e)=>{const i=we(t.body,e.withColor(t.color)),n=new me.MathNode("mstyle",i);return n.setAttribute("mathcolor",t.color),n};$t({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){let{parser:i}=t;const n=Le(e[0],"color-token").color,r=e[1];return{type:"color",mode:i.mode,color:n,body:Jt(r)}},htmlBuilder:We,mathmlBuilder:Ye}),$t({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){let{parser:i,breakOnTokenText:n}=t;const r=Le(e[0],"color-token").color;i.gullet.macros.set("\\current@color",r);const s=i.parseExpression(!0,n);return{type:"color",mode:i.mode,color:r,body:s}},htmlBuilder:We,mathmlBuilder:Ye}),$t({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,i){let{parser:n}=t;const r="["===n.gullet.future().text?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&Le(r,"size").value}},htmlBuilder(t,e){const i=Ht.makeSpan(["mspace"],[],e);return t.newLine&&(i.classes.push("newline"),t.size&&(i.style.marginTop=q(H(t.size,e)))),i},mathmlBuilder(t,e){const i=new me.MathNode("mspace");return t.newLine&&(i.setAttribute("linebreak","newline"),t.size&&i.setAttribute("height",q(H(t.size,e)))),i}});const Ue={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},$e=t=>{const e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new n("Expected a control sequence",t);return e},Ke=(t,e,i,n)=>{let r=t.gullet.macros.get(i.text);null==r&&(i.noexpand=!0,r={tokens:[i],numArgs:0,unexpandable:!t.gullet.isExpandable(i.text)}),t.gullet.macros.set(e,r,n)};$t({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){let{parser:e,funcName:i}=t;e.consumeSpaces();const r=e.fetch();if(Ue[r.text])return"\\global"!==i&&"\\\\globallong"!==i||(r.text=Ue[r.text]),Le(e.parseFunction(),"internal");throw new n("Invalid token after macro prefix",r)}}),$t({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){let{parser:e,funcName:i}=t,r=e.gullet.popToken();const s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new n("Expected a control sequence",r);let a,o=0;const l=[[]];for(;"{"!==e.gullet.future().text;)if(r=e.gullet.popToken(),"#"===r.text){if("{"===e.gullet.future().text){a=e.gullet.future(),l[o].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new n('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==o+1)throw new n('Argument number "'+r.text+'" out of order');o++,l.push([])}else{if("EOF"===r.text)throw new n("Expected a macro definition");l[o].push(r.text)}let{tokens:h}=e.gullet.consumeArg();return a&&h.unshift(a),"\\edef"!==i&&"\\xdef"!==i||(h=e.gullet.expandTokens(h),h.reverse()),e.gullet.macros.set(s,{tokens:h,numArgs:o,delimiters:l},i===Ue[i]),{type:"internal",mode:e.mode}}}),$t({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){let{parser:e,funcName:i}=t;const n=$e(e.gullet.popToken());e.gullet.consumeSpaces();const r=(t=>{let e=t.gullet.popToken();return"="===e.text&&(e=t.gullet.popToken()," "===e.text&&(e=t.gullet.popToken())),e})(e);return Ke(e,n,r,"\\\\globallet"===i),{type:"internal",mode:e.mode}}}),$t({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){let{parser:e,funcName:i}=t;const n=$e(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return Ke(e,n,s,"\\\\globalfuture"===i),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});const Ze=function(t,e,i){const n=N(st.math[t]&&st.math[t].replace||t,e,i);if(!n)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return n},Je=function(t,e,i,n){const r=i.havingBaseStyle(e),s=Ht.makeSpan(n.concat(r.sizingClasses(i)),[t],i),a=r.sizeMultiplier/i.sizeMultiplier;return s.height*=a,s.depth*=a,s.maxFontSize=r.sizeMultiplier,s},Qe=function(t,e,i){const n=e.havingBaseStyle(i),r=(1-e.sizeMultiplier/n.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=q(r),t.height-=r,t.depth+=r},ti=function(t,e,i,n,r,s){const a=function(t,e,i,n){return Ht.makeSymbol(t,"Size"+e+"-Regular",i,n)}(t,e,r,n),o=Je(Ht.makeSpan(["delimsizing","size"+e],[a],n),y.TEXT,n,s);return i&&Qe(o,n,y.TEXT),o},ei=function(t,e,i){let n;return n="Size1-Regular"===e?"delim-size1":"delim-size4",{type:"elem",elem:Ht.makeSpan(["delimsizinginner",n],[Ht.makeSpan([],[Ht.makeSymbol(t,e,i)])])}},ii=function(t,e,i){const n=M["Size4-Regular"][t.charCodeAt(0)]?M["Size4-Regular"][t.charCodeAt(0)][4]:M["Size1-Regular"][t.charCodeAt(0)][4],r=new Q("inner",function(t,e){switch(t){case"":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145zM367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z";case"":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257zM478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z";default:return""}}(t,Math.round(1e3*e))),s=new J([r],{width:q(n),height:q(e),style:"width:"+q(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),a=Ht.makeSvgSpan([],[s],i);return a.height=e,a.style.height=q(e),a.style.width=q(n),{type:"elem",elem:a}},ni={type:"kern",size:-.008},ri=["|","\\lvert","\\rvert","\\vert"],si=["\\|","\\lVert","\\rVert","\\Vert"],ai=function(t,e,i,n,r,s){let a,o,h,c,d="",u=0;a=h=c=t,o=null;let p="Size1-Regular";"\\uparrow"===t?h=c="":"\\Uparrow"===t?h=c="":"\\downarrow"===t?a=h="":"\\Downarrow"===t?a=h="":"\\updownarrow"===t?(a="\\uparrow",h="",c="\\downarrow"):"\\Updownarrow"===t?(a="\\Uparrow",h="",c="\\Downarrow"):l.contains(ri,t)?(h="",d="vert",u=333):l.contains(si,t)?(h="",d="doublevert",u=556):"["===t||"\\lbrack"===t?(a="",h="",c="",p="Size4-Regular",d="lbrack",u=667):"]"===t||"\\rbrack"===t?(a="",h="",c="",p="Size4-Regular",d="rbrack",u=667):"\\lfloor"===t||""===t?(h=a="",c="",p="Size4-Regular",d="lfloor",u=667):"\\lceil"===t||""===t?(a="",h=c="",p="Size4-Regular",d="lceil",u=667):"\\rfloor"===t||""===t?(h=a="",c="",p="Size4-Regular",d="rfloor",u=667):"\\rceil"===t||""===t?(a="",h=c="",p="Size4-Regular",d="rceil",u=667):"("===t||"\\lparen"===t?(a="",h="",c="",p="Size4-Regular",d="lparen",u=875):")"===t||"\\rparen"===t?(a="",h="",c="",p="Size4-Regular",d="rparen",u=875):"\\{"===t||"\\lbrace"===t?(a="",o="",c="",h="",p="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(a="",o="",c="",h="",p="Size4-Regular"):"\\lgroup"===t||""===t?(a="",c="",h="",p="Size4-Regular"):"\\rgroup"===t||""===t?(a="",c="",h="",p="Size4-Regular"):"\\lmoustache"===t||""===t?(a="",c="",h="",p="Size4-Regular"):"\\rmoustache"!==t&&""!==t||(a="",c="",h="",p="Size4-Regular");const f=Ze(a,p,r),g=f.height+f.depth,m=Ze(h,p,r),b=m.height+m.depth,x=Ze(c,p,r),v=x.height+x.depth;let w=0,k=1;if(null!==o){const t=Ze(o,p,r);w=t.height+t.depth,k=2}const A=g+v+w,S=A+Math.max(0,Math.ceil((e-A)/(k*b)))*k*b;let C=n.fontMetrics().axisHeight;i&&(C*=n.sizeMultiplier);const _=S/2-C,M=[];if(d.length>0){const t=S-g-v,e=Math.round(1e3*S),i=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+e+" v585 h43z\nM367 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+" v602 h84z\nM403 1759 V0 H319 V1759 v"+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+e+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(e+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(e+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(e+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(e+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(d,Math.round(1e3*t)),r=new Q(d,i),s=(u/1e3).toFixed(3)+"em",a=(e/1e3).toFixed(3)+"em",o=new J([r],{width:s,height:a,viewBox:"0 0 "+u+" "+e}),l=Ht.makeSvgSpan([],[o],n);l.height=e/1e3,l.style.width=s,l.style.height=a,M.push({type:"elem",elem:l})}else{if(M.push(ei(c,p,r)),M.push(ni),null===o){const t=S-g-v+.016;M.push(ii(h,t,n))}else{const t=(S-g-v-w)/2+.016;M.push(ii(h,t,n)),M.push(ni),M.push(ei(o,p,r)),M.push(ni),M.push(ii(h,t,n))}M.push(ni),M.push(ei(a,p,r))}const T=n.havingBaseStyle(y.TEXT),E=Ht.makeVList({positionType:"bottom",positionData:_,children:M},T);return Je(Ht.makeSpan(["delimsizing","mult"],[E],T),y.TEXT,n,s)},oi=.08,li=function(t,e,i,n,r){const s=function(t,e,i){e*=1e3;let n="";switch(t){case"sqrtMain":n=function(t,e){return"M95,"+(622+t+e)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,S);break;case"sqrtSize1":n=function(t,e){return"M263,"+(601+t+e)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,S);break;case"sqrtSize2":n=function(t,e){return"M983 "+(10+t+e)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,S);break;case"sqrtSize3":n=function(t,e){return"M424,"+(2398+t+e)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" "+e+"\nh400000v"+(40+t)+"h-400000z"}(e,S);break;case"sqrtSize4":n=function(t,e){return"M473,"+(2713+t+e)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}(e,S);break;case"sqrtTall":n=function(t,e,i){return"M702 "+(t+e)+"H400000"+(40+t)+"\nH742v"+(i-54-e-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+e+"H400000v"+(40+t)+"H742z"}(e,S,i)}return n}(t,n,i),a=new Q(t,s),o=new J([a],{width:"400em",height:q(e),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return Ht.makeSvgSpan(["hide-tail"],[o],r)},hi=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],ci=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],di=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ui=[0,1.2,1.8,2.4,3],pi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],fi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"stack"}],gi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],mi=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},bi=function(t,e,i,n){for(let r=Math.min(2,3-n.style.size);r<i.length&&"stack"!==i[r].type;r++){const s=Ze(t,mi(i[r]),"math");let a=s.height+s.depth;if("small"===i[r].type&&(a*=n.havingBaseStyle(i[r].style).sizeMultiplier),a>e)return i[r]}return i[i.length-1]},xi=function(t,e,i,n,r,s){let a;"<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),a=l.contains(di,t)?pi:l.contains(hi,t)?gi:fi;const o=bi(t,e,a,n);return"small"===o.type?function(t,e,i,n,r,s){const a=Ht.makeSymbol(t,"Main-Regular",r,n),o=Je(a,e,n,s);return i&&Qe(o,n,e),o}(t,o.style,i,n,r,s):"large"===o.type?ti(t,o.size,i,n,r,s):ai(t,e,i,n,r,s)};var vi={sqrtImage:function(t,e){const i=e.havingBaseSizing(),n=bi("\\surd",t*i.sizeMultiplier,gi,i);let r=i.sizeMultiplier;const s=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness);let a,o,l=0,h=0,c=0;return"small"===n.type?(c=1e3+1e3*s+80,t<1?r=1:t<1.4&&(r=.7),l=(1+s+oi)/r,h=(1+s)/r,a=li("sqrtMain",l,c,s,e),a.style.minWidth="0.853em",o=.833/r):"large"===n.type?(c=1080*ui[n.size],h=(ui[n.size]+s)/r,l=(ui[n.size]+s+oi)/r,a=li("sqrtSize"+n.size,l,c,s,e),a.style.minWidth="1.02em",o=1/r):(l=t+s+oi,h=t+s,c=Math.floor(1e3*t+s)+80,a=li("sqrtTall",l,c,s,e),a.style.minWidth="0.742em",o=1.056),a.height=h,a.style.height=q(l),{span:a,advanceWidth:o,ruleWidth:(e.fontMetrics().sqrtRuleThickness+s)*r}},sizedDelim:function(t,e,i,r,s){if("<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),l.contains(hi,t)||l.contains(di,t))return ti(t,e,!1,i,r,s);if(l.contains(ci,t))return ai(t,ui[e],!1,i,r,s);throw new n("Illegal delimiter: '"+t+"'")},sizeToMaxHeight:ui,customSizedDelim:xi,leftRightDelim:function(t,e,i,n,r,s){const a=n.fontMetrics().axisHeight*n.sizeMultiplier,o=5/n.fontMetrics().ptPerEm,l=Math.max(e-a,i+a),h=Math.max(l/500*901,2*l-o);return xi(t,h,!0,n,r,s)}};const yi={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},wi=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function ki(t,e){const i=Re(t);if(i&&l.contains(wi,i.text))return i;throw new n(i?"Invalid delimiter '"+i.text+"' after '"+e.funcName+"'":"Invalid delimiter type '"+t.type+"'",t)}function Ai(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}$t({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{const i=ki(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:yi[t.funcName].size,mclass:yi[t.funcName].mclass,delim:i.text}},htmlBuilder:(t,e)=>"."===t.delim?Ht.makeSpan([t.mclass]):vi.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{const e=[];"."!==t.delim&&e.push(be(t.delim,t.mode));const i=new me.MathNode("mo",e);"mopen"===t.mclass||"mclose"===t.mclass?i.setAttribute("fence","true"):i.setAttribute("fence","false"),i.setAttribute("stretchy","true");const n=q(vi.sizeToMaxHeight[t.size]);return i.setAttribute("minsize",n),i.setAttribute("maxsize",n),i}}),$t({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{const i=t.parser.gullet.macros.get("\\current@color");if(i&&"string"!=typeof i)throw new n("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:ki(e[0],t).text,color:i}}}),$t({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{const i=ki(e[0],t),n=t.parser;++n.leftrightDepth;const r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);const s=Le(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:i.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{Ai(t);const i=re(t.body,e,!0,["mopen","mclose"]);let n,r,s=0,a=0,o=!1;for(let t=0;t<i.length;t++)i[t].isMiddle?o=!0:(s=Math.max(i[t].height,s),a=Math.max(i[t].depth,a));if(s*=e.sizeMultiplier,a*=e.sizeMultiplier,n="."===t.left?he(e,["mopen"]):vi.leftRightDelim(t.left,s,a,e,t.mode,["mopen"]),i.unshift(n),o)for(let e=1;e<i.length;e++){const n=i[e].isMiddle;n&&(i[e]=vi.leftRightDelim(n.delim,s,a,n.options,t.mode,[]))}if("."===t.right)r=he(e,["mclose"]);else{const i=t.rightColor?e.withColor(t.rightColor):e;r=vi.leftRightDelim(t.right,s,a,i,t.mode,["mclose"])}return i.push(r),Ht.makeSpan(["minner"],i,e)},mathmlBuilder:(t,e)=>{Ai(t);const i=we(t.body,e);if("."!==t.left){const e=new me.MathNode("mo",[be(t.left,t.mode)]);e.setAttribute("fence","true"),i.unshift(e)}if("."!==t.right){const e=new me.MathNode("mo",[be(t.right,t.mode)]);e.setAttribute("fence","true"),t.rightColor&&e.setAttribute("mathcolor",t.rightColor),i.push(e)}return xe(i)}}),$t({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{const i=ki(e[0],t);if(!t.parser.leftrightDepth)throw new n("\\middle without preceding \\left",i);return{type:"middle",mode:t.parser.mode,delim:i.text}},htmlBuilder:(t,e)=>{let i;if("."===t.delim)i=he(e,[]);else{i=vi.sizedDelim(t.delim,1,e,t.mode,[]);const n={delim:t.delim,options:e};i.isMiddle=n}return i},mathmlBuilder:(t,e)=>{const i="\\vert"===t.delim||"|"===t.delim?be("|","text"):be(t.delim,t.mode),n=new me.MathNode("mo",[i]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});const Si=(t,e)=>{const i=Ht.wrapFragment(ce(t.body,e),e),n=t.label.slice(1);let r,s=e.sizeMultiplier,a=0;const o=l.isCharacterBox(t.body);if("sout"===n)r=Ht.makeSpan(["stretchy","sout"]),r.height=e.fontMetrics().defaultRuleThickness/s,a=-.5*e.fontMetrics().xHeight;else if("phase"===n){const t=H({number:.6,unit:"pt"},e),n=H({number:.35,unit:"ex"},e);s/=e.havingBaseSizing().sizeMultiplier;const o=i.height+i.depth+t+n;i.style.paddingLeft=q(o/2+t);const l=Math.floor(1e3*o*s),c="M400000 "+(h=l)+" H0 L"+h/2+" 0 l65 45 L145 "+(h-80)+" H400000z",d=new J([new Q("phase",c)],{width:"400em",height:q(l/1e3),viewBox:"0 0 400000 "+l,preserveAspectRatio:"xMinYMin slice"});r=Ht.makeSvgSpan(["hide-tail"],[d],e),r.style.height=q(o),a=i.depth+t+n}else{/cancel/.test(n)?o||i.classes.push("cancel-pad"):"angl"===n?i.classes.push("anglpad"):i.classes.push("boxpad");let s=0,l=0,h=0;/box/.test(n)?(h=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),s=e.fontMetrics().fboxsep+("colorbox"===n?0:h),l=s):"angl"===n?(h=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),s=4*h,l=Math.max(0,.25-i.depth)):(s=o?.2:0,l=s),r=Ee(i,n,s,l,e),/fbox|boxed|fcolorbox/.test(n)?(r.style.borderStyle="solid",r.style.borderWidth=q(h)):"angl"===n&&.049!==h&&(r.style.borderTopWidth=q(h),r.style.borderRightWidth=q(h)),a=i.depth+l,t.backgroundColor&&(r.style.backgroundColor=t.backgroundColor,t.borderColor&&(r.style.borderColor=t.borderColor))}var h;let c;if(t.backgroundColor)c=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:a},{type:"elem",elem:i,shift:0}]},e);else{const t=/cancel|phase/.test(n)?["svg-align"]:[];c=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:a,wrapperClasses:t}]},e)}return/cancel/.test(n)&&(c.height=i.height,c.depth=i.depth),/cancel/.test(n)&&!o?Ht.makeSpan(["mord","cancel-lap"],[c],e):Ht.makeSpan(["mord"],[c],e)},Ci=(t,e)=>{let i=0;const n=new me.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ae(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(i=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*i+"pt"),n.setAttribute("height","+"+2*i+"pt"),n.setAttribute("lspace",i+"pt"),n.setAttribute("voffset",i+"pt"),"\\fcolorbox"===t.label){const i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};$t({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,i){let{parser:n,funcName:r}=t;const s=Le(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:a}},htmlBuilder:Si,mathmlBuilder:Ci}),$t({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,i){let{parser:n,funcName:r}=t;const s=Le(e[0],"color-token").color,a=Le(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:a,borderColor:s,body:o}},htmlBuilder:Si,mathmlBuilder:Ci}),$t({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){let{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\fbox",body:e[0]}}}),$t({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){let{parser:i,funcName:n}=t;const r=e[0];return{type:"enclose",mode:i.mode,label:n,body:r}},htmlBuilder:Si,mathmlBuilder:Ci}),$t({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){let{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\angl",body:e[0]}}});const _i={};function Mi(t){let{type:e,names:i,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=t;const o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r};for(let t=0;t<i.length;++t)_i[i[t]]=o;s&&(Yt[e]=s),a&&(Ut[e]=a)}const Ti={};function Ei(t,e){Ti[t]=e}class Ni{constructor(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}static range(t,e){return e?t&&t.loc&&e.loc&&t.loc.lexer===e.loc.lexer?new Ni(t.loc.lexer,t.loc.start,e.loc.end):null:t&&t.loc}}class Pi{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new Pi(e,Ni.range(this,t))}}function Li(t){const e=[];t.consumeSpaces();let i=t.fetch().text;for("\\relax"===i&&(t.consume(),t.consumeSpaces(),i=t.fetch().text);"\\hline"===i||"\\hdashline"===i;)t.consume(),e.push("\\hdashline"===i),t.consumeSpaces(),i=t.fetch().text;return e}const Ii=t=>{if(!t.parser.settings.displayMode)throw new n("{"+t.envName+"} can be used only in display mode.")};function Ri(t){if(-1===t.indexOf("ed"))return-1===t.indexOf("*")}function Oi(t,e,i){let{hskipBeforeAndAfter:r,addJot:s,cols:a,arraystretch:o,colSeparationType:l,autoTag:h,singleRow:c,emptySingleRow:d,maxNumCols:u,leqno:p}=e;if(t.gullet.beginGroup(),c||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){const e=t.gullet.expandMacroAsText("\\arraystretch");if(null==e)o=1;else if(o=parseFloat(e),!o||o<0)throw new n("Invalid \\arraystretch: "+e)}t.gullet.beginGroup();let f=[];const g=[f],m=[],b=[],x=null!=h?[]:void 0;function v(){h&&t.gullet.macros.set("\\@eqnsw","1",!0)}function y(){x&&(t.gullet.macros.get("\\df@tag")?(x.push(t.subparse([new Pi("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):x.push(Boolean(h)&&"1"===t.gullet.macros.get("\\@eqnsw")))}for(v(),b.push(Li(t));;){let e=t.parseExpression(!1,c?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),e={type:"ordgroup",mode:t.mode,body:e},i&&(e={type:"styling",mode:t.mode,style:i,body:[e]}),f.push(e);const r=t.fetch().text;if("&"===r){if(u&&f.length===u){if(c||l)throw new n("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else{if("\\end"===r){y(),1===f.length&&"styling"===e.type&&0===e.body[0].body.length&&(g.length>1||!d)&&g.pop(),b.length<g.length+1&&b.push([]);break}if("\\\\"!==r)throw new n("Expected & or \\\\ or \\cr or \\end",t.nextToken);{let e;t.consume()," "!==t.gullet.future().text&&(e=t.parseSizeGroup(!0)),m.push(e?e.value:null),y(),b.push(Li(t)),f=[],g.push(f),v()}}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:s,arraystretch:o,body:g,cols:a,rowGaps:m,hskipBeforeAndAfter:r,hLinesBeforeRow:b,colSeparationType:l,tags:x,leqno:p}}function Di(t){return"d"===t.slice(0,1)?"display":"text"}const zi=function(t,e){let i,r;const s=t.body.length,a=t.hLinesBeforeRow;let o=0,h=new Array(s);const c=[],d=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),u=1/e.fontMetrics().ptPerEm;let p=5*u;t.colSeparationType&&"small"===t.colSeparationType&&(p=e.havingStyle(y.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);const f="CD"===t.colSeparationType?H({number:3,unit:"ex"},e):12*u,g=3*u,m=t.arraystretch*f,b=.7*m,x=.3*m;let v=0;function w(t){for(let e=0;e<t.length;++e)e>0&&(v+=.25),c.push({pos:v,isDashed:t[e]})}for(w(a[0]),i=0;i<t.body.length;++i){const n=t.body[i];let s=b,l=x;o<n.length&&(o=n.length);const c=new Array(n.length);for(r=0;r<n.length;++r){const t=ce(n[r],e);l<t.depth&&(l=t.depth),s<t.height&&(s=t.height),c[r]=t}const d=t.rowGaps[i];let u=0;d&&(u=H(d,e),u>0&&(u+=x,l<u&&(l=u),u=0)),t.addJot&&(l+=g),c.height=s,c.depth=l,v+=s,c.pos=v,v+=l+u,h[i]=c,w(a[i+1])}const k=v/2+e.fontMetrics().axisHeight,A=t.cols||[],S=[];let C,_;const M=[];if(t.tags&&t.tags.some((t=>t)))for(i=0;i<s;++i){const n=h[i],r=n.pos-k,s=t.tags[i];let a;a=!0===s?Ht.makeSpan(["eqn-num"],[],e):!1===s?Ht.makeSpan([],[],e):Ht.makeSpan([],re(s,e,!0),e),a.depth=n.depth,a.height=n.height,M.push({type:"elem",elem:a,shift:r})}for(r=0,_=0;r<o||_<A.length;++r,++_){let a,c=A[_]||{},u=!0;for(;"separator"===c.type;){if(u||(C=Ht.makeSpan(["arraycolsep"],[]),C.style.width=q(e.fontMetrics().doubleRuleSep),S.push(C)),"|"!==c.separator&&":"!==c.separator)throw new n("Invalid separator type: "+c.separator);{const t="|"===c.separator?"solid":"dashed",i=Ht.makeSpan(["vertical-separator"],[],e);i.style.height=q(v),i.style.borderRightWidth=q(d),i.style.borderRightStyle=t,i.style.margin="0 "+q(-d/2);const n=v-k;n&&(i.style.verticalAlign=q(-n)),S.push(i)}_++,c=A[_]||{},u=!1}if(r>=o)continue;(r>0||t.hskipBeforeAndAfter)&&(a=l.deflt(c.pregap,p),0!==a&&(C=Ht.makeSpan(["arraycolsep"],[]),C.style.width=q(a),S.push(C)));let f=[];for(i=0;i<s;++i){const t=h[i],e=t[r];if(!e)continue;const n=t.pos-k;e.depth=t.depth,e.height=t.height,f.push({type:"elem",elem:e,shift:n})}f=Ht.makeVList({positionType:"individualShift",children:f},e),f=Ht.makeSpan(["col-align-"+(c.align||"c")],[f]),S.push(f),(r<o-1||t.hskipBeforeAndAfter)&&(a=l.deflt(c.postgap,p),0!==a&&(C=Ht.makeSpan(["arraycolsep"],[]),C.style.width=q(a),S.push(C)))}if(h=Ht.makeSpan(["mtable"],S),c.length>0){const t=Ht.makeLineSpan("hline",e,d),i=Ht.makeLineSpan("hdashline",e,d),n=[{type:"elem",elem:h,shift:0}];for(;c.length>0;){const e=c.pop(),r=e.pos-k;e.isDashed?n.push({type:"elem",elem:i,shift:r}):n.push({type:"elem",elem:t,shift:r})}h=Ht.makeVList({positionType:"individualShift",children:n},e)}if(0===M.length)return Ht.makeSpan(["mord"],[h],e);{let t=Ht.makeVList({positionType:"individualShift",children:M},e);return t=Ht.makeSpan(["tag"],[t],e),Ht.makeFragment([h,t])}},Fi={c:"center ",l:"left ",r:"right "},Bi=function(t,e){const i=[],n=new me.MathNode("mtd",[],["mtr-glue"]),r=new me.MathNode("mtd",[],["mml-eqn-num"]);for(let s=0;s<t.body.length;s++){const a=t.body[s],o=[];for(let t=0;t<a.length;t++)o.push(new me.MathNode("mtd",[Ae(a[t],e)]));t.tags&&t.tags[s]&&(o.unshift(n),o.push(n),t.leqno?o.unshift(r):o.push(r)),i.push(new me.MathNode("mtr",o))}let s=new me.MathNode("mtable",i);const a=.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0);s.setAttribute("rowspacing",q(a));let o="",l="";if(t.cols&&t.cols.length>0){const e=t.cols;let i="",n=!1,r=0,a=e.length;"separator"===e[0].type&&(o+="top ",r=1),"separator"===e[e.length-1].type&&(o+="bottom ",a-=1);for(let t=r;t<a;t++)"align"===e[t].type?(l+=Fi[e[t].align],n&&(i+="none "),n=!0):"separator"===e[t].type&&n&&(i+="|"===e[t].separator?"solid ":"dashed ",n=!1);s.setAttribute("columnalign",l.trim()),/[sd]/.test(i)&&s.setAttribute("columnlines",i.trim())}if("align"===t.colSeparationType){const e=t.cols||[];let i="";for(let t=1;t<e.length;t++)i+=t%2?"0em ":"1em ";s.setAttribute("columnspacing",i.trim())}else"alignat"===t.colSeparationType||"gather"===t.colSeparationType?s.setAttribute("columnspacing","0em"):"small"===t.colSeparationType?s.setAttribute("columnspacing","0.2778em"):"CD"===t.colSeparationType?s.setAttribute("columnspacing","0.5em"):s.setAttribute("columnspacing","1em");let h="";const c=t.hLinesBeforeRow;o+=c[0].length>0?"left ":"",o+=c[c.length-1].length>0?"right ":"";for(let t=1;t<c.length-1;t++)h+=0===c[t].length?"none ":c[t][0]?"dashed ":"solid ";return/[sd]/.test(h)&&s.setAttribute("rowlines",h.trim()),""!==o&&(s=new me.MathNode("menclose",[s]),s.setAttribute("notation",o.trim())),t.arraystretch&&t.arraystretch<1&&(s=new me.MathNode("mstyle",[s]),s.setAttribute("scriptlevel","1")),s},Hi=function(t,e){-1===t.envName.indexOf("ed")&&Ii(t);const i=[],r=t.envName.indexOf("at")>-1?"alignat":"align",s="split"===t.envName,a=Oi(t.parser,{cols:i,addJot:!0,autoTag:s?void 0:Ri(t.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:s?2:void 0,leqno:t.parser.settings.leqno},"display");let o,l=0;const h={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&"ordgroup"===e[0].type){let t="";for(let i=0;i<e[0].body.length;i++)t+=Le(e[0].body[i],"textord").text;o=Number(t),l=2*o}const c=!l;a.body.forEach((function(t){for(let e=1;e<t.length;e+=2){const i=Le(t[e],"styling");Le(i.body[0],"ordgroup").body.unshift(h)}if(c)l<t.length&&(l=t.length);else{const e=t.length/2;if(o<e)throw new n("Too many math in a row: expected "+o+", but got "+e,t[0])}}));for(let t=0;t<l;++t){let e="r",n=0;t%2==1?e="l":t>0&&c&&(n=1),i[t]={type:"align",align:e,pregap:n,postgap:0}}return a.colSeparationType=c?"align":"alignat",a};Mi({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){const i=(Re(e[0])?[e[0]]:Le(e[0],"ordgroup").body).map((function(t){const e=Ie(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new n("Unknown column alignment: "+e,t)})),r={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Oi(t.parser,r,Di(t.envName))},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){const e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")];let i="c";const r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:i}]};if("*"===t.envName.charAt(t.envName.length-1)){const e=t.parser;if(e.consumeSpaces(),"["===e.fetch().text){if(e.consume(),e.consumeSpaces(),i=e.fetch().text,-1==="lcr".indexOf(i))throw new n("Expected l or c or r",e.nextToken);e.consume(),e.consumeSpaces(),e.expect("]"),e.consume(),r.cols=[{type:"align",align:i}]}}const s=Oi(t.parser,r,Di(t.envName)),a=Math.max(0,...s.body.map((t=>t.length)));return s.cols=new Array(a).fill({type:"align",align:i}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){const e=Oi(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){const i=(Re(e[0])?[e[0]]:Le(e[0],"ordgroup").body).map((function(t){const e=Ie(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new n("Unknown column alignment: "+e,t)}));if(i.length>1)throw new n("{subarray} can contain only one column");let r={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(r=Oi(t.parser,r,"script"),r.body.length>0&&r.body[0].length>1)throw new n("{subarray} can contain only one column");return r},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){const e=Oi(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Di(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Hi,htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){l.contains(["gather","gather*"],t.envName)&&Ii(t);const e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Ri(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Oi(t.parser,e,"display")},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Hi,htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Ii(t);const e={autoTag:Ri(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Oi(t.parser,e,"display")},htmlBuilder:zi,mathmlBuilder:Bi}),Mi({type:"array",names:["CD"],props:{numArgs:0},handler:t=>(Ii(t),function(t){const e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();const i=t.fetch().text;if("&"!==i&&"\\\\"!==i){if("\\end"===i){0===e[e.length-1].length&&e.pop();break}throw new n("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}let i=[];const r=[i];for(let o=0;o<e.length;o++){const l=e[o];let h={type:"styling",body:[],mode:"math",style:"display"};for(let e=0;e<l.length;e++)if(Xe(l[e])){i.push(h),e+=1;const r=Ie(l[e]).text,o=new Array(2);if(o[0]={type:"ordgroup",mode:"math",body:[]},o[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(r)>-1);else{if(!("<>AV".indexOf(r)>-1))throw new n('Expected one of "<>AV=|." after @',l[e]);for(let t=0;t<2;t++){let i=!0;for(let h=e+1;h<l.length;h++){if(a=r,("mathord"===(s=l[h]).type||"atom"===s.type)&&s.text===a){i=!1,e=h;break}if(Xe(l[h]))throw new n("Missing a "+r+" character to complete a CD arrow.",l[h]);o[t].body.push(l[h])}if(i)throw new n("Missing a "+r+" character to complete a CD arrow.",l[e])}}const c={type:"styling",body:[Ve(r,o,t)],mode:"math",style:"display"};i.push(c),h={type:"styling",body:[],mode:"math",style:"display"}}else h.body.push(l[e]);o%2==0?i.push(h):i.shift(),i=[],r.push(i)}var s,a;return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}(t.parser)),htmlBuilder:zi,mathmlBuilder:Bi}),Ei("\\nonumber","\\gdef\\@eqnsw{0}"),Ei("\\notag","\\nonumber"),$t({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new n(t.funcName+" valid only within array environment")}});var qi=_i;$t({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){let{parser:i,funcName:r}=t;const s=e[0];if("ordgroup"!==s.type)throw new n("Invalid environment name",s);let a="";for(let t=0;t<s.body.length;++t)a+=Le(s.body[t],"textord").text;if("\\begin"===r){if(!qi.hasOwnProperty(a))throw new n("No such environment: "+a,s);const t=qi[a],{args:e,optArgs:r}=i.parseArguments("\\begin{"+a+"}",t),o={mode:i.mode,envName:a,parser:i},l=t.handler(o,e,r);i.expect("\\end",!1);const h=i.nextToken,c=Le(i.parseFunction(),"environment");if(c.name!==a)throw new n("Mismatch: \\begin{"+a+"} matched by \\end{"+c.name+"}",h);return l}return{type:"environment",mode:i.mode,name:a,nameGroup:s}}});const ji=(t,e)=>{const i=t.font,n=e.withFont(i);return ce(t.body,n)},Gi=(t,e)=>{const i=t.font,n=e.withFont(i);return Ae(t.body,n)},Xi={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};$t({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=Zt(e[0]);let s=n;return s in Xi&&(s=Xi[s]),{type:"font",mode:i.mode,font:s.slice(1),body:r}},htmlBuilder:ji,mathmlBuilder:Gi}),$t({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{let{parser:i}=t;const n=e[0],r=l.isCharacterBox(n);return{type:"mclass",mode:i.mode,mclass:je(n),body:[{type:"font",mode:i.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}}),$t({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{let{parser:i,funcName:n,breakOnTokenText:r}=t;const{mode:s}=i,a=i.parseExpression(!0,r);return{type:"font",mode:s,font:"math"+n.slice(1),body:{type:"ordgroup",mode:i.mode,body:a}}},htmlBuilder:ji,mathmlBuilder:Gi});const Vi=(t,e)=>{let i=e;return"display"===t?i=i.id>=y.SCRIPT.id?i.text():y.DISPLAY:"text"===t&&i.size===y.DISPLAY.size?i=y.TEXT:"script"===t?i=y.SCRIPT:"scriptscript"===t&&(i=y.SCRIPTSCRIPT),i},Wi=(t,e)=>{const i=Vi(t.size,e.style),n=i.fracNum(),r=i.fracDen();let s;s=e.havingStyle(n);const a=ce(t.numer,s,e);if(t.continued){const t=8.5/e.fontMetrics().ptPerEm,i=3.5/e.fontMetrics().ptPerEm;a.height=a.height<t?t:a.height,a.depth=a.depth<i?i:a.depth}s=e.havingStyle(r);const o=ce(t.denom,s,e);let l,h,c,d,u,p,f,g,m,b;if(t.hasBarLine?(t.barSize?(h=H(t.barSize,e),l=Ht.makeLineSpan("frac-line",e,h)):l=Ht.makeLineSpan("frac-line",e),h=l.height,c=l.height):(l=null,h=0,c=e.fontMetrics().defaultRuleThickness),i.size===y.DISPLAY.size||"display"===t.size?(d=e.fontMetrics().num1,u=h>0?3*c:7*c,p=e.fontMetrics().denom1):(h>0?(d=e.fontMetrics().num2,u=c):(d=e.fontMetrics().num3,u=3*c),p=e.fontMetrics().denom2),l){const t=e.fontMetrics().axisHeight;d-a.depth-(t+.5*h)<u&&(d+=u-(d-a.depth-(t+.5*h))),t-.5*h-(o.height-p)<u&&(p+=u-(t-.5*h-(o.height-p)));const i=-(t-.5*h);f=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:p},{type:"elem",elem:l,shift:i},{type:"elem",elem:a,shift:-d}]},e)}else{const t=d-a.depth-(o.height-p);t<u&&(d+=.5*(u-t),p+=.5*(u-t)),f=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:p},{type:"elem",elem:a,shift:-d}]},e)}return s=e.havingStyle(i),f.height*=s.sizeMultiplier/e.sizeMultiplier,f.depth*=s.sizeMultiplier/e.sizeMultiplier,g=i.size===y.DISPLAY.size?e.fontMetrics().delim1:i.size===y.SCRIPTSCRIPT.size?e.havingStyle(y.SCRIPT).fontMetrics().delim2:e.fontMetrics().delim2,m=null==t.leftDelim?he(e,["mopen"]):vi.customSizedDelim(t.leftDelim,g,!0,e.havingStyle(i),t.mode,["mopen"]),b=t.continued?Ht.makeSpan([]):null==t.rightDelim?he(e,["mclose"]):vi.customSizedDelim(t.rightDelim,g,!0,e.havingStyle(i),t.mode,["mclose"]),Ht.makeSpan(["mord"].concat(s.sizingClasses(e)),[m,Ht.makeSpan(["mfrac"],[f]),b],e)},Yi=(t,e)=>{let i=new me.MathNode("mfrac",[Ae(t.numer,e),Ae(t.denom,e)]);if(t.hasBarLine){if(t.barSize){const n=H(t.barSize,e);i.setAttribute("linethickness",q(n))}}else i.setAttribute("linethickness","0px");const n=Vi(t.size,e.style);if(n.size!==e.style.size){i=new me.MathNode("mstyle",[i]);const t=n.size===y.DISPLAY.size?"true":"false";i.setAttribute("displaystyle",t),i.setAttribute("scriptlevel","0")}if(null!=t.leftDelim||null!=t.rightDelim){const e=[];if(null!=t.leftDelim){const i=new me.MathNode("mo",[new me.TextNode(t.leftDelim.replace("\\",""))]);i.setAttribute("fence","true"),e.push(i)}if(e.push(i),null!=t.rightDelim){const i=new me.MathNode("mo",[new me.TextNode(t.rightDelim.replace("\\",""))]);i.setAttribute("fence","true"),e.push(i)}return xe(e)}return i};$t({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0],s=e[1];let a,o=null,l=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,o="(",l=")";break;case"\\\\bracefrac":a=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":a=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text"}return{type:"genfrac",mode:i.mode,continued:!1,numer:r,denom:s,hasBarLine:a,leftDelim:o,rightDelim:l,size:h,barSize:null}},htmlBuilder:Wi,mathmlBuilder:Yi}),$t({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0],s=e[1];return{type:"genfrac",mode:i.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),$t({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){let e,{parser:i,funcName:n,token:r}=t;switch(n){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:i.mode,replaceWith:e,token:r}}});const Ui=["display","text","script","scriptscript"],$i=function(t){let e=null;return t.length>0&&(e=t,e="."===e?null:e),e};$t({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){let{parser:i}=t;const n=e[4],r=e[5],s=Zt(e[0]),a="atom"===s.type&&"open"===s.family?$i(s.text):null,o=Zt(e[1]),l="atom"===o.type&&"close"===o.family?$i(o.text):null,h=Le(e[2],"size");let c,d=null;h.isBlank?c=!0:(d=h.value,c=d.number>0);let u="auto",p=e[3];if("ordgroup"===p.type){if(p.body.length>0){const t=Le(p.body[0],"textord");u=Ui[Number(t.text)]}}else p=Le(p,"textord"),u=Ui[Number(p.text)];return{type:"genfrac",mode:i.mode,numer:n,denom:r,continued:!1,hasBarLine:c,barSize:d,leftDelim:a,rightDelim:l,size:u}},htmlBuilder:Wi,mathmlBuilder:Yi}),$t({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){let{parser:i,funcName:n,token:r}=t;return{type:"infix",mode:i.mode,replaceWith:"\\\\abovefrac",size:Le(e[0],"size").value,token:r}}}),$t({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0],s=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(Le(e[1],"infix").size),a=e[2],o=s.number>0;return{type:"genfrac",mode:i.mode,numer:r,denom:a,continued:!1,hasBarLine:o,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Wi,mathmlBuilder:Yi});const Ki=(t,e)=>{const i=e.style;let n,r;"supsub"===t.type?(n=t.sup?ce(t.sup,e.havingStyle(i.sup()),e):ce(t.sub,e.havingStyle(i.sub()),e),r=Le(t.base,"horizBrace")):r=Le(t,"horizBrace");const s=ce(r.base,e.havingBaseStyle(y.DISPLAY)),a=Pe(r,e);let o;if(r.isOver?(o=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),o.children[0].children[0].children[1].classes.push("svg-align")):(o=Ht.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),o.children[0].children[0].children[0].classes.push("svg-align")),n){const t=Ht.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e);o=r.isOver?Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:.2},{type:"elem",elem:n}]},e):Ht.makeVList({positionType:"bottom",positionData:t.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:t}]},e)}return Ht.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e)};$t({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){let{parser:i,funcName:n}=t;return{type:"horizBrace",mode:i.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:Ki,mathmlBuilder:(t,e)=>{const i=Ne(t.label);return new me.MathNode(t.isOver?"mover":"munder",[Ae(t.base,e),i])}}),$t({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;const n=e[1],r=Le(e[0],"url").url;return i.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:i.mode,href:r,body:Jt(n)}:i.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{const i=re(t.body,e,!1);return Ht.makeAnchor(t.href,[],i,e)},mathmlBuilder:(t,e)=>{let i=ke(t.body,e);return i instanceof fe||(i=new fe("mrow",[i])),i.setAttribute("href",t.href),i}}),$t({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;const n=Le(e[0],"url").url;if(!i.settings.isTrusted({command:"\\url",url:n}))return i.formatUnsupportedCmd("\\url");const r=[];for(let t=0;t<n.length;t++){let e=n[t];"~"===e&&(e="\\textasciitilde"),r.push({type:"textord",mode:"text",text:e})}const s={type:"text",mode:i.mode,font:"\\texttt",body:r};return{type:"href",mode:i.mode,href:n,body:Jt(s)}}}),$t({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){let{parser:i}=t;return{type:"hbox",mode:i.mode,body:Jt(e[0])}},htmlBuilder(t,e){const i=re(t.body,e,!1);return Ht.makeFragment(i)},mathmlBuilder:(t,e)=>new me.MathNode("mrow",we(t.body,e))}),$t({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{let{parser:i,funcName:r,token:s}=t;const a=Le(e[0],"raw").string,o=e[1];let l;i.settings.strict&&i.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");const h={};switch(r){case"\\htmlClass":h.class=a,l={command:"\\htmlClass",class:a};break;case"\\htmlId":h.id=a,l={command:"\\htmlId",id:a};break;case"\\htmlStyle":h.style=a,l={command:"\\htmlStyle",style:a};break;case"\\htmlData":{const t=a.split(",");for(let e=0;e<t.length;e++){const i=t[e].split("=");if(2!==i.length)throw new n("Error parsing key-value for \\htmlData");h["data-"+i[0].trim()]=i[1].trim()}l={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return i.settings.isTrusted(l)?{type:"html",mode:i.mode,attributes:h,body:Jt(o)}:i.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{const i=re(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));const r=Ht.makeSpan(n,i,e);for(const e in t.attributes)"class"!==e&&t.attributes.hasOwnProperty(e)&&r.setAttribute(e,t.attributes[e]);return r},mathmlBuilder:(t,e)=>ke(t.body,e)}),$t({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;return{type:"htmlmathml",mode:i.mode,html:Jt(e[0]),mathml:Jt(e[1])}},htmlBuilder:(t,e)=>{const i=re(t.html,e,!1);return Ht.makeFragment(i)},mathmlBuilder:(t,e)=>ke(t.mathml,e)});const Zi=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};{const e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new n("Invalid size: '"+t+"' in \\includegraphics");const i={number:+(e[1]+e[2]),unit:e[3]};if(!B(i))throw new n("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i}};$t({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,i)=>{let{parser:r}=t,s={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(i[0]){const t=Le(i[0],"raw").string.split(",");for(let e=0;e<t.length;e++){const i=t[e].split("=");if(2===i.length){const t=i[1].trim();switch(i[0].trim()){case"alt":l=t;break;case"width":s=Zi(t);break;case"height":a=Zi(t);break;case"totalheight":o=Zi(t);break;default:throw new n("Invalid key: '"+i[0]+"' in \\includegraphics.")}}}}const h=Le(e[0],"url").url;return""===l&&(l=h,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:h})?{type:"includegraphics",mode:r.mode,alt:l,width:s,height:a,totalheight:o,src:h}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{const i=H(t.height,e);let n=0;t.totalheight.number>0&&(n=H(t.totalheight,e)-i);let r=0;t.width.number>0&&(r=H(t.width,e));const s={height:q(i+n)};r>0&&(s.width=q(r)),n>0&&(s.verticalAlign=q(-n));const a=new $(t.src,t.alt,s);return a.height=i,a.depth=n,a},mathmlBuilder:(t,e)=>{const i=new me.MathNode("mglyph",[]);i.setAttribute("alt",t.alt);const n=H(t.height,e);let r=0;if(t.totalheight.number>0&&(r=H(t.totalheight,e)-n,i.setAttribute("valign",q(-r))),i.setAttribute("height",q(n+r)),t.width.number>0){const n=H(t.width,e);i.setAttribute("width",q(n))}return i.setAttribute("src",t.src),i}}),$t({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){let{parser:i,funcName:n}=t;const r=Le(e[0],"size");if(i.settings.strict){const t="m"===n[1],e="mu"===r.value.unit;t?(e||i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+r.value.unit+" units"),"math"!==i.mode&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):e&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:i.mode,dimension:r.value}},htmlBuilder:(t,e)=>Ht.makeGlue(t.dimension,e),mathmlBuilder(t,e){const i=H(t.dimension,e);return new me.SpaceNode(i)}}),$t({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0];return{type:"lap",mode:i.mode,alignment:n.slice(5),body:r}},htmlBuilder:(t,e)=>{let i;"clap"===t.alignment?(i=Ht.makeSpan([],[ce(t.body,e)]),i=Ht.makeSpan(["inner"],[i],e)):i=Ht.makeSpan(["inner"],[ce(t.body,e)]);const n=Ht.makeSpan(["fix"],[]);let r=Ht.makeSpan([t.alignment],[i,n],e);const s=Ht.makeSpan(["strut"]);return s.style.height=q(r.height+r.depth),r.depth&&(s.style.verticalAlign=q(-r.depth)),r.children.unshift(s),r=Ht.makeSpan(["thinbox"],[r],e),Ht.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(t,e)=>{const i=new me.MathNode("mpadded",[Ae(t.body,e)]);if("rlap"!==t.alignment){const e="llap"===t.alignment?"-1":"-0.5";i.setAttribute("lspace",e+"width")}return i.setAttribute("width","0px"),i}}),$t({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){let{funcName:i,parser:n}=t;const r=n.mode;n.switchMode("math");const s="\\("===i?"\\)":"$",a=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:a}}}),$t({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new n("Mismatched "+t.funcName)}});const Ji=(t,e)=>{switch(e.style.size){case y.DISPLAY.size:return t.display;case y.TEXT.size:return t.text;case y.SCRIPT.size:return t.script;case y.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};$t({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{let{parser:i}=t;return{type:"mathchoice",mode:i.mode,display:Jt(e[0]),text:Jt(e[1]),script:Jt(e[2]),scriptscript:Jt(e[3])}},htmlBuilder:(t,e)=>{const i=Ji(t,e),n=re(i,e,!1);return Ht.makeFragment(n)},mathmlBuilder:(t,e)=>{const i=Ji(t,e);return ke(i,e)}});const Qi=(t,e,i,n,r,s,a)=>{t=Ht.makeSpan([],[t]);const o=i&&l.isCharacterBox(i);let h,c,d;if(e){const t=ce(e,n.havingStyle(r.sup()),n);c={elem:t,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-t.depth)}}if(i){const t=ce(i,n.havingStyle(r.sub()),n);h={elem:t,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-t.height)}}if(c&&h){const e=n.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+t.depth+a;d=Ht.makeVList({positionType:"bottom",positionData:e,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:q(-s)},{type:"kern",size:h.kern},{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:q(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(h){const e=t.height-a;d=Ht.makeVList({positionType:"top",positionData:e,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:q(-s)},{type:"kern",size:h.kern},{type:"elem",elem:t}]},n)}else{if(!c)return t;{const e=t.depth+a;d=Ht.makeVList({positionType:"bottom",positionData:e,children:[{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:q(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}}const u=[d];if(h&&0!==s&&!o){const t=Ht.makeSpan(["mspace"],[],n);t.style.marginRight=q(s),u.unshift(t)}return Ht.makeSpan(["mop","op-limits"],u,n)},tn=["\\smallint"],en=(t,e)=>{let i,n,r,s=!1;"supsub"===t.type?(i=t.sup,n=t.sub,r=Le(t.base,"op"),s=!0):r=Le(t,"op");const a=e.style;let o,h=!1;if(a.size===y.DISPLAY.size&&r.symbol&&!l.contains(tn,r.name)&&(h=!0),r.symbol){const t=h?"Size2-Regular":"Size1-Regular";let i="";if("\\oiint"!==r.name&&"\\oiiint"!==r.name||(i=r.name.slice(1),r.name="oiint"===i?"\\iint":"\\iiint"),o=Ht.makeSymbol(r.name,t,"math",e,["mop","op-symbol",h?"large-op":"small-op"]),i.length>0){const t=o.italic,n=Ht.staticSvg(i+"Size"+(h?"2":"1"),e);o=Ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:n,shift:h?.08:0}]},e),r.name="\\"+i,o.classes.unshift("mop"),o.italic=t}}else if(r.body){const t=re(r.body,e,!0);1===t.length&&t[0]instanceof Z?(o=t[0],o.classes[0]="mop"):o=Ht.makeSpan(["mop"],t,e)}else{const t=[];for(let i=1;i<r.name.length;i++)t.push(Ht.mathsym(r.name[i],r.mode,e));o=Ht.makeSpan(["mop"],t,e)}let c=0,d=0;return(o instanceof Z||"\\oiint"===r.name||"\\oiiint"===r.name)&&!r.suppressBaseShift&&(c=(o.height-o.depth)/2-e.fontMetrics().axisHeight,d=o.italic),s?Qi(o,i,n,e,a,d,c):(c&&(o.style.position="relative",o.style.top=q(c)),o)},nn=(t,e)=>{let i;if(t.symbol)i=new fe("mo",[be(t.name,t.mode)]),l.contains(tn,t.name)&&i.setAttribute("largeop","false");else if(t.body)i=new fe("mo",we(t.body,e));else{i=new fe("mi",[new ge(t.name.slice(1))]);const e=new fe("mo",[be("","text")]);i=t.parentIsSupSub?new fe("mrow",[i,e]):pe([i,e])}return i},rn={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};$t({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{let{parser:i,funcName:n}=t,r=n;return 1===r.length&&(r=rn[r]),{type:"op",mode:i.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:en,mathmlBuilder:nn}),$t({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{let{parser:i}=t;const n=e[0];return{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Jt(n)}},htmlBuilder:en,mathmlBuilder:nn});const sn={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};$t({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){let{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:en,mathmlBuilder:nn}),$t({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){let{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:en,mathmlBuilder:nn}),$t({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){let{parser:e,funcName:i}=t,n=i;return 1===n.length&&(n=sn[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:en,mathmlBuilder:nn});const an=(t,e)=>{let i,n,r,s,a=!1;if("supsub"===t.type?(i=t.sup,n=t.sub,r=Le(t.base,"operatorname"),a=!0):r=Le(t,"operatorname"),r.body.length>0){const t=r.body.map((t=>{const e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t})),i=re(t,e.withFont("mathrm"),!0);for(let t=0;t<i.length;t++){const e=i[t];e instanceof Z&&(e.text=e.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ht.makeSpan(["mop"],i,e)}else s=Ht.makeSpan(["mop"],[],e);return a?Qi(s,i,n,e,e.style,0,0):s};function on(t,e,i){const n=re(t,e,!1),r=e.sizeMultiplier/i.sizeMultiplier;for(let t=0;t<n.length;t++){const s=n[t].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[t].classes,e.sizingClasses(i)):n[t].classes[s+1]==="reset-size"+e.size&&(n[t].classes[s+1]="reset-size"+i.size),n[t].height*=r,n[t].depth*=r}return Ht.makeFragment(n)}$t({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{let{parser:i,funcName:n}=t;const r=e[0];return{type:"operatorname",mode:i.mode,body:Jt(r),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:an,mathmlBuilder:(t,e)=>{let i=we(t.body,e.withFont("mathrm")),n=!0;for(let t=0;t<i.length;t++){const e=i[t];if(e instanceof me.SpaceNode);else if(e instanceof me.MathNode)switch(e.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const t=e.children[0];1===e.children.length&&t instanceof me.TextNode?t.text=t.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){const t=i.map((t=>t.toText())).join("");i=[new me.TextNode(t)]}const r=new me.MathNode("mi",i);r.setAttribute("mathvariant","normal");const s=new me.MathNode("mo",[be("","text")]);return t.parentIsSupSub?new me.MathNode("mrow",[r,s]):me.newDocumentFragment([r,s])}}),Ei("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Kt({type:"ordgroup",htmlBuilder:(t,e)=>t.semisimple?Ht.makeFragment(re(t.body,e,!1)):Ht.makeSpan(["mord"],re(t.body,e,!0),e),mathmlBuilder:(t,e)=>ke(t.body,e,!0)}),$t({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){let{parser:i}=t;const n=e[0];return{type:"overline",mode:i.mode,body:n}},htmlBuilder(t,e){const i=ce(t.body,e.havingCrampedStyle()),n=Ht.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return Ht.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){const i=new me.MathNode("mo",[new me.TextNode("")]);i.setAttribute("stretchy","true");const n=new me.MathNode("mover",[Ae(t.body,e),i]);return n.setAttribute("accent","true"),n}}),$t({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;const n=e[0];return{type:"phantom",mode:i.mode,body:Jt(n)}},htmlBuilder:(t,e)=>{const i=re(t.body,e.withPhantom(),!1);return Ht.makeFragment(i)},mathmlBuilder:(t,e)=>{const i=we(t.body,e);return new me.MathNode("mphantom",i)}}),$t({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;const n=e[0];return{type:"hphantom",mode:i.mode,body:n}},htmlBuilder:(t,e)=>{let i=Ht.makeSpan([],[ce(t.body,e.withPhantom())]);if(i.height=0,i.depth=0,i.children)for(let t=0;t<i.children.length;t++)i.children[t].height=0,i.children[t].depth=0;return i=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e),Ht.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{const i=we(Jt(t.body),e),n=new me.MathNode("mphantom",i),r=new me.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}}),$t({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{let{parser:i}=t;const n=e[0];return{type:"vphantom",mode:i.mode,body:n}},htmlBuilder:(t,e)=>{const i=Ht.makeSpan(["inner"],[ce(t.body,e.withPhantom())]),n=Ht.makeSpan(["fix"],[]);return Ht.makeSpan(["mord","rlap"],[i,n],e)},mathmlBuilder:(t,e)=>{const i=we(Jt(t.body),e),n=new me.MathNode("mphantom",i),r=new me.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}}),$t({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){let{parser:i}=t;const n=Le(e[0],"size").value,r=e[1];return{type:"raisebox",mode:i.mode,dy:n,body:r}},htmlBuilder(t,e){const i=ce(t.body,e),n=H(t.dy,e);return Ht.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:i}]},e)},mathmlBuilder(t,e){const i=new me.MathNode("mpadded",[Ae(t.body,e)]),n=t.dy.number+t.dy.unit;return i.setAttribute("voffset",n),i}}),$t({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(t){let{parser:e}=t;return{type:"internal",mode:e.mode}}}),$t({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,i){let{parser:n}=t;const r=i[0],s=Le(e[0],"size"),a=Le(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&Le(r,"size").value,width:s.value,height:a.value}},htmlBuilder(t,e){const i=Ht.makeSpan(["mord","rule"],[],e),n=H(t.width,e),r=H(t.height,e),s=t.shift?H(t.shift,e):0;return i.style.borderRightWidth=q(n),i.style.borderTopWidth=q(r),i.style.bottom=q(s),i.width=n,i.height=r+s,i.depth=-s,i.maxFontSize=1.125*r*e.sizeMultiplier,i},mathmlBuilder(t,e){const i=H(t.width,e),n=H(t.height,e),r=t.shift?H(t.shift,e):0,s=e.color&&e.getColor()||"black",a=new me.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",q(i)),a.setAttribute("height",q(n));const o=new me.MathNode("mpadded",[a]);return r>=0?o.setAttribute("height",q(r)):(o.setAttribute("height",q(r)),o.setAttribute("depth",q(-r))),o.setAttribute("voffset",q(r)),o}});const ln=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];$t({type:"sizing",names:ln,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{let{breakOnTokenText:i,funcName:n,parser:r}=t;const s=r.parseExpression(!1,i);return{type:"sizing",mode:r.mode,size:ln.indexOf(n)+1,body:s}},htmlBuilder:(t,e)=>{const i=e.havingSize(t.size);return on(t.body,i,e)},mathmlBuilder:(t,e)=>{const i=e.havingSize(t.size),n=we(t.body,i),r=new me.MathNode("mstyle",n);return r.setAttribute("mathsize",q(i.sizeMultiplier)),r}}),$t({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,i)=>{let{parser:n}=t,r=!1,s=!1;const a=i[0]&&Le(i[0],"ordgroup");if(a){let t="";for(let e=0;e<a.body.length;++e)if(t=a.body[e].text,"t"===t)r=!0;else{if("b"!==t){r=!1,s=!1;break}s=!0}}else r=!0,s=!0;const o=e[0];return{type:"smash",mode:n.mode,body:o,smashHeight:r,smashDepth:s}},htmlBuilder:(t,e)=>{const i=Ht.makeSpan([],[ce(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return i;if(t.smashHeight&&(i.height=0,i.children))for(let t=0;t<i.children.length;t++)i.children[t].height=0;if(t.smashDepth&&(i.depth=0,i.children))for(let t=0;t<i.children.length;t++)i.children[t].depth=0;const n=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e);return Ht.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{const i=new me.MathNode("mpadded",[Ae(t.body,e)]);return t.smashHeight&&i.setAttribute("height","0px"),t.smashDepth&&i.setAttribute("depth","0px"),i}}),$t({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){let{parser:n}=t;const r=i[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder(t,e){let i=ce(t.body,e.havingCrampedStyle());0===i.height&&(i.height=e.fontMetrics().xHeight),i=Ht.wrapFragment(i,e);const n=e.fontMetrics().defaultRuleThickness;let r=n;e.style.id<y.TEXT.id&&(r=e.fontMetrics().xHeight);let s=n+r/4;const a=i.height+i.depth+s+n,{span:o,ruleWidth:l,advanceWidth:h}=vi.sqrtImage(a,e),c=o.height-l;c>i.height+i.depth+s&&(s=(s+c-i.height-i.depth)/2);const d=o.height-i.height-s-l;i.style.paddingLeft=q(h);const u=Ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:-(i.height+d)},{type:"elem",elem:o},{type:"kern",size:l}]},e);if(t.index){const i=e.havingStyle(y.SCRIPTSCRIPT),n=ce(t.index,i,e),r=.6*(u.height-u.depth),s=Ht.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e),a=Ht.makeSpan(["root"],[s]);return Ht.makeSpan(["mord","sqrt"],[a,u],e)}return Ht.makeSpan(["mord","sqrt"],[u],e)},mathmlBuilder(t,e){const{body:i,index:n}=t;return n?new me.MathNode("mroot",[Ae(i,e),Ae(n,e)]):new me.MathNode("msqrt",[Ae(i,e)])}});const hn={display:y.DISPLAY,text:y.TEXT,script:y.SCRIPT,scriptscript:y.SCRIPTSCRIPT};$t({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){let{breakOnTokenText:i,funcName:n,parser:r}=t;const s=r.parseExpression(!0,i),a=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:a,body:s}},htmlBuilder(t,e){const i=hn[t.style],n=e.havingStyle(i).withFont("");return on(t.body,n,e)},mathmlBuilder(t,e){const i=hn[t.style],n=e.havingStyle(i),r=we(t.body,n),s=new me.MathNode("mstyle",r),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}}),Kt({type:"supsub",htmlBuilder(t,e){const i=function(t,e){const i=t.base;return i?"op"===i.type?i.limits&&(e.style.size===y.DISPLAY.size||i.alwaysHandleSupSub)?en:null:"operatorname"===i.type?i.alwaysHandleSupSub&&(e.style.size===y.DISPLAY.size||i.limits)?an:null:"accent"===i.type?l.isCharacterBox(i.base)?Oe:null:"horizBrace"===i.type&&!t.sub===i.isOver?Ki:null:null}(t,e);if(i)return i(t,e);const{base:n,sup:r,sub:s}=t,a=ce(n,e);let o,h;const c=e.fontMetrics();let d=0,u=0;const p=n&&l.isCharacterBox(n);if(r){const t=e.havingStyle(e.style.sup());o=ce(r,t,e),p||(d=a.height-t.fontMetrics().supDrop*t.sizeMultiplier/e.sizeMultiplier)}if(s){const t=e.havingStyle(e.style.sub());h=ce(s,t,e),p||(u=a.depth+t.fontMetrics().subDrop*t.sizeMultiplier/e.sizeMultiplier)}let f;f=e.style===y.DISPLAY?c.sup1:e.style.cramped?c.sup3:c.sup2;const g=e.sizeMultiplier,m=q(.5/c.ptPerEm/g);let b,x=null;if(h){const e=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(a instanceof Z||e)&&(x=q(-a.italic))}if(o&&h){d=Math.max(d,f,o.depth+.25*c.xHeight),u=Math.max(u,c.sub2);const t=4*c.defaultRuleThickness;if(d-o.depth-(h.height-u)<t){u=t-(d-o.depth)+h.height;const e=.8*c.xHeight-(d-o.depth);e>0&&(d+=e,u-=e)}const i=[{type:"elem",elem:h,shift:u,marginRight:m,marginLeft:x},{type:"elem",elem:o,shift:-d,marginRight:m}];b=Ht.makeVList({positionType:"individualShift",children:i},e)}else if(h){u=Math.max(u,c.sub1,h.height-.8*c.xHeight);const t=[{type:"elem",elem:h,marginLeft:x,marginRight:m}];b=Ht.makeVList({positionType:"shift",positionData:u,children:t},e)}else{if(!o)throw new Error("supsub must have either sup or sub.");d=Math.max(d,f,o.depth+.25*c.xHeight),b=Ht.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:m}]},e)}const v=le(a,"right")||"mord";return Ht.makeSpan([v],[a,Ht.makeSpan(["msupsub"],[b])],e)},mathmlBuilder(t,e){let i,n,r=!1;t.base&&"horizBrace"===t.base.type&&(n=!!t.sup,n===t.base.isOver&&(r=!0,i=t.base.isOver)),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);const s=[Ae(t.base,e)];let a;if(t.sub&&s.push(Ae(t.sub,e)),t.sup&&s.push(Ae(t.sup,e)),r)a=i?"mover":"munder";else if(t.sub)if(t.sup){const i=t.base;a=i&&"op"===i.type&&i.limits&&e.style===y.DISPLAY||i&&"operatorname"===i.type&&i.alwaysHandleSupSub&&(e.style===y.DISPLAY||i.limits)?"munderover":"msubsup"}else{const i=t.base;a=i&&"op"===i.type&&i.limits&&(e.style===y.DISPLAY||i.alwaysHandleSupSub)||i&&"operatorname"===i.type&&i.alwaysHandleSupSub&&(i.limits||e.style===y.DISPLAY)?"munder":"msub"}else{const i=t.base;a=i&&"op"===i.type&&i.limits&&(e.style===y.DISPLAY||i.alwaysHandleSupSub)||i&&"operatorname"===i.type&&i.alwaysHandleSupSub&&(i.limits||e.style===y.DISPLAY)?"mover":"msup"}return new me.MathNode(a,s)}}),Kt({type:"atom",htmlBuilder:(t,e)=>Ht.mathsym(t.text,t.mode,e,["m"+t.family]),mathmlBuilder(t,e){const i=new me.MathNode("mo",[be(t.text,t.mode)]);if("bin"===t.family){const n=ve(t,e);"bold-italic"===n&&i.setAttribute("mathvariant",n)}else"punct"===t.family?i.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||i.setAttribute("stretchy","false");return i}});const cn={mi:"italic",mn:"normal",mtext:"normal"};Kt({type:"mathord",htmlBuilder:(t,e)=>Ht.makeOrd(t,e,"mathord"),mathmlBuilder(t,e){const i=new me.MathNode("mi",[be(t.text,t.mode,e)]),n=ve(t,e)||"italic";return n!==cn[i.type]&&i.setAttribute("mathvariant",n),i}}),Kt({type:"textord",htmlBuilder:(t,e)=>Ht.makeOrd(t,e,"textord"),mathmlBuilder(t,e){const i=be(t.text,t.mode,e),n=ve(t,e)||"normal";let r;return r="text"===t.mode?new me.MathNode("mtext",[i]):/[0-9]/.test(t.text)?new me.MathNode("mn",[i]):"\\prime"===t.text?new me.MathNode("mo",[i]):new me.MathNode("mi",[i]),n!==cn[r.type]&&r.setAttribute("mathvariant",n),r}});const dn={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},un={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Kt({type:"spacing",htmlBuilder(t,e){if(un.hasOwnProperty(t.text)){const i=un[t.text].className||"";if("text"===t.mode){const n=Ht.makeOrd(t,e,"textord");return n.classes.push(i),n}return Ht.makeSpan(["mspace",i],[Ht.mathsym(t.text,t.mode,e)],e)}if(dn.hasOwnProperty(t.text))return Ht.makeSpan(["mspace",dn[t.text]],[],e);throw new n('Unknown type of space "'+t.text+'"')},mathmlBuilder(t,e){let i;if(!un.hasOwnProperty(t.text)){if(dn.hasOwnProperty(t.text))return new me.MathNode("mspace");throw new n('Unknown type of space "'+t.text+'"')}return i=new me.MathNode("mtext",[new me.TextNode("")]),i}});const pn=()=>{const t=new me.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};Kt({type:"tag",mathmlBuilder(t,e){const i=new me.MathNode("mtable",[new me.MathNode("mtr",[pn(),new me.MathNode("mtd",[ke(t.body,e)]),pn(),new me.MathNode("mtd",[ke(t.tag,e)])])]);return i.setAttribute("width","100%"),i}});const fn={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},gn={"\\textbf":"textbf","\\textmd":"textmd"},mn={"\\textit":"textit","\\textup":"textup"},bn=(t,e)=>{const i=t.font;return i?fn[i]?e.withTextFontFamily(fn[i]):gn[i]?e.withTextFontWeight(gn[i]):"\\emph"===i?"textit"===e.fontShape?e.withTextFontShape("textup"):e.withTextFontShape("textit"):e.withTextFontShape(mn[i]):e};$t({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){let{parser:i,funcName:n}=t;const r=e[0];return{type:"text",mode:i.mode,body:Jt(r),font:n}},htmlBuilder(t,e){const i=bn(t,e),n=re(t.body,i,!0);return Ht.makeSpan(["mord","text"],n,i)},mathmlBuilder(t,e){const i=bn(t,e);return ke(t.body,i)}}),$t({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){let{parser:i}=t;return{type:"underline",mode:i.mode,body:e[0]}},htmlBuilder(t,e){const i=ce(t.body,e),n=Ht.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Ht.makeVList({positionType:"top",positionData:i.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:i}]},e);return Ht.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){const i=new me.MathNode("mo",[new me.TextNode("")]);i.setAttribute("stretchy","true");const n=new me.MathNode("munder",[Ae(t.body,e),i]);return n.setAttribute("accentunder","true"),n}}),$t({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){let{parser:i}=t;return{type:"vcenter",mode:i.mode,body:e[0]}},htmlBuilder(t,e){const i=ce(t.body,e),n=e.fontMetrics().axisHeight,r=.5*(i.height-n-(i.depth+n));return Ht.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:i}]},e)},mathmlBuilder:(t,e)=>new me.MathNode("mpadded",[Ae(t.body,e)],["vcenter"])}),$t({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,i){throw new n("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){const i=xn(t),n=[],r=e.havingStyle(e.style.text());for(let e=0;e<i.length;e++){let s=i[e];"~"===s&&(s="\\textasciitilde"),n.push(Ht.makeSymbol(s,"Typewriter-Regular",t.mode,r,["mord","texttt"]))}return Ht.makeSpan(["mord","text"].concat(r.sizingClasses(e)),Ht.tryCombineChars(n),r)},mathmlBuilder(t,e){const i=new me.TextNode(xn(t)),n=new me.MathNode("mtext",[i]);return n.setAttribute("mathvariant","monospace"),n}});const xn=t=>t.body.replace(/ /g,t.star?"":"");var vn=Wt;const yn="[ \r\n\t]",wn="(\\\\[a-zA-Z@]+)"+yn+"*",kn="[-]",An=new RegExp(kn+"+$"),Sn="("+yn+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]---]"+kn+"*|[\ud800-\udbff][\udc00-\udfff]"+kn+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+wn+"|\\\\[^\ud800-\udfff])";class Cn{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(Sn,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){const t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new Pi("EOF",new Ni(this,e,e));const i=this.tokenRegex.exec(t);if(null===i||i.index!==e)throw new n("Unexpected character: '"+t[e]+"'",new Pi(t[e],new Ni(this,e,e+1)));const r=i[6]||i[3]||(i[2]?"\\ ":" ");if(14===this.catcodes[r]){const e=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===e?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=e+1,this.lex()}return new Pi(r,new Ni(this,e,this.tokenRegex.lastIndex))}}class _n{constructor(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new n("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const t=this.undefStack.pop();for(const e in t)t.hasOwnProperty(e)&&(null==t[e]?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,i){if(void 0===i&&(i=!1),i){for(let e=0;e<this.undefStack.length;e++)delete this.undefStack[e][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{const e=this.undefStack[this.undefStack.length-1];e&&!e.hasOwnProperty(t)&&(e[t]=this.current[t])}null==e?delete this.current[t]:this.current[t]=e}}var Mn=Ti;Ei("\\noexpand",(function(t){const e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}})),Ei("\\expandafter",(function(t){const e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}})),Ei("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),Ei("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),Ei("\\@ifnextchar",(function(t){const e=t.consumeArgs(3);t.consumeSpaces();const i=t.future();return 1===e[0].length&&e[0][0].text===i.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),Ei("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Ei("\\TextOrMath",(function(t){const e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));const Tn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Ei("\\char",(function(t){let e,i=t.popToken(),r="";if("'"===i.text)e=8,i=t.popToken();else if('"'===i.text)e=16,i=t.popToken();else if("`"===i.text)if(i=t.popToken(),"\\"===i.text[0])r=i.text.charCodeAt(1);else{if("EOF"===i.text)throw new n("\\char` missing argument");r=i.text.charCodeAt(0)}else e=10;if(e){if(r=Tn[i.text],null==r||r>=e)throw new n("Invalid base-"+e+" digit "+i.text);let s;for(;null!=(s=Tn[t.future().text])&&s<e;)r*=e,r+=s,t.popToken()}return"\\@char{"+r+"}"}));const En=(t,e,i,r)=>{let s=t.consumeArg().tokens;if(1!==s.length)throw new n("\\newcommand's first argument must be a macro name");const a=s[0].text,o=t.isDefined(a);if(o&&!e)throw new n("\\newcommand{"+a+"} attempting to redefine "+a+"; use \\renewcommand");if(!o&&!i)throw new n("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");let l=0;if(s=t.consumeArg().tokens,1===s.length&&"["===s[0].text){let e="",i=t.expandNextToken();for(;"]"!==i.text&&"EOF"!==i.text;)e+=i.text,i=t.expandNextToken();if(!e.match(/^\s*[0-9]+\s*$/))throw new n("Invalid number of arguments: "+e);l=parseInt(e),s=t.consumeArg().tokens}return o&&r||t.macros.set(a,{tokens:s,numArgs:l}),""};Ei("\\newcommand",(t=>En(t,!1,!0,!1))),Ei("\\renewcommand",(t=>En(t,!0,!1,!1))),Ei("\\providecommand",(t=>En(t,!0,!0,!0))),Ei("\\message",(t=>(t.consumeArgs(1)[0],""))),Ei("\\errmessage",(t=>(t.consumeArgs(1)[0],""))),Ei("\\show",(t=>(t.popToken().text,""))),Ei("\\bgroup","{"),Ei("\\egroup","}"),Ei("~","\\nobreakspace"),Ei("\\lq","`"),Ei("\\rq","'"),Ei("\\aa","\\r a"),Ei("\\AA","\\r A"),Ei("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),Ei("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Ei("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),Ei("","\\mathscr{B}"),Ei("","\\mathscr{E}"),Ei("","\\mathscr{F}"),Ei("","\\mathscr{H}"),Ei("","\\mathscr{I}"),Ei("","\\mathscr{L}"),Ei("","\\mathscr{M}"),Ei("","\\mathscr{R}"),Ei("","\\mathfrak{C}"),Ei("","\\mathfrak{H}"),Ei("","\\mathfrak{Z}"),Ei("\\Bbbk","\\Bbb{k}"),Ei("","\\cdotp"),Ei("\\llap","\\mathllap{\\textrm{#1}}"),Ei("\\rlap","\\mathrlap{\\textrm{#1}}"),Ei("\\clap","\\mathclap{\\textrm{#1}}"),Ei("\\mathstrut","\\vphantom{(}"),Ei("\\underbar","\\underline{\\text{#1}}"),Ei("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Ei("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),Ei("\\ne","\\neq"),Ei("","\\neq"),Ei("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),Ei("","\\notin"),Ei("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),Ei("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),Ei("","\\perp"),Ei("","\\mathclose{!\\mkern-0.8mu!}"),Ei("","\\notni"),Ei("","\\ulcorner"),Ei("","\\urcorner"),Ei("","\\llcorner"),Ei("","\\lrcorner"),Ei("","\\copyright"),Ei("","\\textregistered"),Ei("","\\textregistered"),Ei("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Ei("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Ei("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Ei("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Ei("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),Ei("","\\vdots"),Ei("\\varGamma","\\mathit{\\Gamma}"),Ei("\\varDelta","\\mathit{\\Delta}"),Ei("\\varTheta","\\mathit{\\Theta}"),Ei("\\varLambda","\\mathit{\\Lambda}"),Ei("\\varXi","\\mathit{\\Xi}"),Ei("\\varPi","\\mathit{\\Pi}"),Ei("\\varSigma","\\mathit{\\Sigma}"),Ei("\\varUpsilon","\\mathit{\\Upsilon}"),Ei("\\varPhi","\\mathit{\\Phi}"),Ei("\\varPsi","\\mathit{\\Psi}"),Ei("\\varOmega","\\mathit{\\Omega}"),Ei("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Ei("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),Ei("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Ei("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Ei("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Ei("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),Ei("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),Ei("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const Nn={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Ei("\\dots",(function(t){let e="\\dotso";const i=t.expandAfterFuture().text;return i in Nn?e=Nn[i]:("\\not"===i.slice(0,4)||i in st.math&&l.contains(["bin","rel"],st.math[i].group))&&(e="\\dotsb"),e}));const Pn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Ei("\\dotso",(function(t){return t.future().text in Pn?"\\ldots\\,":"\\ldots"})),Ei("\\dotsc",(function(t){const e=t.future().text;return e in Pn&&","!==e?"\\ldots\\,":"\\ldots"})),Ei("\\cdots",(function(t){return t.future().text in Pn?"\\@cdots\\,":"\\@cdots"})),Ei("\\dotsb","\\cdots"),Ei("\\dotsm","\\cdots"),Ei("\\dotsi","\\!\\cdots"),Ei("\\dotsx","\\ldots\\,"),Ei("\\DOTSI","\\relax"),Ei("\\DOTSB","\\relax"),Ei("\\DOTSX","\\relax"),Ei("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Ei("\\,","\\tmspace+{3mu}{.1667em}"),Ei("\\thinspace","\\,"),Ei("\\>","\\mskip{4mu}"),Ei("\\:","\\tmspace+{4mu}{.2222em}"),Ei("\\medspace","\\:"),Ei("\\;","\\tmspace+{5mu}{.2777em}"),Ei("\\thickspace","\\;"),Ei("\\!","\\tmspace-{3mu}{.1667em}"),Ei("\\negthinspace","\\!"),Ei("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Ei("\\negthickspace","\\tmspace-{5mu}{.277em}"),Ei("\\enspace","\\kern.5em "),Ei("\\enskip","\\hskip.5em\\relax"),Ei("\\quad","\\hskip1em\\relax"),Ei("\\qquad","\\hskip2em\\relax"),Ei("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Ei("\\tag@paren","\\tag@literal{({#1})}"),Ei("\\tag@literal",(t=>{if(t.macros.get("\\df@tag"))throw new n("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),Ei("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Ei("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Ei("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Ei("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Ei("\\newline","\\\\\\relax"),Ei("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const Ln=q(M["Main-Regular"]["T".charCodeAt(0)][1]-.7*M["Main-Regular"]["A".charCodeAt(0)][1]);Ei("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Ln+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),Ei("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Ln+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),Ei("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Ei("\\@hspace","\\hskip #1\\relax"),Ei("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Ei("\\ordinarycolon",":"),Ei("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Ei("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Ei("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Ei("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Ei("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Ei("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Ei("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Ei("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Ei("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Ei("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Ei("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Ei("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Ei("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Ei("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Ei("","\\dblcolon"),Ei("","\\eqcolon"),Ei("","\\coloneqq"),Ei("","\\eqqcolon"),Ei("","\\Coloneqq"),Ei("\\ratio","\\vcentcolon"),Ei("\\coloncolon","\\dblcolon"),Ei("\\colonequals","\\coloneqq"),Ei("\\coloncolonequals","\\Coloneqq"),Ei("\\equalscolon","\\eqqcolon"),Ei("\\equalscoloncolon","\\Eqqcolon"),Ei("\\colonminus","\\coloneq"),Ei("\\coloncolonminus","\\Coloneq"),Ei("\\minuscolon","\\eqcolon"),Ei("\\minuscoloncolon","\\Eqcolon"),Ei("\\coloncolonapprox","\\Colonapprox"),Ei("\\coloncolonsim","\\Colonsim"),Ei("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ei("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ei("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ei("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ei("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),Ei("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Ei("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Ei("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Ei("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Ei("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Ei("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Ei("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Ei("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Ei("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),Ei("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),Ei("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),Ei("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),Ei("\\nleqq","\\html@mathml{\\@nleqq}{}"),Ei("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),Ei("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),Ei("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),Ei("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),Ei("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),Ei("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),Ei("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),Ei("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),Ei("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),Ei("\\imath","\\html@mathml{\\@imath}{}"),Ei("\\jmath","\\html@mathml{\\@jmath}{}"),Ei("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Ei("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),Ei("","\\llbracket"),Ei("","\\rrbracket"),Ei("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Ei("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),Ei("","\\lBrace"),Ei("","\\rBrace"),Ei("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),Ei("","\\minuso"),Ei("\\darr","\\downarrow"),Ei("\\dArr","\\Downarrow"),Ei("\\Darr","\\Downarrow"),Ei("\\lang","\\langle"),Ei("\\rang","\\rangle"),Ei("\\uarr","\\uparrow"),Ei("\\uArr","\\Uparrow"),Ei("\\Uarr","\\Uparrow"),Ei("\\N","\\mathbb{N}"),Ei("\\R","\\mathbb{R}"),Ei("\\Z","\\mathbb{Z}"),Ei("\\alef","\\aleph"),Ei("\\alefsym","\\aleph"),Ei("\\Alpha","\\mathrm{A}"),Ei("\\Beta","\\mathrm{B}"),Ei("\\bull","\\bullet"),Ei("\\Chi","\\mathrm{X}"),Ei("\\clubs","\\clubsuit"),Ei("\\cnums","\\mathbb{C}"),Ei("\\Complex","\\mathbb{C}"),Ei("\\Dagger","\\ddagger"),Ei("\\diamonds","\\diamondsuit"),Ei("\\empty","\\emptyset"),Ei("\\Epsilon","\\mathrm{E}"),Ei("\\Eta","\\mathrm{H}"),Ei("\\exist","\\exists"),Ei("\\harr","\\leftrightarrow"),Ei("\\hArr","\\Leftrightarrow"),Ei("\\Harr","\\Leftrightarrow"),Ei("\\hearts","\\heartsuit"),Ei("\\image","\\Im"),Ei("\\infin","\\infty"),Ei("\\Iota","\\mathrm{I}"),Ei("\\isin","\\in"),Ei("\\Kappa","\\mathrm{K}"),Ei("\\larr","\\leftarrow"),Ei("\\lArr","\\Leftarrow"),Ei("\\Larr","\\Leftarrow"),Ei("\\lrarr","\\leftrightarrow"),Ei("\\lrArr","\\Leftrightarrow"),Ei("\\Lrarr","\\Leftrightarrow"),Ei("\\Mu","\\mathrm{M}"),Ei("\\natnums","\\mathbb{N}"),Ei("\\Nu","\\mathrm{N}"),Ei("\\Omicron","\\mathrm{O}"),Ei("\\plusmn","\\pm"),Ei("\\rarr","\\rightarrow"),Ei("\\rArr","\\Rightarrow"),Ei("\\Rarr","\\Rightarrow"),Ei("\\real","\\Re"),Ei("\\reals","\\mathbb{R}"),Ei("\\Reals","\\mathbb{R}"),Ei("\\Rho","\\mathrm{P}"),Ei("\\sdot","\\cdot"),Ei("\\sect","\\S"),Ei("\\spades","\\spadesuit"),Ei("\\sub","\\subset"),Ei("\\sube","\\subseteq"),Ei("\\supe","\\supseteq"),Ei("\\Tau","\\mathrm{T}"),Ei("\\thetasym","\\vartheta"),Ei("\\weierp","\\wp"),Ei("\\Zeta","\\mathrm{Z}"),Ei("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Ei("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Ei("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Ei("\\bra","\\mathinner{\\langle{#1}|}"),Ei("\\ket","\\mathinner{|{#1}\\rangle}"),Ei("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Ei("\\Bra","\\left\\langle#1\\right|"),Ei("\\Ket","\\left|#1\\right\\rangle");const In=t=>e=>{const i=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();const l=e=>i=>{t&&(i.macros.set("|",a),r.length&&i.macros.set("\\|",o));let s=e;return!e&&r.length&&"|"===i.future().text&&(i.popToken(),s=!0),{tokens:s?r:n,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));const h=e.consumeArg().tokens,c=e.expandTokens([...s,...h,...i]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};Ei("\\bra@ket",In(!1)),Ei("\\bra@set",In(!0)),Ei("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),Ei("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),Ei("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),Ei("\\angln","{\\angl n}"),Ei("\\blue","\\textcolor{##6495ed}{#1}"),Ei("\\orange","\\textcolor{##ffa500}{#1}"),Ei("\\pink","\\textcolor{##ff00af}{#1}"),Ei("\\red","\\textcolor{##df0030}{#1}"),Ei("\\green","\\textcolor{##28ae7b}{#1}"),Ei("\\gray","\\textcolor{gray}{#1}"),Ei("\\purple","\\textcolor{##9d38bd}{#1}"),Ei("\\blueA","\\textcolor{##ccfaff}{#1}"),Ei("\\blueB","\\textcolor{##80f6ff}{#1}"),Ei("\\blueC","\\textcolor{##63d9ea}{#1}"),Ei("\\blueD","\\textcolor{##11accd}{#1}"),Ei("\\blueE","\\textcolor{##0c7f99}{#1}"),Ei("\\tealA","\\textcolor{##94fff5}{#1}"),Ei("\\tealB","\\textcolor{##26edd5}{#1}"),Ei("\\tealC","\\textcolor{##01d1c1}{#1}"),Ei("\\tealD","\\textcolor{##01a995}{#1}"),Ei("\\tealE","\\textcolor{##208170}{#1}"),Ei("\\greenA","\\textcolor{##b6ffb0}{#1}"),Ei("\\greenB","\\textcolor{##8af281}{#1}"),Ei("\\greenC","\\textcolor{##74cf70}{#1}"),Ei("\\greenD","\\textcolor{##1fab54}{#1}"),Ei("\\greenE","\\textcolor{##0d923f}{#1}"),Ei("\\goldA","\\textcolor{##ffd0a9}{#1}"),Ei("\\goldB","\\textcolor{##ffbb71}{#1}"),Ei("\\goldC","\\textcolor{##ff9c39}{#1}"),Ei("\\goldD","\\textcolor{##e07d10}{#1}"),Ei("\\goldE","\\textcolor{##a75a05}{#1}"),Ei("\\redA","\\textcolor{##fca9a9}{#1}"),Ei("\\redB","\\textcolor{##ff8482}{#1}"),Ei("\\redC","\\textcolor{##f9685d}{#1}"),Ei("\\redD","\\textcolor{##e84d39}{#1}"),Ei("\\redE","\\textcolor{##bc2612}{#1}"),Ei("\\maroonA","\\textcolor{##ffbde0}{#1}"),Ei("\\maroonB","\\textcolor{##ff92c6}{#1}"),Ei("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Ei("\\maroonD","\\textcolor{##ca337c}{#1}"),Ei("\\maroonE","\\textcolor{##9e034e}{#1}"),Ei("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Ei("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Ei("\\purpleC","\\textcolor{##aa87ff}{#1}"),Ei("\\purpleD","\\textcolor{##7854ab}{#1}"),Ei("\\purpleE","\\textcolor{##543b78}{#1}"),Ei("\\mintA","\\textcolor{##f5f9e8}{#1}"),Ei("\\mintB","\\textcolor{##edf2df}{#1}"),Ei("\\mintC","\\textcolor{##e0e5cc}{#1}"),Ei("\\grayA","\\textcolor{##f6f7f7}{#1}"),Ei("\\grayB","\\textcolor{##f0f1f2}{#1}"),Ei("\\grayC","\\textcolor{##e3e5e6}{#1}"),Ei("\\grayD","\\textcolor{##d6d8da}{#1}"),Ei("\\grayE","\\textcolor{##babec2}{#1}"),Ei("\\grayF","\\textcolor{##888d93}{#1}"),Ei("\\grayG","\\textcolor{##626569}{#1}"),Ei("\\grayH","\\textcolor{##3b3e40}{#1}"),Ei("\\grayI","\\textcolor{##21242c}{#1}"),Ei("\\kaBlue","\\textcolor{##314453}{#1}"),Ei("\\kaGreen","\\textcolor{##71B307}{#1}");const Rn={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class On{constructor(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new _n(Mn,e.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new Cn(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){let e,i,n;if(t){if(this.consumeSpaces(),"["!==this.future().text)return null;e=this.popToken(),({tokens:n,end:i}=this.consumeArg(["]"]))}else({tokens:n,start:e,end:i}=this.consumeArg());return this.pushToken(new Pi("EOF",i.loc)),this.pushTokens(n),e.range(i,"")}consumeSpaces(){for(;" "===this.future().text;)this.stack.pop()}consumeArg(t){const e=[],i=t&&t.length>0;i||this.consumeSpaces();const r=this.future();let s,a=0,o=0;do{if(s=this.popToken(),e.push(s),"{"===s.text)++a;else if("}"===s.text){if(--a,-1===a)throw new n("Extra }",s)}else if("EOF"===s.text)throw new n("Unexpected end of input in a macro argument, expected '"+(t&&i?t[o]:"}")+"'",s);if(t&&i)if((0===a||1===a&&"{"===t[o])&&s.text===t[o]){if(++o,o===t.length){e.splice(-o,o);break}}else o=0}while(0!==a||i);return"{"===r.text&&"}"===e[e.length-1].text&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:r,end:s}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new n("The length of delimiters doesn't match the number of args!");const i=e[0];for(let t=0;t<i.length;t++){const e=this.popToken();if(i[t]!==e.text)throw new n("Use of the macro doesn't match its definition",e)}}const i=[];for(let n=0;n<t;n++)i.push(this.consumeArg(e&&e[n+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new n("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){const e=this.popToken(),i=e.text,r=e.noexpand?null:this._getExpansion(i);if(null==r||t&&r.unexpandable){if(t&&null==r&&"\\"===i[0]&&!this.isDefined(i))throw new n("Undefined control sequence: "+i);return this.pushToken(e),!1}this.countExpansion(1);let s=r.tokens;const a=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){s=s.slice();for(let t=s.length-1;t>=0;--t){let e=s[t];if("#"===e.text){if(0===t)throw new n("Incomplete placeholder at end of macro body",e);if(e=s[--t],"#"===e.text)s.splice(t+1,1);else{if(!/^[1-9]$/.test(e.text))throw new n("Not a valid argument number",e);s.splice(t,2,...a[+e.text-1])}}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){const t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Pi(t)]):void 0}expandTokens(t){const e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(!1===this.expandOnce(!0)){const t=this.stack.pop();t.treatAsRelax&&(t.noexpand=!1,t.treatAsRelax=!1),e.push(t)}return this.countExpansion(e.length),e}expandMacroAsText(t){const e=this.expandMacro(t);return e?e.map((t=>t.text)).join(""):e}_getExpansion(t){const e=this.macros.get(t);if(null==e)return e;if(1===t.length){const e=this.lexer.catcodes[t];if(null!=e&&13!==e)return}const i="function"==typeof e?e(this):e;if("string"==typeof i){let t=0;if(-1!==i.indexOf("#")){const e=i.replace(/##/g,"");for(;-1!==e.indexOf("#"+(t+1));)++t}const e=new Cn(i,this.settings),n=[];let r=e.lex();for(;"EOF"!==r.text;)n.push(r),r=e.lex();return n.reverse(),{tokens:n,numArgs:t}}return i}isDefined(t){return this.macros.has(t)||vn.hasOwnProperty(t)||st.math.hasOwnProperty(t)||st.text.hasOwnProperty(t)||Rn.hasOwnProperty(t)}isExpandable(t){const e=this.macros.get(t);return null!=e?"string"==typeof e||"function"==typeof e||!e.unexpandable:vn.hasOwnProperty(t)&&!vn[t].primitive}}const Dn=/^[]/,zn=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"a",:"e",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"x",:"",:"",:"",:"",:"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"A",:"B",:"D",:"E",:"G",:"H",:"I",:"J",:"K",:"L",:"M",:"N",:"O",:"P",:"R",:"T",:"U",:"V",:"W",:"a",:"b",:"c",:"d",:"e",:"f",:"g",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"w",:"x",:"y",:"z",:"",:"",:"",:"",:"",:""}),Fn={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Bn={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Hn{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new On(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(void 0===e&&(e=!0),this.fetch().text!==t)throw new n("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){const e=this.nextToken;this.consume(),this.gullet.pushToken(new Pi("}")),this.gullet.pushTokens(t);const i=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,i}parseExpression(t,e){const i=[];for(;;){"math"===this.mode&&this.consumeSpaces();const n=this.fetch();if(-1!==Hn.endOfExpression.indexOf(n.text))break;if(e&&n.text===e)break;if(t&&vn[n.text]&&vn[n.text].infix)break;const r=this.parseAtom(e);if(!r)break;"internal"!==r.type&&i.push(r)}return"text"===this.mode&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){let e,i=-1;for(let r=0;r<t.length;r++)if("infix"===t[r].type){if(-1!==i)throw new n("only one infix operator per group",t[r].token);i=r,e=t[r].replaceWith}if(-1!==i&&e){let n,r;const s=t.slice(0,i),a=t.slice(i+1);let o;return n=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},r=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},o="\\\\abovefrac"===e?this.callFunction(e,[n,t[i],r],[]):this.callFunction(e,[n,r],[]),[o]}return t}handleSupSubscript(t){const e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();const r=this.parseGroup(t);if(!r)throw new n("Expected group after '"+i+"'",e);return r}formatUnsupportedCmd(t){const e=[];for(let i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});const i={type:"text",mode:this.mode,body:e};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]}}parseAtom(t){const e=this.parseGroup("atom",t);if("text"===this.mode)return e;let i,r;for(;;){this.consumeSpaces();const t=this.fetch();if("\\limits"===t.text||"\\nolimits"===t.text){if(e&&"op"===e.type){const i="\\limits"===t.text;e.limits=i,e.alwaysHandleSupSub=!0}else{if(!e||"operatorname"!==e.type)throw new n("Limit controls must follow a math operator",t);e.alwaysHandleSupSub&&(e.limits="\\limits"===t.text)}this.consume()}else if("^"===t.text){if(i)throw new n("Double superscript",t);i=this.handleSupSubscript("superscript")}else if("_"===t.text){if(r)throw new n("Double subscript",t);r=this.handleSupSubscript("subscript")}else if("'"===t.text){if(i)throw new n("Double superscript",t);const e={type:"textord",mode:this.mode,text:"\\prime"},r=[e];for(this.consume();"'"===this.fetch().text;)r.push(e),this.consume();"^"===this.fetch().text&&r.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:r}}else{if(!zn[t.text])break;{const e=Dn.test(t.text),n=[];for(n.push(new Pi(zn[t.text])),this.consume();;){const t=this.fetch().text;if(!zn[t])break;if(Dn.test(t)!==e)break;n.unshift(new Pi(zn[t])),this.consume()}const s=this.subparse(n);e?r={type:"ordgroup",mode:"math",body:s}:i={type:"ordgroup",mode:"math",body:s}}}}return i||r?{type:"supsub",mode:this.mode,base:e,sup:i,sub:r}:e}parseFunction(t,e){const i=this.fetch(),r=i.text,s=vn[r];if(!s)return null;if(this.consume(),e&&"atom"!==e&&!s.allowedInArgument)throw new n("Got function '"+r+"' with no arguments"+(e?" as "+e:""),i);if("text"===this.mode&&!s.allowedInText)throw new n("Can't use function '"+r+"' in text mode",i);if("math"===this.mode&&!1===s.allowedInMath)throw new n("Can't use function '"+r+"' in math mode",i);const{args:a,optArgs:o}=this.parseArguments(r,s);return this.callFunction(r,a,o,i,t)}callFunction(t,e,i,r,s){const a={funcName:t,parser:this,token:r,breakOnTokenText:s},o=vn[t];if(o&&o.handler)return o.handler(a,e,i);throw new n("No function handler for "+t)}parseArguments(t,e){const i=e.numArgs+e.numOptionalArgs;if(0===i)return{args:[],optArgs:[]};const r=[],s=[];for(let a=0;a<i;a++){let i=e.argTypes&&e.argTypes[a];const o=a<e.numOptionalArgs;(e.primitive&&null==i||"sqrt"===e.type&&1===a&&null==s[0])&&(i="primitive");const l=this.parseGroupOfType("argument to '"+t+"'",i,o);if(o)s.push(l);else{if(null==l)throw new n("Null argument, please report this as a bug");r.push(l)}}return{args:r,optArgs:s}}parseGroupOfType(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":{const t=this.parseArgumentGroup(i,"text");return null!=t?{type:"styling",mode:t.mode,body:[t],style:"text"}:null}case"raw":{const t=this.parseStringGroup("raw",i);return null!=t?{type:"raw",mode:"text",string:t.text}:null}case"primitive":{if(i)throw new n("A primitive argument cannot be optional");const e=this.parseGroup(t);if(null==e)throw new n("Expected group as "+t,this.fetch());return e}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new n("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(t,e){const i=this.gullet.scanArgument(e);if(null==i)return null;let n,r="";for(;"EOF"!==(n=this.fetch()).text;)r+=n.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(t,e){const i=this.fetch();let r,s=i,a="";for(;"EOF"!==(r=this.fetch()).text&&t.test(a+r.text);)s=r,a+=s.text,this.consume();if(""===a)throw new n("Invalid "+e+": '"+i.text+"'",i);return i.range(s,a)}parseColorGroup(t){const e=this.parseStringGroup("color",t);if(null==e)return null;const i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new n("Invalid color: '"+e.text+"'",e);let r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(t){let e,i=!1;if(this.gullet.consumeSpaces(),e=t||"{"===this.gullet.future().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"),!e)return null;t||0!==e.text.length||(e.text="0pt",i=!0);const r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new n("Invalid size: '"+e.text+"'",e);const s={number:+(r[1]+r[2]),unit:r[3]};if(!B(s))throw new n("Invalid unit: '"+s.unit+"'",e);return{type:"size",mode:this.mode,value:s,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==e)return null;const i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,e){const i=this.gullet.scanArgument(t);if(null==i)return null;const n=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();const r=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const s={type:"ordgroup",mode:this.mode,loc:i.loc,body:r};return e&&this.switchMode(n),s}parseGroup(t,e){const i=this.fetch(),r=i.text;let s;if("{"===r||"\\begingroup"===r){this.consume();const t="{"===r?"}":"\\endgroup";this.gullet.beginGroup();const e=this.parseExpression(!1,t),n=this.fetch();this.expect(t),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Ni.range(i,n),body:e,semisimple:"\\begingroup"===r||void 0}}else if(s=this.parseFunction(e,t)||this.parseSymbol(),null==s&&"\\"===r[0]&&!Rn.hasOwnProperty(r)){if(this.settings.throwOnError)throw new n("Undefined control sequence: "+r,i);s=this.formatUnsupportedCmd(r),this.consume()}return s}formLigatures(t){let e=t.length-1;for(let i=0;i<e;++i){const n=t[i],r=n.text;"-"===r&&"-"===t[i+1].text&&(i+1<e&&"-"===t[i+2].text?(t.splice(i,3,{type:"textord",mode:"text",loc:Ni.range(n,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:Ni.range(n,t[i+1]),text:"--"}),e-=1)),"'"!==r&&"`"!==r||t[i+1].text!==r||(t.splice(i,2,{type:"textord",mode:"text",loc:Ni.range(n,t[i+1]),text:r+r}),e-=1)}}parseSymbol(){const t=this.fetch();let e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();let t=e.slice(5);const i="*"===t.charAt(0);if(i&&(t=t.slice(1)),t.length<2||t.charAt(0)!==t.slice(-1))throw new n("\\verb assertion failed --\n                    please report what input caused this bug");return t=t.slice(1,-1),{type:"verb",mode:"text",body:t,star:i}}Bn.hasOwnProperty(e[0])&&!st[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=Bn[e[0]]+e.slice(1));const i=An.exec(e);let r;if(i&&(e=e.substring(0,i.index),"i"===e?e="":"j"===e&&(e="")),st[this.mode][e]){this.settings.strict&&"math"===this.mode&&Mt.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);const i=st[this.mode][e].group,n=Ni.range(t);let s;if(it.hasOwnProperty(i)){const t=i;s={type:"atom",mode:this.mode,family:t,loc:n,text:e}}else s={type:i,mode:this.mode,loc:n,text:e};r=s}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(A(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),r={type:"textord",mode:"text",loc:Ni.range(t),text:e}}if(this.consume(),i)for(let e=0;e<i[0].length;e++){const s=i[0][e];if(!Fn[s])throw new n("Unknown accent ' "+s+"'",t);const a=Fn[s][this.mode]||Fn[s].text;if(!a)throw new n("Accent "+s+" unsupported in "+this.mode+" mode",t);r={type:"accent",mode:this.mode,loc:Ni.range(t),label:a,isStretchy:!1,isShifty:!0,base:r}}return r}}Hn.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var qn=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const i=new Hn(t,e);delete i.gullet.macros.current["\\df@tag"];let r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new n("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:i.subparse([new Pi("\\df@tag")])}]}return r};let jn=function(t,e,i){e.textContent="";const n=Xn(t,i).toNode();e.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&(jn=function(){throw new n("KaTeX doesn't work in quirks mode.")});const Gn=function(t,e,i){if(i.throwOnError||!(t instanceof n))throw t;const r=Ht.makeSpan(["katex-error"],[new Z(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+i.errorColor),r},Xn=function(t,e){const i=new d(e);try{return function(t,e,i){const n=Ce(i);let r;if("mathml"===i.output)return Se(t,e,n,i.displayMode,!0);if("html"===i.output){const e=ue(t,n);r=Ht.makeSpan(["katex"],[e])}else{const s=Se(t,e,n,i.displayMode,!1),a=ue(t,n);r=Ht.makeSpan(["katex"],[s,a])}return _e(r,i)}(qn(t,i),t,i)}catch(e){return Gn(e,t,i)}};var Vn={version:"0.16.21",render:jn,renderToString:function(t,e){return Xn(t,e).toMarkup()},ParseError:n,SETTINGS_SCHEMA:h,__parse:function(t,e){const i=new d(e);return qn(t,i)},__renderToDomTree:Xn,__renderToHTMLTree:function(t,e){const i=new d(e);try{return function(t,e,i){const n=ue(t,Ce(i)),r=Ht.makeSpan(["katex"],[n]);return _e(r,i)}(qn(t,i),0,i)}catch(e){return Gn(e,t,i)}},__setFontMetrics:function(t,e){M[t]=e},__defineSymbol:at,__defineFunction:$t,__defineMacro:Ei,__domTree:{Span:Y,Anchor:U,SymbolNode:Z,SvgNode:J,PathNode:Q,LineNode:tt}};return e=e.default}()},t.exports=e()},39696:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;const n=i(88871),r=i(74060),s=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return(new Date).getTime()};class a{constructor(t,e){this.id=a.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:s(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let n=0;n<i;n++)if(e[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const t=a.animations,e=t.length;for(let i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=s(),a._addAnimation(this),this}stop(){return a._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,n=i.length;for(let t=0;t<n;t++)if(i[t].id===e){this.animations.splice(t,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const n=e[i],r=n.layers,a=n.func;n._updateFrameObject(s());const o=r.length;let l;if(l=!a||!1!==a.call(n,n.frame),l)for(let e=0;e<o;e++){const i=r[e];void 0!==i._id&&(t[i._id]=i)}}for(const e in t)t.hasOwnProperty(e)&&t[e].batchDraw()}static _animationLoop(){const t=a;t.animations.length?(t._runFrames(),r.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,r.Util.requestAnimFrame(this._animationLoop))}}e.Animation=a,a.animations=[],a.animIdCounter=0,a.animRunning=!1},95570:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];e.getCubicArcLength=(t,n,r)=>{let s,a;const o=r/2;s=0;for(let r=0;r<20;r++)a=o*e.tValues[20][r]+o,s+=e.cValues[20][r]*i(t,n,a);return o*s};function i(t,e,i){const r=n(1,i,t),s=n(1,i,e),a=r*r+s*s;return Math.sqrt(a)}e.getQuadraticArcLength=(t,e,i)=>{void 0===i&&(i=1);const n=t[0]-2*t[1]+t[2],r=e[0]-2*e[1]+e[2],s=2*t[1]-2*t[0],a=2*e[1]-2*e[0],o=4*(n*n+r*r),l=4*(n*s+r*a),h=s*s+a*a;if(0===o)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));const c=l/(2*o),d=i+c,u=h/o-c*c,p=d*d+u>0?Math.sqrt(d*d+u):0,f=c*c+u>0?Math.sqrt(c*c+u):0,g=c+Math.sqrt(c*c+u)!==0?u*Math.log(Math.abs((d+p)/(c+f))):0;return Math.sqrt(o)/2*(d*p-c*f+g)};const n=(t,i,r)=>{const s=r.length-1;let a,o;if(0===s)return 0;if(0===t){o=0;for(let t=0;t<=s;t++)o+=e.binomialCoefficients[s][t]*Math.pow(1-i,s-t)*Math.pow(i,t)*r[t];return o}a=new Array(s);for(let t=0;t<s;t++)a[t]=s*(r[t+1]-r[t]);return n(t-1,i,a)};e.t2length=(t,e,i)=>{let n=1,r=t/e,s=(t-i(r))/e,a=0;for(;n>.001;){const o=i(r+s),l=Math.abs(t-o)/e;if(l<n)n=l,r+=s;else{const a=i(r-s),o=Math.abs(t-a)/e;o<n?(n=o,r-=s):s/=2}if(a++,a>500)break}return r}},8604:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;const n=i(74060),r=i(29869),s=i(88871);let a;class o{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const e=(t||{}).pixelRatio||s.Konva.pixelRatio||function(){if(a)return a;const t=n.Util.createCanvasElement(),e=t.getContext("2d");return a=(s.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),n.Util.releaseCanvas(t),a}();this.pixelRatio=e,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return n.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}e.Canvas=o;e.SceneCanvas=class extends o{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new r.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}};e.HitCanvas=class extends o{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new r.HitContext(this),this.setSize(t.width,t.height)}}},64473:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;const n=i(64892),r=i(16536),s=i(35483);class a extends r.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[],i=[];return e.forEach((function(e){t(e)&&i.push(e)})),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(let e=0;e<t.length;e++)this.add(t[e]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants((n=>{const r=n._isMatch(t);return r&&i.push(n),!(!r||!e)})),i}_descendants(t){let e=!1;const i=this.getChildren();for(const n of i){if(e=t(n),e)return!0;if(n.hasChildren()&&(e=n._descendants(t),e))return!0}return!1}toObject(){const t=r.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((e=>{t.children.push(e.toObject())})),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=r.Node.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach((i=>{i.isVisible()&&i.intersects(t)&&e.push(i)})),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}drawScene(t,e,i){const n=this.getLayer(),r=t||n&&n.getCanvas(),s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=r&&r.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();const t=this.getAbsoluteTransform(e).getMatrix();s.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",r,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),n=t||i&&i.hitCanvas,r=n&&n.getContext(),s=this._getCanvasCache();if(s&&s.hit){r.save();const t=this.getAbsoluteTransform(e).getMatrix();r.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",n,e);return this}_drawChildren(t,e,i,n){var r;const s=e&&e.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h="number"==typeof a&&"number"==typeof o||l,c=i===this;if(h){s.save();const t=this.getAbsoluteTransform(i);let e,n=t.getMatrix();if(s.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s.beginPath(),l)e=l.call(this,s,this);else{const t=this.clipX(),e=this.clipY();s.rect(t||0,e||0,a,o)}s.clip.apply(s,e),n=t.copy().invert().getMatrix(),s.transform(n[0],n[1],n[2],n[3],n[4],n[5])}const d=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;d&&(s.save(),s._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach((function(r){r[t](e,i,n)})),d&&s.restore(),h&&s.restore()}getClientRect(t={}){var e;const i=t.skipTransform,n=t.relativeTo;let r,s,a,o,l={x:1/0,y:1/0,width:0,height:0};const h=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(!e.visible())return;const i=e.getClientRect({relativeTo:h,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===i.width&&0===i.height||(void 0===r?(r=i.x,s=i.y,a=i.x+i.width,o=i.y+i.height):(r=Math.min(r,i.x),s=Math.min(s,i.y),a=Math.max(a,i.x+i.width),o=Math.max(o,i.y+i.height)))}));const c=this.find("Shape");let d=!1;for(let t=0;t<c.length;t++){if(c[t]._isVisible(this)){d=!0;break}}return l=d&&void 0!==r?{x:r,y:s,width:a-r,height:o-s}:{x:0,y:0,width:0,height:0},i?l:this._transformedRect(l,n)}}e.Container=a,n.Factory.addComponentsGetterSetter(a,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(a,"clipX",void 0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(a,"clipY",void 0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(a,"clipWidth",void 0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(a,"clipHeight",void 0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(a,"clipFunc")},29869:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;const n=i(74060),r=i(88871);const s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class a{constructor(t){this.canvas=t,r.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i,r,s,a,o=this.traceArr,l=o.length,h="";for(i=0;i<l;i++)r=o[i],s=r.method,s?(a=r.args,h+=s,t?h+="()":n.Util._isArray(a[0])?h+="(["+a.join(",")+"])":(e&&(a=a.map((t=>"number"==typeof t?Math.floor(t):t))),h+="("+a.join(",")+")")):(h+=r.property,t||(h+="="+r.val)),h+=";";return h}clearTrace(){this.traceArr=[]}_trace(t){let e,i=this.traceArr;i.push(t),e=i.length,e>=100&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,n,r,s){this._context.arc(t,e,i,n,r,s)}arcTo(t,e,i,n,r){this._context.arcTo(t,e,i,n,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,n,r,s){this._context.bezierCurveTo(t,e,i,n,r,s)}clearRect(t,e,i,n){this._context.clearRect(t,e,i,n)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,i,n){return this._context.createLinearGradient(t,e,i,n)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,n,r,s){return this._context.createRadialGradient(t,e,i,n,r,s)}drawImage(t,e,i,n,r,s,a,o,l){const h=arguments,c=this._context;3===h.length?c.drawImage(t,e,i):5===h.length?c.drawImage(t,e,i,n,r):9===h.length&&c.drawImage(t,e,i,n,r,s,a,o,l)}ellipse(t,e,i,n,r,s,a,o){this._context.ellipse(t,e,i,n,r,s,a,o)}isPointInPath(t,e,i,n){return i?this._context.isPointInPath(i,t,e,n):this._context.isPointInPath(t,e,n)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,n){this._context.fillRect(t,e,i,n)}strokeRect(t,e,i,n){this._context.strokeRect(t,e,i,n)}fillText(t,e,i,n){n?this._context.fillText(t,e,i,n):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,n){return this._context.getImageData(t,e,i,n)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,n){this._context.rect(t,e,i,n)}roundRect(t,e,i,n,r){this._context.roundRect(t,e,i,n,r)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,n){this._context.quadraticCurveTo(t,e,i,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,n,r,s){this._context.setTransform(t,e,i,n,r,s)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,n){this._context.strokeText(t,e,i,n)}transform(t,e,i,n,r,s){this._context.transform(t,e,i,n,r,s)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t,e,i=this,r=s.length,a=this.setAttr;const o=function(t){let r,s=i[t];i[t]=function(){return e=function(t){const e=[],i=t.length,r=n.Util;for(let n=0;n<i;n++){let i=t[n];r._isNumber(i)?i=Math.round(1e3*i)/1e3:r._isString(i)||(i+=""),e.push(i)}return e}(Array.prototype.slice.call(arguments,0)),r=s.apply(i,arguments),i._trace({method:t,args:e}),r}};for(t=0;t<r;t++)o(s[t]);i.setAttr=function(){a.apply(i,arguments);const t=arguments[0];let e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),i._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}e.Context=a,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(a.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}));e.SceneContext=class extends a{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&"color"===i)return void this._fillColor(t);const n=t.getFillPatternImage();if(n&&"pattern"===i)return void this._fillPattern(t);const r=t.getFillLinearGradientColorStops();if(r&&"linear-gradient"===i)return void this._fillLinearGradient(t);const s=t.getFillRadialGradientColorStops();s&&"radial-gradient"===i?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):r?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(let t=0;t<n.length;t+=2)r.addColorStop(n[t],n[t+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,n;const r=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",s=null!==(i=t.getShadowBlur())&&void 0!==i?i:5,a=null!==(n=t.getShadowOffset())&&void 0!==n?n:{x:0,y:0},o=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),h=o.x*l,c=o.y*l;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",s*Math.min(Math.abs(h),Math.abs(c))),this.setAttr("shadowOffsetX",a.x*h),this.setAttr("shadowOffsetY",a.y*c)}};e.HitContext=class extends a{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),n="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}},91268:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const n=i(88871),r=i(74060);e.DD={get isDragging(){let t=!1;return e.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){let t;return e.DD._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const i=[];e.DD._dragElements.forEach(((e,n)=>{const{node:s}=e,a=s.getStage();a.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=r.Util._getFirstPointerId(t));const o=a._changedPointerPositions.find((t=>t.id===e.pointerId));if(o){if("dragging"!==e.dragStatus){const i=s.dragDistance();if(Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y))<i)return;if(s.startDrag({evt:t}),!s.isDragging())return}s._setDragPosition(t,e),i.push(s)}})),i.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(t){const i=[];e.DD._dragElements.forEach((r=>{const{node:s}=r,a=s.getStage();t&&a.setPointersPositions(t);if(!a._changedPointerPositions.find((t=>t.id===r.pointerId)))return;"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(e.DD.justDragged=!0,n.Konva._mouseListenClick=!1,n.Konva._touchListenClick=!1,n.Konva._pointerListenClick=!1,r.dragStatus="stopped");const o=r.node.getLayer()||r.node instanceof n.Konva.Stage&&r.node;o&&-1===i.indexOf(o)&&i.push(o)})),i.forEach((t=>{t.draw()}))},_endDragAfter(t){e.DD._dragElements.forEach(((i,n)=>{"stopped"===i.dragStatus&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:t},!0),"dragging"!==i.dragStatus&&e.DD._dragElements.delete(n)}))}},n.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))},64892:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const n=i(74060),r=i(35483),s="get",a="set";e.Factory={addGetterSetter(t,i,n,r,s){e.Factory.addGetter(t,i,n),e.Factory.addSetter(t,i,r,s),e.Factory.addOverloadedGetterSetter(t,i)},addGetter(t,e,i){var r=s+n.Util._capitalize(e);t.prototype[r]=t.prototype[r]||function(){const t=this.attrs[e];return void 0===t?i:t}},addSetter(t,i,r,s){var o=a+n.Util._capitalize(i);t.prototype[o]||e.Factory.overWriteSetter(t,i,r,s)},overWriteSetter(t,e,i,r){var s=a+n.Util._capitalize(e);t.prototype[s]=function(t){return i&&null!=t&&(t=i.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter(t,i,o,l,h){const c=o.length,d=n.Util._capitalize,u=s+d(i),p=a+d(i);t.prototype[u]=function(){const t={};for(let e=0;e<c;e++){const n=o[e];t[n]=this.getAttr(i+d(n))}return t};const f=(0,r.getComponentValidator)(o);t.prototype[p]=function(t){const e=this.attrs[i];l&&(t=l.call(this,t,i)),f&&f.call(this,t,i);for(const e in t)t.hasOwnProperty(e)&&this._setAttr(i+d(e),t[e]);return t||o.forEach((t=>{this._setAttr(i+d(t),void 0)})),this._fireChangeEvent(i,e,t),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(t,i)},addOverloadedGetterSetter(t,e){var i=n.Util._capitalize(e),r=a+i,o=s+i;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(t,i,r,a){n.Util.error("Adding deprecated "+i);const o=s+n.Util._capitalize(i),l=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){n.Util.error(l);const t=this.attrs[i];return void 0===t?r:t},e.Factory.addSetter(t,i,a,(function(){n.Util.error(l)})),e.Factory.addOverloadedGetterSetter(t,i)},backCompat(t,e){n.Util.each(e,(function(e,i){const r=t.prototype[i],o=s+n.Util._capitalize(e),l=a+n.Util._capitalize(e);function h(){r.apply(this,arguments),n.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[e]=h,t.prototype[o]=h,t.prototype[l]=h}))},afterSetFilter(){this._filterUpToDate=!1}}},77457:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;const n=i(74060),r=i(66267),s=i(88871);class a extends r.Layer{constructor(t){super(t),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}e.FastLayer=a,a.prototype.nodeType="FastLayer",(0,s._registerNode)(a)},88871:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const n=Math.PI/180;e.glob=void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.20",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:t=>e.Konva.angleDeg?t*n:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isTransforming(){var t;return null===(t=e.Konva.Transformer)||void 0===t?void 0:t.isTransforming()},isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)},47949:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;const n=i(74060),r=i(64473),s=i(88871);class a extends r.Container{_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&n.Util.throw("You may only add groups and shapes to groups.")}}e.Group=a,a.prototype.nodeType="Group",(0,s._registerNode)(a)},66267:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const n=i(74060),r=i(64473),s=i(16536),a=i(64892),o=i(8604),l=i(35483),h=i(4723),c=i(88871),d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],u=d.length;class p extends r.Container{constructor(t){super(t),this.canvas=new o.SceneCanvas,this.hitCanvas=new o.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){s.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!s.Node.prototype.moveUp.call(this))return!1;const t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(s.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(s.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return s.Node.prototype.remove.call(this),t&&t.parentNode&&n.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let n=0;n<u;n++){const r=d[n],s=this._getIntersection({x:t.x+r.x*e,y:t.y+r.y*e}),a=s.shape;if(a)return a;if(i=!!s.antialiased,!s.antialiased)break}if(!i)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=i[3];if(255===r){const t=n.Util._rgbToHex(i[0],i[1],i[2]),e=h.shapes["#"+t];return e?{shape:e}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(t,e){const i=this.getLayer(),n=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),r.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this}drawHit(t,e){const i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),r.Container.prototype.drawHit.call(this,n,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}e.Layer=p,p.prototype.nodeType="Layer",(0,c._registerNode)(p),a.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),a.Factory.addGetterSetter(p,"clearBeforeDraw",!0),a.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,l.getBooleanValidator)())},16536:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;const n=i(74060),r=i(64892),s=i(8604),a=i(88871),o=i(91268),l=i(35483),h="absoluteOpacity",c="allEventListeners",d="absoluteTransform",u="absoluteScale",p="canvas",f="listening",g="mouseenter",m="mouseleave",b="Shape",x=" ",v="stage",y="transform",w="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let A=1;class S{constructor(t){this._id=A++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==y&&t!==d||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){let i=this._cache.get(t);return(void 0===i||(t===y||t===d)&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const i=e.map((t=>t+"Change.konva")).join(x);this.on(i,(()=>{this._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===d&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:t,filter:e,hit:i}=this._cache.get(p);n.Util.releaseCanvas(t,e,i),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(e.width||i.width),a=Math.ceil(e.height||i.height),o=e.pixelRatio,l=void 0===e.x?Math.floor(i.x):e.x,c=void 0===e.y?Math.floor(i.y):e.y,d=e.offset||0,f=e.drawBorder||!1,g=e.hitCanvasPixelRatio||1;if(!r||!a)return void n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");r+=2*d+(Math.abs(Math.round(i.x)-l)>.5?1:0),a+=2*d+(Math.abs(Math.round(i.y)-c)>.5?1:0),l-=d,c-=d;const m=new s.SceneCanvas({pixelRatio:o,width:r,height:a}),b=new s.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),x=new s.HitCanvas({pixelRatio:g,width:r,height:a}),v=m.getContext(),y=x.getContext();return x.isCache=!0,m.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(m.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),v.save(),y.save(),v.translate(-l,-c),y.translate(-l,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(u),this.drawScene(m,this),this.drawHit(x,this),this._isUnderCache=!1,v.restore(),y.restore(),f&&(v.save(),v.beginPath(),v.rect(0,0,r,a),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(p,{scene:m,filter:b,hit:x,x:l,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let n=1/0,r=1/0,s=-1/0,a=-1/0;const o=this.getAbsoluteTransform(e);return i.forEach((function(t){const e=o.point(t);void 0===n&&(n=s=e.x,r=a=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),s=Math.max(s,e.x),a=Math.max(a,e.y)})),{x:n,y:r,width:s-n,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),n=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/n,i.height/n),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t,e,i,r,s=this.filters(),a=this._getCanvasCache(),o=a.scene,l=a.filter,h=l.getContext();if(s){if(!this._filterUpToDate){const a=o.pixelRatio;l.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=s.length,h.clear(),h.drawImage(o._canvas,0,0,o.getWidth()/a,o.getHeight()/a),e=h.getImageData(0,0,l.getWidth(),l.getHeight()),i=0;i<t;i++)r=s[i],"function"==typeof r?(r.call(this,e),h.putImageData(e,0,0)):n.Util.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(t){n.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return o}on(t,e){if(this._cache&&this._cache.delete(c),3===arguments.length)return this._delegate.apply(this,arguments);let i,n,r,s,a,o=t.split(x),l=o.length;for(i=0;i<l;i++)n=o[i],r=n.split("."),s=r[0],a=r[1]||"",this.eventListeners[s]||(this.eventListeners[s]=[]),this.eventListeners[s].push({name:a,handler:e});return this}off(t,e){let i,n,r,s,a,o,l=(t||"").split(x),h=l.length;if(this._cache&&this._cache.delete(c),!t)for(n in this.eventListeners)this._off(n);for(i=0;i<h;i++)if(r=l[i],s=r.split("."),a=s[0],o=s[1],a)this.eventListeners[a]&&this._off(a,o,e);else for(n in this.eventListeners)this._off(n,o,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const r=this;this.on(t,(function(t){const s=t.target.findAncestors(e,!0,r);for(let e=0;e<s.length;e++)(t=n.Util.cloneObject(t)).currentTarget=s[e],i.call(s[e],t)}))}remove(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+n.Util._capitalize(t);return n.Util._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges((()=>{let e,i;if(!t)return this;for(e in t)"children"!==e&&(i="set"+n.Util._capitalize(e),n.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))})),this}isListening(){return this._getCache(f,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(w,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let n=!1;o.DD._dragElements.forEach((t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===i)&&(n=!0)}));const r=!e&&!a.Konva.hitOnDragEnabled&&(n||a.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t,e,i,n,r=this.getDepth(),s=this,a=0;const o=this.getStage();return"Stage"!==s.nodeType&&o&&function o(l){for(t=[],e=l.length,i=0;i<e;i++)n=l[i],a++,n.nodeType!==b&&(t=t.concat(n.getChildren().slice())),n._id===s._id&&(i=e);t.length>0&&t[0].getDepth()<=r&&o(t)}(o.getChildren()),a}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(y),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges((()=>{this.x(t.x),this.y(t.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const r=this.getAbsoluteTransform(t).getMatrix(),s=new n.Transform,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...n}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(y);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:t.x,y:t.y}),this._clearCache(y),this._clearSelfAndDescendantCache(d),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,n=this.x(),r=this.y();return void 0!==e&&(n+=e),void 0!==i&&(r+=i),this.setPosition({x:n,y:r}),this}_eachAncestorReverse(t,e){let i,n,r=[],s=this.getParent();if(!e||e._id!==this._id){for(r.unshift(this);s&&(!e||s._id!==e._id);)r.unshift(s),s=s.parent;for(i=r.length,n=0;n<i;n++)t(r[n])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&n.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t,e,i,r,s,a=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(t in a)e=a[t],s=n.Util.isObject(e)&&!n.Util._isPlainObject(e)&&!n.Util._isArray(e),s||(i="function"==typeof this[t]&&this[t],delete a[t],r=i?i.call(this):null,a[t]=e,r!==e&&(o.attrs[t]=e));return n.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const n=[];e&&this._isMatch(t)&&n.push(this);let r=this.parent;for(;r;){if(r===i)return n;r._isMatch(t)&&n.push(r),r=r.parent}return n}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);let e,i,r=t.replace(/ /g,"").split(","),s=r.length;for(e=0;e<s;e++)if(i=r[e],n.Util.isValidSelector(i)||(n.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(v,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(d,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new n.Transform,this._eachAncestorReverse((function(t){const i=t.transformsEnabled();"all"===i?e.multiply(t.getTransform()):"position"===i&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;{e=this._cache.get(d)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const t=this.transformsEnabled();if("all"===t)e.multiply(this.getTransform());else if("position"===t){const t=this.attrs.x||0,i=this.attrs.y||0,n=this.attrs.offsetX||0,r=this.attrs.offsetY||0;e.translate(t-n,i-r)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(y,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(y)||new n.Transform;i.reset();const r=this.x(),s=this.y(),o=a.Konva.getAngle(this.rotation()),l=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,h=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,c=this.attrs.skewX||0,d=this.attrs.skewY||0,u=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return 0===r&&0===s||i.translate(r,s),0!==o&&i.rotate(o),0===c&&0===d||i.skew(c,d),1===l&&1===h||i.scale(l,h),0===u&&0===p||i.translate(-1*u,-1*p),i.dirty=!1,i}clone(t){let e,i,r,s,a,o=n.Util.cloneObject(this.attrs);for(e in t)o[e]=t[e];const l=new this.constructor(o);for(e in this.eventListeners)for(i=this.eventListeners[e],r=i.length,s=0;s<r;s++)a=i[s],a.name.indexOf("konva")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(a));return l}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),n=void 0!==t.x?t.x:Math.floor(e.x),r=void 0!==t.y?t.y:Math.floor(e.y),a=t.pixelRatio||1,o=new s.SceneCanvas({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:a}),l=o.getContext(),h=new s.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(n),height:o.height/o.pixelRatio+Math.abs(r),pixelRatio:o.pixelRatio});return!1===t.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||r)&&l.translate(-1*n,-1*r),this.drawScene(o,void 0,h),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){const e=(t=t||{}).mimeType||null,i=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(n),n}toImage(t){return new Promise(((e,i)=>{try{const i=null==t?void 0:t.callback;i&&delete t.callback,n.Util._urlToImage(this.toDataURL(t),(function(t){e(t),null==i||i(t)}))}catch(t){i(t)}}))}toBlob(t){return new Promise(((e,i)=>{try{const i=null==t?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob((t=>{e(t),null==i||i(t)}),null==t?void 0:t.mimeType,null==t?void 0:t.quality)}catch(t){i(t)}}))}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance}_off(t,e,i){let n,r,s,a=this.eventListeners[t];for(n=0;n<a.length;n++)if(r=a[n].name,s=a[n].handler,!("konva"===r&&"konva"!==e||e&&r!==e||i&&i!==s)){if(a.splice(n,1),0===a.length){delete this.eventListeners[t];break}n--}}_fireChangeEvent(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();if(!e)return!1;return-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this["set"+n.Util._capitalize(t)];return n.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(a.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];(i!==e||n.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let n;void 0!==i&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))}_fireAndBubble(t,e,i){e&&this.nodeType===b&&(e.target=this);if(!((t===g||t===m)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(t,e);const n=(t===g||t===m)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i,n;const r=null!==(e=this._cache.get(c))&&void 0!==e?e:{};let s=null==r?void 0:r[t];if(void 0===s){s=[];let e=Object.getPrototypeOf(this);for(;e;){const r=null!==(n=null===(i=e.eventListeners)||void 0===i?void 0:i[t])&&void 0!==n?n:[];s.push(...r),e=Object.getPrototypeOf(e)}r[t]=s,this._cache.set(c,r)}return s}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(var n=0;n<i.length;n++)i[n].handler.call(this,e);const r=this.eventListeners[t];if(r)for(n=0;n<r.length;n++)r[n].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),n=this.getAbsolutePosition();if(!i)return;const r=i._getPointerById(e)||i._changedPointerPositions[0]||n;o.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-n.x,y:r.y-n.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){o.DD._dragElements.has(this._id)||this._createDragElement(t);o.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let r={x:i.x-e.offset.x,y:i.y-e.offset.y};const s=this.dragBoundFunc();if(void 0!==s){const e=s.call(this,r,t);e?r=e:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(t){const e=o.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),o.DD._endDragBefore(t),o.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=o.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){if(!(!(void 0!==t.evt.button)||a.Konva.dragButtons.indexOf(t.evt.button)>=0))return;if(this.isDragging())return;let e=!1;o.DD._dragElements.forEach((t=>{this.isAncestorOf(t.node)&&(e=!0)})),e||this._createDragElement(t)}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();if(!this.getStage())return;const t=o.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,i=t&&"ready"===t.dragStatus;e?this.stopDrag():i&&o.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return n.Util.haveIntersection(i,this.getClientRect())}static create(t,e){return n.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i,r,s,o=S.prototype.getClassName.call(t),l=t.children;e&&(t.attrs.container=e),a.Konva[o]||(n.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");if(i=new(0,a.Konva[o])(t.attrs),l)for(r=l.length,s=0;s<r;s++)i.add(S._createNode(l[s]));return i}}e.Node=S,S.prototype.nodeType="Node",S.prototype._attrsAffectingSize=[],S.prototype.eventListeners={},S.prototype.on.call(S.prototype,k,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(y),this._clearSelfAndDescendantCache(d))})),S.prototype.on.call(S.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(w)})),S.prototype.on.call(S.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(f)})),S.prototype.on.call(S.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(h)}));const C=r.Factory.addGetterSetter;C(S,"zIndex"),C(S,"absolutePosition"),C(S,"position"),C(S,"x",0,(0,l.getNumberValidator)()),C(S,"y",0,(0,l.getNumberValidator)()),C(S,"globalCompositeOperation","source-over",(0,l.getStringValidator)()),C(S,"opacity",1,(0,l.getNumberValidator)()),C(S,"name","",(0,l.getStringValidator)()),C(S,"id","",(0,l.getStringValidator)()),C(S,"rotation",0,(0,l.getNumberValidator)()),r.Factory.addComponentsGetterSetter(S,"scale",["x","y"]),C(S,"scaleX",1,(0,l.getNumberValidator)()),C(S,"scaleY",1,(0,l.getNumberValidator)()),r.Factory.addComponentsGetterSetter(S,"skew",["x","y"]),C(S,"skewX",0,(0,l.getNumberValidator)()),C(S,"skewY",0,(0,l.getNumberValidator)()),r.Factory.addComponentsGetterSetter(S,"offset",["x","y"]),C(S,"offsetX",0,(0,l.getNumberValidator)()),C(S,"offsetY",0,(0,l.getNumberValidator)()),C(S,"dragDistance",void 0,(0,l.getNumberValidator)()),C(S,"width",0,(0,l.getNumberValidator)()),C(S,"height",0,(0,l.getNumberValidator)()),C(S,"listening",!0,(0,l.getBooleanValidator)()),C(S,"preventDefault",!0,(0,l.getBooleanValidator)()),C(S,"filters",void 0,(function(t){return this._filterUpToDate=!1,t})),C(S,"visible",!0,(0,l.getBooleanValidator)()),C(S,"transformsEnabled","all",(0,l.getStringValidator)()),C(S,"size"),C(S,"dragBoundFunc"),C(S,"draggable",!1,(0,l.getBooleanValidator)()),r.Factory.backCompat(S,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},48722:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCapturedShape=function(t){return r.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return r.get(t)===e},e.setPointerCapture=function(t,e){o(t);if(!e.getStage())return;r.set(t,e),s&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture")))},e.releaseCapture=o;const n=i(88871),r=new Map,s=void 0!==n.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function o(t,e){const i=r.get(t);if(!i)return;const n=i.getStage();n&&n.content,r.delete(t),s&&i._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}},4723:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const n=i(88871),r=i(74060),s=i(64892),a=i(16536),o=i(35483),l=i(88871),h=i(48722),c="hasShadow",d="shadowRGBA",u="patternImage",p="linearGradient",f="radialGradient";let g;function m(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};class b extends a.Node{constructor(t){let i;for(super(t);i=r.Util.getRandomColor(),!i||i in e.shapes;);this.colorKey=i,e.shapes[i]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(u,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=m().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const e=new r.Transform;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(n.Konva.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=e.getMatrix(),s="undefined"==typeof DOMMatrix?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);t.setTransform(s)}return t}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=m(),i=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),r=e.createLinearGradient(i.x,i.y,n.x,n.y);for(let e=0;e<t.length;e+=2)r.addColorStop(t[e],t[e+1]);return r}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=m(),i=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),r=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius());for(let e=0;e<t.length;e+=2)r.addColorStop(t[e],t[e+1]);return r}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=r.Util.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;i.getContext().clear(),this.drawHit(i,void 0,!0);return i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;const i=t||this.hasFill(),n=this.hasStroke(),r=1!==this.getAbsoluteOpacity();if(i&&n&&r)return!0;const s=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(i&&n&&s&&a)}setStrokeHitEnabled(t){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const n=t.skipTransform,r=t.relativeTo||e&&this.getStage()||void 0,s=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=s.width+a,l=s.height+a,h=!t.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,d=h?this.shadowOffsetY():0,u=o+Math.abs(c),p=l+Math.abs(d),f=h&&this.shadowBlur()||0,g={width:u+2*f,height:p+2*f,x:-(a/2+f)+Math.min(c,0)+s.x,y:-(a/2+f)+Math.min(d,0)+s.y};return n?g:this._transformedRect(g,r)}drawScene(t,e,i){const n=this.getLayer();let r,s,a=t||n.getCanvas(),o=a.getContext(),l=this._getCanvasCache(),h=this.getSceneFunc(),c=this.hasShadow();const d=a.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(l){o.save();const t=this.getAbsoluteTransform(e).getMatrix();return o.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!h)return this;if(o.save(),this._useBufferCanvas()&&!d){r=this.getStage();const t=i||r.bufferCanvas;s=t.getContext(),s.clear(),s.save(),s._applyLineJoin(this);var p=this.getAbsoluteTransform(e).getMatrix();s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),h.call(this,s,this),s.restore();const n=t.pixelRatio;c&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(t._canvas,0,0,t.width/n,t.height/n)}else{if(o._applyLineJoin(this),!u){p=this.getAbsoluteTransform(e).getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}c&&o._applyShadow(this),h.call(this,o,this)}return o.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const n=this.getLayer(),s=t||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();const t=this.getAbsoluteTransform(e).getMatrix();return a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;a.save(),a._applyLineJoin(this);if(!(this===e)){const t=this.getAbsoluteTransform(e).getMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),n=e.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight();s.clear(),s.drawImage(i._canvas,0,0,a,o);try{const e=s.getImageData(0,0,a,o),i=e.data,n=i.length,l=r.Util._hexToRgb(this.colorKey);for(let e=0;e<n;e+=4){i[e+3]>t?(i[e]=l.r,i[e+1]=l.g,i[e+2]=l.b,i[e+3]=255):i[e+3]=0}s.putImageData(e,0,0)}catch(t){r.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}hasPointerCapture(t){return h.hasPointerCapture(t,this)}setPointerCapture(t){h.setPointerCapture(t,this)}releaseCapture(t){h.releaseCapture(t,this)}}e.Shape=b,b.prototype._fillFunc=function(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()},b.prototype._strokeFunc=function(t){t.stroke()},b.prototype._fillFuncHit=function(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()},b.prototype._strokeFuncHit=function(t){t.stroke()},b.prototype._centroid=!1,b.prototype.nodeType="Shape",(0,l._registerNode)(b),b.prototype.eventListeners={},b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(c)})),b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(d)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(u)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(p)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(f)})),s.Factory.addGetterSetter(b,"stroke",void 0,(0,o.getStringOrGradientValidator)()),s.Factory.addGetterSetter(b,"strokeWidth",2,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(b,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(b,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(b,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(b,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),s.Factory.addGetterSetter(b,"lineJoin"),s.Factory.addGetterSetter(b,"lineCap"),s.Factory.addGetterSetter(b,"sceneFunc"),s.Factory.addGetterSetter(b,"hitFunc"),s.Factory.addGetterSetter(b,"dash"),s.Factory.addGetterSetter(b,"dashOffset",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"shadowColor",void 0,(0,o.getStringValidator)()),s.Factory.addGetterSetter(b,"shadowBlur",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"shadowOpacity",1,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(b,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(b,"shadowOffsetX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"shadowOffsetY",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillPatternImage"),s.Factory.addGetterSetter(b,"fill",void 0,(0,o.getStringOrGradientValidator)()),s.Factory.addGetterSetter(b,"fillPatternX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillPatternY",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(b,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(b,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(b,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(b,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(b,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(b,"fillEnabled",!0),s.Factory.addGetterSetter(b,"strokeEnabled",!0),s.Factory.addGetterSetter(b,"shadowEnabled",!0),s.Factory.addGetterSetter(b,"dashEnabled",!0),s.Factory.addGetterSetter(b,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(b,"fillPriority","color"),s.Factory.addComponentsGetterSetter(b,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(b,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(b,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(b,"fillPatternScaleX",1,(0,o.getNumberValidator)()),s.Factory.addGetterSetter(b,"fillPatternScaleY",1,(0,o.getNumberValidator)()),s.Factory.addComponentsGetterSetter(b,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(b,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(b,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(b,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(b,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(b,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(b,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(b,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(b,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(b,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(b,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(b,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(b,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(b,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(b,"fillPatternRotation",0),s.Factory.addGetterSetter(b,"fillRule",void 0,(0,o.getStringValidator)()),s.Factory.backCompat(b,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},67324:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const n=i(74060),r=i(64892),s=i(64473),a=i(88871),o=i(8604),l=i(91268),h=i(88871),c=i(48722),d="mouseleave",u="mouseover",p="mouseenter",f="mousemove",g="mousedown",m="mouseup",b="pointermove",x="pointerdown",v="pointerup",y="pointercancel",w="pointerout",k="pointerleave",A="pointerover",S="pointerenter",C="contextmenu",_="touchstart",M="touchend",T="touchmove",E="touchcancel",N="wheel",P=[[p,"_pointerenter"],[g,"_pointerdown"],[f,"_pointermove"],[m,"_pointerup"],[d,"_pointerleave"],[_,"_pointerdown"],[T,"_pointermove"],[M,"_pointerup"],[E,"_pointercancel"],[u,"_pointerover"],[N,"_wheel"],[C,"_contextmenu"],[x,"_pointerdown"],[b,"_pointermove"],[v,"_pointerup"],[y,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],L={mouse:{[w]:"mouseout",[k]:d,[A]:u,[S]:p,[b]:f,[x]:g,[v]:m,[y]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[k]:"touchleave",[A]:"touchover",[S]:"touchenter",[b]:T,[x]:_,[v]:M,[y]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[k]:k,[A]:A,[S]:S,[b]:b,[x]:x,[v]:v,[y]:y,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",R=t=>{const e=I(t);return"pointer"===e?a.Konva.pointerEventsEnabled&&L.pointer:"touch"===e?L.touch:"mouse"===e?L.mouse:void 0};function O(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];class D extends s.Container{constructor(t){super(O(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{O(this.attrs)})),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),i="FastLayer"===t.getType();e||i||n.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){const e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var e;e="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(e)}if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),s.Container.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&n.Util._isInDocument(t)&&this.container().removeChild(t);const i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),n.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(n.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find((e=>e.id===t))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new o.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,n=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),n.forEach((function(e){if(!e.isVisible())return;const n=e._toKonvaCanvas(t);i.drawImage(n._canvas,t.x,t.y,n.getWidth()/n.getPixelRatio(),n.getHeight()/n.getPixelRatio())})),e}getIntersection(t){if(!t)return null;const e=this.children;for(let i=e.length-1;i>=0;i--){const n=e[i].getIntersection(t);if(n)return n}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((i=>{i.setSize({width:t,height:e}),i.draw()}))}add(t,...e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}super.add(t);const i=this.children.length;return i>5&&n.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),a.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return c.hasPointerCapture(t,this)}setPointerCapture(t){c.setPointerCapture(t,this)}releaseCapture(t){c.releaseCapture(t,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&P.forEach((([t,e])=>{this.content.addEventListener(t,(t=>{this[e](t)}),{passive:!1})}))}_pointerenter(t){this.setPointersPositions(t);const e=R(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=R(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=R(t.type),i=I(t.type);if(!e)return;this.setPointersPositions(t);const n=this._getTargetShape(i),r=!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled;n&&r?(n._fireAndBubble(e.pointerout,{evt:t}),n._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):r&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=R(t.type),i=I(t.type);if(!e)return;this.setPointersPositions(t);let n=!1;this._changedPointerPositions.forEach((r=>{const s=this.getIntersection(r);if(l.DD.justDragged=!1,a.Konva["_"+i+"ListenClick"]=!0,!s||!s.isListening())return void(this[i+"ClickStartShape"]=void 0);a.Konva.capturePointerEventsEnabled&&s.setPointerCapture(r.id),this[i+"ClickStartShape"]=s,s._fireAndBubble(e.pointerdown,{evt:t,pointerId:r.id}),n=!0;const o=t.type.indexOf("touch")>=0;s.preventDefault()&&t.cancelable&&o&&t.preventDefault()})),n||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=R(t.type),i=I(t.type);if(!e)return;a.Konva.isDragging()&&l.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);if(!(!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled))return;const n={};let r=!1;const s=this._getTargetShape(i);this._changedPointerPositions.forEach((a=>{const o=c.getCapturedShape(a.id)||this.getIntersection(a),l=a.id,h={evt:t,pointerId:l},d=s!==o;if(d&&s&&(s._fireAndBubble(e.pointerout,{...h},o),s._fireAndBubble(e.pointerleave,{...h},o)),o){if(n[o._id])return;n[o._id]=!0}o&&o.isListening()?(r=!0,d&&(o._fireAndBubble(e.pointerover,{...h},s),o._fireAndBubble(e.pointerenter,{...h},s),this[i+"targetShape"]=o),o._fireAndBubble(e.pointermove,{...h})):s&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:l}),this[i+"targetShape"]=null)})),r||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=R(t.type),i=I(t.type);if(!e)return;this.setPointersPositions(t);const n=this[i+"ClickStartShape"],r=this[i+"ClickEndShape"],s={};let o=!1;this._changedPointerPositions.forEach((h=>{const d=c.getCapturedShape(h.id)||this.getIntersection(h);if(d){if(d.releaseCapture(h.id),s[d._id])return;s[d._id]=!0}const u=h.id,p={evt:t,pointerId:u};let f=!1;a.Konva["_"+i+"InDblClickWindow"]?(f=!0,clearTimeout(this[i+"DblTimeout"])):l.DD.justDragged||(a.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout((function(){a.Konva["_"+i+"InDblClickWindow"]=!1}),a.Konva.dblClickWindow),d&&d.isListening()?(o=!0,this[i+"ClickEndShape"]=d,d._fireAndBubble(e.pointerup,{...p}),a.Konva["_"+i+"ListenClick"]&&n&&n===d&&(d._fireAndBubble(e.pointerclick,{...p}),f&&r&&r===d&&d._fireAndBubble(e.pointerdblclick,{...p}))):(this[i+"ClickEndShape"]=null,a.Konva["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:u}),f&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:u}))})),o||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+i+"ListenClick"]=!1,t.cancelable&&"touch"!==i&&"pointer"!==i&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(C,{evt:t}):this._fire(C,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(N,{evt:t}):this._fire(N,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=c.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(v,c.createEvent(t)),c.releaseCapture(t.pointerId)}_lostpointercapture(t){c.releaseCapture(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}))):(i=(t.clientX-e.left)/e.scaleX,r=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:n.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:n.Util._getFirstPointerId(t)}])}_setPointerPosition(t){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!a.Konva.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}e.Stage=D,D.prototype.nodeType="Stage",(0,h._registerNode)(D),r.Factory.addGetterSetter(D,"container"),a.Konva.isBrowser&&document.addEventListener("visibilitychange",(()=>{e.stages.forEach((t=>{t.batchDraw()}))}))},48665:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const n=i(74060),r=i(39696),s=i(16536),a=i(88871),o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=["fill","stroke","shadowColor"];let h=0;class c{constructor(t,e,i,n,r,s,a){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=r-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class d{constructor(t){const i=this,s=t.node,l=s._id,u=t.easing||e.Easings.Linear,p=!!t.yoyo;let f,g;f=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=s,this._id=h++;const m=s.getLayer()||(s instanceof a.Konva.Stage?s.getLayers():null);for(g in m||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation((function(){i.tween.onEnterFrame()}),m),this.tween=new c(g,(function(t){i._tweenFunc(t)}),u,0,1,1e3*f,p),this._addListeners(),d.attrs[l]||(d.attrs[l]={}),d.attrs[l][this._id]||(d.attrs[l][this._id]={}),d.tweens[l]||(d.tweens[l]={}),t)void 0===o[g]&&this._addAttr(g,t[g]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,r=i._id;let s,a,o,h,c;const u=d.tweens[r][t];u&&delete d.attrs[r][u][t];let p=i.getAttr(t);if(n.Util._isArray(e))if(s=[],a=Math.max(e.length,p.length),"points"===t&&e.length!==p.length&&(e.length>p.length?(h=p,p=n.Util._prepareArrayForTween(p,e,i.closed())):(o=e,e=n.Util._prepareArrayForTween(e,p,i.closed()))),0===t.indexOf("fill"))for(let t=0;t<a;t++)if(t%2==0)s.push(e[t]-p[t]);else{const i=n.Util.colorToRGBA(p[t]);c=n.Util.colorToRGBA(e[t]),p[t]=i,s.push({r:c.r-i.r,g:c.g-i.g,b:c.b-i.b,a:c.a-i.a})}else for(let t=0;t<a;t++)s.push(e[t]-p[t]);else-1!==l.indexOf(t)?(p=n.Util.colorToRGBA(p),c=n.Util.colorToRGBA(e),s={r:c.r-p.r,g:c.g-p.g,b:c.b-p.b,a:c.a-p.a}):s=e-p;d.attrs[r][this._id][t]={start:p,diff:s,end:e,trueEnd:o,trueStart:h},d.tweens[r][t]=this._id}_tweenFunc(t){const e=this.node,i=d.attrs[e._id][this._id];let r,s,a,o,h,c,u,p;for(r in i){if(s=i[r],a=s.start,o=s.diff,p=s.end,n.Util._isArray(a))if(h=[],u=Math.max(a.length,p.length),0===r.indexOf("fill"))for(c=0;c<u;c++)c%2==0?h.push((a[c]||0)+o[c]*t):h.push("rgba("+Math.round(a[c].r+o[c].r*t)+","+Math.round(a[c].g+o[c].g*t)+","+Math.round(a[c].b+o[c].b*t)+","+(a[c].a+o[c].a*t)+")");else for(c=0;c<u;c++)h.push((a[c]||0)+o[c]*t);else h=-1!==l.indexOf(r)?"rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":a+o*t;e.setAttr(r,h)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=d.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=d.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=d.tweens[t];this.pause();for(const e in i)delete d.tweens[t][e];delete d.attrs[t][e]}}e.Tween=d,d.attrs={},d.tweens={},s.Node.prototype.to=function(t){const e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};new d(t).play()},e.Easings={BackEaseIn(t,e,i,n){const r=1.70158;return i*(t/=n)*t*((r+1)*t-r)+e},BackEaseOut(t,e,i,n){const r=1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut(t,e,i,n){let r=1.70158;return(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn(t,e,i,n,r,s){let a=0;return 0===t?e:1==(t/=n)?e+i:(s||(s=.3*n),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s)+e)},ElasticEaseOut(t,e,i,n,r,s){let a=0;return 0===t?e:1==(t/=n)?e+i:(s||(s=.3*n),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(t,e,i,n,r,s){let a=0;return 0===t?e:2==(t/=n/2)?e+i:(s||(s=n*(.3*1.5)),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut:(t,e,i,n)=>(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,i,n,r)=>n-e.Easings.BounceEaseOut(r-t,0,n,r)+i,BounceEaseInOut:(t,i,n,r)=>t<r/2?.5*e.Easings.BounceEaseIn(2*t,0,n,r)+i:.5*e.Easings.BounceEaseOut(2*t-r,0,n,r)+.5*n+i,EaseIn:(t,e,i,n)=>i*(t/=n)*t+e,EaseOut:(t,e,i,n)=>-i*(t/=n)*(t-2)+e,EaseInOut:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,i,n)=>i*(t/=n)*t*t*t*t+e,StrongEaseOut:(t,e,i,n)=>i*((t=t/n-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,i,n)=>i*t/n+e}},74060:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const n=i(88871);class r{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,r=this.m[1]*e+this.m[3]*i,s=this.m[0]*-i+this.m[2]*e,a=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=s,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=s,this.m[5]=a,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=s,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],n=this.m[2],r=this.m[3],s=t*r-i*n,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=i){const e=Math.sqrt(t*t+i*i);a.rotation=i>0?Math.acos(t/e):-Math.acos(t/e),a.scaleX=e,a.scaleY=s/e,a.skewX=(t*n+i*r)/s,a.skewY=0}else if(0!=n||0!=r){const e=Math.sqrt(n*n+r*r);a.rotation=Math.PI/2-(r>0?Math.acos(-n/e):-Math.acos(n/e)),a.scaleX=s/e,a.scaleY=e,a.skewX=0,a.skewY=(t*n+i*r)/s}return a.rotation=e.Util._getRotation(a.rotation),a}}e.Transform=r;const s=Math.PI/180,a=180/Math.PI,o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let h=[];const c="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement:t=>!(!t||1!=t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;const e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){h.push(t),1===h.length&&c((function(){const t=h;h=[],t.forEach((function(t){t()}))}))},createCanvasElement(){const t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,i){const n=e.Util.createImageElement();n.onload=function(){i(n)},n.src=t},_rgbToHex:(t,e,i)=>((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1),_hexToRgb(t){t=t.replace("#","");const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){let t=(16777215*Math.random()|0).toString(16);for(;t.length<6;)t="0"+t;return"#"+t},getRGB(t){let e;return t in o?(e=o[t],{r:e[0],g:e[1],b:e[2]}):"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=l.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(t){const e=o[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){const e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){const e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(i[0])/360,r=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(0===r)return l=255*s,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};a=s<.5?s*(1+r):s+r-s*r;const h=2*s-a,c=[0,0,0];for(let t=0;t<3;t++)o=n+1/3*-(t-1),o<0&&o++,o>1&&o--,l=6*o<1?h+6*(a-h)*o:2*o<1?a:3*o<2?h+(a-h)*(2/3-o)*6:h,c[t]=255*l;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){const e={};for(const i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*s,radToDeg:t=>t*a,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:t=>n.Konva.angleDeg?e.Util.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw new Error("Konva error: "+t)},error(t){},warn(t){n.Konva.showWarnings},each(t,e){for(const i in t)e(i,t[i])},_inRange:(t,e,i)=>e<=t&&t<i,_getProjectionToSegment(t,e,i,n,r,s){let a,o,l;const h=(t-i)*(t-i)+(e-n)*(e-n);if(0==h)a=t,o=e,l=(r-i)*(r-i)+(s-n)*(s-n);else{const c=((r-t)*(i-t)+(s-e)*(n-e))/h;c<0?(a=t,o=e,l=(t-r)*(t-r)+(e-s)*(e-s)):c>1?(a=i,o=n,l=(i-r)*(i-r)+(n-s)*(n-s)):(a=t+c*(i-t),o=e+c*(n-e),l=(a-r)*(a-r)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,i,n){const r=e.Util.cloneObject(t);let s=Number.MAX_VALUE;return i.forEach((function(a,o){if(!n&&o===i.length-1)return;const l=i[(o+1)%i.length],h=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),c=h[0],d=h[1],u=h[2];u<s&&(r.x=c,r.y=d,s=u)})),r},_prepareArrayForTween(t,i,n){const r=[],s=[];if(t.length>i.length){const e=i;i=t,t=e}for(let e=0;e<t.length;e+=2)r.push({x:t[e],y:t[e+1]});for(let t=0;t<i.length;t+=2)s.push({x:i[t],y:i[t+1]});const a=[];return s.forEach((function(t){const i=e.Util._getProjectionToLine(t,r,n);a.push(i.x),a.push(i.y)})),a},_prepareToStringify(t){let i;t.visitedByCircularReferenceRemoval=!0;for(const n in t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(i=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||e.Util._isElement(t[n])){if(!i.configurable)return null;delete t[n]}else if(null===e.Util._prepareToStringify(t[n])){if(!i.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(const i in e)t[i]=e[i];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999,releaseCanvas(...t){n.Konva.releaseCanvasOnDestroy&&t.forEach((t=>{t.width=0,t.height=0}))},drawRoundedRectPath(t,e,i,n){let r=0,s=0,a=0,o=0;"number"==typeof n?r=s=a=o=Math.min(n,e/2,i/2):(r=Math.min(n[0]||0,e/2,i/2),s=Math.min(n[1]||0,e/2,i/2),o=Math.min(n[2]||0,e/2,i/2),a=Math.min(n[3]||0,e/2,i/2)),t.moveTo(r,0),t.lineTo(e-s,0),t.arc(e-s,s,s,3*Math.PI/2,0,!1),t.lineTo(e,i-o),t.arc(e-o,i-o,o,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}}},35483:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBComponent=function(t){if(t>255)return 255;if(t<0)return 0;return Math.round(t)},e.alphaComponent=function(t){if(t>1)return 1;if(t<1e-4)return 1e-4;return t},e.getNumberValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(n.Konva.isUnminified)return function(e,i){let n=r.Util._isNumber(e),a=r.Util._isArray(e)&&e.length==t;return n||a||r.Util.warn(s(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||"auto"===t||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isString(t)||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(n.Konva.isUnminified)return function(t,e){const i=r.Util._isString(t),n="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return i||n||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isFunction(t)||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(r.Util._isArray(t)?t.forEach((function(t){r.Util._isNumber(t)||r.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}},e.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(t,e){return!0===t||!1===t||r.Util.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(n.Konva.isUnminified)return function(e,i){return null==e||r.Util.isObject(e)||r.Util.warn(s(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}};const n=i(88871),r=i(74060);function s(t){return r.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||r.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}},40680:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const n=i(88871),r=i(74060),s=i(16536),a=i(64473),o=i(67324),l=i(66267),h=i(77457),c=i(47949),d=i(91268),u=i(4723),p=i(39696),f=i(48665),g=i(29869),m=i(8604);e.Konva=r.Util._assign(n.Konva,{Util:r.Util,Transform:r.Transform,Node:s.Node,Container:a.Container,Stage:o.Stage,stages:o.stages,Layer:l.Layer,FastLayer:h.FastLayer,Group:c.Group,DD:d.DD,Shape:u.Shape,shapes:u.shapes,Animation:p.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:m.Canvas}),e.default=e.Konva},58558:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const n=i(40680),r=i(24821),s=i(89456),a=i(29729),o=i(16955),l=i(67256),h=i(86619),c=i(23443),d=i(21486),u=i(5155),p=i(69131),f=i(45451),g=i(69308),m=i(74481),b=i(11958),x=i(18137),v=i(65058),y=i(68001),w=i(26261),k=i(76627),A=i(82650),S=i(30983),C=i(17928),_=i(7241),M=i(55461),T=i(94843),E=i(96564),N=i(55553),P=i(68624),L=i(15992),I=i(77324),R=i(57019),O=i(86921),D=i(93862),z=i(62512),F=i(50517),B=i(661);e.Konva=n.Konva.Util._assign(n.Konva,{Arc:r.Arc,Arrow:s.Arrow,Circle:a.Circle,Ellipse:o.Ellipse,Image:l.Image,Label:h.Label,Tag:h.Tag,Line:c.Line,Path:d.Path,Rect:u.Rect,RegularPolygon:p.RegularPolygon,Ring:f.Ring,Sprite:g.Sprite,Star:m.Star,Text:b.Text,TextPath:x.TextPath,Transformer:v.Transformer,Wedge:y.Wedge,Filters:{Blur:w.Blur,Brighten:k.Brighten,Contrast:A.Contrast,Emboss:S.Emboss,Enhance:C.Enhance,Grayscale:_.Grayscale,HSL:M.HSL,HSV:T.HSV,Invert:E.Invert,Kaleidoscope:N.Kaleidoscope,Mask:P.Mask,Noise:L.Noise,Pixelate:I.Pixelate,Posterize:R.Posterize,RGB:O.RGB,RGBA:D.RGBA,Sepia:z.Sepia,Solarize:F.Solarize,Threshold:B.Threshold}})},26261:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;const n=i(64892),r=i(16536),s=i(35483);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){const e=Math.round(this.blurRadius());e>0&&function(t,e){const i=t.data,n=t.width,r=t.height;let s,h,c,d,u,p,f,g,m,b,x,v,y,w,k,A,S,C,_,M,T,E,N,P;const L=e+e+1,I=n-1,R=r-1,O=e+1,D=O*(O+1)/2,z=new a,F=o[e],B=l[e];let H=null,q=z,j=null,G=null;for(c=1;c<L;c++)q=q.next=new a,c===O&&(H=q);for(q.next=z,f=p=0,h=0;h<r;h++){for(A=S=C=_=g=m=b=x=0,v=O*(M=i[p]),y=O*(T=i[p+1]),w=O*(E=i[p+2]),k=O*(N=i[p+3]),g+=D*M,m+=D*T,b+=D*E,x+=D*N,q=z,c=0;c<O;c++)q.r=M,q.g=T,q.b=E,q.a=N,q=q.next;for(c=1;c<O;c++)d=p+((I<c?I:c)<<2),g+=(q.r=M=i[d])*(P=O-c),m+=(q.g=T=i[d+1])*P,b+=(q.b=E=i[d+2])*P,x+=(q.a=N=i[d+3])*P,A+=M,S+=T,C+=E,_+=N,q=q.next;for(j=z,G=H,s=0;s<n;s++)i[p+3]=N=x*F>>B,0!==N?(N=255/N,i[p]=(g*F>>B)*N,i[p+1]=(m*F>>B)*N,i[p+2]=(b*F>>B)*N):i[p]=i[p+1]=i[p+2]=0,g-=v,m-=y,b-=w,x-=k,v-=j.r,y-=j.g,w-=j.b,k-=j.a,d=f+((d=s+e+1)<I?d:I)<<2,A+=j.r=i[d],S+=j.g=i[d+1],C+=j.b=i[d+2],_+=j.a=i[d+3],g+=A,m+=S,b+=C,x+=_,j=j.next,v+=M=G.r,y+=T=G.g,w+=E=G.b,k+=N=G.a,A-=M,S-=T,C-=E,_-=N,G=G.next,p+=4;f+=n}for(s=0;s<n;s++){for(S=C=_=A=m=b=x=g=0,p=s<<2,v=O*(M=i[p]),y=O*(T=i[p+1]),w=O*(E=i[p+2]),k=O*(N=i[p+3]),g+=D*M,m+=D*T,b+=D*E,x+=D*N,q=z,c=0;c<O;c++)q.r=M,q.g=T,q.b=E,q.a=N,q=q.next;for(u=n,c=1;c<=e;c++)p=u+s<<2,g+=(q.r=M=i[p])*(P=O-c),m+=(q.g=T=i[p+1])*P,b+=(q.b=E=i[p+2])*P,x+=(q.a=N=i[p+3])*P,A+=M,S+=T,C+=E,_+=N,q=q.next,c<R&&(u+=n);for(p=s,j=z,G=H,h=0;h<r;h++)d=p<<2,i[d+3]=N=x*F>>B,N>0?(N=255/N,i[d]=(g*F>>B)*N,i[d+1]=(m*F>>B)*N,i[d+2]=(b*F>>B)*N):i[d]=i[d+1]=i[d+2]=0,g-=v,m-=y,b-=w,x-=k,v-=j.r,y-=j.g,w-=j.b,k-=j.a,d=s+((d=h+O)<R?d:R)*n<<2,g+=A+=j.r=i[d],m+=S+=j.g=i[d+1],b+=C+=j.b=i[d+2],x+=_+=j.a=i[d+3],j=j.next,v+=M=G.r,y+=T=G.g,w+=E=G.b,k+=N=G.a,A-=M,S-=T,C-=E,_-=N,G=G.next,p+=n}}(t,e)},n.Factory.addGetterSetter(r.Node,"blurRadius",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},76627:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;const n=i(64892),r=i(16536),s=i(35483);e.Brighten=function(t){const e=255*this.brightness(),i=t.data,n=i.length;for(let t=0;t<n;t+=4)i[t]+=e,i[t+1]+=e,i[t+2]+=e},n.Factory.addGetterSetter(r.Node,"brightness",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},82650:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;const n=i(64892),r=i(16536),s=i(35483);e.Contrast=function(t){const e=Math.pow((this.contrast()+100)/100,2),i=t.data,n=i.length;let r=150,s=150,a=150;for(let t=0;t<n;t+=4)r=i[t],s=i[t+1],a=i[t+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,i[t]=r,i[t+1]=s,i[t+2]=a},n.Factory.addGetterSetter(r.Node,"contrast",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},30983:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;const n=i(64892),r=i(16536),s=i(74060),a=i(35483);e.Emboss=function(t){const e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),r=this.embossBlend(),a=t.data,o=t.width,l=t.height,h=4*o;let c=0,d=0,u=l;switch(n){case"top-left":c=-1,d=-1;break;case"top":c=-1,d=0;break;case"top-right":c=-1,d=1;break;case"right":c=0,d=1;break;case"bottom-right":c=1,d=1;break;case"bottom":c=1,d=0;break;case"bottom-left":c=1,d=-1;break;case"left":c=0,d=-1;break;default:s.Util.error("Unknown emboss direction: "+n)}do{const t=(u-1)*h;let n=c;u+n<1&&(n=0),u+n>l&&(n=0);const s=(u-1+n)*o*4;let p=o;do{const n=t+4*(p-1);let l=d;p+l<1&&(l=0),p+l>o&&(l=0);const h=s+4*(p-1+l),c=a[n]-a[h],u=a[n+1]-a[h+1],f=a[n+2]-a[h+2];let g=c;const m=g>0?g:-g;if((u>0?u:-u)>m&&(g=u),(f>0?f:-f)>m&&(g=f),g*=e,r){const t=a[n]+g,e=a[n+1]+g,i=a[n+2]+g;a[n]=t>255?255:t<0?0:t,a[n+1]=e>255?255:e<0?0:e,a[n+2]=i>255?255:i<0?0:i}else{let t=i-g;t<0?t=0:t>255&&(t=255),a[n]=a[n+1]=a[n+2]=t}}while(--p)}while(--u)},n.Factory.addGetterSetter(r.Node,"embossStrength",.5,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"embossDirection","top-left",void 0,n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"embossBlend",!1,void 0,n.Factory.afterSetFilter)},17928:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;const n=i(64892),r=i(16536),s=i(35483);function a(t,e,i,n,r){const s=i-e,a=r-n;if(0===s)return n+a/2;if(0===a)return n;let o=(t-e)/s;return o=a*o+n,o}e.Enhance=function(t){const e=t.data,i=e.length;let n,r,s,o=e[0],l=o,h=e[1],c=h,d=e[2],u=d;const p=this.enhance();if(0===p)return;for(let t=0;t<i;t+=4)n=e[t+0],n<o?o=n:n>l&&(l=n),r=e[t+1],r<h?h=r:r>c&&(c=r),s=e[t+2],s<d?d=s:s>u&&(u=s);let f,g,m,b,x,v,y,w,k;l===o&&(l=255,o=0),c===h&&(c=255,h=0),u===d&&(u=255,d=0),p>0?(g=l+p*(255-l),m=o-p*(o-0),x=c+p*(255-c),v=h-p*(h-0),w=u+p*(255-u),k=d-p*(d-0)):(f=.5*(l+o),g=l+p*(l-f),m=o+p*(o-f),b=.5*(c+h),x=c+p*(c-b),v=h+p*(h-b),y=.5*(u+d),w=u+p*(u-y),k=d+p*(d-y));for(let t=0;t<i;t+=4)e[t+0]=a(e[t+0],o,l,m,g),e[t+1]=a(e[t+1],h,c,v,x),e[t+2]=a(e[t+2],d,u,k,w)},n.Factory.addGetterSetter(r.Node,"enhance",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},7241:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0;e.Grayscale=function(t){const e=t.data,i=e.length;for(let t=0;t<i;t+=4){const i=.34*e[t]+.5*e[t+1]+.16*e[t+2];e[t]=i,e[t+1]=i,e[t+2]=i}}},55461:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;const n=i(64892),r=i(16536),s=i(35483);n.Factory.addGetterSetter(r.Node,"hue",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"saturation",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"luminance",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter);e.HSL=function(t){const e=t.data,i=e.length,n=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,s=127*this.luminance(),a=1*n*Math.cos(r*Math.PI/180),o=1*n*Math.sin(r*Math.PI/180),l=.299+.701*a+.167*o,h=.587-.587*a+.33*o,c=.114-.114*a-.497*o,d=.299-.299*a-.328*o,u=.587+.413*a+.035*o,p=.114-.114*a+.293*o,f=.299-.3*a+1.25*o,g=.587-.586*a-1.05*o,m=.114+.886*a-.2*o;let b,x,v,y;for(let t=0;t<i;t+=4)b=e[t+0],x=e[t+1],v=e[t+2],y=e[t+3],e[t+0]=l*b+h*x+c*v+s,e[t+1]=d*b+u*x+p*v+s,e[t+2]=f*b+g*x+m*v+s,e[t+3]=y}},94843:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;const n=i(64892),r=i(16536),s=i(35483);e.HSV=function(t){const e=t.data,i=e.length,n=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=n*r*Math.cos(s*Math.PI/180),o=n*r*Math.sin(s*Math.PI/180),l=.299*n+.701*a+.167*o,h=.587*n-.587*a+.33*o,c=.114*n-.114*a-.497*o,d=.299*n-.299*a-.328*o,u=.587*n+.413*a+.035*o,p=.114*n-.114*a+.293*o,f=.299*n-.3*a+1.25*o,g=.587*n-.586*a-1.05*o,m=.114*n+.886*a-.2*o;let b,x,v,y;for(let t=0;t<i;t+=4)b=e[t+0],x=e[t+1],v=e[t+2],y=e[t+3],e[t+0]=l*b+h*x+c*v,e[t+1]=d*b+u*x+p*v,e[t+2]=f*b+g*x+m*v,e[t+3]=y},n.Factory.addGetterSetter(r.Node,"hue",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"saturation",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"value",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},96564:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0;e.Invert=function(t){const e=t.data,i=e.length;for(let t=0;t<i;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2]}},55553:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;const n=i(64892),r=i(16536),s=i(74060),a=i(35483);e.Kaleidoscope=function(t){const e=t.width,i=t.height;let n,r,a,o,l,h,c,d,u,p,f=Math.round(this.kaleidoscopePower());const g=Math.round(this.kaleidoscopeAngle()),m=Math.floor(e*(g%360)/360);if(f<1)return;const b=s.Util.createCanvasElement();b.width=e,b.height=i;const x=b.getContext("2d").getImageData(0,0,e,i);s.Util.releaseCanvas(b),function(t,e,i){const n=t.data,r=e.data,s=t.width,a=t.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2;let h=Math.sqrt(o*o+l*l),c=s-o,d=a-l;const u=Math.sqrt(c*c+d*d);h=u>h?u:h;const p=a,f=s,g=360/f*Math.PI/180;for(let t=0;t<f;t+=1){const e=Math.sin(t*g),i=Math.cos(t*g);for(let a=0;a<p;a+=1){c=Math.floor(o+h*a/p*i),d=Math.floor(l+h*a/p*e);let u=4*(d*s+c);const f=n[u+0],g=n[u+1],m=n[u+2],b=n[u+3];u=4*(t+a*s),r[u+0]=f,r[u+1]=g,r[u+2]=m,r[u+3]=b}}}(t,x,{polarCenterX:e/2,polarCenterY:i/2});let v=e/Math.pow(2,f);for(;v<=8;)v*=2,f-=1;v=Math.ceil(v);let y=v,w=0,k=y,A=1;for(m+v>e&&(w=y,k=0,A=-1),r=0;r<i;r+=1)for(n=w;n!==k;n+=A)a=Math.round(n+m)%e,u=4*(e*r+a),l=x.data[u+0],h=x.data[u+1],c=x.data[u+2],d=x.data[u+3],p=4*(e*r+n),x.data[p+0]=l,x.data[p+1]=h,x.data[p+2]=c,x.data[p+3]=d;for(r=0;r<i;r+=1)for(y=Math.floor(v),o=0;o<f;o+=1){for(n=0;n<y+1;n+=1)u=4*(e*r+n),l=x.data[u+0],h=x.data[u+1],c=x.data[u+2],d=x.data[u+3],p=4*(e*r+2*y-n-1),x.data[p+0]=l,x.data[p+1]=h,x.data[p+2]=c,x.data[p+3]=d;y*=2}!function(t,e,i){const n=t.data,r=e.data,s=t.width,a=t.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2;let h=Math.sqrt(o*o+l*l),c=s-o,d=a-l;const u=Math.sqrt(c*c+d*d);h=u>h?u:h;const p=a,f=s,g=i.polarRotation||0;let m,b;for(c=0;c<s;c+=1)for(d=0;d<a;d+=1){const t=c-o,e=d-l,i=Math.sqrt(t*t+e*e)*p/h;let a=(180*Math.atan2(e,t)/Math.PI+360+g)%360;a=a*f/360,m=Math.floor(a),b=Math.floor(i);let u=4*(b*s+m);const x=n[u+0],v=n[u+1],y=n[u+2],w=n[u+3];u=4*(d*s+c),r[u+0]=x,r[u+1]=v,r[u+2]=y,r[u+3]=w}}(x,t,{polarRotation:0})},n.Factory.addGetterSetter(r.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),n.Factory.afterSetFilter)},68624:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;const n=i(64892),r=i(16536),s=i(35483);function a(t,e,i){let n=4*(i*t.width+e);const r=[];return r.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),r}function o(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){let e=function(t,e){const i=a(t,0,0),n=a(t,t.width-1,0),r=a(t,0,t.height-1),s=a(t,t.width-1,t.height-1),l=e||10;if(o(i,n)<l&&o(n,s)<l&&o(s,r)<l&&o(r,i)<l){const e=function(t){const e=[0,0,0];for(let i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,i,s,r]),a=[];for(let i=0;i<t.width*t.height;i++){const n=o(e,[t.data[4*i],t.data[4*i+1],t.data[4*i+2]]);a[i]=n<l?0:255}return a}}(t,this.threshold());return e&&(e=function(t,e,i){const n=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),a=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let c=0;for(let a=0;a<r;a++)for(let h=0;h<r;h++){const d=o+a-s,u=l+h-s;if(d>=0&&d<i&&u>=0&&u<e){const i=n[a*r+h];c+=t[d*e+u]*i}}a[h]=2040===c?255:0}return a}(e,t.width,t.height),e=function(t,e,i){const n=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),a=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let c=0;for(let a=0;a<r;a++)for(let h=0;h<r;h++){const d=o+a-s,u=l+h-s;if(d>=0&&d<i&&u>=0&&u<e){const i=n[a*r+h];c+=t[d*e+u]*i}}a[h]=c>=1020?255:0}return a}(e,t.width,t.height),e=function(t,e,i){const n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),a=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let c=0;for(let a=0;a<r;a++)for(let h=0;h<r;h++){const d=o+a-s,u=l+h-s;if(d>=0&&d<i&&u>=0&&u<e){const i=n[a*r+h];c+=t[d*e+u]*i}}a[h]=c}return a}(e,t.width,t.height),function(t,e){for(let i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,e)),t},n.Factory.addGetterSetter(r.Node,"threshold",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},15992:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;const n=i(64892),r=i(16536),s=i(35483);e.Noise=function(t){const e=255*this.noise(),i=t.data,n=i.length,r=e/2;for(let t=0;t<n;t+=4)i[t+0]+=r-2*r*Math.random(),i[t+1]+=r-2*r*Math.random(),i[t+2]+=r-2*r*Math.random()},n.Factory.addGetterSetter(r.Node,"noise",.2,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},77324:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;const n=i(64892),r=i(74060),s=i(16536),a=i(35483);e.Pixelate=function(t){let e,i,n,s,a,o,l,h,c,d,u,p,f,g,m=Math.ceil(this.pixelSize()),b=t.width,x=t.height,v=Math.ceil(b/m),y=Math.ceil(x/m),w=t.data;if(m<=0)r.Util.error("pixelSize value can not be <= 0");else for(p=0;p<v;p+=1)for(f=0;f<y;f+=1){for(s=0,a=0,o=0,l=0,h=p*m,c=h+m,d=f*m,u=d+m,g=0,e=h;e<c;e+=1)if(!(e>=b))for(i=d;i<u;i+=1)i>=x||(n=4*(b*i+e),s+=w[n+0],a+=w[n+1],o+=w[n+2],l+=w[n+3],g+=1);for(s/=g,a/=g,o/=g,l/=g,e=h;e<c;e+=1)if(!(e>=b))for(i=d;i<u;i+=1)i>=x||(n=4*(b*i+e),w[n+0]=s,w[n+1]=a,w[n+2]=o,w[n+3]=l)}},n.Factory.addGetterSetter(s.Node,"pixelSize",8,(0,a.getNumberValidator)(),n.Factory.afterSetFilter)},57019:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;const n=i(64892),r=i(16536),s=i(35483);e.Posterize=function(t){const e=Math.round(254*this.levels())+1,i=t.data,n=i.length,r=255/e;for(let t=0;t<n;t+=1)i[t]=Math.floor(i[t]/r)*r},n.Factory.addGetterSetter(r.Node,"levels",.5,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},86921:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;const n=i(64892),r=i(16536),s=i(35483);e.RGB=function(t){const e=t.data,i=e.length,n=this.red(),r=this.green(),s=this.blue();for(let t=0;t<i;t+=4){const i=(.34*e[t]+.5*e[t+1]+.16*e[t+2])/255;e[t]=i*n,e[t+1]=i*r,e[t+2]=i*s,e[t+3]=e[t+3]}},n.Factory.addGetterSetter(r.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(r.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(r.Node,"blue",0,s.RGBComponent,n.Factory.afterSetFilter)},93862:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;const n=i(64892),r=i(16536),s=i(35483);e.RGBA=function(t){const e=t.data,i=e.length,n=this.red(),r=this.green(),s=this.blue(),a=this.alpha();for(let t=0;t<i;t+=4){const i=1-a;e[t]=n*a+e[t]*i,e[t+1]=r*a+e[t+1]*i,e[t+2]=s*a+e[t+2]*i}},n.Factory.addGetterSetter(r.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(r.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(r.Node,"blue",0,s.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(r.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},62512:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0;e.Sepia=function(t){const e=t.data,i=e.length;for(let t=0;t<i;t+=4){const i=e[t+0],n=e[t+1],r=e[t+2];e[t+0]=Math.min(255,.393*i+.769*n+.189*r),e[t+1]=Math.min(255,.349*i+.686*n+.168*r),e[t+2]=Math.min(255,.272*i+.534*n+.131*r)}}},50517:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0;e.Solarize=function(t){const e=t.data,i=t.width,n=4*i;let r=t.height;do{const t=(r-1)*n;let s=i;do{const i=t+4*(s-1);let n=e[i],r=e[i+1],a=e[i+2];n>127&&(n=255-n),r>127&&(r=255-r),a>127&&(a=255-a),e[i]=n,e[i+1]=r,e[i+2]=a}while(--s)}while(--r)}},661:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;const n=i(64892),r=i(16536),s=i(35483);e.Threshold=function(t){const e=255*this.threshold(),i=t.data,n=i.length;for(let t=0;t<n;t+=1)i[t]=i[t]<e?0:255},n.Factory.addGetterSetter(r.Node,"threshold",.5,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},55778:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(58558);t.exports=n.Konva},24821:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;const n=i(64892),r=i(4723),s=i(88871),a=i(35483),o=i(88871);class l extends r.Shape{_sceneFunc(t){const e=s.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),n=s.Konva.getAngle(i?360-this.angle():this.angle()),r=Math.cos(Math.min(n,Math.PI)),a=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),o=Math.sin(Math.min(n,Math.PI/2)),l=r*(r>0?t:e),h=a*(a>0?t:e),c=o*(o>0?e:t);return{x:l,y:i?-1*c:h,width:1*e-l,height:c-h}}}e.Arc=l,l.prototype._centroid=!0,l.prototype.className="Arc",l.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"innerRadius",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"outerRadius",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"angle",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"clockwise",!1,(0,a.getBooleanValidator)())},89456:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;const n=i(64892),r=i(23443),s=i(35483),a=i(88871),o=i(21486);class l extends r.Line{_sceneFunc(t){super._sceneFunc(t);const e=2*Math.PI,i=this.points();let n=i;const r=0!==this.tension()&&i.length>4;r&&(n=this.getTensionPoints());const s=this.pointerLength(),a=i.length;let l,h;if(r){const t=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],i[a-2],i[a-1]],e=o.Path.calcLength(n[n.length-4],n[n.length-3],"C",t),r=o.Path.getPointOnQuadraticBezier(Math.min(1,1-s/e),t[0],t[1],t[2],t[3],t[4],t[5]);l=i[a-2]-r.x,h=i[a-1]-r.y}else l=i[a-2]-i[a-4],h=i[a-1]-i[a-3];const c=(Math.atan2(h,l)+e)%e,d=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[a-2],i[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-s,d/2),t.lineTo(-s,-d/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),r?(l=(n[0]+n[2])/2-i[0],h=(n[1]+n[3])/2-i[1]):(l=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-l)+e)%e),t.moveTo(0,0),t.lineTo(-s,d/2),t.lineTo(-s,-d/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+2*e}}}e.Arrow=l,l.prototype.className="Arrow",(0,a._registerNode)(l),n.Factory.addGetterSetter(l,"pointerLength",10,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"pointerWidth",10,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"pointerAtBeginning",!1),n.Factory.addGetterSetter(l,"pointerAtEnding",!0)},29729:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;const n=i(64892),r=i(4723),s=i(35483),a=i(88871);class o extends r.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}e.Circle=o,o.prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(o),n.Factory.addGetterSetter(o,"radius",0,(0,s.getNumberValidator)())},16955:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;const n=i(64892),r=i(4723),s=i(35483),a=i(88871);class o extends r.Shape{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}e.Ellipse=o,o.prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,a._registerNode)(o),n.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),n.Factory.addGetterSetter(o,"radiusX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(o,"radiusY",0,(0,s.getNumberValidator)())},67256:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;const n=i(74060),r=i(64892),s=i(4723),a=i(88871),o=i(35483);class l extends s.Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",(t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image;let a;if(s){const t=this.attrs.cropWidth,n=this.attrs.cropHeight;a=t&&n?[s,this.cropX(),this.cropY(),t,n,0,0,e,i]:[s,0,0,e,i]}(this.hasFill()||this.hasStroke()||r)&&(t.beginPath(),r?n.Util.drawRoundedRectPath(t,e,i,r):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),s&&(r&&t.clip(),t.drawImage.apply(t,a))}_hitFunc(t){const e=this.width(),i=this.height(),r=this.cornerRadius();t.beginPath(),r?n.Util.drawRoundedRectPath(t,e,i,r):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,i=null){const r=n.Util.createImageElement();r.onload=function(){const t=new l({image:r});e(t)},r.onerror=i,r.crossOrigin="Anonymous",r.src=t}}e.Image=l,l.prototype.className="Image",(0,a._registerNode)(l),r.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),r.Factory.addGetterSetter(l,"image"),r.Factory.addComponentsGetterSetter(l,"crop",["x","y","width","height"]),r.Factory.addGetterSetter(l,"cropX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(l,"cropY",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(l,"cropWidth",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(l,"cropHeight",0,(0,o.getNumberValidator)())},86619:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;const n=i(64892),r=i(4723),s=i(47949),a=i(35483),o=i(88871),l=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],h="up",c="right",d="down",u="left",p=l.length;class f extends s.Group{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e,i=this;const n=function(){i._sync()};for(e=0;e<p;e++)t.on(l[e]+"Change.konva",n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t,e,i,n,r,s,a,o=this.getText(),l=this.getTag();if(o&&l){switch(t=o.width(),e=o.height(),i=l.pointerDirection(),n=l.pointerWidth(),a=l.pointerHeight(),r=0,s=0,i){case h:r=t/2,s=-1*a;break;case c:r=t+n,s=e/2;break;case d:r=t/2,s=e+a;break;case u:r=-1*n,s=e/2}l.setAttrs({x:-1*r,y:-1*s,width:t,height:e}),o.setAttrs({x:-1*r,y:-1*s})}}}e.Label=f,f.prototype.className="Label",(0,o._registerNode)(f);class g extends r.Shape{_sceneFunc(t){const e=this.width(),i=this.height(),n=this.pointerDirection(),r=this.pointerWidth(),s=this.pointerHeight(),a=this.cornerRadius();let o=0,l=0,p=0,f=0;"number"==typeof a?o=l=p=f=Math.min(a,e/2,i/2):(o=Math.min(a[0]||0,e/2,i/2),l=Math.min(a[1]||0,e/2,i/2),f=Math.min(a[2]||0,e/2,i/2),p=Math.min(a[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(o,0),n===h&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*s),t.lineTo((e+r)/2,0)),t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1),n===c&&(t.lineTo(e,(i-s)/2),t.lineTo(e+r,i/2),t.lineTo(e,(i+s)/2)),t.lineTo(e,i-f),t.arc(e-f,i-f,f,0,Math.PI/2,!1),n===d&&(t.lineTo((e+r)/2,i),t.lineTo(e/2,i+s),t.lineTo((e-r)/2,i)),t.lineTo(p,i),t.arc(p,i-p,p,Math.PI/2,Math.PI,!1),n===u&&(t.lineTo(0,(i+s)/2),t.lineTo(-1*r,i/2),t.lineTo(0,(i-s)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),n=this.pointerHeight(),r=this.pointerDirection(),s=this.width(),a=this.height();return r===h?(e-=n,a+=n):r===d?a+=n:r===u?(t-=1.5*i,s+=i):r===c&&(s+=1.5*i),{x:t,y:e,width:s,height:a}}}e.Tag=g,g.prototype.className="Tag",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"pointerDirection","none"),n.Factory.addGetterSetter(g,"pointerWidth",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(g,"pointerHeight",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(g,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4))},23443:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;const n=i(64892),r=i(88871),s=i(4723),a=i(35483);function o(t,e,i,n,r,s,a){const o=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-n,2)),h=a*o/(o+l),c=a*l/(o+l);return[i-h*(r-t),n-h*(s-e),i+c*(r-t),n+c*(s-e)]}function l(t,e){const i=t.length,n=[];for(let r=2;r<i-2;r+=2){const i=o(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e);isNaN(i[0])||(n.push(i[0]),n.push(i[1]),n.push(t[r]),n.push(t[r+1]),n.push(i[2]),n.push(i[3]))}return n}class h extends s.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){let e,i,n,r=this.points(),s=r.length,a=this.tension(),o=this.closed(),l=this.bezier();if(s){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==a&&s>4){for(e=this.getTensionPoints(),i=e.length,n=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<i-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);o||t.quadraticCurveTo(e[i-2],e[i-1],r[s-2],r[s-1])}else if(l)for(n=2;n<s;)t.bezierCurveTo(r[n++],r[n++],r[n++],r[n++],r[n++],r[n++]);else for(n=2;n<s;n+=2)t.lineTo(r[n],r[n+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():l(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),n=o(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),r=o(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),s=l(t,i);return[n[2],n[3]].concat(s).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],n[0],n[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points();let e,i,n=t[0],r=t[0],s=t[1],a=t[1];for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],n=Math.min(n,e),r=Math.max(r,e),s=Math.min(s,i),a=Math.max(a,i);return{x:n,y:s,width:r-n,height:a-s}}}e.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,r._registerNode)(h),n.Factory.addGetterSetter(h,"closed",!1),n.Factory.addGetterSetter(h,"bezier",!1),n.Factory.addGetterSetter(h,"tension",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(h,"points",[],(0,a.getNumberArrayValidator)())},21486:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;const n=i(64892),r=i(4723),s=i(88871),a=i(95570);class o extends r.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute()}))}_readDataAttribute(){this.dataArray=o.parsePathData(this.data()),this.pathLength=o.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let f=0;f<e.length;f++){const g=e[f].command,m=e[f].points;switch(g){case"L":t.lineTo(m[0],m[1]);break;case"M":t.moveTo(m[0],m[1]);break;case"C":t.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":t.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":var n=m[0],r=m[1],s=m[2],a=m[3],o=m[4],l=m[5],h=m[6],c=m[7],d=s>a?s:a,u=s>a?1:s/a,p=s>a?a/s:1;t.translate(n,r),t.rotate(h),t.scale(u,p),t.arc(0,0,d,o,o+l,1-c),t.scale(1/u,1/p),t.rotate(-h),t.translate(-n,-r);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach((function(e){if("A"===e.command){const i=e.points[4],n=e.points[5],r=e.points[4]+n;let s=Math.PI/180;if(Math.abs(i-r)<s&&(s=Math.abs(i-r)),n<0)for(let n=i-s;n>r;n-=s){const i=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(i.x,i.y)}else for(let n=i+s;n<r;n+=s){const i=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(i.x,i.y)}}else if("C"===e.command)for(let i=0;i<=1;i+=.01){const n=o.getPointOnCubicBezier(i,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(n.x,n.y)}else t=t.concat(e.points)}));let e,i,n=t[0],r=t[0],s=t[1],a=t[1];for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],isNaN(e)||(n=Math.min(n,e),r=Math.max(r,e)),isNaN(i)||(s=Math.min(s,i),a=Math.max(a,i));return{x:n,y:s,width:r-n,height:a-s}}getLength(){return this.pathLength}getPointAtLength(t){return o.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,n=0,r=e.length;if(!r)return null;for(;n<r&&t>e[n].pathLength;)t-=e[n].pathLength,++n;if(n===r)return i=e[n-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return i=e[n].points.slice(0,2),{x:i[0],y:i[1]};const s=e[n],l=s.points;switch(s.command){case"L":return o.getPointOnLine(t,s.start.x,s.start.y,l[0],l[1]);case"C":return o.getPointOnCubicBezier((0,a.t2length)(t,o.getPathLength(e),(t=>(0,a.getCubicArcLength)([s.start.x,l[0],l[2],l[4]],[s.start.y,l[1],l[3],l[5]],t))),s.start.x,s.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return o.getPointOnQuadraticBezier((0,a.t2length)(t,o.getPathLength(e),(t=>(0,a.getQuadraticArcLength)([s.start.x,l[0],l[2]],[s.start.y,l[1],l[3]],t))),s.start.x,s.start.y,l[0],l[1],l[2],l[3]);case"A":var h=l[0],c=l[1],d=l[2],u=l[3],p=l[4],f=l[5],g=l[6];return p+=f*t/s.pathLength,o.getPointOnEllipticalArc(h,c,d,u,p,g)}return null}static getPointOnLine(t,e,i,n,r,s,a){s=null!=s?s:e,a=null!=a?a:i;const o=this.getLineLength(e,i,n,r);if(o<1e-10)return{x:e,y:i};if(n===e)return{x:s,y:a+(r>i?t:-t)};const l=(r-i)/(n-e),h=Math.sqrt(t*t/(1+l*l))*(n<e?-1:1),c=l*h;if(Math.abs(a-i-l*(s-e))<1e-10)return{x:s+h,y:a+c};const d=((s-e)*(n-e)+(a-i)*(r-i))/(o*o),u=e+d*(n-e),p=i+d*(r-i),f=this.getLineLength(s,a,u,p),g=Math.sqrt(t*t-f*f),m=Math.sqrt(g*g/(1+l*l))*(n<e?-1:1);return{x:u+m,y:p+l*m}}static getPointOnCubicBezier(t,e,i,n,r,s,a,o,l){function h(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function u(t){return(1-t)*(1-t)*(1-t)}return{x:o*h(t)+s*c(t)+n*d(t)+e*u(t),y:l*h(t)+a*c(t)+r*d(t)+i*u(t)}}static getPointOnQuadraticBezier(t,e,i,n,r,s,a){function o(t){return t*t}function l(t){return 2*t*(1-t)}function h(t){return(1-t)*(1-t)}return{x:s*o(t)+n*l(t)+e*h(t),y:a*o(t)+r*l(t)+i*h(t)}}static getPointOnEllipticalArc(t,e,i,n,r,s){const a=Math.cos(s),o=Math.sin(s),l=i*Math.cos(r),h=n*Math.sin(r);return{x:t+(l*a-h*o),y:e+(l*o+h*a)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);const r=e.split("|"),s=[],a=[];let o=0,l=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(n=1;n<r.length;n++){let t=r[n],e=t.charAt(0);for(t=t.slice(1),a.length=0;c=h.exec(t);)a.push(c[0]);const i=[];for(let t=0,e=a.length;t<e;t++){if("00"===a[t]){i.push(0,0);continue}const e=parseFloat(a[t]);isNaN(e)?i.push(0):i.push(e)}for(;i.length>0&&!isNaN(i[0]);){let t="",n=[];const r=o,a=l;var d,u,p,f,g,m,b,x,v,y;switch(e){case"l":o+=i.shift(),l+=i.shift(),t="L",n.push(o,l);break;case"L":o=i.shift(),l=i.shift(),n.push(o,l);break;case"m":var w=i.shift(),k=i.shift();if(o+=w,l+=k,t="M",s.length>2&&"z"===s[s.length-1].command)for(let t=s.length-2;t>=0;t--)if("M"===s[t].command){o=s[t].points[0]+w,l=s[t].points[1]+k;break}n.push(o,l),e="l";break;case"M":o=i.shift(),l=i.shift(),t="M",n.push(o,l),e="L";break;case"h":o+=i.shift(),t="L",n.push(o,l);break;case"H":o=i.shift(),t="L",n.push(o,l);break;case"v":l+=i.shift(),t="L",n.push(o,l);break;case"V":l=i.shift(),t="L",n.push(o,l);break;case"C":n.push(i.shift(),i.shift(),i.shift(),i.shift()),o=i.shift(),l=i.shift(),n.push(o,l);break;case"c":n.push(o+i.shift(),l+i.shift(),o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="C",n.push(o,l);break;case"S":u=o,p=l,"C"===(d=s[s.length-1]).command&&(u=o+(o-d.points[2]),p=l+(l-d.points[3])),n.push(u,p,i.shift(),i.shift()),o=i.shift(),l=i.shift(),t="C",n.push(o,l);break;case"s":u=o,p=l,"C"===(d=s[s.length-1]).command&&(u=o+(o-d.points[2]),p=l+(l-d.points[3])),n.push(u,p,o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="C",n.push(o,l);break;case"Q":n.push(i.shift(),i.shift()),o=i.shift(),l=i.shift(),n.push(o,l);break;case"q":n.push(o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="Q",n.push(o,l);break;case"T":u=o,p=l,"Q"===(d=s[s.length-1]).command&&(u=o+(o-d.points[0]),p=l+(l-d.points[1])),o=i.shift(),l=i.shift(),t="Q",n.push(u,p,o,l);break;case"t":u=o,p=l,"Q"===(d=s[s.length-1]).command&&(u=o+(o-d.points[0]),p=l+(l-d.points[1])),o+=i.shift(),l+=i.shift(),t="Q",n.push(u,p,o,l);break;case"A":f=i.shift(),g=i.shift(),m=i.shift(),b=i.shift(),x=i.shift(),v=o,y=l,o=i.shift(),l=i.shift(),t="A",n=this.convertEndpointToCenterParameterization(v,y,o,l,b,x,f,g,m);break;case"a":f=i.shift(),g=i.shift(),m=i.shift(),b=i.shift(),x=i.shift(),v=o,y=l,o+=i.shift(),l+=i.shift(),t="A",n=this.convertEndpointToCenterParameterization(v,y,o,l,b,x,f,g,m)}s.push({command:t||e,points:n,start:{x:r,y:a},pathLength:this.calcLength(r,a,t||e,n)})}"z"!==e&&"Z"!==e||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(t,e,i,n){let r,s,l,h;const c=o;switch(i){case"L":return c.getLineLength(t,e,n[0],n[1]);case"C":return(0,a.getCubicArcLength)([t,n[0],n[2],n[4]],[e,n[1],n[3],n[5]],1);case"Q":return(0,a.getQuadraticArcLength)([t,n[0],n[2]],[e,n[1],n[3]],1);case"A":r=0;var d=n[4],u=n[5],p=n[4]+u,f=Math.PI/180;if(Math.abs(d-p)<f&&(f=Math.abs(d-p)),s=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),u<0)for(h=d-f;h>p;h-=f)l=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),r+=c.getLineLength(s.x,s.y,l.x,l.y),s=l;else for(h=d+f;h<p;h+=f)l=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),r+=c.getLineLength(s.x,s.y,l.x,l.y),s=l;return l=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],p,0),r+=c.getLineLength(s.x,s.y,l.x,l.y),r}return 0}static convertEndpointToCenterParameterization(t,e,i,n,r,s,a,o,l){const h=l*(Math.PI/180),c=Math.cos(h)*(t-i)/2+Math.sin(h)*(e-n)/2,d=-1*Math.sin(h)*(t-i)/2+Math.cos(h)*(e-n)/2,u=c*c/(a*a)+d*d/(o*o);u>1&&(a*=Math.sqrt(u),o*=Math.sqrt(u));let p=Math.sqrt((a*a*(o*o)-a*a*(d*d)-o*o*(c*c))/(a*a*(d*d)+o*o*(c*c)));r===s&&(p*=-1),isNaN(p)&&(p=0);const f=p*a*d/o,g=p*-o*c/a,m=(t+i)/2+Math.cos(h)*f-Math.sin(h)*g,b=(e+n)/2+Math.sin(h)*f+Math.cos(h)*g,x=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(x(t)*x(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))},w=y([1,0],[(c-f)/a,(d-g)/o]),k=[(c-f)/a,(d-g)/o],A=[(-1*c-f)/a,(-1*d-g)/o];let S=y(k,A);return v(k,A)<=-1&&(S=Math.PI),v(k,A)>=1&&(S=0),0===s&&S>0&&(S-=2*Math.PI),1===s&&S<0&&(S+=2*Math.PI),[m,b,a,o,w,S,h,s]}}e.Path=o,o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,s._registerNode)(o),n.Factory.addGetterSetter(o,"data")},5155:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;const n=i(64892),r=i(4723),s=i(88871),a=i(74060),o=i(35483);class l extends r.Shape{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),n=this.height();t.beginPath(),e?a.Util.drawRoundedRectPath(t,i,n,e):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}}e.Rect=l,l.prototype.className="Rect",(0,s._registerNode)(l),n.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4))},69131:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;const n=i(64892),r=i(4723),s=i(35483),a=i(88871);class o extends r.Shape{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let n=0;n<t;n++)i.push({x:e*Math.sin(2*n*Math.PI/t),y:-1*e*Math.cos(2*n*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].y,n=t[0].x,r=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),n=Math.min(n,t.y),r=Math.max(r,t.y)})),{x:e,y:n,width:i-e,height:r-n}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.RegularPolygon=o,o.prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(o),n.Factory.addGetterSetter(o,"radius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(o,"sides",0,(0,s.getNumberValidator)())},45451:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;const n=i(64892),r=i(4723),s=i(35483),a=i(88871),o=2*Math.PI;class l extends r.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,o,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),o,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Ring=l,l.prototype.className="Ring",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(l),n.Factory.addGetterSetter(l,"innerRadius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"outerRadius",0,(0,s.getNumberValidator)())},69308:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;const n=i(64892),r=i(4723),s=i(39696),a=i(35483),o=i(88871);class l extends r.Shape{constructor(t){super(t),this._updated=!0,this.anim=new s.Animation((()=>{const t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),n=4*i,r=this.animations()[e],s=this.frameOffsets(),a=r[n+0],o=r[n+1],l=r[n+2],h=r[n+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,h),t.closePath(),t.fillStrokeShape(this)),c)if(s){const n=s[e],r=2*i;t.drawImage(c,a,o,l,h,n[r+0],n[r+1],l,h)}else t.drawImage(c,a,o,l,h,0,0,l,h)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),n=4*i,r=this.animations()[e],s=this.frameOffsets(),a=r[n+2],o=r[n+3];if(t.beginPath(),s){const n=s[e],r=2*i;t.rect(n[r+0],n[r+1],a,o)}else t.rect(0,0,a,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}e.Sprite=l,l.prototype.className="Sprite",(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"animation"),n.Factory.addGetterSetter(l,"animations"),n.Factory.addGetterSetter(l,"frameOffsets"),n.Factory.addGetterSetter(l,"image"),n.Factory.addGetterSetter(l,"frameIndex",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"frameRate",17,(0,a.getNumberValidator)()),n.Factory.backCompat(l,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},74481:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;const n=i(64892),r=i(4723),s=i(35483),a=i(88871);class o extends r.Shape{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let r=1;r<2*n;r++){const s=r%2==0?i:e,a=s*Math.sin(r*Math.PI/n),o=-1*s*Math.cos(r*Math.PI/n);t.lineTo(a,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Star=o,o.prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(o),n.Factory.addGetterSetter(o,"numPoints",5,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(o,"innerRadius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(o,"outerRadius",0,(0,s.getNumberValidator)())},11958:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0,e.stringToArray=h;const n=i(74060),r=i(64892),s=i(4723),a=i(88871),o=i(35483),l=i(88871);function h(t){return[...t].reduce(((t,e,i,n)=>{if(/\p{Emoji}/u.test(e)){const r=n[i+1];r&&/\p{Emoji_Modifier}|\u200D/u.test(r)?(t.push(e+r),n[i+1]=""):t.push(e)}else/\p{Regional_Indicator}{2}/u.test(e+(n[i+1]||""))?t.push(e+n[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(e)?t[t.length-1]+=e:e&&t.push(e);return t}),[])}const c="auto",d="inherit",u="justify",p="left",f="middle",g="normal",m=" ",b="none",x=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],v=x.length;let y;function w(){return y||(y=n.Util.createCanvasElement().getContext("2d"),y)}class k extends s.Shape{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<v;t++)this.on(x[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){const e=this.textArr,i=e.length;if(!this.text())return;let n,r=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,l=this.verticalAlign(),c=this.direction(),g=0,m=this.align(),b=this.getWidth(),x=this.letterSpacing(),v=this.fill(),y=this.textDecoration(),w=-1!==y.indexOf("underline"),k=-1!==y.indexOf("line-through");c=c===d?t.direction:c;let A=o/2,S=f;if(a.Konva._fixTextRendering){const t=this.measureSize("M");S="alphabetic",A=(t.fontBoundingBoxAscent-t.fontBoundingBoxDescent)/2+o/2}var C=0,_=0;for("rtl"===c&&t.setAttr("direction",c),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",S),t.setAttr("textAlign",p),l===f?g=(this.getHeight()-i*o-2*r)/2:"bottom"===l&&(g=this.getHeight()-i*o-2*r),t.translate(r,g+r),n=0;n<i;n++){C=0,_=0;var M,T,E=e[n],N=E.text,P=E.width,L=E.lastInParagraph;if(t.save(),"right"===m?C+=b-P-2*r:"center"===m&&(C+=(b-P-2*r)/2),w){t.save(),t.beginPath();const e=C,i=A+_+(a.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2));t.moveTo(e,i),0===(M=N.split(" ").length-1),T=m!==u||L?P:b-2*r,t.lineTo(e+Math.round(T),i),t.lineWidth=s/15;const n=this._getLinearGradient();t.strokeStyle=n||v,t.stroke(),t.restore()}if(k){t.save(),t.beginPath();const e=a.Konva._fixTextRendering?-Math.round(s/4):0;t.moveTo(C,A+_+e),0===(M=N.split(" ").length-1),T=m!==u||L?P:b-2*r,t.lineTo(C+Math.round(T),A+_+e),t.lineWidth=s/15;const i=this._getLinearGradient();t.strokeStyle=i||v,t.stroke(),t.restore()}if("rtl"===c||0===x&&m!==u)0!==x&&t.setAttr("letterSpacing",`${x}px`),this._partialTextX=C,this._partialTextY=A+_,this._partialText=N,t.fillStrokeShape(this);else{M=N.split(" ").length-1;const e=h(N);for(let i=0;i<e.length;i++){const n=e[i];" "!==n||L||m!==u||(C+=(b-2*r-P)/M),this._partialTextX=C,this._partialTextY=A+_,this._partialText=n,t.fillStrokeShape(this),C+=this.measureSize(n).width+x}}t.restore(),i>1&&(A+=o)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=n.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===c||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===c||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,n,r,s,a,o,l,h,c,d;let u,p=w(),f=this.fontSize();p.save(),p.font=this._getContextFont(),u=p.measureText(t),p.restore();const g=f/100;return{actualBoundingBoxAscent:null!==(e=u.actualBoundingBoxAscent)&&void 0!==e?e:71.58203125*g,actualBoundingBoxDescent:null!==(i=u.actualBoundingBoxDescent)&&void 0!==i?i:0,actualBoundingBoxLeft:null!==(n=u.actualBoundingBoxLeft)&&void 0!==n?n:-7.421875*g,actualBoundingBoxRight:null!==(r=u.actualBoundingBoxRight)&&void 0!==r?r:75.732421875*g,alphabeticBaseline:null!==(s=u.alphabeticBaseline)&&void 0!==s?s:0,emHeightAscent:null!==(a=u.emHeightAscent)&&void 0!==a?a:100*g,emHeightDescent:null!==(o=u.emHeightDescent)&&void 0!==o?o:-20*g,fontBoundingBoxAscent:null!==(l=u.fontBoundingBoxAscent)&&void 0!==l?l:91*g,fontBoundingBoxDescent:null!==(h=u.fontBoundingBoxDescent)&&void 0!==h?h:21*g,hangingBaseline:null!==(c=u.hangingBaseline)&&void 0!==c?c:72.80000305175781*g,ideographicBaseline:null!==(d=u.ideographicBaseline)&&void 0!==d?d:-21*g,width:u.width,height:f}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+"px ")+this.fontFamily().split(",").map((t=>{const e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t})).join(", ")}_addTextLine(t){this.align()===u&&(t=t.trim());const e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return w().measureText(t).width+e*i}_setTextData(){let t=this.text().split("\n"),e=+this.fontSize(),i=0,n=this.lineHeight()*e,r=this.attrs.width,s=this.attrs.height,a=r!==c&&void 0!==r,o=s!==c&&void 0!==s,l=this.padding(),d=r-2*l,u=s-2*l,p=0,f=this.wrap(),g="char"!==f&&f!==b,x=this.ellipsis();this.textArr=[],w().font=this._getContextFont();const v=x?this._getTextWidth(""):0;for(let e=0,r=t.length;e<r;++e){let s=t[e],l=this._getTextWidth(s);if(a&&l>d)for(;s.length>0;){let t=0,e=h(s).length,r="",a=0;for(;t<e;){const i=t+e>>>1,l=h(s).slice(0,i+1).join(""),c=this._getTextWidth(l);(x&&o&&p+n>u?c+v:c)<=d?(t=i+1,r=l,a=c):e=i}if(!r)break;if(g){const e=h(s),i=h(r),n=e[i.length];let o;if((n===m||"-"===n)&&a<=d)o=i.length;else{const t=i.lastIndexOf(m),e=i.lastIndexOf("-");o=Math.max(t,e)+1}o>0&&(t=o,r=e.slice(0,t).join(""),a=this._getTextWidth(r))}r=r.trimRight(),this._addTextLine(r),i=Math.max(i,a),p+=n;if(this._shouldHandleEllipsis(p)){this._tryToAddEllipsisToLastLine();break}if(s=h(s).slice(t).join("").trimLeft(),s.length>0&&(l=this._getTextWidth(s),l<=d)){this._addTextLine(s),p+=n,i=Math.max(i,l);break}}else this._addTextLine(s),p+=n,i=Math.max(i,l),this._shouldHandleEllipsis(p)&&e<r-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&p+n>u)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,n=this.attrs.height,r=n!==c&&void 0!==n,s=n-2*this.padding();return!(this.wrap()!==b)||r&&t+i>s}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==c&&void 0!==t,i=t-2*this.padding(),n=this.ellipsis(),r=this.textArr[this.textArr.length-1];if(r&&n){if(e){this._getTextWidth(r.text+"")<i||(r.text=r.text.slice(0,r.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+"")}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas()}}e.Text=k,k.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype.className="Text",k.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,l._registerNode)(k),r.Factory.overWriteSetter(k,"width",(0,o.getNumberOrAutoValidator)()),r.Factory.overWriteSetter(k,"height",(0,o.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(k,"direction",d),r.Factory.addGetterSetter(k,"fontFamily","Arial"),r.Factory.addGetterSetter(k,"fontSize",12,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fontStyle",g),r.Factory.addGetterSetter(k,"fontVariant",g),r.Factory.addGetterSetter(k,"padding",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"align",p),r.Factory.addGetterSetter(k,"verticalAlign","top"),r.Factory.addGetterSetter(k,"lineHeight",1,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"wrap","word"),r.Factory.addGetterSetter(k,"ellipsis",!1,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(k,"letterSpacing",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"text","",(0,o.getStringValidator)()),r.Factory.addGetterSetter(k,"textDecoration","")},18137:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;const n=i(74060),r=i(64892),s=i(4723),a=i(21486),o=i(11958),l=i(35483),h=i(88871),c="normal";function d(t){t.fillText(this.partialText,0,0)}function u(t){t.strokeText(this.partialText,0,0)}class p extends s.Shape{constructor(t){super(t),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return a.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;return t-1>this.pathLength?null:a.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=a.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),n=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(let i=0;i<r.length;i++){t.save();const s=r[i].p0;t.translate(s.x,s.y),t.rotate(r[i].rotation),this.partialText=r[i].text,t.fillStrokeShape(this),"underline"===e&&(0===i&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const n=e[i].p1;t.lineTo(n.x,n.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return o.Text.prototype.setText.call(this,t)}_getContextFont(){return o.Text.prototype._getContextFont.call(this)}_getTextSize(t){const e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();const i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:e}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=e,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),n=this.align(),r=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let l=0;"center"===n&&(l=Math.max(0,this.pathLength/2-s/2)),"right"===n&&(l=Math.max(0,this.pathLength-s));const h=(0,o.stringToArray)(this.text());let c=l;for(let t=0;t<h.length;t++){const e=this._getPointAtLength(c);if(!e)return;let o=this._getTextSize(h[t]).width+i;if(" "===h[t]&&"justify"===n){const t=this.text().split(" ").length-1;o+=(this.pathLength-s)/t}const l=this._getPointAtLength(c+o);if(!l)return;const d=a.Path.getLineLength(e.x,e.y,l.x,l.y);let u=0;if(r)try{u=r(h[t-1],h[t])*this.fontSize()}catch(t){u=0}e.x+=u,l.x+=u,this.textWidth+=u;const p=a.Path.getPointOnLine(u+d/2,e.x,e.y,l.x,l.y),f=Math.atan2(l.y-e.y,l.x-e.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:h[t],rotation:f,p0:e,p1:l}),c+=o}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));let e,i,n=t[0]||0,r=t[0]||0,s=t[1]||0,a=t[1]||0;for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],n=Math.min(n,e),r=Math.max(r,e),s=Math.min(s,i),a=Math.max(a,i);const o=this.fontSize();return{x:n-o/2,y:s-o/2,width:r-n+o,height:a-s+o}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}e.TextPath=p,p.prototype._fillFunc=d,p.prototype._strokeFunc=u,p.prototype._fillFuncHit=d,p.prototype._strokeFuncHit=u,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(p),r.Factory.addGetterSetter(p,"data"),r.Factory.addGetterSetter(p,"fontFamily","Arial"),r.Factory.addGetterSetter(p,"fontSize",12,(0,l.getNumberValidator)()),r.Factory.addGetterSetter(p,"fontStyle",c),r.Factory.addGetterSetter(p,"align","left"),r.Factory.addGetterSetter(p,"letterSpacing",0,(0,l.getNumberValidator)()),r.Factory.addGetterSetter(p,"textBaseline","middle"),r.Factory.addGetterSetter(p,"fontVariant",c),r.Factory.addGetterSetter(p,"text",""),r.Factory.addGetterSetter(p,"textDecoration",""),r.Factory.addGetterSetter(p,"kerningFunc",void 0)},65058:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;const n=i(74060),r=i(64892),s=i(16536),a=i(4723),o=i(5155),l=i(47949),h=i(88871),c=i(35483),d=i(88871),u="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((t=>t+`.${u}`)).join(" "),f="nodesRect",g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},b="ontouchstart"in h.Konva._global;const x=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function v(t,e,i){const n=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),r=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:n,y:r}}function y(t,e){const i=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return v(t,e,i)}let w=0;class k extends l.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter((t=>!t.isAncestorOf(this)||(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));this._nodes=t=e,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(t._attrsAffectingSize.length){const i=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(i,e)}t.on(g.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache();return!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(i=>{if(!e)return;const n=t.getAbsolutePosition(),r=n.x-e.x,s=n.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const n=e.getAbsolutePosition();e.setAbsolutePosition({x:n.x+r,y:n.y+s}),e.startDrag(i)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(i),s=t.getAbsolutePosition(i),a=n.x*r.x-t.offsetX()*r.x,o=n.y*r.y-t.offsetY()*r.y,l=(h.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return v({x:s.x+a*Math.cos(l)+o*Math.sin(-l),y:s.y+o*Math.cos(l)+a*Math.sin(l),width:n.width*r.x,height:n.height*r.y,rotation:l},-h.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map((e=>{const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],r=e.getAbsoluteTransform();n.forEach((function(e){const i=r.point(e);t.push(i)}))}));const e=new n.Transform;e.rotate(-h.Konva.getAngle(this.rotation()));let i=1/0,r=1/0,s=-1/0,a=-1/0;t.forEach((function(t){const n=e.point(t);void 0===i&&(i=s=n.x,r=a=n.y),i=Math.min(i,n.x),r=Math.min(r,n.y),s=Math.max(s,n.x),a=Math.max(a,n.y)})),e.invert();const o=e.point({x:i,y:r});return{x:o.x,y:o.y,width:s-i,height:a-r,rotation:h.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x.forEach((t=>{this._createAnchor(t)})),this._createAnchor("rotater")}_createAnchor(t){const e=new o.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:b?10:"auto"}),i=this;e.on("mousedown touchstart",(function(t){i._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{const i=h.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),s=function(t,e,i){if("rotater"===t)return i;e+=n.Util.degToRad(m[t]||0);const r=(n.Util.radToDeg(e)%360+360)%360;return n.Util._inRange(r,337.5,360)||n.Util._inRange(r,0,22.5)?"ns-resize":n.Util._inRange(r,22.5,67.5)?"nesw-resize":n.Util._inRange(r,67.5,112.5)?"ew-resize":n.Util._inRange(r,112.5,157.5)?"nwse-resize":n.Util._inRange(r,157.5,202.5)?"ns-resize":n.Util._inRange(r,202.5,247.5)?"nesw-resize":n.Util._inRange(r,247.5,292.5)?"ew-resize":n.Util._inRange(r,292.5,337.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}(t,i,r);e.getStage().content&&(e.getStage().content.style.cursor=s),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){const t=new a.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,e){const i=e.getParent(),r=i.padding();t.beginPath(),t.rect(-r,-r,e.width()+2*r,e.height()+2*r),t.moveTo(e.width()/2,-r),i.rotateEnabled()&&i.rotateLineVisible()&&t.lineTo(e.width()/2,-i.rotateAnchorOffset()*n.Util._sign(e.height())-r),t.fillStrokeShape(e)},hitFunc:(t,e)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,n=e.height,r=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));this.sin=Math.abs(n/r),this.cos=Math.abs(i/r),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const s=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},w++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){let e,i,n;const r=this.findOne("."+this._movingAnchorName),s=r.getStage();s.setPointersPositions(t);const a=s.getPointerPosition();let o={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const l=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(o=this.anchorDragBoundFunc()(l,o,t)),r.setAbsolutePosition(o);const c=r.getAbsolutePosition();if(l.x===c.x&&l.y===c.y)return;if("rotater"===this._movingAnchorName){const n=this._getNodeRect();e=r.x()-n.width/2,i=-r.y()+n.height/2;let s=Math.atan2(-i,e)+Math.PI/2;n.height<0&&(s-=Math.PI);const a=h.Konva.getAngle(this.rotation())+s,o=h.Konva.getAngle(this.rotationSnapTolerance()),l=function(t,e,i){let n=e;for(let r=0;r<t.length;r++){const s=h.Konva.getAngle(t[r]),a=Math.abs(s-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<i&&(n=s)}return n}(this.rotationSnaps(),a,o),c=y(n,l-n.rotation);return void this._fitNodesInto(c,t)}const d=this.shiftBehavior();let u;u="inverted"===d?this.keepRatio()&&!t.shiftKey:"none"===d?this.keepRatio():this.keepRatio()||t.shiftKey;var p=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(u){var f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(f.y-r.y(),2));var g=this.findOne(".top-left").x()>f.x?-1:1,m=this.findOne(".top-left").y()>f.y?-1:1;e=n*this.cos*g,i=n*this.sin*m,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){if(u){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(f.y-r.y(),2));g=this.findOne(".top-right").x()<f.x?-1:1,m=this.findOne(".top-right").y()>f.y?-1:1;e=n*this.cos*g,i=n*this.sin*m,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-i)}var b=r.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(r.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(r.x());else if("bottom-left"===this._movingAnchorName){if(u){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(r.y()-f.y,2));g=f.x<r.x()?-1:1,m=r.y()<f.y?-1:1;e=n*this.cos*g,i=n*this.sin*m,r.x(f.x-e),r.y(f.y+i)}b=r.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(r.y());else if("bottom-right"===this._movingAnchorName&&u){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(r.y()-f.y,2));g=this.findOne(".bottom-right").x()<f.x?-1:1,m=this.findOne(".bottom-right").y()<f.y?-1:1;e=n*this.cos*g,i=n*this.sin*m,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+i)}if(p=this.centeredScaling()||t.altKey){const t=this.findOne(".top-left"),e=this.findOne(".bottom-right"),i=t.x(),n=t.y(),r=this.getWidth()-e.x(),s=this.getHeight()-e.y();e.move({x:-i,y:-n}),t.move({x:r,y:s})}const x=this.findOne(".top-left").getAbsolutePosition();e=x.x,i=x.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),w=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:v,height:w,rotation:h.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();w--,this._fire("transformend",{evt:t,target:i}),null===(e=this.getLayer())||void 0===e||e.batchDraw(),i&&this._nodes.forEach((e=>{var i;e._fire("transformend",{evt:t,target:e}),null===(i=e.getLayer())||void 0===i||i.batchDraw()})),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect();if(n.Util._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(n.Util._inRange(t.height,2*-this.padding()-1,1))return void this.update();const r=new n.Transform;if(r.rotate(h.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=r.point({x:2*-this.padding(),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=r.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=r.point({x:0,y:2*-this.padding()});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=r.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(i,t);e?t=e:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,a=new n.Transform;a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.width/s,i.height/s);const o=new n.Transform,l=t.width/s,c=t.height/s;!1===this.flipEnabled()?(o.translate(t.x,t.y),o.rotate(t.rotation),o.translate(t.width<0?t.width:0,t.height<0?t.height:0),o.scale(Math.abs(l),Math.abs(c))):(o.translate(t.x,t.y),o.rotate(t.rotation),o.scale(l,c));const d=o.multiply(a.invert());this._nodes.forEach((t=>{var e;const i=t.getParent().getAbsoluteTransform(),r=t.getTransform().copy();r.translate(t.offsetX(),t.offsetY());const s=new n.Transform;s.multiply(i.copy().invert()).multiply(d).multiply(i).multiply(r);const a=s.decompose();t.setAttrs(a),null===(e=t.getLayer())||void 0===e||e.batchDraw()})),this.rotation(n.Util._getRotation(t.rotation)),this._nodes.forEach((t=>{this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t})})),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(n.Util._getRotation(e.rotation));const i=e.width,r=e.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach((t=>{t.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*n.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&h.forEach((t=>{c(t)})),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),l.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return s.Node.prototype.toObject.call(this)}clone(t){return s.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}e.Transformer=k,k.isTransforming=()=>w>0,k.prototype.className="Transformer",(0,d._registerNode)(k),r.Factory.addGetterSetter(k,"enabledAnchors",x,(function(t){return t instanceof Array||n.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===x.indexOf(t)&&n.Util.warn("Unknown anchor name: "+t+". Available names are: "+x.join(", "))})),t||[]})),r.Factory.addGetterSetter(k,"flipEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(k,"resizeEnabled",!0),r.Factory.addGetterSetter(k,"anchorSize",10,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"rotateEnabled",!0),r.Factory.addGetterSetter(k,"rotateLineVisible",!0),r.Factory.addGetterSetter(k,"rotationSnaps",[]),r.Factory.addGetterSetter(k,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"rotateAnchorCursor","crosshair"),r.Factory.addGetterSetter(k,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"borderEnabled",!0),r.Factory.addGetterSetter(k,"anchorStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(k,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"anchorFill","white"),r.Factory.addGetterSetter(k,"anchorCornerRadius",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"borderStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(k,"borderStrokeWidth",1,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"borderDash"),r.Factory.addGetterSetter(k,"keepRatio",!0),r.Factory.addGetterSetter(k,"shiftBehavior","default"),r.Factory.addGetterSetter(k,"centeredScaling",!1),r.Factory.addGetterSetter(k,"ignoreStroke",!1),r.Factory.addGetterSetter(k,"padding",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(k,"nodes"),r.Factory.addGetterSetter(k,"node"),r.Factory.addGetterSetter(k,"boundBoxFunc"),r.Factory.addGetterSetter(k,"anchorDragBoundFunc"),r.Factory.addGetterSetter(k,"anchorStyleFunc"),r.Factory.addGetterSetter(k,"shouldOverdrawWholeArea",!1),r.Factory.addGetterSetter(k,"useSingleNodeRotation",!0),r.Factory.backCompat(k,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},68001:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;const n=i(64892),r=i(4723),s=i(88871),a=i(35483),o=i(88871);class l extends r.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,s.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.Wedge=l,l.prototype.className="Wedge",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"radius",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"angle",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(l,"clockwise",!1),n.Factory.backCompat(l,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})},67193:(t,e,i)=>{t=i.nmd(t);var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",a="[object Boolean]",o="[object Date]",l="[object Function]",h="[object GeneratorFunction]",c="[object Map]",d="[object Number]",u="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",m="[object String]",b="[object Symbol]",x="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",w="[object Float32Array]",k="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",T="[object Uint16Array]",E="[object Uint32Array]",N=/\w*$/,P=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,I={};I[s]=I["[object Array]"]=I[v]=I[y]=I[a]=I[o]=I[w]=I[k]=I[A]=I[S]=I[C]=I[c]=I[d]=I[u]=I[f]=I[g]=I[m]=I[b]=I[_]=I[M]=I[T]=I[E]=!0,I["[object Error]"]=I[l]=I[x]=!1;var R="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,O="object"==typeof self&&self&&self.Object===Object&&self,D=R||O||Function("return this")(),z=e&&!e.nodeType&&e,F=z&&t&&!t.nodeType&&t,B=F&&F.exports===z;function H(t,e){return t.set(e[0],e[1]),t}function q(t,e){return t.add(e),t}function j(t,e,i,n){var r=-1,s=t?t.length:0;for(n&&s&&(i=t[++r]);++r<s;)i=e(i,t[r],r,t);return i}function G(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function X(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function V(t,e){return function(i){return t(e(i))}}function W(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var Y,U=Array.prototype,$=Function.prototype,K=Object.prototype,Z=D["__core-js_shared__"],J=(Y=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Q=$.toString,tt=K.hasOwnProperty,et=K.toString,it=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=B?D.Buffer:void 0,rt=D.Symbol,st=D.Uint8Array,at=V(Object.getPrototypeOf,Object),ot=Object.create,lt=K.propertyIsEnumerable,ht=U.splice,ct=Object.getOwnPropertySymbols,dt=nt?nt.isBuffer:void 0,ut=V(Object.keys,Object),pt=Ft(D,"DataView"),ft=Ft(D,"Map"),gt=Ft(D,"Promise"),mt=Ft(D,"Set"),bt=Ft(D,"WeakMap"),xt=Ft(Object,"create"),vt=Gt(pt),yt=Gt(ft),wt=Gt(gt),kt=Gt(mt),At=Gt(bt),St=rt?rt.prototype:void 0,Ct=St?St.valueOf:void 0;function _t(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Mt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Et(t){this.__data__=new Mt(t)}function Nt(t,e){var i=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Wt(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],n=i.length,r=!!n;for(var a in t)!e&&!tt.call(t,a)||r&&("length"==a||qt(a,n))||i.push(a);return i}function Pt(t,e,i){var n=t[e];tt.call(t,e)&&Xt(n,i)&&(void 0!==i||e in t)||(t[e]=i)}function Lt(t,e){for(var i=t.length;i--;)if(Xt(t[i][0],e))return i;return-1}function It(t,e,i,n,r,p,x){var P;if(n&&(P=p?n(t,r,p,x):n(t)),void 0!==P)return P;if(!$t(t))return t;var L=Vt(t);if(L){if(P=function(t){var e=t.length,i=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!e)return function(t,e){var i=-1,n=t.length;e||(e=Array(n));for(;++i<n;)e[i]=t[i];return e}(t,P)}else{var R=Ht(t),O=R==l||R==h;if(Yt(t))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(t,e);if(R==u||R==s||O&&!p){if(G(t))return p?t:{};if(P=function(t){return"function"!=typeof t.constructor||jt(t)?{}:(e=at(t),$t(e)?ot(e):{});var e}(O?{}:t),!e)return function(t,e){return Dt(t,Bt(t),e)}(t,function(t,e){return t&&Dt(e,Kt(e),t)}(P,t))}else{if(!I[R])return p?t:{};P=function(t,e,i,n){var r=t.constructor;switch(e){case v:return Ot(t);case a:case o:return new r(+t);case y:return function(t,e){var i=e?Ot(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,n);case w:case k:case A:case S:case C:case _:case M:case T:case E:return function(t,e){var i=e?Ot(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,n);case c:return function(t,e,i){var n=e?i(X(t),!0):X(t);return j(n,H,new t.constructor)}(t,n,i);case d:case m:return new r(t);case f:return function(t){var e=new t.constructor(t.source,N.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,i){var n=e?i(W(t),!0):W(t);return j(n,q,new t.constructor)}(t,n,i);case b:return s=t,Ct?Object(Ct.call(s)):{}}var s}(t,R,It,e)}}x||(x=new Et);var D=x.get(t);if(D)return D;if(x.set(t,P),!L)var z=i?function(t){return function(t,e,i){var n=e(t);return Vt(t)?n:function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}(n,i(t))}(t,Kt,Bt)}(t):Kt(t);return function(t,e){for(var i=-1,n=t?t.length:0;++i<n&&!1!==e(t[i],i,t););}(z||t,(function(r,s){z&&(r=t[s=r]),Pt(P,s,It(r,e,i,n,s,t,x))})),P}function Rt(t){return!(!$t(t)||(e=t,J&&J in e))&&(Ut(t)||G(t)?it:P).test(Gt(t));var e}function Ot(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function Dt(t,e,i,n){i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],o=n?n(i[a],t[a],a,i,t):void 0;Pt(i,a,void 0===o?t[a]:o)}return i}function zt(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Ft(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Rt(i)?i:void 0}_t.prototype.clear=function(){this.__data__=xt?xt(null):{}},_t.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},_t.prototype.get=function(t){var e=this.__data__;if(xt){var i=e[t];return i===n?void 0:i}return tt.call(e,t)?e[t]:void 0},_t.prototype.has=function(t){var e=this.__data__;return xt?void 0!==e[t]:tt.call(e,t)},_t.prototype.set=function(t,e){return this.__data__[t]=xt&&void 0===e?n:e,this},Mt.prototype.clear=function(){this.__data__=[]},Mt.prototype.delete=function(t){var e=this.__data__,i=Lt(e,t);return!(i<0)&&(i==e.length-1?e.pop():ht.call(e,i,1),!0)},Mt.prototype.get=function(t){var e=this.__data__,i=Lt(e,t);return i<0?void 0:e[i][1]},Mt.prototype.has=function(t){return Lt(this.__data__,t)>-1},Mt.prototype.set=function(t,e){var i=this.__data__,n=Lt(i,t);return n<0?i.push([t,e]):i[n][1]=e,this},Tt.prototype.clear=function(){this.__data__={hash:new _t,map:new(ft||Mt),string:new _t}},Tt.prototype.delete=function(t){return zt(this,t).delete(t)},Tt.prototype.get=function(t){return zt(this,t).get(t)},Tt.prototype.has=function(t){return zt(this,t).has(t)},Tt.prototype.set=function(t,e){return zt(this,t).set(t,e),this},Et.prototype.clear=function(){this.__data__=new Mt},Et.prototype.delete=function(t){return this.__data__.delete(t)},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Mt){var n=i.__data__;if(!ft||n.length<199)return n.push([t,e]),this;i=this.__data__=new Tt(n)}return i.set(t,e),this};var Bt=ct?V(ct,Object):function(){return[]},Ht=function(t){return et.call(t)};function qt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<e}function jt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Gt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Xt(t,e){return t===e||t!=t&&e!=e}(pt&&Ht(new pt(new ArrayBuffer(1)))!=y||ft&&Ht(new ft)!=c||gt&&Ht(gt.resolve())!=p||mt&&Ht(new mt)!=g||bt&&Ht(new bt)!=x)&&(Ht=function(t){var e=et.call(t),i=e==u?t.constructor:void 0,n=i?Gt(i):void 0;if(n)switch(n){case vt:return y;case yt:return c;case wt:return p;case kt:return g;case At:return x}return e});var Vt=Array.isArray;function Wt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Ut(t)}var Yt=dt||function(){return!1};function Ut(t){var e=$t(t)?et.call(t):"";return e==l||e==h}function $t(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Kt(t){return Wt(t)?Nt(t):function(t){if(!jt(t))return ut(t);var e=[];for(var i in Object(t))tt.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}t.exports=function(t){return It(t,!0,!0)}},8142:(t,e,i)=>{t=i.nmd(t);var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",l="[object Date]",h="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",p="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",b="[object String]",x="[object Symbol]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",k=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[s]=S[a]=S[y]=S[o]=S[w]=S[l]=S[h]=S[c]=S[d]=S[u]=S[p]=S[g]=S[m]=S[b]=S[v]=!1;var C="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,_="object"==typeof self&&self&&self.Object===Object&&self,M=C||_||Function("return this")(),T=e&&!e.nodeType&&e,E=T&&t&&!t.nodeType&&t,N=E&&E.exports===T,P=N&&C.process,L=function(){try{return P&&P.binding&&P.binding("util")}catch(t){}}(),I=L&&L.isTypedArray;function R(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function O(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function D(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var z,F,B,H=Array.prototype,q=Function.prototype,j=Object.prototype,G=M["__core-js_shared__"],X=q.toString,V=j.hasOwnProperty,W=(z=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",Y=j.toString,U=RegExp("^"+X.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=N?M.Buffer:void 0,K=M.Symbol,Z=M.Uint8Array,J=j.propertyIsEnumerable,Q=H.splice,tt=K?K.toStringTag:void 0,et=Object.getOwnPropertySymbols,it=$?$.isBuffer:void 0,nt=(F=Object.keys,B=Object,function(t){return F(B(t))}),rt=Lt(M,"DataView"),st=Lt(M,"Map"),at=Lt(M,"Promise"),ot=Lt(M,"Set"),lt=Lt(M,"WeakMap"),ht=Lt(Object,"create"),ct=Dt(rt),dt=Dt(st),ut=Dt(at),pt=Dt(ot),ft=Dt(lt),gt=K?K.prototype:void 0,mt=gt?gt.valueOf:void 0;function bt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function xt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function vt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function yt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new vt;++e<i;)this.add(t[e])}function wt(t){var e=this.__data__=new xt(t);this.size=e.size}function kt(t,e){var i=Bt(t),n=!i&&Ft(t),r=!i&&!n&&Ht(t),s=!i&&!n&&!r&&Vt(t),a=i||n||r||s,o=a?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=o.length;for(var h in t)!e&&!V.call(t,h)||a&&("length"==h||r&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Ot(h,l))||o.push(h);return o}function At(t,e){for(var i=t.length;i--;)if(zt(t[i][0],e))return i;return-1}function St(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?function(t){var e=V.call(t,tt),i=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var r=Y.call(t);n&&(e?t[tt]=i:delete t[tt]);return r}(t):function(t){return Y.call(t)}(t)}function Ct(t){return Xt(t)&&St(t)==s}function _t(t,e,i,n,r){return t===e||(null==t||null==e||!Xt(t)&&!Xt(e)?t!=t&&e!=e:function(t,e,i,n,r,c){var f=Bt(t),v=Bt(e),k=f?a:Rt(t),A=v?a:Rt(e),S=(k=k==s?p:k)==p,C=(A=A==s?p:A)==p,_=k==A;if(_&&Ht(t)){if(!Ht(e))return!1;f=!0,S=!1}if(_&&!S)return c||(c=new wt),f||Vt(t)?Et(t,e,i,n,r,c):function(t,e,i,n,r,s,a){switch(i){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!s(new Z(t),new Z(e)));case o:case l:case u:return zt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case g:case b:return t==e+"";case d:var c=O;case m:var p=1&n;if(c||(c=D),t.size!=e.size&&!p)return!1;var f=a.get(t);if(f)return f==e;n|=2,a.set(t,e);var v=Et(c(t),c(e),n,r,s,a);return a.delete(t),v;case x:if(mt)return mt.call(t)==mt.call(e)}return!1}(t,e,k,i,n,r,c);if(!(1&i)){var M=S&&V.call(t,"__wrapped__"),T=C&&V.call(e,"__wrapped__");if(M||T){var E=M?t.value():t,N=T?e.value():e;return c||(c=new wt),r(E,N,i,n,c)}}if(!_)return!1;return c||(c=new wt),function(t,e,i,n,r,s){var a=1&i,o=Nt(t),l=o.length,h=Nt(e),c=h.length;if(l!=c&&!a)return!1;var d=l;for(;d--;){var u=o[d];if(!(a?u in e:V.call(e,u)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var f=!0;s.set(t,e),s.set(e,t);var g=a;for(;++d<l;){var m=t[u=o[d]],b=e[u];if(n)var x=a?n(b,m,u,e,t,s):n(m,b,u,t,e,s);if(!(void 0===x?m===b||r(m,b,i,n,s):x)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return s.delete(t),s.delete(e),f}(t,e,i,n,r,c)}(t,e,i,n,_t,r))}function Mt(t){return!(!Gt(t)||function(t){return!!W&&W in t}(t))&&(qt(t)?U:k).test(Dt(t))}function Tt(t){if(i=(e=t)&&e.constructor,n="function"==typeof i&&i.prototype||j,e!==n)return nt(t);var e,i,n,r=[];for(var s in Object(t))V.call(t,s)&&"constructor"!=s&&r.push(s);return r}function Et(t,e,i,n,r,s){var a=1&i,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var c=-1,d=!0,u=2&i?new yt:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var p=t[c],f=e[c];if(n)var g=a?n(f,p,c,e,t,s):n(p,f,c,t,e,s);if(void 0!==g){if(g)continue;d=!1;break}if(u){if(!R(e,(function(t,e){if(a=e,!u.has(a)&&(p===t||r(p,t,i,n,s)))return u.push(e);var a}))){d=!1;break}}else if(p!==f&&!r(p,f,i,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Nt(t){return function(t,e,i){var n=e(t);return Bt(t)?n:function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}(n,i(t))}(t,Wt,It)}function Pt(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Lt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(i)?i:void 0}bt.prototype.clear=function(){this.__data__=ht?ht(null):{},this.size=0},bt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bt.prototype.get=function(t){var e=this.__data__;if(ht){var i=e[t];return i===n?void 0:i}return V.call(e,t)?e[t]:void 0},bt.prototype.has=function(t){var e=this.__data__;return ht?void 0!==e[t]:V.call(e,t)},bt.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=ht&&void 0===e?n:e,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var e=this.__data__,i=At(e,t);return!(i<0)&&(i==e.length-1?e.pop():Q.call(e,i,1),--this.size,!0)},xt.prototype.get=function(t){var e=this.__data__,i=At(e,t);return i<0?void 0:e[i][1]},xt.prototype.has=function(t){return At(this.__data__,t)>-1},xt.prototype.set=function(t,e){var i=this.__data__,n=At(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},vt.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(st||xt),string:new bt}},vt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},vt.prototype.get=function(t){return Pt(this,t).get(t)},vt.prototype.has=function(t){return Pt(this,t).has(t)},vt.prototype.set=function(t,e){var i=Pt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,n),this},yt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.clear=function(){this.__data__=new xt,this.size=0},wt.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof xt){var n=i.__data__;if(!st||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new vt(n)}return i.set(t,e),this.size=i.size,this};var It=et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[r++]=a)}return s}(et(t),(function(e){return J.call(t,e)})))}:function(){return[]},Rt=St;function Ot(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||A.test(t))&&t>-1&&t%1==0&&t<e}function Dt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zt(t,e){return t===e||t!=t&&e!=e}(rt&&Rt(new rt(new ArrayBuffer(1)))!=w||st&&Rt(new st)!=d||at&&Rt(at.resolve())!=f||ot&&Rt(new ot)!=m||lt&&Rt(new lt)!=v)&&(Rt=function(t){var e=St(t),i=e==p?t.constructor:void 0,n=i?Dt(i):"";if(n)switch(n){case ct:return w;case dt:return d;case ut:return f;case pt:return m;case ft:return v}return e});var Ft=Ct(function(){return arguments}())?Ct:function(t){return Xt(t)&&V.call(t,"callee")&&!J.call(t,"callee")},Bt=Array.isArray;var Ht=it||function(){return!1};function qt(t){if(!Gt(t))return!1;var e=St(t);return e==c||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Gt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Xt(t){return null!=t&&"object"==typeof t}var Vt=I?function(t){return function(e){return t(e)}}(I):function(t){return Xt(t)&&jt(t.length)&&!!S[St(t)]};function Wt(t){return null!=(e=t)&&jt(e.length)&&!qt(e)?kt(t):Tt(t);var e}t.exports=function(t,e){return _t(t,e)}},99106:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(67193),r=i(8142);var s;!function(t){t.compose=function(t={},e={},i=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let r=n(e);i||(r=Object.keys(r).reduce(((t,e)=>(null!=r[e]&&(t[e]=r[e]),t)),{}));for(const i in t)void 0!==t[i]&&void 0===e[i]&&(r[i]=t[i]);return Object.keys(r).length>0?r:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const i=Object.keys(t).concat(Object.keys(e)).reduce(((i,n)=>(r(t[n],e[n])||(i[n]=void 0===e[n]?null:e[n]),i)),{});return Object.keys(i).length>0?i:void 0},t.invert=function(t={},e={}){t=t||{};const i=Object.keys(e).reduce(((i,n)=>(e[n]!==t[n]&&void 0!==t[n]&&(i[n]=e[n]),i)),{});return Object.keys(t).reduce(((i,n)=>(t[n]!==e[n]&&void 0===e[n]&&(i[n]=null),i)),i)},t.transform=function(t,e,i=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!i)return e;const n=Object.keys(e).reduce(((i,n)=>(void 0===t[n]&&(i[n]=e[n]),i)),{});return Object.keys(n).length>0?n:void 0}}(s||(s={})),e.default=s},12660:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=i(85606),r=i(67193),s=i(8142),a=i(99106);e.AttributeMap=a.default;const o=i(5759);e.Op=o.default;const l=i(28317);e.OpIterator=l.default;const h=String.fromCharCode(0),c=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const i=Object.keys(t)[0];if(!i||i!==Object.keys(e)[0])throw new Error(`embed types not matched: ${i} != ${Object.keys(e)[0]}`);return[i,t[i],e[i]]};class d{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const i={};return"string"==typeof t&&0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const i={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=r(t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&(e-=1,i=this.ops[e-1],"object"!=typeof i))return this.ops.unshift(t),this;if(s(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],i=[];return this.forEach((n=>{(t(n)?e:i).push(n)})),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+o.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+o.default.length(e)),0)}slice(t=0,e=1/0){const i=[],n=new l.default(this.ops);let r=0;for(;r<e&&n.hasNext();){let s;r<t?s=n.next(t-r):(s=n.next(e-r),i.push(s)),r+=o.default.length(s)}return new d(i)}compose(t){const e=new l.default(this.ops),i=new l.default(t.ops),n=[],r=i.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let t=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),n.push(e.next());r.retain-t>0&&i.next(r.retain-t)}const o=new d(n);for(;e.hasNext()||i.hasNext();)if("insert"===i.peekType())o.push(i.next());else if("delete"===e.peekType())o.push(e.next());else{const t=Math.min(e.peekLength(),i.peekLength()),n=e.next(t),r=i.next(t);if(r.retain){const l={};if("number"==typeof n.retain)l.retain="number"==typeof r.retain?t:r.retain;else if("number"==typeof r.retain)null==n.retain?l.insert=n.insert:l.retain=n.retain;else{const t=null==n.retain?"insert":"retain",[e,i,s]=c(n[t],r.retain),a=d.getHandler(e);l[t]={[e]:a.compose(i,s,"retain"===t)}}const h=a.default.compose(n.attributes,r.attributes,"number"==typeof n.retain);if(h&&(l.attributes=h),o.push(l),!i.hasNext()&&s(o.ops[o.ops.length-1],l)){const t=new d(e.rest());return o.concat(t).chop()}}else"number"==typeof r.delete&&("number"==typeof n.retain||"object"==typeof n.retain&&null!==n.retain)&&o.push(r)}return o.chop()}concat(t){const e=new d(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new d;const i=[this,t].map((e=>e.map((i=>{if(null!=i.insert)return"string"==typeof i.insert?i.insert:h;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),r=new d,o=n(i[0],i[1],e,!0),c=new l.default(this.ops),u=new l.default(t.ops);return o.forEach((t=>{let e=t[1].length;for(;e>0;){let i=0;switch(t[0]){case n.INSERT:i=Math.min(u.peekLength(),e),r.push(u.next(i));break;case n.DELETE:i=Math.min(e,c.peekLength()),c.next(i),r.delete(i);break;case n.EQUAL:i=Math.min(c.peekLength(),u.peekLength(),e);const t=c.next(i),o=u.next(i);s(t.insert,o.insert)?r.retain(i,a.default.diff(t.attributes,o.attributes)):r.push(o).delete(i)}e-=i}})),r.chop()}eachLine(t,e="\n"){const i=new l.default(this.ops);let n=new d,r=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const s=i.peek(),a=o.default.length(s)-i.peekLength(),l="string"==typeof s.insert?s.insert.indexOf(e,a)-a:-1;if(l<0)n.push(i.next());else if(l>0)n.push(i.next(l));else{if(!1===t(n,i.next(1).attributes||{},r))return;r+=1,n=new d}}n.length()>0&&t(n,{},r)}invert(t){const e=new d;return this.reduce(((i,n)=>{if(n.insert)e.delete(o.default.length(n));else{if("number"==typeof n.retain&&null==n.attributes)return e.retain(n.retain),i+n.retain;if(n.delete||"number"==typeof n.retain){const r=n.delete||n.retain;return t.slice(i,i+r).forEach((t=>{n.delete?e.push(t):n.retain&&n.attributes&&e.retain(o.default.length(t),a.default.invert(n.attributes,t.attributes))})),i+r}if("object"==typeof n.retain&&null!==n.retain){const r=t.slice(i,i+1),s=new l.default(r.ops).next(),[o,h,u]=c(n.retain,s.insert),p=d.getHandler(o);return e.retain({[o]:p.invert(h,u)},a.default.invert(n.attributes,s.attributes)),i+1}}return i}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const i=t,n=new l.default(this.ops),r=new l.default(i.ops),s=new d;for(;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())s.push(r.next());else{const t=Math.min(n.peekLength(),r.peekLength()),i=n.next(t),o=r.next(t);if(i.delete)continue;if(o.delete)s.push(o);else{const n=i.retain,r=o.retain;let l="object"==typeof r&&null!==r?r:t;if("object"==typeof n&&null!==n&&"object"==typeof r&&null!==r){const t=Object.keys(n)[0];if(t===Object.keys(r)[0]){const i=d.getHandler(t);i&&(l={[t]:i.transform(n[t],r[t],e)})}}s.retain(l,a.default.transform(i.attributes,o.attributes,e))}}else s.retain(o.default.length(n.next()));return s.chop()}transformPosition(t,e=!1){e=!!e;const i=new l.default(this.ops);let n=0;for(;i.hasNext()&&n<=t;){const r=i.peekLength(),s=i.peekType();i.next(),"delete"!==s?("insert"===s&&(n<t||!e)&&(t+=r),n+=r):t-=Math.min(r,t-n)}return t}}d.Op=o.default,d.OpIterator=l.default,d.AttributeMap=a.default,d.handlers={},e.default=d,t.exports=d,t.exports.default=d},5759:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(i||(i={})),e.default=i},28317:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5759);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const i=this.offset,r=n.default.length(e);if(t>=r-i?(t=r-i,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=t:"object"==typeof e.retain&&null!==e.retain?n.retain=e.retain:"string"==typeof e.insert?n.insert=e.insert.substr(i,t):n.insert=e.insert,n}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(n)}}return[]}}},15697:()=>{"use strict";var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};function e(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var i=function(t,e){this.target=e,this.type=t},n=function(t){function i(e,i){var n=t.call(this,"error",i)||this;return n.message=e.message,n.error=e,n}return e(i,t),i}(i),r=function(t){function i(e,i,n){void 0===e&&(e=1e3),void 0===i&&(i="");var r=t.call(this,"close",n)||this;return r.wasClean=!0,r.code=e,r.reason=i,r}return e(i,t),i}(i),s=function(){if("undefined"!=typeof WebSocket)return WebSocket},a={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};!function(){function t(t,e,i){var n=this;void 0===i&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(t){n._debug("open event");var e=n._options.minUptime,i=void 0===e?a.minUptime:e;clearTimeout(n._connectTimeout),n._uptimeTimeout=setTimeout((function(){return n._acceptOpen()}),i),n._ws.binaryType=n._binaryType,n._messageQueue.forEach((function(t){return n._ws.send(t)})),n._messageQueue=[],n.onopen&&n.onopen(t),n._listeners.open.forEach((function(e){return n._callEventListener(t,e)}))},this._handleMessage=function(t){n._debug("message event"),n.onmessage&&n.onmessage(t),n._listeners.message.forEach((function(e){return n._callEventListener(t,e)}))},this._handleError=function(t){n._debug("error event",t.message),n._disconnect(void 0,"TIMEOUT"===t.message?"timeout":void 0),n.onerror&&n.onerror(t),n._debug("exec error listeners"),n._listeners.error.forEach((function(e){return n._callEventListener(t,e)})),n._connect()},this._handleClose=function(t){n._debug("close event"),n._clearTimeouts(),n._shouldReconnect&&n._connect(),n.onclose&&n.onclose(t),n._listeners.close.forEach((function(e){return n._callEventListener(t,e)}))},this._url=t,this._protocols=e,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}Object.defineProperty(t,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CONNECTING",{get:function(){return t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPEN",{get:function(){return t.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSING",{get:function(){return t.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSED",{get:function(){return t.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(t){this._binaryType=t,this._ws&&(this._ws.binaryType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(t,e){return"string"==typeof e?t+=e.length:e instanceof Blob?t+=e.size:t+=e.byteLength,t}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?t.CLOSED:t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),t.prototype.close=function(t,e){void 0===t&&(t=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(t,e):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},t.prototype.reconnect=function(t,e){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(t,e),this._connect()):this._connect()},t.prototype.send=function(t){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",t),this._ws.send(t);else{var e=this._options.maxEnqueuedMessages,i=void 0===e?a.maxEnqueuedMessages:e;this._messageQueue.length<i&&(this._debug("enqueue",t),this._messageQueue.push(t))}},t.prototype.addEventListener=function(t,e){this._listeners[t]&&this._listeners[t].push(e)},t.prototype.dispatchEvent=function(t){var e,i,n=this._listeners[t.type];if(n)try{for(var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}(n),s=r.next();!s.done;s=r.next()){var a=s.value;this._callEventListener(t,a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return!0},t.prototype.removeEventListener=function(t,e){this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter((function(t){return t!==e})))},t.prototype._debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._options.debug},t.prototype._getNextDelay=function(){var t=this._options,e=t.reconnectionDelayGrowFactor,i=void 0===e?a.reconnectionDelayGrowFactor:e,n=t.minReconnectionDelay,r=void 0===n?a.minReconnectionDelay:n,s=t.maxReconnectionDelay,o=void 0===s?a.maxReconnectionDelay:s,l=0;return this._retryCount>0&&(l=r*Math.pow(i,this._retryCount-1))>o&&(l=o),this._debug("next delay",l),l},t.prototype._wait=function(){var t=this;return new Promise((function(e){setTimeout(e,t._getNextDelay())}))},t.prototype._getNextUrl=function(t){if("string"==typeof t)return Promise.resolve(t);if("function"==typeof t){var e=t();if("string"==typeof e)return Promise.resolve(e);if(e.then)return e}throw Error("Invalid URL")},t.prototype._connect=function(){var t=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var e=this._options,i=e.maxRetries,n=void 0===i?a.maxRetries:i,r=e.connectionTimeout,o=void 0===r?a.connectionTimeout:r,l=e.WebSocket,h=void 0===l?s():l;if(this._retryCount>=n)this._debug("max retries reached",this._retryCount,">=",n);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=h)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return t._getNextUrl(t._url)})).then((function(e){t._closeCalled||(t._debug("connect",{url:e,protocols:t._protocols}),t._ws=t._protocols?new h(e,t._protocols):new h(e),t._ws.binaryType=t._binaryType,t._connectLock=!1,t._addListeners(),t._connectTimeout=setTimeout((function(){return t._handleTimeout()}),o))}))}}},t.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new n(Error("TIMEOUT"),this))},t.prototype._disconnect=function(t,e){if(void 0===t&&(t=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(t,e),this._handleClose(new r(t,e,this))}catch(t){}}},t.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},t.prototype._callEventListener=function(t,e){"handleEvent"in e?e.handleEvent(t):e(t)},t.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},t.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},t.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}}()},10246:(t,e,i)=>{"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o.apply(this,arguments)}function l(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}i.d(e,{Ay:()=>oe});function h(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var c=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=h(/Edge/i),u=h(/firefox/i),p=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),f=h(/iP(ad|od|hone)/i),g=h(/chrome/i)&&h(/android/i),m={capture:!1,passive:!1};function b(t,e,i){t.addEventListener(e,i,!c&&m)}function x(t,e,i){t.removeEventListener(e,i,!c&&m)}function v(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function y(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function w(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&v(t,e):v(t,e))||n&&t===i)return t;if(t===i)break}while(t=y(t))}return null}var k,A=/\s+/g;function S(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(A," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(A," ")}}function C(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function _(t,e){var i="";if("string"==typeof t)i=t;else do{var n=C(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function M(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,s=n.length;if(i)for(;r<s;r++)i(n[r],r);return n}return[]}function T(){var t=document.scrollingElement;return t||document.documentElement}function E(t,e,i,n,r){if(t.getBoundingClientRect||t===window){var s,a,o,l,h,d,u;if(t!==window&&t.parentNode&&t!==T()?(a=(s=t.getBoundingClientRect()).top,o=s.left,l=s.bottom,h=s.right,d=s.height,u=s.width):(a=0,o=0,l=window.innerHeight,h=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||i)&&t!==window&&(r=r||t.parentNode,!c))do{if(r&&r.getBoundingClientRect&&("none"!==C(r,"transform")||i&&"static"!==C(r,"position"))){var p=r.getBoundingClientRect();a-=p.top+parseInt(C(r,"border-top-width")),o-=p.left+parseInt(C(r,"border-left-width")),l=a+s.height,h=o+s.width;break}}while(r=r.parentNode);if(n&&t!==window){var f=_(r||t),g=f&&f.a,m=f&&f.d;f&&(l=(a/=m)+(d/=m),h=(o/=g)+(u/=g))}return{top:a,left:o,bottom:l,right:h,width:u,height:d}}}function N(t,e,i){for(var n=O(t,!0),r=E(t)[e];n;){var s=E(n)[i];if(!("top"===i||"left"===i?r>=s:r<=s))return n;if(n===T())break;n=O(n,!1)}return!1}function P(t,e,i,n){for(var r=0,s=0,a=t.children;s<a.length;){if("none"!==a[s].style.display&&a[s]!==Ht.ghost&&(n||a[s]!==Ht.dragged)&&w(a[s],i.draggable,t,!1)){if(r===e)return a[s];r++}s++}return null}function L(t,e){for(var i=t.lastElementChild;i&&(i===Ht.ghost||"none"===C(i,"display")||e&&!v(i,e));)i=i.previousElementSibling;return i||null}function I(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Ht.clone||e&&!v(t,e)||i++;return i}function R(t){var e=0,i=0,n=T();if(t)do{var r=_(t),s=r.a,a=r.d;e+=t.scrollLeft*s,i+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,i]}function O(t,e){if(!t||!t.getBoundingClientRect)return T();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=C(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i.getBoundingClientRect||i===document.body)return T();if(n||e)return i;n=!0}}}while(i=i.parentNode);return T()}function D(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function z(t,e){return function(){if(!k){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),k=setTimeout((function(){k=void 0}),e)}}}function F(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function B(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function H(t,e,i){var n={};return Array.from(t.children).forEach((function(r){var s,a,o,l;if(w(r,e.draggable,t,!1)&&!r.animated&&r!==i){var h=E(r);n.left=Math.min(null!==(s=n.left)&&void 0!==s?s:1/0,h.left),n.top=Math.min(null!==(a=n.top)&&void 0!==a?a:1/0,h.top),n.right=Math.max(null!==(o=n.right)&&void 0!==o?o:-1/0,h.right),n.bottom=Math.max(null!==(l=n.bottom)&&void 0!==l?l:-1/0,h.bottom)}})),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var q="Sortable"+(new Date).getTime();function j(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==C(t,"display")&&t!==Ht.ghost){e.push({target:t,rect:E(t)});var i=r({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=_(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var r=!1,s=0;e.forEach((function(t){var e=0,i=t.target,a=i.fromRect,o=E(i),l=i.prevFromRect,h=i.prevToRect,c=t.rect,d=_(i,!0);d&&(o.top-=d.f,o.left-=d.e),i.toRect=o,i.thisAnimationDuration&&D(l,o)&&!D(a,o)&&(c.top-o.top)/(c.left-o.left)==(a.top-o.top)/(a.left-o.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(c,l,h,n.options)),D(o,a)||(i.prevFromRect=a,i.prevToRect=o,e||(e=n.options.animation),n.animate(i,c,o,e)),e&&(r=!0,s=Math.max(s,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"==typeof i&&i()}),s):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){C(t,"transition",""),C(t,"transform","");var r=_(this.el),s=r&&r.a,a=r&&r.d,o=(e.left-i.left)/(s||1),l=(e.top-i.top)/(a||1);t.animatingX=!!o,t.animatingY=!!l,C(t,"transform","translate3d("+o+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),C(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),C(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){C(t,"transition",""),C(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var G=[],X={initializeByDefault:!0},V={mount:function(t){for(var e in X)X.hasOwnProperty(e)&&!(e in t)&&(t[e]=X[e]);G.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),G.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=t+"Global";G.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][s]&&e[n.pluginName][s](r({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](r({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var r in G.forEach((function(n){var r=n.pluginName;if(t.options[r]||n.initializeByDefault){var s=new n(t,e,t.options);s.sortable=t,s.options=t.options,t[r]=s,o(i,s.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);void 0!==s&&(t.options[r]=s)}},getEventProperties:function(t,e){var i={};return G.forEach((function(n){"function"==typeof n.eventProperties&&o(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return G.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(n=r.optionListeners[e].call(t[r.pluginName],i))})),n}};function W(t){var e=t.sortable,i=t.rootEl,n=t.name,s=t.targetEl,a=t.cloneEl,o=t.toEl,l=t.fromEl,h=t.oldIndex,u=t.newIndex,p=t.oldDraggableIndex,f=t.newDraggableIndex,g=t.originalEvent,m=t.putSortable,b=t.extraEventProperties;if(e=e||i&&i[q]){var x,v=e.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||c||d?(x=document.createEvent("Event")).initEvent(n,!0,!0):x=new CustomEvent(n,{bubbles:!0,cancelable:!0}),x.to=o||i,x.from=l||i,x.item=s||i,x.clone=a,x.oldIndex=h,x.newIndex=u,x.oldDraggableIndex=p,x.newDraggableIndex=f,x.originalEvent=g,x.pullMode=m?m.lastPutMode:void 0;var w=r(r({},b),V.getEventProperties(n,e));for(var k in w)x[k]=w[k];i&&i.dispatchEvent(x),v[y]&&v[y].call(e,x)}}var Y=["evt"],U=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=l(i,Y);V.pluginEvent.bind(Ht)(t,e,r({dragEl:K,parentEl:Z,ghostEl:J,rootEl:Q,nextEl:tt,lastDownEl:et,cloneEl:it,cloneHidden:nt,dragStarted:mt,putSortable:ht,activeSortable:Ht.active,originalEvent:n,oldIndex:rt,oldDraggableIndex:at,newIndex:st,newDraggableIndex:ot,hideGhostForTarget:Dt,unhideGhostForTarget:zt,cloneNowHidden:function(){nt=!0},cloneNowShown:function(){nt=!1},dispatchSortableEvent:function(t){$({sortable:e,name:t,originalEvent:n})}},s))};function $(t){W(r({putSortable:ht,cloneEl:it,targetEl:K,rootEl:Q,oldIndex:rt,oldDraggableIndex:at,newIndex:st,newDraggableIndex:ot},t))}var K,Z,J,Q,tt,et,it,nt,rt,st,at,ot,lt,ht,ct,dt,ut,pt,ft,gt,mt,bt,xt,vt,yt,wt=!1,kt=!1,At=[],St=!1,Ct=!1,_t=[],Mt=!1,Tt=[],Et="undefined"!=typeof document,Nt=f,Pt=d||c?"cssFloat":"float",Lt=Et&&!g&&!f&&"draggable"in document.createElement("div"),It=function(){if(Et){if(c)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Rt=function(t,e){var i=C(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=P(t,0,e),s=P(t,1,e),a=r&&C(r),o=s&&C(s),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+E(r).width,h=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+E(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!s||"both"!==o.clear&&o.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===i[Pt]||s&&"none"===i[Pt]&&l+h>n)?"vertical":"horizontal"},Ot=function(t){function e(t,i){return function(n,r,s,a){var o=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(i||o))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,r,s,a),i)(n,r,s,a);var l=(i?n:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==s(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},Dt=function(){!It&&J&&C(J,"display","none")},zt=function(){!It&&J&&C(J,"display","")};Et&&!g&&document.addEventListener("click",(function(t){if(kt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),kt=!1,!1}),!0);var Ft=function(t){if(K){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,s=t.clientY,At.some((function(t){var e=t[q].options.emptyInsertThreshold;if(e&&!L(t)){var i=E(t),n=r>=i.left-e&&r<=i.right+e,o=s>=i.top-e&&s<=i.bottom+e;return n&&o?a=t:void 0}})),a);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[q]._onDragOver(i)}}var r,s,a},Bt=function(t){K&&K.parentNode[q]._isOutsideThisEl(t.target)};function Ht(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=o({},e),t[q]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ht.supportPointer&&"PointerEvent"in window&&(!p||f),emptyInsertThreshold:5};for(var n in V.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var r in Ot(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Lt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?b(t,"pointerdown",this._onTapStart):(b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),At.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),o(this,j())}function qt(t,e,i,n,r,s,a,o){var l,h,u=t[q],p=u.options.onMove;return!window.CustomEvent||c||d?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=r||e,l.relatedRect=s||E(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),p&&(h=p.call(u,l,a)),h}function jt(t){t.draggable=!1}function Gt(){Mt=!1}function Xt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Vt(t){return setTimeout(t,0)}function Wt(t){return clearTimeout(t)}Ht.prototype={constructor:Ht,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(bt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,K):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,r=n.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,o=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||o,h=n.filter;if(function(t){Tt.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&Tt.push(n)}}(i),!K&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!p||!o||"SELECT"!==o.tagName.toUpperCase())&&!((o=w(o,n.draggable,i,!1))&&o.animated||et===o)){if(rt=I(o),at=I(o,n.draggable),"function"==typeof h){if(h.call(this,t,o,this))return $({sortable:e,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),U("filter",e,{evt:t}),void(r&&t.preventDefault())}else if(h&&(h=h.split(",").some((function(n){if(n=w(l,n.trim(),i,!1))return $({sortable:e,rootEl:n,name:"filter",targetEl:o,fromEl:i,toEl:i}),U("filter",e,{evt:t}),!0}))))return void(r&&t.preventDefault());n.handle&&!w(l,n.handle,i,!1)||this._prepareDragStart(t,a,o)}}},_prepareDragStart:function(t,e,i){var n,r=this,s=r.el,a=r.options,o=s.ownerDocument;if(i&&!K&&i.parentNode===s){var l=E(i);if(Q=s,Z=(K=i).parentNode,tt=K.nextSibling,et=i,lt=a.group,Ht.dragged=K,ct={target:K,clientX:(e||t).clientX,clientY:(e||t).clientY},ft=ct.clientX-l.left,gt=ct.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,K.style["will-change"]="all",n=function(){U("delayEnded",r,{evt:t}),Ht.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!u&&r.nativeDraggable&&(K.draggable=!0),r._triggerDragStart(t,e),$({sortable:r,name:"choose",originalEvent:t}),S(K,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){M(K,t.trim(),jt)})),b(o,"dragover",Ft),b(o,"mousemove",Ft),b(o,"touchmove",Ft),a.supportPointer?(b(o,"pointerup",r._onDrop),!this.nativeDraggable&&b(o,"pointercancel",r._onDrop)):(b(o,"mouseup",r._onDrop),b(o,"touchend",r._onDrop),b(o,"touchcancel",r._onDrop)),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),U("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(d||c))n();else{if(Ht.eventCanceled)return void this._onDrop();a.supportPointer?(b(o,"pointerup",r._disableDelayedDrag),b(o,"pointercancel",r._disableDelayedDrag)):(b(o,"mouseup",r._disableDelayedDrag),b(o,"touchend",r._disableDelayedDrag),b(o,"touchcancel",r._disableDelayedDrag)),b(o,"mousemove",r._delayedDragTouchMoveHandler),b(o,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&b(o,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&jt(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._disableDelayedDrag),x(t,"touchend",this._disableDelayedDrag),x(t,"touchcancel",this._disableDelayedDrag),x(t,"pointerup",this._disableDelayedDrag),x(t,"pointercancel",this._disableDelayedDrag),x(t,"mousemove",this._delayedDragTouchMoveHandler),x(t,"touchmove",this._delayedDragTouchMoveHandler),x(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?b(document,"pointermove",this._onTouchMove):b(document,e?"touchmove":"mousemove",this._onTouchMove):(b(K,"dragend",this),b(Q,"dragstart",this._onDragStart));try{document.selection?Vt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(wt=!1,Q&&K){U("dragStarted",this,{evt:e}),this.nativeDraggable&&b(document,"dragover",Bt);var i=this.options;!t&&S(K,i.dragClass,!1),S(K,i.ghostClass,!0),Ht.active=this,t&&this._appendGhost(),$({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(dt){this._lastX=dt.clientX,this._lastY=dt.clientY,Dt();for(var t=document.elementFromPoint(dt.clientX,dt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(dt.clientX,dt.clientY))!==e;)e=t;if(K.parentNode[q]._isOutsideThisEl(t),e)do{if(e[q]){if(e[q]._onDragOver({clientX:dt.clientX,clientY:dt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=y(e));zt()}},_onTouchMove:function(t){if(ct){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,r=t.touches?t.touches[0]:t,s=J&&_(J,!0),a=J&&s&&s.a,o=J&&s&&s.d,l=Nt&&yt&&R(yt),h=(r.clientX-ct.clientX+n.x)/(a||1)+(l?l[0]-_t[0]:0)/(a||1),c=(r.clientY-ct.clientY+n.y)/(o||1)+(l?l[1]-_t[1]:0)/(o||1);if(!Ht.active&&!wt){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(J){s?(s.e+=h-(ut||0),s.f+=c-(pt||0)):s={a:1,b:0,c:0,d:1,e:h,f:c};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");C(J,"webkitTransform",d),C(J,"mozTransform",d),C(J,"msTransform",d),C(J,"transform",d),ut=h,pt=c,dt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!J){var t=this.options.fallbackOnBody?document.body:Q,e=E(K,!0,Nt,!0,t),i=this.options;if(Nt){for(yt=t;"static"===C(yt,"position")&&"none"===C(yt,"transform")&&yt!==document;)yt=yt.parentNode;yt!==document.body&&yt!==document.documentElement?(yt===document&&(yt=T()),e.top+=yt.scrollTop,e.left+=yt.scrollLeft):yt=T(),_t=R(yt)}S(J=K.cloneNode(!0),i.ghostClass,!1),S(J,i.fallbackClass,!0),S(J,i.dragClass,!0),C(J,"transition",""),C(J,"transform",""),C(J,"box-sizing","border-box"),C(J,"margin",0),C(J,"top",e.top),C(J,"left",e.left),C(J,"width",e.width),C(J,"height",e.height),C(J,"opacity","0.8"),C(J,"position",Nt?"absolute":"fixed"),C(J,"zIndex","100000"),C(J,"pointerEvents","none"),Ht.ghost=J,t.appendChild(J),C(J,"transform-origin",ft/parseInt(J.style.width)*100+"% "+gt/parseInt(J.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,r=i.options;U("dragStart",this,{evt:t}),Ht.eventCanceled?this._onDrop():(U("setupClone",this),Ht.eventCanceled||((it=B(K)).removeAttribute("id"),it.draggable=!1,it.style["will-change"]="",this._hideClone(),S(it,this.options.chosenClass,!1),Ht.clone=it),i.cloneId=Vt((function(){U("clone",i),Ht.eventCanceled||(i.options.removeCloneOnHide||Q.insertBefore(it,K),i._hideClone(),$({sortable:i,name:"clone"}))})),!e&&S(K,r.dragClass,!0),e?(kt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(x(document,"mouseup",i._onDrop),x(document,"touchend",i._onDrop),x(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(i,n,K)),b(document,"drop",i),C(K,"transform","translateZ(0)")),wt=!0,i._dragStartId=Vt(i._dragStarted.bind(i,e,t)),b(document,"selectstart",i),mt=!0,window.getSelection().removeAllRanges(),p&&C(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,s,a=this.el,o=t.target,l=this.options,h=l.group,c=Ht.active,d=lt===h,u=l.sort,p=ht||c,f=this,g=!1;if(!Mt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=w(o,l.draggable,a,!0),B("dragOver"),Ht.eventCanceled)return g;if(K.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||f._ignoreWhileAnimating===o)return G(!1);if(kt=!1,c&&!l.disabled&&(d?u||(n=Z!==Q):ht===this||(this.lastPutMode=lt.checkPull(this,c,K,t))&&h.checkPut(this,c,K,t))){if(s="vertical"===this._getDirection(t,o),e=E(K),B("dragOverValid"),Ht.eventCanceled)return g;if(n)return Z=Q,j(),this._hideClone(),B("revert"),Ht.eventCanceled||(tt?Q.insertBefore(K,tt):Q.appendChild(K)),G(!0);var m=L(a,l.draggable);if(!m||function(t,e,i){var n=E(L(i.el,i.options.draggable)),r=H(i.el,i.options,J),s=10;return e?t.clientX>r.right+s||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>r.bottom+s||t.clientX>n.right&&t.clientY>n.top}(t,s,this)&&!m.animated){if(m===K)return G(!1);if(m&&a===t.target&&(o=m),o&&(i=E(o)),!1!==qt(Q,a,K,e,o,i,t,!!o))return j(),m&&m.nextSibling?a.insertBefore(K,m.nextSibling):a.appendChild(K),Z=a,X(),G(!0)}else if(m&&function(t,e,i){var n=E(P(i.el,0,i.options,!0)),r=H(i.el,i.options,J),s=10;return e?t.clientX<r.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<r.top-s||t.clientY<n.bottom&&t.clientX<n.left}(t,s,this)){var b=P(a,0,l,!0);if(b===K)return G(!1);if(i=E(o=b),!1!==qt(Q,a,K,e,o,i,t,!1))return j(),a.insertBefore(K,b),Z=a,X(),G(!0)}else if(o.parentNode===a){i=E(o);var x,v,y,k=K.parentNode!==a,A=!function(t,e,i){var n=i?t.left:t.top,r=i?t.right:t.bottom,s=i?t.width:t.height,a=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height;return n===a||r===o||n+s/2===a+l/2}(K.animated&&K.toRect||e,o.animated&&o.toRect||i,s),_=s?"top":"left",M=N(o,"top","top")||N(K,"top","top"),T=M?M.scrollTop:void 0;if(bt!==o&&(v=i[_],St=!1,Ct=!A&&l.invertSwap||k),x=function(t,e,i,n,r,s,a,o){var l=n?t.clientY:t.clientX,h=n?i.height:i.width,c=n?i.top:i.left,d=n?i.bottom:i.right,u=!1;if(!a)if(o&&vt<h*r){if(!St&&(1===xt?l>c+h*s/2:l<d-h*s/2)&&(St=!0),St)u=!0;else if(1===xt?l<c+vt:l>d-vt)return-xt}else if(l>c+h*(1-r)/2&&l<d-h*(1-r)/2)return function(t){return I(K)<I(t)?1:-1}(e);if((u=u||a)&&(l<c+h*s/2||l>d-h*s/2))return l>c+h/2?1:-1;return 0}(t,o,i,s,A?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ct,bt===o),0!==x){var R=I(K);do{R-=x,y=Z.children[R]}while(y&&("none"===C(y,"display")||y===J))}if(0===x||y===o)return G(!1);bt=o,xt=x;var O=o.nextElementSibling,D=!1,z=qt(Q,a,K,e,o,i,t,D=1===x);if(!1!==z)return 1!==z&&-1!==z||(D=1===z),Mt=!0,setTimeout(Gt,30),j(),D&&!O?a.appendChild(K):o.parentNode.insertBefore(K,D?O:o),M&&F(M,0,T-M.scrollTop),Z=K.parentNode,void 0===v||Ct||(vt=Math.abs(v-E(o)[_])),X(),G(!0)}if(a.contains(K))return G(!1)}return!1}function B(l,h){U(l,f,r({evt:t,isOwner:d,axis:s?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:u,fromSortable:p,target:o,completed:G,onMove:function(i,n){return qt(Q,a,K,e,i,E(i),t,n)},changed:X},h))}function j(){B("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function G(e){return B("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(f),f!==p&&(S(K,ht?ht.options.ghostClass:c.options.ghostClass,!1),S(K,l.ghostClass,!0)),ht!==f&&f!==Ht.active?ht=f:f===Ht.active&&ht&&(ht=null),p===f&&(f._ignoreWhileAnimating=o),f.animateAll((function(){B("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(o===K&&!K.animated||o===a&&!o.animated)&&(bt=null),l.dragoverBubble||t.rootEl||o===document||(K.parentNode[q]._isOutsideThisEl(t.target),!e&&Ft(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function X(){st=I(K),ot=I(K,l.draggable),$({sortable:f,name:"change",toEl:a,newIndex:st,newDraggableIndex:ot,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ft),x(document,"mousemove",Ft),x(document,"touchmove",Ft)},_offUpEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._onDrop),x(t,"touchend",this._onDrop),x(t,"pointerup",this._onDrop),x(t,"pointercancel",this._onDrop),x(t,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;st=I(K),ot=I(K,i.draggable),U("drop",this,{evt:t}),Z=K&&K.parentNode,st=I(K),ot=I(K,i.draggable),Ht.eventCanceled||(wt=!1,Ct=!1,St=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Wt(this.cloneId),Wt(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&C(document.body,"user-select",""),C(K,"transform",""),t&&(mt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(Q===Z||ht&&"clone"!==ht.lastPutMode)&&it&&it.parentNode&&it.parentNode.removeChild(it),K&&(this.nativeDraggable&&x(K,"dragend",this),jt(K),K.style["will-change"]="",mt&&!wt&&S(K,ht?ht.options.ghostClass:this.options.ghostClass,!1),S(K,this.options.chosenClass,!1),$({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),Q!==Z?(st>=0&&($({rootEl:Z,name:"add",toEl:Z,fromEl:Q,originalEvent:t}),$({sortable:this,name:"remove",toEl:Z,originalEvent:t}),$({rootEl:Z,name:"sort",toEl:Z,fromEl:Q,originalEvent:t}),$({sortable:this,name:"sort",toEl:Z,originalEvent:t})),ht&&ht.save()):st!==rt&&st>=0&&($({sortable:this,name:"update",toEl:Z,originalEvent:t}),$({sortable:this,name:"sort",toEl:Z,originalEvent:t})),Ht.active&&(null!=st&&-1!==st||(st=rt,ot=at),$({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){U("nulling",this),Q=K=Z=J=tt=it=et=nt=ct=dt=mt=st=ot=rt=at=bt=xt=ht=lt=Ht.dragged=Ht.ghost=Ht.clone=Ht.active=null,Tt.forEach((function(t){t.checked=!0})),Tt.length=ut=pt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":K&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,s=this.options;n<r;n++)w(t=i[n],s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Xt(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var r=n.children[e];w(r,this.options.draggable,n,!1)&&(i[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return w(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=V.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&Ot(i)},destroy:function(){U("destroy",this);var t=this.el;t[q]=null,x(t,"mousedown",this._onTapStart),x(t,"touchstart",this._onTapStart),x(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(t,"dragover",this),x(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),At.splice(At.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!nt){if(U("hideClone",this),Ht.eventCanceled)return;C(it,"display","none"),this.options.removeCloneOnHide&&it.parentNode&&it.parentNode.removeChild(it),nt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(nt){if(U("showClone",this),Ht.eventCanceled)return;K.parentNode!=Q||this.options.group.revertClone?tt?Q.insertBefore(it,tt):Q.appendChild(it):Q.insertBefore(it,K),this.options.group.revertClone&&this.animate(K,it),C(it,"display",""),nt=!1}}else this._hideClone()}},Et&&b(document,"touchmove",(function(t){(Ht.active||wt)&&t.cancelable&&t.preventDefault()})),Ht.utils={on:b,off:x,css:C,find:M,is:function(t,e){return!!w(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:z,closest:w,toggleClass:S,clone:B,index:I,nextTick:Vt,cancelNextTick:Wt,detectDirection:Rt,getChild:P,expando:q},Ht.get=function(t){return t[q]},Ht.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Ht.utils=r(r({},Ht.utils),t.utils)),V.mount(t)}))},Ht.create=function(t,e){return new Ht(t,e)},Ht.version="1.15.6";var Yt,Ut,$t,Kt,Zt,Jt,Qt=[],te=!1;function ee(){Qt.forEach((function(t){clearInterval(t.pid)})),Qt=[]}function ie(){clearInterval(Jt)}var ne=z((function(t,e,i,n){if(e.scroll){var r,s=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,h=T(),c=!1;Ut!==i&&(Ut=i,ee(),Yt=e.scroll,r=e.scrollFn,!0===Yt&&(Yt=O(i,!0)));var d=0,u=Yt;do{var p=u,f=E(p),g=f.top,m=f.bottom,b=f.left,x=f.right,v=f.width,y=f.height,w=void 0,k=void 0,A=p.scrollWidth,S=p.scrollHeight,_=C(p),M=p.scrollLeft,N=p.scrollTop;p===h?(w=v<A&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),k=y<S&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(w=v<A&&("auto"===_.overflowX||"scroll"===_.overflowX),k=y<S&&("auto"===_.overflowY||"scroll"===_.overflowY));var P=w&&(Math.abs(x-s)<=o&&M+v<A)-(Math.abs(b-s)<=o&&!!M),L=k&&(Math.abs(m-a)<=o&&N+y<S)-(Math.abs(g-a)<=o&&!!N);if(!Qt[d])for(var I=0;I<=d;I++)Qt[I]||(Qt[I]={});Qt[d].vx==P&&Qt[d].vy==L&&Qt[d].el===p||(Qt[d].el=p,Qt[d].vx=P,Qt[d].vy=L,clearInterval(Qt[d].pid),0==P&&0==L||(c=!0,Qt[d].pid=setInterval(function(){n&&0===this.layer&&Ht.active._onTouchMove(Zt);var e=Qt[this.layer].vy?Qt[this.layer].vy*l:0,i=Qt[this.layer].vx?Qt[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Ht.dragged.parentNode[q],i,e,t,Zt,Qt[this.layer].el)||F(Qt[this.layer].el,i,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&u!==h&&(u=O(u,!1)));te=c}}),30),re=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,r=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,o=t.unhideGhostForTarget;if(e){var l=i||r;a();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);o(),l&&!l.el.contains(c)&&(s("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function se(){}function ae(){}se.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=P(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:re},o(se,{pluginName:"revertOnSpill"}),ae.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:re},o(ae,{pluginName:"removeOnSpill"});Ht.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):this.options.supportPointer?b(document,"pointermove",this._handleFallbackAutoScroll):e.touches?b(document,"touchmove",this._handleFallbackAutoScroll):b(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),ie(),ee(),clearTimeout(k),k=void 0},nulling:function(){Zt=Ut=Yt=te=Jt=$t=Kt=null,Qt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(n,r);if(Zt=t,e||this.options.forceAutoScrollFallback||d||c||p){ne(t,this.options,s,e);var a=O(s,!0);!te||Jt&&n===$t&&r===Kt||(Jt&&ie(),Jt=setInterval((function(){var s=O(document.elementFromPoint(n,r),!0);s!==a&&(a=s,ee()),ne(t,i.options,s,e)}),10),$t=n,Kt=r)}else{if(!this.options.bubbleScroll||O(s,!0)===T())return void ee();ne(t,this.options,O(s,!1),!1)}}},o(t,{pluginName:"scroll",initializeByDefault:!0})}),Ht.mount(ae,se);const oe=Ht},45448:()=>{},37107:(t,e,i)=>{"use strict";function n(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const a=()=>{};let o={},l={},h=null,c={mark:a,measure:a};try{"undefined"!=typeof window&&(o=window),"undefined"!=typeof document&&(l=document),"undefined"!=typeof MutationObserver&&(h=MutationObserver),"undefined"!=typeof performance&&(c=performance)}catch(t){}const{userAgent:d=""}=o.navigator||{},u=o,p=l,f=h,g=c,m=(u.document,!!p.documentElement&&!!p.head&&"function"==typeof p.addEventListener&&"function"==typeof p.createElement),b=~d.indexOf("MSIE")||~d.indexOf("Trident/");var x={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},v=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],y="classic",w="duotone",k=[y,w,"sharp","sharp-duotone"],A=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),S=["fak","fa-kit","fakd","fa-kit-duotone"],C={fak:"kit","fa-kit":"kit"},_={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},M=["fak","fakd"],T={kit:"fak"},E={"kit-duotone":"fakd"},N={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},P=["fak","fa-kit","fakd","fa-kit-duotone"],L={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},I=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],R=[1,2,3,4,5,6,7,8,9,10],O=R.concat([11,12,13,14,15,16,17,18,19,20]),D=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",N.GROUP,N.SWAP_OPACITY,N.PRIMARY,N.SECONDARY].concat(R.map((t=>"".concat(t,"x")))).concat(O.map((t=>"w-".concat(t))));const z="___FONT_AWESOME___",F=16,B="svg-inline--fa",H="data-fa-i2svg",q="data-fa-pseudo-element",j="data-prefix",G="data-icon",X="fontawesome-i2svg",V=["HTML","HEAD","STYLE","SCRIPT"],W=(()=>{try{return!0}catch(t){return!1}})();function Y(t){return new Proxy(t,{get:(t,e)=>e in t?t[e]:t[y]})}const U=s({},x);U[y]=s(s(s(s({},{"fa-duotone":"duotone"}),x[y]),C),_);const $=Y(U),K=s({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});K[y]=s(s(s(s({},{duotone:"fad"}),K[y]),T),E);const Z=Y(K),J=s({},L);J[y]=s(s({},J[y]),{fak:"fa-kit"});const Q=Y(J),tt=s({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});tt[y]=s(s({},tt[y]),{"fa-kit":"fak"});Y(tt);const et=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,it="fa-layers-text",nt=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,rt=(Y(s({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),st={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},at=["kit",...D],ot=u.FontAwesomeConfig||{};if(p&&"function"==typeof p.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((t=>{let[e,i]=t;const n=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=p.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(e));null!=n&&(ot[i]=n)}))}const lt={styleDefault:"solid",familyDefault:y,cssPrefix:"fa",replacementClass:B,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ot.familyPrefix&&(ot.cssPrefix=ot.familyPrefix);const ht=s(s({},lt),ot);ht.autoReplaceSvg||(ht.observeMutations=!1);const ct={};Object.keys(lt).forEach((t=>{Object.defineProperty(ct,t,{enumerable:!0,set:function(e){ht[t]=e,dt.forEach((t=>t(ct)))},get:function(){return ht[t]}})})),Object.defineProperty(ct,"familyPrefix",{enumerable:!0,set:function(t){ht.cssPrefix=t,dt.forEach((t=>t(ct)))},get:function(){return ht.cssPrefix}}),u.FontAwesomeConfig=ct;const dt=[];const ut=F,pt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function ft(){let t=12,e="";for(;t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function gt(t){const e=[];for(let i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function mt(t){return t.classList?gt(t.classList):(t.getAttribute("class")||"").split(" ").filter((t=>t))}function bt(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xt(t){return Object.keys(t||{}).reduce(((e,i)=>e+"".concat(i,": ").concat(t[i].trim(),";")),"")}function vt(t){return t.size!==pt.size||t.x!==pt.x||t.y!==pt.y||t.rotate!==pt.rotate||t.flipX||t.flipY}function yt(){const t="fa",e=B,i=ct.cssPrefix,n=ct.replacementClass;let r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(i!==t||n!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(i,"-")).replace(a,"--".concat(i,"-")).replace(o,".".concat(n))}return r}let wt=!1;function kt(){ct.autoAddCss&&!wt&&(!function(t){if(!t||!m)return;const e=p.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const i=p.head.childNodes;let n=null;for(let t=i.length-1;t>-1;t--){const e=i[t],r=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(r)>-1&&(n=e)}p.head.insertBefore(e,n)}(yt()),wt=!0)}var At={mixout:()=>({dom:{css:yt,insertCss:kt}}),hooks:()=>({beforeDOMElementCreation(){kt()},beforeI2svg(){kt()}})};const St=u||{};St[z]||(St[z]={}),St[z].styles||(St[z].styles={}),St[z].hooks||(St[z].hooks={}),St[z].shims||(St[z].shims=[]);var Ct=St[z];const _t=[],Mt=function(){p.removeEventListener("DOMContentLoaded",Mt),Tt=1,_t.map((t=>t()))};let Tt=!1;function Et(t){const{tag:e,attributes:i={},children:n=[]}=t;return"string"==typeof t?bt(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce(((e,i)=>e+"".concat(i,'="').concat(bt(t[i]),'" ')),"").trim()}(i),">").concat(n.map(Et).join(""),"</").concat(e,">")}function Nt(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}m&&(Tt=(p.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(p.readyState),Tt||p.addEventListener("DOMContentLoaded",Mt));var Pt=function(t,e,i,n){var r,s,a,o=Object.keys(t),l=o.length,h=void 0!==n?function(t,e){return function(i,n,r,s){return t.call(e,i,n,r,s)}}(e,n):e;for(void 0===i?(r=1,a=t[o[0]]):(r=0,a=i);r<l;r++)a=h(a,t[s=o[r]],s,t);return a};function Lt(t){const e=function(t){const e=[];let i=0;const n=t.length;for(;i<n;){const r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){const n=t.charCodeAt(i++);56320==(64512&n)?e.push(((1023&r)<<10)+(1023&n)+65536):(e.push(r),i--)}else e.push(r)}return e}(t);return 1===e.length?e[0].toString(16):null}function It(t){return Object.keys(t).reduce(((e,i)=>{const n=t[i];return!!n.icon?e[n.iconName]=n.icon:e[i]=n,e}),{})}function Rt(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:n=!1}=i,r=It(e);"function"!=typeof Ct.hooks.addPack||n?Ct.styles[t]=s(s({},Ct.styles[t]||{}),r):Ct.hooks.addPack(t,It(e)),"fas"===t&&Rt("fa",e)}const{styles:Ot,shims:Dt}=Ct,zt=Object.keys(Q),Ft=zt.reduce(((t,e)=>(t[e]=Object.keys(Q[e]),t)),{});let Bt=null,Ht={},qt={},jt={},Gt={},Xt={};function Vt(t,e){const i=e.split("-"),n=i[0],r=i.slice(1).join("-");return n!==t||""===r||(s=r,~at.indexOf(s))?null:r;var s}const Wt=()=>{const t=t=>Pt(Ot,((e,i,n)=>(e[n]=Pt(i,t,{}),e)),{});Ht=t(((t,e,i)=>{if(e[3]&&(t[e[3]]=i),e[2]){e[2].filter((t=>"number"==typeof t)).forEach((e=>{t[e.toString(16)]=i}))}return t})),qt=t(((t,e,i)=>{if(t[i]=i,e[2]){e[2].filter((t=>"string"==typeof t)).forEach((e=>{t[e]=i}))}return t})),Xt=t(((t,e,i)=>{const n=e[2];return t[i]=i,n.forEach((e=>{t[e]=i})),t}));const e="far"in Ot||ct.autoFetchSvg,i=Pt(Dt,((t,i)=>{const n=i[0];let r=i[1];const s=i[2];return"far"!==r||e||(r="fas"),"string"==typeof n&&(t.names[n]={prefix:r,iconName:s}),"number"==typeof n&&(t.unicodes[n.toString(16)]={prefix:r,iconName:s}),t}),{names:{},unicodes:{}});jt=i.names,Gt=i.unicodes,Bt=Jt(ct.styleDefault,{family:ct.familyDefault})};var Yt;function Ut(t,e){return(Ht[t]||{})[e]}function $t(t,e){return(Xt[t]||{})[e]}function Kt(t){return jt[t]||{prefix:null,iconName:null}}function Zt(){return Bt}Yt=t=>{Bt=Jt(t.styleDefault,{family:ct.familyDefault})},dt.push(Yt),Wt();function Jt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:i=y}=e,n=$[i][t];if(i===w&&!t)return"fad";const r=Z[i][t]||Z[i][n],s=t in Ct.styles?t:null;return r||s||null}function Qt(t){return t.sort().filter(((t,e,i)=>i.indexOf(t)===e))}function te(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:i=!1}=e;let n=null;const r=I.concat(P),a=Qt(t.filter((t=>r.includes(t)))),o=Qt(t.filter((t=>!I.includes(t)))),l=a.filter((t=>(n=t,!v.includes(t)))),[h=null]=l,c=function(t){let e=y;const i=zt.reduce(((t,e)=>(t[e]="".concat(ct.cssPrefix,"-").concat(e),t)),{});return k.forEach((n=>{(t.includes(i[n])||t.some((t=>Ft[n].includes(t))))&&(e=n)})),e}(a),d=s(s({},function(t){let e=[],i=null;return t.forEach((t=>{const n=Vt(ct.cssPrefix,t);n?i=n:t&&e.push(t)})),{iconName:i,rest:e}}(o)),{},{prefix:Jt(h,{family:c})});return s(s(s({},d),function(t){const{values:e,family:i,canonical:n,givenPrefix:r="",styles:s={},config:a={}}=t,o=i===w,l=e.includes("fa-duotone")||e.includes("fad"),h="duotone"===a.familyDefault,c="fad"===n.prefix||"fa-duotone"===n.prefix;!o&&(l||h||c)&&(n.prefix="fad");(e.includes("fa-brands")||e.includes("fab"))&&(n.prefix="fab");if(!n.prefix&&ee.includes(i)){if(Object.keys(s).find((t=>ie.includes(t)))||a.autoFetchSvg){const t=A.get(i).defaultShortPrefixId;n.prefix=t,n.iconName=$t(n.prefix,n.iconName)||n.iconName}}"fa"!==n.prefix&&"fa"!==r||(n.prefix=Zt()||"fas");return n}({values:t,family:c,styles:Ot,config:ct,canonical:d,givenPrefix:n})),function(t,e,i){let{prefix:n,iconName:r}=i;if(t||!n||!r)return{prefix:n,iconName:r};const s="fa"===e?Kt(r):{},a=$t(n,r);r=s.iconName||a||r,n=s.prefix||n,"far"!==n||Ot.far||!Ot.fas||ct.autoFetchSvg||(n="fas");return{prefix:n,iconName:r}}(i,n,d))}const ee=k.filter((t=>t!==y||t!==w)),ie=Object.keys(L).filter((t=>t!==y)).map((t=>Object.keys(L[t]))).flat();let ne=[],re={};const se={},ae=Object.keys(se);function oe(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return(re[t]||[]).forEach((t=>{e=t.apply(null,[e,...n])})),e}function le(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(re[t]||[]).forEach((t=>{t.apply(null,i)}))}function he(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return se[t]?se[t].apply(null,e):void 0}function ce(t){"fa"===t.prefix&&(t.prefix="fas");let{iconName:e}=t;const i=t.prefix||Zt();if(e)return e=$t(i,e)||e,Nt(de.definitions,i,e)||Nt(Ct.styles,i,e)}const de=new class{constructor(){this.definitions={}}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=e.reduce(this._pullDefinitions,{});Object.keys(n).forEach((t=>{this.definitions[t]=s(s({},this.definitions[t]||{}),n[t]),Rt(t,n[t]);const e=Q[y][t];e&&Rt(e,n[t]),Wt()}))}reset(){this.definitions={}}_pullDefinitions(t,e){const i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map((e=>{const{prefix:n,iconName:r,icon:s}=i[e],a=s[2];t[n]||(t[n]={}),a.length>0&&a.forEach((e=>{"string"==typeof e&&(t[n][e]=s)})),t[n][r]=s})),t}},ue={i2svg:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m?(le("beforeI2svg",t),he("pseudoElements2svg",t),he("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;var i;!1===ct.autoReplaceSvg&&(ct.autoReplaceSvg=!0),ct.observeMutations=!0,i=()=>{ge({autoReplaceSvgRoot:e}),le("watch",t)},m&&(Tt?setTimeout(i,0):_t.push(i))}},pe={icon:t=>{if(null===t)return null;if("object"==typeof t&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:$t(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){const e=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],i=Jt(t[0]);return{prefix:i,iconName:$t(i,e)||e}}if("string"==typeof t&&(t.indexOf("".concat(ct.cssPrefix,"-"))>-1||t.match(et))){const e=te(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||Zt(),iconName:$t(e.prefix,e.iconName)||e.iconName}}if("string"==typeof t){const e=Zt();return{prefix:e,iconName:$t(e,t)||t}}}},fe={noAuto:()=>{ct.autoReplaceSvg=!1,ct.observeMutations=!1,le("noAuto")},config:ct,dom:ue,parse:pe,library:de,findIconDefinition:ce,toHtml:Et},ge=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:e=p}=t;(Object.keys(Ct.styles).length>0||ct.autoFetchSvg)&&m&&ct.autoReplaceSvg&&fe.dom.i2svg({node:e})};function me(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((t=>Et(t)))}}),Object.defineProperty(t,"node",{get:function(){if(!m)return;const e=p.createElement("div");return e.innerHTML=t.html,e.children}}),t}function be(t){const{icons:{main:e,mask:i},prefix:n,iconName:r,transform:a,symbol:o,title:l,maskId:h,titleId:c,extra:d,watchable:u=!1}=t,{width:p,height:f}=i.found?i:e,g=M.includes(n),m=[ct.replacementClass,r?"".concat(ct.cssPrefix,"-").concat(r):""].filter((t=>-1===d.classes.indexOf(t))).filter((t=>""!==t||!!t)).concat(d.classes).join(" ");let b={children:[],attributes:s(s({},d.attributes),{},{"data-prefix":n,"data-icon":r,class:m,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(f)})};const x=g&&!~d.classes.indexOf("fa-fw")?{width:"".concat(p/f*16*.0625,"em")}:{};u&&(b.attributes[H]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(c||ft())},children:[l]}),delete b.attributes.title);const v=s(s({},b),{},{prefix:n,iconName:r,main:e,mask:i,maskId:h,transform:a,symbol:o,styles:s(s({},x),d.styles)}),{children:y,attributes:w}=i.found&&e.found?he("generateAbstractMask",v)||{children:[],attributes:{}}:he("generateAbstractIcon",v)||{children:[],attributes:{}};return v.children=y,v.attributes=w,o?function(t){let{prefix:e,iconName:i,children:n,attributes:r,symbol:a}=t;const o=!0===a?"".concat(e,"-").concat(ct.cssPrefix,"-").concat(i):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:s(s({},r),{},{id:o}),children:n}]}]}(v):function(t){let{children:e,main:i,mask:n,attributes:r,styles:a,transform:o}=t;if(vt(o)&&i.found&&!n.found){const{width:t,height:e}=i,n={x:t/e/2,y:.5};r.style=xt(s(s({},a),{},{"transform-origin":"".concat(n.x+o.x/16,"em ").concat(n.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(v)}function xe(t){const{content:e,width:i,height:n,transform:r,title:a,extra:o,watchable:l=!1}=t,h=s(s(s({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});l&&(h[H]="");const c=s({},o.styles);vt(r)&&(c.transform=function(t){let{transform:e,width:i=F,height:n=F,startCentered:r=!1}=t,s="";return s+=r&&b?"translate(".concat(e.x/ut-i/2,"em, ").concat(e.y/ut-n/2,"em) "):r?"translate(calc(-50% + ".concat(e.x/ut,"em), calc(-50% + ").concat(e.y/ut,"em)) "):"translate(".concat(e.x/ut,"em, ").concat(e.y/ut,"em) "),s+="scale(".concat(e.size/ut*(e.flipX?-1:1),", ").concat(e.size/ut*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}({transform:r,startCentered:!0,width:i,height:n}),c["-webkit-transform"]=c.transform);const d=xt(c);d.length>0&&(h.style=d);const u=[];return u.push({tag:"span",attributes:h,children:[e]}),a&&u.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),u}const{styles:ve}=Ct;function ye(t){const e=t[0],i=t[1],[n]=t.slice(4);let r=null;return r=Array.isArray(n)?{tag:"g",attributes:{class:"".concat(ct.cssPrefix,"-").concat(st.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ct.cssPrefix,"-").concat(st.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(ct.cssPrefix,"-").concat(st.PRIMARY),fill:"currentColor",d:n[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:e,height:i,icon:r}}const we={found:!1,width:512,height:512};function ke(t,e){let i=e;return"fa"===e&&null!==ct.styleDefault&&(e=Zt()),new Promise(((n,r)=>{if("fa"===i){const i=Kt(t)||{};t=i.iconName||t,e=i.prefix||e}if(t&&e&&ve[e]&&ve[e][t]){return n(ye(ve[e][t]))}!W&&ct.showMissingIcons,n(s(s({},we),{},{icon:ct.showMissingIcons&&t&&he("missingIconAbstract")||{}}))}))}const Ae=()=>{},Se=ct.measurePerformance&&g&&g.mark&&g.measure?g:{mark:Ae,measure:Ae},Ce='FA "6.7.2"',_e=t=>{Se.mark("".concat(Ce," ").concat(t," ends")),Se.measure("".concat(Ce," ").concat(t),"".concat(Ce," ").concat(t," begins"),"".concat(Ce," ").concat(t," ends"))};var Me=t=>(Se.mark("".concat(Ce," ").concat(t," begins")),()=>_e(t));const Te=()=>{};function Ee(t){return"string"==typeof(t.getAttribute?t.getAttribute(H):null)}function Ne(t){return p.createElementNS("http://www.w3.org/2000/svg",t)}function Pe(t){return p.createElement(t)}function Le(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:i=("svg"===t.tag?Ne:Pe)}=e;if("string"==typeof t)return p.createTextNode(t);const n=i(t.tag);Object.keys(t.attributes||[]).forEach((function(e){n.setAttribute(e,t.attributes[e])}));return(t.children||[]).forEach((function(t){n.appendChild(Le(t,{ceFn:i}))})),n}const Ie={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach((t=>{e.parentNode.insertBefore(Le(t),e)})),null===e.getAttribute(H)&&ct.keepOriginalSource){let t=p.createComment(function(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(t){const e=t[0],i=t[1];if(~mt(e).indexOf(ct.replacementClass))return Ie.replace(t);const n=new RegExp("".concat(ct.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){const t=i[0].attributes.class.split(" ").reduce(((t,e)=>(e===ct.replacementClass||e.match(n)?t.toSvg.push(e):t.toNode.push(e),t)),{toNode:[],toSvg:[]});i[0].attributes.class=t.toSvg.join(" "),0===t.toNode.length?e.removeAttribute("class"):e.setAttribute("class",t.toNode.join(" "))}const r=i.map((t=>Et(t))).join("\n");e.setAttribute(H,""),e.innerHTML=r}};function Re(t){t()}function Oe(t,e){const i="function"==typeof e?e:Te;if(0===t.length)i();else{let e=Re;"async"===ct.mutateApproach&&(e=u.requestAnimationFrame||Re),e((()=>{const e=!0===ct.autoReplaceSvg?Ie.replace:Ie[ct.autoReplaceSvg]||Ie.replace,n=Me("mutate");t.map(e),n(),i()}))}}let De=!1;function ze(){De=!0}function Fe(){De=!1}let Be=null;function He(t){if(!f)return;if(!ct.observeMutations)return;const{treeCallback:e=Te,nodeCallback:i=Te,pseudoElementsCallback:n=Te,observeMutationsRoot:r=p}=t;Be=new f((t=>{if(De)return;const r=Zt();gt(t).forEach((t=>{if("childList"===t.type&&t.addedNodes.length>0&&!Ee(t.addedNodes[0])&&(ct.searchPseudoElements&&n(t.target),e(t.target)),"attributes"===t.type&&t.target.parentNode&&ct.searchPseudoElements&&n(t.target.parentNode),"attributes"===t.type&&Ee(t.target)&&~rt.indexOf(t.attributeName))if("class"===t.attributeName&&function(t){const e=t.getAttribute?t.getAttribute(j):null,i=t.getAttribute?t.getAttribute(G):null;return e&&i}(t.target)){const{prefix:e,iconName:i}=te(mt(t.target));t.target.setAttribute(j,e||r),i&&t.target.setAttribute(G,i)}else(s=t.target)&&s.classList&&s.classList.contains&&s.classList.contains(ct.replacementClass)&&i(t.target);var s}))})),m&&Be.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function qe(t){const e=t.getAttribute("data-prefix"),i=t.getAttribute("data-icon"),n=void 0!==t.innerText?t.innerText.trim():"";let r=te(mt(t));return r.prefix||(r.prefix=Zt()),e&&i&&(r.prefix=e,r.iconName=i),r.iconName&&r.prefix||(r.prefix&&n.length>0&&(r.iconName=(s=r.prefix,a=t.innerText,(qt[s]||{})[a]||Ut(r.prefix,Lt(t.innerText)))),!r.iconName&&ct.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r;var s,a}function je(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:i,prefix:n,rest:r}=qe(t),a=function(t){const e=gt(t.attributes).reduce(((t,e)=>("class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t)),{}),i=t.getAttribute("title"),n=t.getAttribute("data-fa-title-id");return ct.autoA11y&&(i?e["aria-labelledby"]="".concat(ct.replacementClass,"-title-").concat(n||ft()):(e["aria-hidden"]="true",e.focusable="false")),e}(t),o=oe("parseNodeAttributes",{},t);let l=e.styleParser?function(t){const e=t.getAttribute("style");let i=[];return e&&(i=e.split(";").reduce(((t,e)=>{const i=e.split(":"),n=i[0],r=i.slice(1);return n&&r.length>0&&(t[n]=r.join(":").trim()),t}),{})),i}(t):[];return s({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:n,transform:pt,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:a}},o)}const{styles:Ge}=Ct;function Xe(t){const e="nest"===ct.autoReplaceSvg?je(t,{styleParser:!1}):je(t);return~e.extra.classes.indexOf(it)?he("generateLayersText",t,e):he("generateSvgReplacementMutation",t,e)}function Ve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!m)return Promise.resolve();const i=p.documentElement.classList,n=t=>i.add("".concat(X,"-").concat(t)),r=t=>i.remove("".concat(X,"-").concat(t)),s=ct.autoFetchSvg?[...S,...I]:v.concat(Object.keys(Ge));s.includes("fa")||s.push("fa");const a=[".".concat(it,":not([").concat(H,"])")].concat(s.map((t=>".".concat(t,":not([").concat(H,"])")))).join(", ");if(0===a.length)return Promise.resolve();let o=[];try{o=gt(t.querySelectorAll(a))}catch(t){}if(!(o.length>0))return Promise.resolve();n("pending"),r("complete");const l=Me("onTree"),h=o.reduce(((t,e)=>{try{const i=Xe(e);i&&t.push(i)}catch(t){W||t.name}return t}),[]);return new Promise(((t,i)=>{Promise.all(h).then((i=>{Oe(i,(()=>{n("active"),n("complete"),r("pending"),"function"==typeof e&&e(),l(),t()}))})).catch((t=>{l(),i(t)}))}))}function We(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Xe(t).then((t=>{t&&Oe([t],e)}))}const Ye=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:i=pt,symbol:n=!1,mask:r=null,maskId:a=null,title:o=null,titleId:l=null,classes:h=[],attributes:c={},styles:d={}}=e;if(!t)return;const{prefix:u,iconName:p,icon:f}=t;return me(s({type:"icon"},t),(()=>(le("beforeDOMElementCreation",{iconDefinition:t,params:e}),ct.autoA11y&&(o?c["aria-labelledby"]="".concat(ct.replacementClass,"-title-").concat(l||ft()):(c["aria-hidden"]="true",c.focusable="false")),be({icons:{main:ye(f),mask:r?ye(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:u,iconName:p,transform:s(s({},pt),i),symbol:n,title:o,maskId:a,titleId:l,extra:{attributes:c,styles:d,classes:h}}))))};var Ue={mixout(){return{icon:(t=Ye,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(e||{}).icon?e:ce(e||{});let{mask:r}=i;return r&&(r=(r||{}).icon?r:ce(r||{})),t(n,s(s({},i),{},{mask:r}))})};var t},hooks:()=>({mutationObserverCallbacks:t=>(t.treeCallback=Ve,t.nodeCallback=We,t)}),provides(t){t.i2svg=function(t){const{node:e=p,callback:i=()=>{}}=t;return Ve(e,i)},t.generateSvgReplacementMutation=function(t,e){const{iconName:i,title:n,titleId:r,prefix:s,transform:a,symbol:o,mask:l,maskId:h,extra:c}=e;return new Promise(((e,d)=>{Promise.all([ke(i,s),l.iconName?ke(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((l=>{let[d,u]=l;e([t,be({icons:{main:d,mask:u},prefix:s,iconName:i,transform:a,symbol:o,maskId:h,title:n,titleId:r,extra:c,watchable:!0})])})).catch(d)}))},t.generateAbstractIcon=function(t){let{children:e,attributes:i,main:n,transform:r,styles:s}=t;const a=xt(s);let o;return a.length>0&&(i.style=a),vt(r)&&(o=he("generateAbstractTransformGrouping",{main:n,transform:r,containerWidth:n.width,iconWidth:n.width})),e.push(o||n.icon),{children:e,attributes:i}}}},$e={mixout:()=>({layer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:i=[]}=e;return me({type:"layer"},(()=>{le("beforeDOMElementCreation",{assembler:t,params:e});let n=[];return t((t=>{Array.isArray(t)?t.map((t=>{n=n.concat(t.abstract)})):n=n.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(ct.cssPrefix,"-layers"),...i].join(" ")},children:n}]}))}})},Ke={mixout:()=>({counter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:i=null,classes:n=[],attributes:r={},styles:a={}}=e;return me({type:"counter",content:t},(()=>(le("beforeDOMElementCreation",{content:t,params:e}),function(t){const{content:e,title:i,extra:n}=t,r=s(s(s({},n.attributes),i?{title:i}:{}),{},{class:n.classes.join(" ")}),a=xt(n.styles);a.length>0&&(r.style=a);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),i&&o.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),o}({content:t.toString(),title:i,extra:{attributes:r,styles:a,classes:["".concat(ct.cssPrefix,"-layers-counter"),...n]}}))))}})},Ze={mixout:()=>({text(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:i=pt,title:n=null,classes:r=[],attributes:a={},styles:o={}}=e;return me({type:"text",content:t},(()=>(le("beforeDOMElementCreation",{content:t,params:e}),xe({content:t,transform:s(s({},pt),i),title:n,extra:{attributes:a,styles:o,classes:["".concat(ct.cssPrefix,"-layers-text"),...r]}}))))}}),provides(t){t.generateLayersText=function(t,e){const{title:i,transform:n,extra:r}=e;let s=null,a=null;if(b){const e=parseInt(getComputedStyle(t).fontSize,10),i=t.getBoundingClientRect();s=i.width/e,a=i.height/e}return ct.autoA11y&&!i&&(r.attributes["aria-hidden"]="true"),Promise.resolve([t,xe({content:t.innerHTML,width:s,height:a,transform:n,title:i,extra:r,watchable:!0})])}}};const Je=new RegExp('"',"ug"),Qe=[1105920,1112319],ti=s(s(s(s({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),ei=Object.keys(ti).reduce(((t,e)=>(t[e.toLowerCase()]=ti[e],t)),{}),ii=Object.keys(ei).reduce(((t,e)=>{const i=ei[e];return t[e]=i[900]||[...Object.entries(i)][0][1],t}),{});function ni(t,e){const i="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(((n,r)=>{if(null!==t.getAttribute(i))return n();const a=gt(t.children).filter((t=>t.getAttribute(q)===e))[0],o=u.getComputedStyle(t,e),l=o.getPropertyValue("font-family"),h=l.match(nt),c=o.getPropertyValue("font-weight"),d=o.getPropertyValue("content");if(a&&!h)return t.removeChild(a),n();if(h&&"none"!==d&&""!==d){const d=o.getPropertyValue("content");let u=function(t,e){const i=t.replace(/^['"]|['"]$/g,"").toLowerCase(),n=parseInt(e),r=isNaN(n)?"normal":n;return(ei[i]||{})[r]||ii[i]}(l,c);const{value:f,isSecondary:g}=function(t){const e=t.replace(Je,""),i=function(t,e){const i=t.length;let n,r=t.charCodeAt(e);return r>=55296&&r<=56319&&i>e+1&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?1024*(r-55296)+n-56320+65536:r}(e,0),n=i>=Qe[0]&&i<=Qe[1],r=2===e.length&&e[0]===e[1];return{value:Lt(r?e[0]:e),isSecondary:n||r}}(d),m=h[0].startsWith("FontAwesome");let b=Ut(u,f),x=b;if(m){const t=function(t){const e=Gt[t],i=Ut("fas",t);return e||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}(f);t.iconName&&t.prefix&&(b=t.iconName,u=t.prefix)}if(!b||g||a&&a.getAttribute(j)===u&&a.getAttribute(G)===x)n();else{t.setAttribute(i,x),a&&t.removeChild(a);const o={iconName:null,title:null,titleId:null,prefix:null,transform:pt,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:l}=o;l.attributes[q]=e,ke(b,u).then((r=>{const a=be(s(s({},o),{},{icons:{main:r,mask:{prefix:null,iconName:null,rest:[]}},prefix:u,iconName:x,extra:l,watchable:!0})),h=p.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?t.insertBefore(h,t.firstChild):t.appendChild(h),h.outerHTML=a.map((t=>Et(t))).join("\n"),t.removeAttribute(i),n()})).catch(r)}}else n()}))}function ri(t){return Promise.all([ni(t,"::before"),ni(t,"::after")])}function si(t){return!(t.parentNode===document.head||~V.indexOf(t.tagName.toUpperCase())||t.getAttribute(q)||t.parentNode&&"svg"===t.parentNode.tagName)}function ai(t){if(m)return new Promise(((e,i)=>{const n=gt(t.querySelectorAll("*")).filter(si).map(ri),r=Me("searchPseudoElements");ze(),Promise.all(n).then((()=>{r(),Fe(),e()})).catch((()=>{r(),Fe(),i()}))}))}var oi={hooks:()=>({mutationObserverCallbacks:t=>(t.pseudoElementsCallback=ai,t)}),provides(t){t.pseudoElements2svg=function(t){const{node:e=p}=t;ct.searchPseudoElements&&ai(e)}}};let li=!1;var hi={mixout:()=>({dom:{unwatch(){ze(),li=!0}}}),hooks:()=>({bootstrap(){He(oe("mutationObserverCallbacks",{}))},noAuto(){Be&&Be.disconnect()},watch(t){const{observeMutationsRoot:e}=t;li?Fe():He(oe("mutationObserverCallbacks",{observeMutationsRoot:e}))}})};const ci=t=>t.toLowerCase().split(" ").reduce(((t,e)=>{const i=e.toLowerCase().split("-"),n=i[0];let r=i.slice(1).join("-");if(n&&"h"===r)return t.flipX=!0,t;if(n&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(n){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var di={mixout:()=>({parse:{transform:t=>ci(t)}}),hooks:()=>({parseNodeAttributes(t,e){const i=e.getAttribute("data-fa-transform");return i&&(t.transform=ci(i)),t}}),provides(t){t.generateAbstractTransformGrouping=function(t){let{main:e,transform:i,containerWidth:n,iconWidth:r}=t;const a={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*i.x,", ").concat(32*i.y,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),h="rotate(".concat(i.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(l," ").concat(h)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:s({},c.outer),children:[{tag:"g",attributes:s({},c.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:s(s({},e.icon.attributes),c.path)}]}]}}}};const ui={x:0,y:0,width:"100%",height:"100%"};function pi(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}var fi={hooks:()=>({parseNodeAttributes(t,e){const i=e.getAttribute("data-fa-mask"),n=i?te(i.split(" ").map((t=>t.trim()))):{prefix:null,iconName:null,rest:[]};return n.prefix||(n.prefix=Zt()),t.mask=n,t.maskId=e.getAttribute("data-fa-mask-id"),t}}),provides(t){t.generateAbstractMask=function(t){let{children:e,attributes:i,main:n,mask:r,maskId:a,transform:o}=t;const{width:l,icon:h}=n,{width:c,icon:d}=r,u=function(t){let{transform:e,containerWidth:i,iconWidth:n}=t;const r={transform:"translate(".concat(i/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(n/2*-1," -256)")}}}({transform:o,containerWidth:c,iconWidth:l}),p={tag:"rect",attributes:s(s({},ui),{},{fill:"white"})},f=h.children?{children:h.children.map(pi)}:{},g={tag:"g",attributes:s({},u.inner),children:[pi(s({tag:h.tag,attributes:s(s({},h.attributes),u.path)},f))]},m={tag:"g",attributes:s({},u.outer),children:[g]},b="mask-".concat(a||ft()),x="clip-".concat(a||ft()),v={tag:"mask",attributes:s(s({},ui),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,m]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:(w=d,"g"===w.tag?w.children:[w])},v]};var w;return e.push(y,{tag:"rect",attributes:s({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(b,")")},ui)}),{children:e,attributes:i}}}},gi={provides(t){let e=!1;u.matchMedia&&(e=u.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const t=[],i={fill:"currentColor"},n={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:s(s({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const r=s(s({},n),{},{attributeName:"opacity"}),a={tag:"circle",attributes:s(s({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||a.children.push({tag:"animate",attributes:s(s({},n),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:s(s({},r),{},{values:"1;0;1;1;0;1;"})}),t.push(a),t.push({tag:"path",attributes:s(s({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:s(s({},r),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:s(s({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:s(s({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}};!function(t,e){let{mixoutsTo:i}=e;ne=t,re={},Object.keys(se).forEach((t=>{-1===ae.indexOf(t)&&delete se[t]})),ne.forEach((t=>{const e=t.mixout?t.mixout():{};if(Object.keys(e).forEach((t=>{"function"==typeof e[t]&&(i[t]=e[t]),"object"==typeof e[t]&&Object.keys(e[t]).forEach((n=>{i[t]||(i[t]={}),i[t][n]=e[t][n]}))})),t.hooks){const e=t.hooks();Object.keys(e).forEach((t=>{re[t]||(re[t]=[]),re[t].push(e[t])}))}t.provides&&t.provides(se)}))}([At,Ue,$e,Ke,Ze,oi,hi,di,fi,gi,{hooks:()=>({parseNodeAttributes(t,e){const i=e.getAttribute("data-fa-symbol"),n=null!==i&&(""===i||i);return t.symbol=n,t}})}],{mixoutsTo:fe})},22130:(t,e,i)=>{"use strict";i.d(e,{default:()=>er});class n{constructor(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}static range(t,e){return e?t&&t.loc&&e.loc&&t.loc.lexer===e.loc.lexer?new n(t.loc.lexer,t.loc.start,e.loc.end):null:t&&t.loc}}class r{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new r(e,n.range(this,t))}}class s{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i,n,r="KaTeX parse error: "+t,a=e&&e.loc;if(a&&a.start<=a.end){var o=a.lexer.input;i=a.start,n=a.end,i===o.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var l=o.slice(i,n).replace(/[^]/g,"$&");r+=(i>15?""+o.slice(i-15,i):o.slice(0,i))+l+(n+15<o.length?o.slice(n,n+15)+"":o.slice(n))}var h=new Error(r);return h.name="ParseError",h.__proto__=s.prototype,h.position=i,null!=i&&null!=n&&(h.length=n-i),h.rawMessage=t,h}}s.prototype.__proto__=Error.prototype;var a=/([A-Z])/g,o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},l=/[&><"']/g;var h=function t(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},c={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(t){return String(t).replace(l,(t=>o[t]))},hyphenate:function(t){return t.replace(a,"-$1").toLowerCase()},getBaseElem:h,isCharacterBox:function(t){var e=h(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},protocolFromUrl:function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?":"!==e[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?e[1].toLowerCase():null:"_relative"}},d={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>"Infinity"===t?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function u(t){if(t.default)return t.default;var e=t.type,i=Array.isArray(e)?e[0]:e;if("string"!=typeof i)return i.enum[0];switch(i){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class p{constructor(t){for(var e in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{},d)if(d.hasOwnProperty(e)){var i=d[e];this[e]=void 0!==t[e]?i.processor?i.processor(t[e]):t[e]:u(i)}}reportNonstrict(t,e,i){var n=this.strict;if("function"==typeof n&&(n=n(t,e,i)),n&&"ignore"!==n&&(!0===n||"error"===n))throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",i)}useStrictBehavior(t,e,i){var n=this.strict;if("function"==typeof n)try{n=n(t,e,i)}catch(t){n="error"}return!(!n||"ignore"===n)&&(!0===n||"error"===n)}isTrusted(t){if(t.url&&!t.protocol){var e=c.protocolFromUrl(t.url);if(null==e)return!1;t.protocol=e}var i="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(i)}}class f{constructor(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}sup(){return g[m[this.id]]}sub(){return g[b[this.id]]}fracNum(){return g[x[this.id]]}fracDen(){return g[v[this.id]]}cramp(){return g[y[this.id]]}text(){return g[w[this.id]]}isTight(){return this.size>=2}}var g=[new f(0,0,!1),new f(1,0,!0),new f(2,1,!1),new f(3,1,!0),new f(4,2,!1),new f(5,2,!0),new f(6,3,!1),new f(7,3,!0)],m=[4,5,4,5,6,7,6,7],b=[5,5,5,5,7,7,7,7],x=[2,3,4,5,6,7,6,7],v=[3,3,5,5,7,7,7,7],y=[1,1,3,3,5,5,7,7],w=[0,1,2,3,2,3,2,3],k={DISPLAY:g[0],TEXT:g[2],SCRIPT:g[4],SCRIPTSCRIPT:g[6]},A=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var S=[];function C(t){for(var e=0;e<S.length;e+=2)if(t>=S[e]&&t<=S[e+1])return!0;return!1}A.forEach((t=>t.blocks.forEach((t=>S.push(...t)))));var _=80,M={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class T{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return c.contains(this.classes,t)}toNode(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){return this.children.map((t=>t.toText())).join("")}}var E={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},N={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},P={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function L(t,e,i){if(!E[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),r=E[e][n];if(!r&&t[0]in P&&(n=P[t[0]].charCodeAt(0),r=E[e][n]),r||"text"!==i||C(n)&&(r=E[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var I={};var R=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],O=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],D=function(t,e){return e.size<2?t:R[t-1][e.size-1]};class z{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||z.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=O[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return new z(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:D(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:O[t-1]})}havingBaseStyle(t){t=t||this.style.text();var e=D(z.BASESIZE,t);return this.size===e&&this.textSize===z.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==z.BASESIZE?["sizing","reset-size"+this.size,"size"+z.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!I[e=t>=5?0:t>=3?1:2]){var i=I[e]={cssEmPerMu:N.quad[e]/18};for(var n in N)N.hasOwnProperty(n)&&(i[n]=N[n][e])}return I[e]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}z.BASESIZE=6;var F={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},B={ex:!0,em:!0,mu:!0},H=function(t){return"string"!=typeof t&&(t=t.unit),t in F||t in B||"ex"===t},q=function(t,e){var i;if(t.unit in F)i=F[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)i=e.fontMetrics().cssEmPerMu;else{var n;if(n=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)i=n.fontMetrics().xHeight;else{if("em"!==t.unit)throw new s("Invalid unit: '"+t.unit+"'");i=n.fontMetrics().quad}n!==e&&(i*=n.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},j=function(t){return+t.toFixed(4)+"em"},G=function(t){return t.filter((t=>t)).join(" ")},X=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");var n=e.getColor();n&&(this.style.color=n)}},V=function(t){var e=document.createElement(t);for(var i in e.className=G(this.classes),this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&e.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},W=/[\s"'>/=\x00-\x1f]/,Y=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+c.escape(G(this.classes))+'"');var i="";for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=c.hyphenate(n)+":"+this.style[n]+";");for(var r in i&&(e+=' style="'+c.escape(i)+'"'),this.attributes)if(this.attributes.hasOwnProperty(r)){if(W.test(r))throw new s("Invalid attribute name '"+r+"'");e+=" "+r+'="'+c.escape(this.attributes[r])+'"'}e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+t+">"};class U{constructor(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,X.call(this,t,i,n),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return c.contains(this.classes,t)}toNode(){return V.call(this,"span")}toMarkup(){return Y.call(this,"span")}}class ${constructor(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,X.call(this,e,n),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return c.contains(this.classes,t)}toNode(){return V.call(this,"a")}toMarkup(){return Y.call(this,"a")}}class K{constructor(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return c.contains(this.classes,t)}toNode(){var t=document.createElement("img");for(var e in t.src=this.src,t.alt=this.alt,t.className="mord",this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){var t='<img src="'+c.escape(this.src)+'" alt="'+c.escape(this.alt)+'"',e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=c.hyphenate(i)+":"+this.style[i]+";");return e&&(t+=' style="'+c.escape(e)+'"'),t+="'/>"}}var Z={:"",:"",:"",:""};class J{constructor(t,e,i,n,r,s,a,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=n||0,this.skew=r||0,this.width=s||0,this.classes=a||[],this.style=o||{},this.maxFontSize=0;var l=function(t){for(var e=0;e<A.length;e++)for(var i=A[e],n=0;n<i.blocks.length;n++){var r=i.blocks[n];if(t>=r[0]&&t<=r[1])return i.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=Z[this.text])}hasClass(t){return c.contains(this.classes,t)}toNode(){var t=document.createTextNode(this.text),e=null;for(var i in this.italic>0&&((e=document.createElement("span")).style.marginRight=j(this.italic)),this.classes.length>0&&((e=e||document.createElement("span")).className=G(this.classes)),this.style)this.style.hasOwnProperty(i)&&((e=e||document.createElement("span")).style[i]=this.style[i]);return e?(e.appendChild(t),e):t}toMarkup(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=c.escape(G(this.classes)),e+='"');var i="";for(var n in this.italic>0&&(i+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(i+=c.hyphenate(n)+":"+this.style[n]+";");i&&(t=!0,e+=' style="'+c.escape(i)+'"');var r=c.escape(this.text);return t?(e+=">",e+=r,e+="</span>"):r}}class Q{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+c.escape(this.attributes[e])+'"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>"}}class tt{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",M[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+c.escape(this.alternate)+'"/>':'<path d="'+c.escape(M[this.pathName])+'"/>'}}class et{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t}toMarkup(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+c.escape(this.attributes[e])+'"');return t+="/>"}}function it(t){if(t instanceof J)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}var nt={bin:1,close:1,inner:1,open:1,punct:1,rel:1},rt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},st={math:{},text:{}};function at(t,e,i,n,r,s){st[t][r]={font:e,group:i,replace:n},s&&n&&(st[t][n]=st[t][r])}var ot="math",lt="text",ht="main",ct="ams",dt="accent-token",ut="bin",pt="close",ft="inner",gt="mathord",mt="op-token",bt="open",xt="punct",vt="rel",yt="spacing",wt="textord";at(ot,ht,vt,"","\\equiv",!0),at(ot,ht,vt,"","\\prec",!0),at(ot,ht,vt,"","\\succ",!0),at(ot,ht,vt,"","\\sim",!0),at(ot,ht,vt,"","\\perp"),at(ot,ht,vt,"","\\preceq",!0),at(ot,ht,vt,"","\\succeq",!0),at(ot,ht,vt,"","\\simeq",!0),at(ot,ht,vt,"","\\mid",!0),at(ot,ht,vt,"","\\ll",!0),at(ot,ht,vt,"","\\gg",!0),at(ot,ht,vt,"","\\asymp",!0),at(ot,ht,vt,"","\\parallel"),at(ot,ht,vt,"","\\bowtie",!0),at(ot,ht,vt,"","\\smile",!0),at(ot,ht,vt,"","\\sqsubseteq",!0),at(ot,ht,vt,"","\\sqsupseteq",!0),at(ot,ht,vt,"","\\doteq",!0),at(ot,ht,vt,"","\\frown",!0),at(ot,ht,vt,"","\\ni",!0),at(ot,ht,vt,"","\\propto",!0),at(ot,ht,vt,"","\\vdash",!0),at(ot,ht,vt,"","\\dashv",!0),at(ot,ht,vt,"","\\owns"),at(ot,ht,xt,".","\\ldotp"),at(ot,ht,xt,"","\\cdotp"),at(ot,ht,wt,"#","\\#"),at(lt,ht,wt,"#","\\#"),at(ot,ht,wt,"&","\\&"),at(lt,ht,wt,"&","\\&"),at(ot,ht,wt,"","\\aleph",!0),at(ot,ht,wt,"","\\forall",!0),at(ot,ht,wt,"","\\hbar",!0),at(ot,ht,wt,"","\\exists",!0),at(ot,ht,wt,"","\\nabla",!0),at(ot,ht,wt,"","\\flat",!0),at(ot,ht,wt,"","\\ell",!0),at(ot,ht,wt,"","\\natural",!0),at(ot,ht,wt,"","\\clubsuit",!0),at(ot,ht,wt,"","\\wp",!0),at(ot,ht,wt,"","\\sharp",!0),at(ot,ht,wt,"","\\diamondsuit",!0),at(ot,ht,wt,"","\\Re",!0),at(ot,ht,wt,"","\\heartsuit",!0),at(ot,ht,wt,"","\\Im",!0),at(ot,ht,wt,"","\\spadesuit",!0),at(ot,ht,wt,"","\\S",!0),at(lt,ht,wt,"","\\S"),at(ot,ht,wt,"","\\P",!0),at(lt,ht,wt,"","\\P"),at(ot,ht,wt,"","\\dag"),at(lt,ht,wt,"","\\dag"),at(lt,ht,wt,"","\\textdagger"),at(ot,ht,wt,"","\\ddag"),at(lt,ht,wt,"","\\ddag"),at(lt,ht,wt,"","\\textdaggerdbl"),at(ot,ht,pt,"","\\rmoustache",!0),at(ot,ht,bt,"","\\lmoustache",!0),at(ot,ht,pt,"","\\rgroup",!0),at(ot,ht,bt,"","\\lgroup",!0),at(ot,ht,ut,"","\\mp",!0),at(ot,ht,ut,"","\\ominus",!0),at(ot,ht,ut,"","\\uplus",!0),at(ot,ht,ut,"","\\sqcap",!0),at(ot,ht,ut,"","\\ast"),at(ot,ht,ut,"","\\sqcup",!0),at(ot,ht,ut,"","\\bigcirc",!0),at(ot,ht,ut,"","\\bullet",!0),at(ot,ht,ut,"","\\ddagger"),at(ot,ht,ut,"","\\wr",!0),at(ot,ht,ut,"","\\amalg"),at(ot,ht,ut,"&","\\And"),at(ot,ht,vt,"","\\longleftarrow",!0),at(ot,ht,vt,"","\\Leftarrow",!0),at(ot,ht,vt,"","\\Longleftarrow",!0),at(ot,ht,vt,"","\\longrightarrow",!0),at(ot,ht,vt,"","\\Rightarrow",!0),at(ot,ht,vt,"","\\Longrightarrow",!0),at(ot,ht,vt,"","\\leftrightarrow",!0),at(ot,ht,vt,"","\\longleftrightarrow",!0),at(ot,ht,vt,"","\\Leftrightarrow",!0),at(ot,ht,vt,"","\\Longleftrightarrow",!0),at(ot,ht,vt,"","\\mapsto",!0),at(ot,ht,vt,"","\\longmapsto",!0),at(ot,ht,vt,"","\\nearrow",!0),at(ot,ht,vt,"","\\hookleftarrow",!0),at(ot,ht,vt,"","\\hookrightarrow",!0),at(ot,ht,vt,"","\\searrow",!0),at(ot,ht,vt,"","\\leftharpoonup",!0),at(ot,ht,vt,"","\\rightharpoonup",!0),at(ot,ht,vt,"","\\swarrow",!0),at(ot,ht,vt,"","\\leftharpoondown",!0),at(ot,ht,vt,"","\\rightharpoondown",!0),at(ot,ht,vt,"","\\nwarrow",!0),at(ot,ht,vt,"","\\rightleftharpoons",!0),at(ot,ct,vt,"","\\nless",!0),at(ot,ct,vt,"","\\@nleqslant"),at(ot,ct,vt,"","\\@nleqq"),at(ot,ct,vt,"","\\lneq",!0),at(ot,ct,vt,"","\\lneqq",!0),at(ot,ct,vt,"","\\@lvertneqq"),at(ot,ct,vt,"","\\lnsim",!0),at(ot,ct,vt,"","\\lnapprox",!0),at(ot,ct,vt,"","\\nprec",!0),at(ot,ct,vt,"","\\npreceq",!0),at(ot,ct,vt,"","\\precnsim",!0),at(ot,ct,vt,"","\\precnapprox",!0),at(ot,ct,vt,"","\\nsim",!0),at(ot,ct,vt,"","\\@nshortmid"),at(ot,ct,vt,"","\\nmid",!0),at(ot,ct,vt,"","\\nvdash",!0),at(ot,ct,vt,"","\\nvDash",!0),at(ot,ct,vt,"","\\ntriangleleft"),at(ot,ct,vt,"","\\ntrianglelefteq",!0),at(ot,ct,vt,"","\\subsetneq",!0),at(ot,ct,vt,"","\\@varsubsetneq"),at(ot,ct,vt,"","\\subsetneqq",!0),at(ot,ct,vt,"","\\@varsubsetneqq"),at(ot,ct,vt,"","\\ngtr",!0),at(ot,ct,vt,"","\\@ngeqslant"),at(ot,ct,vt,"","\\@ngeqq"),at(ot,ct,vt,"","\\gneq",!0),at(ot,ct,vt,"","\\gneqq",!0),at(ot,ct,vt,"","\\@gvertneqq"),at(ot,ct,vt,"","\\gnsim",!0),at(ot,ct,vt,"","\\gnapprox",!0),at(ot,ct,vt,"","\\nsucc",!0),at(ot,ct,vt,"","\\nsucceq",!0),at(ot,ct,vt,"","\\succnsim",!0),at(ot,ct,vt,"","\\succnapprox",!0),at(ot,ct,vt,"","\\ncong",!0),at(ot,ct,vt,"","\\@nshortparallel"),at(ot,ct,vt,"","\\nparallel",!0),at(ot,ct,vt,"","\\nVDash",!0),at(ot,ct,vt,"","\\ntriangleright"),at(ot,ct,vt,"","\\ntrianglerighteq",!0),at(ot,ct,vt,"","\\@nsupseteqq"),at(ot,ct,vt,"","\\supsetneq",!0),at(ot,ct,vt,"","\\@varsupsetneq"),at(ot,ct,vt,"","\\supsetneqq",!0),at(ot,ct,vt,"","\\@varsupsetneqq"),at(ot,ct,vt,"","\\nVdash",!0),at(ot,ct,vt,"","\\precneqq",!0),at(ot,ct,vt,"","\\succneqq",!0),at(ot,ct,vt,"","\\@nsubseteqq"),at(ot,ct,ut,"","\\unlhd"),at(ot,ct,ut,"","\\unrhd"),at(ot,ct,vt,"","\\nleftarrow",!0),at(ot,ct,vt,"","\\nrightarrow",!0),at(ot,ct,vt,"","\\nLeftarrow",!0),at(ot,ct,vt,"","\\nRightarrow",!0),at(ot,ct,vt,"","\\nleftrightarrow",!0),at(ot,ct,vt,"","\\nLeftrightarrow",!0),at(ot,ct,vt,"","\\vartriangle"),at(ot,ct,wt,"","\\hslash"),at(ot,ct,wt,"","\\triangledown"),at(ot,ct,wt,"","\\lozenge"),at(ot,ct,wt,"","\\circledS"),at(ot,ct,wt,"","\\circledR"),at(lt,ct,wt,"","\\circledR"),at(ot,ct,wt,"","\\measuredangle",!0),at(ot,ct,wt,"","\\nexists"),at(ot,ct,wt,"","\\mho"),at(ot,ct,wt,"","\\Finv",!0),at(ot,ct,wt,"","\\Game",!0),at(ot,ct,wt,"","\\backprime"),at(ot,ct,wt,"","\\blacktriangle"),at(ot,ct,wt,"","\\blacktriangledown"),at(ot,ct,wt,"","\\blacksquare"),at(ot,ct,wt,"","\\blacklozenge"),at(ot,ct,wt,"","\\bigstar"),at(ot,ct,wt,"","\\sphericalangle",!0),at(ot,ct,wt,"","\\complement",!0),at(ot,ct,wt,"","\\eth",!0),at(lt,ht,wt,"",""),at(ot,ct,wt,"","\\diagup"),at(ot,ct,wt,"","\\diagdown"),at(ot,ct,wt,"","\\square"),at(ot,ct,wt,"","\\Box"),at(ot,ct,wt,"","\\Diamond"),at(ot,ct,wt,"","\\yen",!0),at(lt,ct,wt,"","\\yen",!0),at(ot,ct,wt,"","\\checkmark",!0),at(lt,ct,wt,"","\\checkmark"),at(ot,ct,wt,"","\\beth",!0),at(ot,ct,wt,"","\\daleth",!0),at(ot,ct,wt,"","\\gimel",!0),at(ot,ct,wt,"","\\digamma",!0),at(ot,ct,wt,"","\\varkappa"),at(ot,ct,bt,"","\\@ulcorner",!0),at(ot,ct,pt,"","\\@urcorner",!0),at(ot,ct,bt,"","\\@llcorner",!0),at(ot,ct,pt,"","\\@lrcorner",!0),at(ot,ct,vt,"","\\leqq",!0),at(ot,ct,vt,"","\\leqslant",!0),at(ot,ct,vt,"","\\eqslantless",!0),at(ot,ct,vt,"","\\lesssim",!0),at(ot,ct,vt,"","\\lessapprox",!0),at(ot,ct,vt,"","\\approxeq",!0),at(ot,ct,ut,"","\\lessdot"),at(ot,ct,vt,"","\\lll",!0),at(ot,ct,vt,"","\\lessgtr",!0),at(ot,ct,vt,"","\\lesseqgtr",!0),at(ot,ct,vt,"","\\lesseqqgtr",!0),at(ot,ct,vt,"","\\doteqdot"),at(ot,ct,vt,"","\\risingdotseq",!0),at(ot,ct,vt,"","\\fallingdotseq",!0),at(ot,ct,vt,"","\\backsim",!0),at(ot,ct,vt,"","\\backsimeq",!0),at(ot,ct,vt,"","\\subseteqq",!0),at(ot,ct,vt,"","\\Subset",!0),at(ot,ct,vt,"","\\sqsubset",!0),at(ot,ct,vt,"","\\preccurlyeq",!0),at(ot,ct,vt,"","\\curlyeqprec",!0),at(ot,ct,vt,"","\\precsim",!0),at(ot,ct,vt,"","\\precapprox",!0),at(ot,ct,vt,"","\\vartriangleleft"),at(ot,ct,vt,"","\\trianglelefteq"),at(ot,ct,vt,"","\\vDash",!0),at(ot,ct,vt,"","\\Vvdash",!0),at(ot,ct,vt,"","\\smallsmile"),at(ot,ct,vt,"","\\smallfrown"),at(ot,ct,vt,"","\\bumpeq",!0),at(ot,ct,vt,"","\\Bumpeq",!0),at(ot,ct,vt,"","\\geqq",!0),at(ot,ct,vt,"","\\geqslant",!0),at(ot,ct,vt,"","\\eqslantgtr",!0),at(ot,ct,vt,"","\\gtrsim",!0),at(ot,ct,vt,"","\\gtrapprox",!0),at(ot,ct,ut,"","\\gtrdot"),at(ot,ct,vt,"","\\ggg",!0),at(ot,ct,vt,"","\\gtrless",!0),at(ot,ct,vt,"","\\gtreqless",!0),at(ot,ct,vt,"","\\gtreqqless",!0),at(ot,ct,vt,"","\\eqcirc",!0),at(ot,ct,vt,"","\\circeq",!0),at(ot,ct,vt,"","\\triangleq",!0),at(ot,ct,vt,"","\\thicksim"),at(ot,ct,vt,"","\\thickapprox"),at(ot,ct,vt,"","\\supseteqq",!0),at(ot,ct,vt,"","\\Supset",!0),at(ot,ct,vt,"","\\sqsupset",!0),at(ot,ct,vt,"","\\succcurlyeq",!0),at(ot,ct,vt,"","\\curlyeqsucc",!0),at(ot,ct,vt,"","\\succsim",!0),at(ot,ct,vt,"","\\succapprox",!0),at(ot,ct,vt,"","\\vartriangleright"),at(ot,ct,vt,"","\\trianglerighteq"),at(ot,ct,vt,"","\\Vdash",!0),at(ot,ct,vt,"","\\shortmid"),at(ot,ct,vt,"","\\shortparallel"),at(ot,ct,vt,"","\\between",!0),at(ot,ct,vt,"","\\pitchfork",!0),at(ot,ct,vt,"","\\varpropto"),at(ot,ct,vt,"","\\blacktriangleleft"),at(ot,ct,vt,"","\\therefore",!0),at(ot,ct,vt,"","\\backepsilon"),at(ot,ct,vt,"","\\blacktriangleright"),at(ot,ct,vt,"","\\because",!0),at(ot,ct,vt,"","\\llless"),at(ot,ct,vt,"","\\gggtr"),at(ot,ct,ut,"","\\lhd"),at(ot,ct,ut,"","\\rhd"),at(ot,ct,vt,"","\\eqsim",!0),at(ot,ht,vt,"","\\Join"),at(ot,ct,vt,"","\\Doteq",!0),at(ot,ct,ut,"","\\dotplus",!0),at(ot,ct,ut,"","\\smallsetminus"),at(ot,ct,ut,"","\\Cap",!0),at(ot,ct,ut,"","\\Cup",!0),at(ot,ct,ut,"","\\doublebarwedge",!0),at(ot,ct,ut,"","\\boxminus",!0),at(ot,ct,ut,"","\\boxplus",!0),at(ot,ct,ut,"","\\divideontimes",!0),at(ot,ct,ut,"","\\ltimes",!0),at(ot,ct,ut,"","\\rtimes",!0),at(ot,ct,ut,"","\\leftthreetimes",!0),at(ot,ct,ut,"","\\rightthreetimes",!0),at(ot,ct,ut,"","\\curlywedge",!0),at(ot,ct,ut,"","\\curlyvee",!0),at(ot,ct,ut,"","\\circleddash",!0),at(ot,ct,ut,"","\\circledast",!0),at(ot,ct,ut,"","\\centerdot"),at(ot,ct,ut,"","\\intercal",!0),at(ot,ct,ut,"","\\doublecap"),at(ot,ct,ut,"","\\doublecup"),at(ot,ct,ut,"","\\boxtimes",!0),at(ot,ct,vt,"","\\dashrightarrow",!0),at(ot,ct,vt,"","\\dashleftarrow",!0),at(ot,ct,vt,"","\\leftleftarrows",!0),at(ot,ct,vt,"","\\leftrightarrows",!0),at(ot,ct,vt,"","\\Lleftarrow",!0),at(ot,ct,vt,"","\\twoheadleftarrow",!0),at(ot,ct,vt,"","\\leftarrowtail",!0),at(ot,ct,vt,"","\\looparrowleft",!0),at(ot,ct,vt,"","\\leftrightharpoons",!0),at(ot,ct,vt,"","\\curvearrowleft",!0),at(ot,ct,vt,"","\\circlearrowleft",!0),at(ot,ct,vt,"","\\Lsh",!0),at(ot,ct,vt,"","\\upuparrows",!0),at(ot,ct,vt,"","\\upharpoonleft",!0),at(ot,ct,vt,"","\\downharpoonleft",!0),at(ot,ht,vt,"","\\origof",!0),at(ot,ht,vt,"","\\imageof",!0),at(ot,ct,vt,"","\\multimap",!0),at(ot,ct,vt,"","\\leftrightsquigarrow",!0),at(ot,ct,vt,"","\\rightrightarrows",!0),at(ot,ct,vt,"","\\rightleftarrows",!0),at(ot,ct,vt,"","\\twoheadrightarrow",!0),at(ot,ct,vt,"","\\rightarrowtail",!0),at(ot,ct,vt,"","\\looparrowright",!0),at(ot,ct,vt,"","\\curvearrowright",!0),at(ot,ct,vt,"","\\circlearrowright",!0),at(ot,ct,vt,"","\\Rsh",!0),at(ot,ct,vt,"","\\downdownarrows",!0),at(ot,ct,vt,"","\\upharpoonright",!0),at(ot,ct,vt,"","\\downharpoonright",!0),at(ot,ct,vt,"","\\rightsquigarrow",!0),at(ot,ct,vt,"","\\leadsto"),at(ot,ct,vt,"","\\Rrightarrow",!0),at(ot,ct,vt,"","\\restriction"),at(ot,ht,wt,"","`"),at(ot,ht,wt,"$","\\$"),at(lt,ht,wt,"$","\\$"),at(lt,ht,wt,"$","\\textdollar"),at(ot,ht,wt,"%","\\%"),at(lt,ht,wt,"%","\\%"),at(ot,ht,wt,"_","\\_"),at(lt,ht,wt,"_","\\_"),at(lt,ht,wt,"_","\\textunderscore"),at(ot,ht,wt,"","\\angle",!0),at(ot,ht,wt,"","\\infty",!0),at(ot,ht,wt,"","\\prime"),at(ot,ht,wt,"","\\triangle"),at(ot,ht,wt,"","\\Gamma",!0),at(ot,ht,wt,"","\\Delta",!0),at(ot,ht,wt,"","\\Theta",!0),at(ot,ht,wt,"","\\Lambda",!0),at(ot,ht,wt,"","\\Xi",!0),at(ot,ht,wt,"","\\Pi",!0),at(ot,ht,wt,"","\\Sigma",!0),at(ot,ht,wt,"","\\Upsilon",!0),at(ot,ht,wt,"","\\Phi",!0),at(ot,ht,wt,"","\\Psi",!0),at(ot,ht,wt,"","\\Omega",!0),at(ot,ht,wt,"A",""),at(ot,ht,wt,"B",""),at(ot,ht,wt,"E",""),at(ot,ht,wt,"Z",""),at(ot,ht,wt,"H",""),at(ot,ht,wt,"I",""),at(ot,ht,wt,"K",""),at(ot,ht,wt,"M",""),at(ot,ht,wt,"N",""),at(ot,ht,wt,"O",""),at(ot,ht,wt,"P",""),at(ot,ht,wt,"T",""),at(ot,ht,wt,"X",""),at(ot,ht,wt,"","\\neg",!0),at(ot,ht,wt,"","\\lnot"),at(ot,ht,wt,"","\\top"),at(ot,ht,wt,"","\\bot"),at(ot,ht,wt,"","\\emptyset"),at(ot,ct,wt,"","\\varnothing"),at(ot,ht,gt,"","\\alpha",!0),at(ot,ht,gt,"","\\beta",!0),at(ot,ht,gt,"","\\gamma",!0),at(ot,ht,gt,"","\\delta",!0),at(ot,ht,gt,"","\\epsilon",!0),at(ot,ht,gt,"","\\zeta",!0),at(ot,ht,gt,"","\\eta",!0),at(ot,ht,gt,"","\\theta",!0),at(ot,ht,gt,"","\\iota",!0),at(ot,ht,gt,"","\\kappa",!0),at(ot,ht,gt,"","\\lambda",!0),at(ot,ht,gt,"","\\mu",!0),at(ot,ht,gt,"","\\nu",!0),at(ot,ht,gt,"","\\xi",!0),at(ot,ht,gt,"","\\omicron",!0),at(ot,ht,gt,"","\\pi",!0),at(ot,ht,gt,"","\\rho",!0),at(ot,ht,gt,"","\\sigma",!0),at(ot,ht,gt,"","\\tau",!0),at(ot,ht,gt,"","\\upsilon",!0),at(ot,ht,gt,"","\\phi",!0),at(ot,ht,gt,"","\\chi",!0),at(ot,ht,gt,"","\\psi",!0),at(ot,ht,gt,"","\\omega",!0),at(ot,ht,gt,"","\\varepsilon",!0),at(ot,ht,gt,"","\\vartheta",!0),at(ot,ht,gt,"","\\varpi",!0),at(ot,ht,gt,"","\\varrho",!0),at(ot,ht,gt,"","\\varsigma",!0),at(ot,ht,gt,"","\\varphi",!0),at(ot,ht,ut,"","*",!0),at(ot,ht,ut,"+","+"),at(ot,ht,ut,"","-",!0),at(ot,ht,ut,"","\\cdot",!0),at(ot,ht,ut,"","\\circ",!0),at(ot,ht,ut,"","\\div",!0),at(ot,ht,ut,"","\\pm",!0),at(ot,ht,ut,"","\\times",!0),at(ot,ht,ut,"","\\cap",!0),at(ot,ht,ut,"","\\cup",!0),at(ot,ht,ut,"","\\setminus",!0),at(ot,ht,ut,"","\\land"),at(ot,ht,ut,"","\\lor"),at(ot,ht,ut,"","\\wedge",!0),at(ot,ht,ut,"","\\vee",!0),at(ot,ht,wt,"","\\surd"),at(ot,ht,bt,"","\\langle",!0),at(ot,ht,bt,"","\\lvert"),at(ot,ht,bt,"","\\lVert"),at(ot,ht,pt,"?","?"),at(ot,ht,pt,"!","!"),at(ot,ht,pt,"","\\rangle",!0),at(ot,ht,pt,"","\\rvert"),at(ot,ht,pt,"","\\rVert"),at(ot,ht,vt,"=","="),at(ot,ht,vt,":",":"),at(ot,ht,vt,"","\\approx",!0),at(ot,ht,vt,"","\\cong",!0),at(ot,ht,vt,"","\\ge"),at(ot,ht,vt,"","\\geq",!0),at(ot,ht,vt,"","\\gets"),at(ot,ht,vt,">","\\gt",!0),at(ot,ht,vt,"","\\in",!0),at(ot,ht,vt,"","\\@not"),at(ot,ht,vt,"","\\subset",!0),at(ot,ht,vt,"","\\supset",!0),at(ot,ht,vt,"","\\subseteq",!0),at(ot,ht,vt,"","\\supseteq",!0),at(ot,ct,vt,"","\\nsubseteq",!0),at(ot,ct,vt,"","\\nsupseteq",!0),at(ot,ht,vt,"","\\models"),at(ot,ht,vt,"","\\leftarrow",!0),at(ot,ht,vt,"","\\le"),at(ot,ht,vt,"","\\leq",!0),at(ot,ht,vt,"<","\\lt",!0),at(ot,ht,vt,"","\\rightarrow",!0),at(ot,ht,vt,"","\\to"),at(ot,ct,vt,"","\\ngeq",!0),at(ot,ct,vt,"","\\nleq",!0),at(ot,ht,yt,"","\\ "),at(ot,ht,yt,"","\\space"),at(ot,ht,yt,"","\\nobreakspace"),at(lt,ht,yt,"","\\ "),at(lt,ht,yt,""," "),at(lt,ht,yt,"","\\space"),at(lt,ht,yt,"","\\nobreakspace"),at(ot,ht,yt,null,"\\nobreak"),at(ot,ht,yt,null,"\\allowbreak"),at(ot,ht,xt,",",","),at(ot,ht,xt,";",";"),at(ot,ct,ut,"","\\barwedge",!0),at(ot,ct,ut,"","\\veebar",!0),at(ot,ht,ut,"","\\odot",!0),at(ot,ht,ut,"","\\oplus",!0),at(ot,ht,ut,"","\\otimes",!0),at(ot,ht,wt,"","\\partial",!0),at(ot,ht,ut,"","\\oslash",!0),at(ot,ct,ut,"","\\circledcirc",!0),at(ot,ct,ut,"","\\boxdot",!0),at(ot,ht,ut,"","\\bigtriangleup"),at(ot,ht,ut,"","\\bigtriangledown"),at(ot,ht,ut,"","\\dagger"),at(ot,ht,ut,"","\\diamond"),at(ot,ht,ut,"","\\star"),at(ot,ht,ut,"","\\triangleleft"),at(ot,ht,ut,"","\\triangleright"),at(ot,ht,bt,"{","\\{"),at(lt,ht,wt,"{","\\{"),at(lt,ht,wt,"{","\\textbraceleft"),at(ot,ht,pt,"}","\\}"),at(lt,ht,wt,"}","\\}"),at(lt,ht,wt,"}","\\textbraceright"),at(ot,ht,bt,"{","\\lbrace"),at(ot,ht,pt,"}","\\rbrace"),at(ot,ht,bt,"[","\\lbrack",!0),at(lt,ht,wt,"[","\\lbrack",!0),at(ot,ht,pt,"]","\\rbrack",!0),at(lt,ht,wt,"]","\\rbrack",!0),at(ot,ht,bt,"(","\\lparen",!0),at(ot,ht,pt,")","\\rparen",!0),at(lt,ht,wt,"<","\\textless",!0),at(lt,ht,wt,">","\\textgreater",!0),at(ot,ht,bt,"","\\lfloor",!0),at(ot,ht,pt,"","\\rfloor",!0),at(ot,ht,bt,"","\\lceil",!0),at(ot,ht,pt,"","\\rceil",!0),at(ot,ht,wt,"\\","\\backslash"),at(ot,ht,wt,"","|"),at(ot,ht,wt,"","\\vert"),at(lt,ht,wt,"|","\\textbar",!0),at(ot,ht,wt,"","\\|"),at(ot,ht,wt,"","\\Vert"),at(lt,ht,wt,"","\\textbardbl"),at(lt,ht,wt,"~","\\textasciitilde"),at(lt,ht,wt,"\\","\\textbackslash"),at(lt,ht,wt,"^","\\textasciicircum"),at(ot,ht,vt,"","\\uparrow",!0),at(ot,ht,vt,"","\\Uparrow",!0),at(ot,ht,vt,"","\\downarrow",!0),at(ot,ht,vt,"","\\Downarrow",!0),at(ot,ht,vt,"","\\updownarrow",!0),at(ot,ht,vt,"","\\Updownarrow",!0),at(ot,ht,mt,"","\\coprod"),at(ot,ht,mt,"","\\bigvee"),at(ot,ht,mt,"","\\bigwedge"),at(ot,ht,mt,"","\\biguplus"),at(ot,ht,mt,"","\\bigcap"),at(ot,ht,mt,"","\\bigcup"),at(ot,ht,mt,"","\\int"),at(ot,ht,mt,"","\\intop"),at(ot,ht,mt,"","\\iint"),at(ot,ht,mt,"","\\iiint"),at(ot,ht,mt,"","\\prod"),at(ot,ht,mt,"","\\sum"),at(ot,ht,mt,"","\\bigotimes"),at(ot,ht,mt,"","\\bigoplus"),at(ot,ht,mt,"","\\bigodot"),at(ot,ht,mt,"","\\oint"),at(ot,ht,mt,"","\\oiint"),at(ot,ht,mt,"","\\oiiint"),at(ot,ht,mt,"","\\bigsqcup"),at(ot,ht,mt,"","\\smallint"),at(lt,ht,ft,"","\\textellipsis"),at(ot,ht,ft,"","\\mathellipsis"),at(lt,ht,ft,"","\\ldots",!0),at(ot,ht,ft,"","\\ldots",!0),at(ot,ht,ft,"","\\@cdots",!0),at(ot,ht,ft,"","\\ddots",!0),at(ot,ht,wt,"","\\varvdots"),at(lt,ht,wt,"","\\varvdots"),at(ot,ht,dt,"","\\acute"),at(ot,ht,dt,"","\\grave"),at(ot,ht,dt,"","\\ddot"),at(ot,ht,dt,"~","\\tilde"),at(ot,ht,dt,"","\\bar"),at(ot,ht,dt,"","\\breve"),at(ot,ht,dt,"","\\check"),at(ot,ht,dt,"^","\\hat"),at(ot,ht,dt,"","\\vec"),at(ot,ht,dt,"","\\dot"),at(ot,ht,dt,"","\\mathring"),at(ot,ht,gt,"","\\@imath"),at(ot,ht,gt,"","\\@jmath"),at(ot,ht,wt,"",""),at(ot,ht,wt,"",""),at(lt,ht,wt,"","\\i",!0),at(lt,ht,wt,"","\\j",!0),at(lt,ht,wt,"","\\ss",!0),at(lt,ht,wt,"","\\ae",!0),at(lt,ht,wt,"","\\oe",!0),at(lt,ht,wt,"","\\o",!0),at(lt,ht,wt,"","\\AE",!0),at(lt,ht,wt,"","\\OE",!0),at(lt,ht,wt,"","\\O",!0),at(lt,ht,dt,"","\\'"),at(lt,ht,dt,"","\\`"),at(lt,ht,dt,"","\\^"),at(lt,ht,dt,"","\\~"),at(lt,ht,dt,"","\\="),at(lt,ht,dt,"","\\u"),at(lt,ht,dt,"","\\."),at(lt,ht,dt,"","\\c"),at(lt,ht,dt,"","\\r"),at(lt,ht,dt,"","\\v"),at(lt,ht,dt,"",'\\"'),at(lt,ht,dt,"","\\H"),at(lt,ht,dt,"","\\textcircled");var kt={"--":!0,"---":!0,"``":!0,"''":!0};at(lt,ht,wt,"","--",!0),at(lt,ht,wt,"","\\textendash"),at(lt,ht,wt,"","---",!0),at(lt,ht,wt,"","\\textemdash"),at(lt,ht,wt,"","`",!0),at(lt,ht,wt,"","\\textquoteleft"),at(lt,ht,wt,"","'",!0),at(lt,ht,wt,"","\\textquoteright"),at(lt,ht,wt,"","``",!0),at(lt,ht,wt,"","\\textquotedblleft"),at(lt,ht,wt,"","''",!0),at(lt,ht,wt,"","\\textquotedblright"),at(ot,ht,wt,"","\\degree",!0),at(lt,ht,wt,"","\\degree"),at(lt,ht,wt,"","\\textdegree",!0),at(ot,ht,wt,"","\\pounds"),at(ot,ht,wt,"","\\mathsterling",!0),at(lt,ht,wt,"","\\pounds"),at(lt,ht,wt,"","\\textsterling",!0),at(ot,ct,wt,"","\\maltese"),at(lt,ct,wt,"","\\maltese");for(var At='0123456789/@."',St=0;St<14;St++){var Ct=At.charAt(St);at(ot,ht,wt,Ct,Ct)}for(var _t='0123456789!@*()-=+";:?/.,',Mt=0;Mt<25;Mt++){var Tt=_t.charAt(Mt);at(lt,ht,wt,Tt,Tt)}for(var Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Nt=0;Nt<52;Nt++){var Pt=Et.charAt(Nt);at(ot,ht,gt,Pt,Pt),at(lt,ht,wt,Pt,Pt)}at(ot,ct,wt,"C",""),at(lt,ct,wt,"C",""),at(ot,ct,wt,"H",""),at(lt,ct,wt,"H",""),at(ot,ct,wt,"N",""),at(lt,ct,wt,"N",""),at(ot,ct,wt,"P",""),at(lt,ct,wt,"P",""),at(ot,ct,wt,"Q",""),at(lt,ct,wt,"Q",""),at(ot,ct,wt,"R",""),at(lt,ct,wt,"R",""),at(ot,ct,wt,"Z",""),at(lt,ct,wt,"Z",""),at(ot,ht,gt,"h",""),at(lt,ht,gt,"h","");for(var Lt="",It=0;It<52;It++){var Rt=Et.charAt(It);at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56320+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56372+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56424+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56580+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56684+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56736+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56788+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56840+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56944+It)),at(lt,ht,wt,Rt,Lt),It<26&&(at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56632+It)),at(lt,ht,wt,Rt,Lt),at(ot,ht,gt,Rt,Lt=String.fromCharCode(55349,56476+It)),at(lt,ht,wt,Rt,Lt))}at(ot,ht,gt,"k",Lt=String.fromCharCode(55349,56668)),at(lt,ht,wt,"k",Lt);for(var Ot=0;Ot<10;Ot++){var Dt=Ot.toString();at(ot,ht,gt,Dt,Lt=String.fromCharCode(55349,57294+Ot)),at(lt,ht,wt,Dt,Lt),at(ot,ht,gt,Dt,Lt=String.fromCharCode(55349,57314+Ot)),at(lt,ht,wt,Dt,Lt),at(ot,ht,gt,Dt,Lt=String.fromCharCode(55349,57324+Ot)),at(lt,ht,wt,Dt,Lt),at(ot,ht,gt,Dt,Lt=String.fromCharCode(55349,57334+Ot)),at(lt,ht,wt,Dt,Lt)}for(var zt="",Ft=0;Ft<3;Ft++){var Bt=zt.charAt(Ft);at(ot,ht,gt,Bt,Bt),at(lt,ht,wt,Bt,Bt)}var Ht=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],qt=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],jt=function(t,e,i){return st[i][t]&&st[i][t].replace&&(t=st[i][t].replace),{value:t,metrics:L(t,e,i)}},Gt=function(t,e,i,n,r){var s,a=jt(t,e,i),o=a.metrics;if(t=a.value,o){var l=o.italic;("text"===i||n&&"mathit"===n.font)&&(l=0),s=new J(t,o.height,o.depth,l,o.skew,o.width,r)}else s=new J(t,0,0,0,0,0,r);if(n){s.maxFontSize=n.sizeMultiplier,n.style.isTight()&&s.classes.push("mtight");var h=n.getColor();h&&(s.style.color=h)}return s},Xt=(t,e)=>{if(G(t.classes)!==G(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(1===t.classes.length){var i=t.classes[0];if("mbin"===i||"mord"===i)return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;return!0},Vt=function(t){for(var e=0,i=0,n=0,r=0;r<t.children.length;r++){var s=t.children[r];s.height>e&&(e=s.height),s.depth>i&&(i=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=n},Wt=function(t,e,i,n){var r=new U(t,e,i,n);return Vt(r),r},Yt=(t,e,i,n)=>new U(t,e,i,n),Ut=function(t){var e=new T(t);return Vt(e),e},$t=function(t,e,i){var n="";switch(t){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=t}return n+"-"+("textbf"===e&&"textit"===i?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Kt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Zt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Jt={fontMap:Kt,makeSymbol:Gt,mathsym:function(t,e,i,n){return void 0===n&&(n=[]),"boldsymbol"===i.font&&jt(t,"Main-Bold",e).metrics?Gt(t,"Main-Bold",e,i,n.concat(["mathbf"])):"\\"===t||"main"===st[e][t].font?Gt(t,"Main-Regular",e,i,n):Gt(t,"AMS-Regular",e,i,n.concat(["amsrm"]))},makeSpan:Wt,makeSvgSpan:Yt,makeLineSpan:function(t,e,i){var n=Wt([t],[],e);return n.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),n.style.borderBottomWidth=j(n.height),n.maxFontSize=1,n},makeAnchor:function(t,e,i,n){var r=new $(t,e,i,n);return Vt(r),r},makeFragment:Ut,wrapFragment:function(t,e){return t instanceof T?Wt([],[t],e):t},makeVList:function(t,e){for(var{children:i,depth:n}=function(t){if("individualShift"===t.positionType){for(var e=t.children,i=[e[0]],n=-e[0].shift-e[0].elem.depth,r=n,s=1;s<e.length;s++){var a=-e[s].shift-r-e[s].elem.depth,o=a-(e[s-1].elem.height+e[s-1].elem.depth);r+=a,i.push({type:"kern",size:o}),i.push(e[s])}return{children:i,depth:n}}var l;if("top"===t.positionType){for(var h=t.positionData,c=0;c<t.children.length;c++){var d=t.children[c];h-="kern"===d.type?d.size:d.elem.height+d.elem.depth}l=h}else if("bottom"===t.positionType)l=-t.positionData;else{var u=t.children[0];if("elem"!==u.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)l=-u.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");l=-u.elem.depth}}return{children:t.children,depth:l}}(t),r=0,s=0;s<i.length;s++){var a=i[s];if("elem"===a.type){var o=a.elem;r=Math.max(r,o.maxFontSize,o.height)}}r+=2;var l=Wt(["pstrut"],[]);l.style.height=j(r);for(var h=[],c=n,d=n,u=n,p=0;p<i.length;p++){var f=i[p];if("kern"===f.type)u+=f.size;else{var g=f.elem,m=f.wrapperClasses||[],b=f.wrapperStyle||{},x=Wt(m,[l,g],void 0,b);x.style.top=j(-r-u-g.depth),f.marginLeft&&(x.style.marginLeft=f.marginLeft),f.marginRight&&(x.style.marginRight=f.marginRight),h.push(x),u+=g.height+g.depth}c=Math.min(c,u),d=Math.max(d,u)}var v,y=Wt(["vlist"],h);if(y.style.height=j(d),c<0){var w=Wt([],[]),k=Wt(["vlist"],[w]);k.style.height=j(-c);var A=Wt(["vlist-s"],[new J("")]);v=[Wt(["vlist-r"],[y,A]),Wt(["vlist-r"],[k])]}else v=[Wt(["vlist-r"],[y])];var S=Wt(["vlist-t"],v);return 2===v.length&&S.classes.push("vlist-t2"),S.height=d,S.depth=-c,S},makeOrd:function(t,e,i){var n=t.mode,r=t.text,a=["mord"],o="math"===n||"text"===n&&e.font,l=o?e.font:e.fontFamily,h="",c="";if(55349===r.charCodeAt(0)&&([h,c]=function(t,e){var i=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,n="math"===e?0:1;if(119808<=i&&i<120484){var r=Math.floor((i-119808)/26);return[Ht[r][2],Ht[r][n]]}if(120782<=i&&i<=120831){var a=Math.floor((i-120782)/10);return[qt[a][2],qt[a][n]]}if(120485===i||120486===i)return[Ht[0][2],Ht[0][n]];if(120486<i&&i<120782)return["",""];throw new s("Unsupported character: "+t)}(r,n)),h.length>0)return Gt(r,h,n,e,a.concat(c));if(l){var d,u;if("boldsymbol"===l){var p=function(t,e,i,n,r){return"textord"!==r&&jt(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(r,n,0,0,i);d=p.fontName,u=[p.fontClass]}else o?(d=Kt[l].fontName,u=[l]):(d=$t(l,e.fontWeight,e.fontShape),u=[l,e.fontWeight,e.fontShape]);if(jt(r,d,n).metrics)return Gt(r,d,n,e,a.concat(u));if(kt.hasOwnProperty(r)&&"Typewriter"===d.slice(0,10)){for(var f=[],g=0;g<r.length;g++)f.push(Gt(r[g],d,n,e,a.concat(u)));return Ut(f)}}if("mathord"===i)return Gt(r,"Math-Italic",n,e,a.concat(["mathnormal"]));if("textord"===i){var m=st[n][r]&&st[n][r].font;if("ams"===m){var b=$t("amsrm",e.fontWeight,e.fontShape);return Gt(r,b,n,e,a.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==m&&m){var x=$t(m,e.fontWeight,e.fontShape);return Gt(r,x,n,e,a.concat(x,e.fontWeight,e.fontShape))}var v=$t("textrm",e.fontWeight,e.fontShape);return Gt(r,v,n,e,a.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+i+" in makeOrd")},makeGlue:(t,e)=>{var i=Wt(["mspace"],[],e),n=q(t,e);return i.style.marginRight=j(n),i},staticSvg:function(t,e){var[i,n,r]=Zt[t],s=new tt(i),a=new Q([s],{width:j(n),height:j(r),style:"width:"+j(n),viewBox:"0 0 "+1e3*n+" "+1e3*r,preserveAspectRatio:"xMinYMin"}),o=Yt(["overlay"],[a],e);return o.height=r,o.style.height=j(r),o.style.width=j(n),o},svgData:Zt,tryCombineChars:t=>{for(var e=0;e<t.length-1;e++){var i=t[e],n=t[e+1];i instanceof J&&n instanceof J&&Xt(i,n)&&(i.text+=n.text,i.height=Math.max(i.height,n.height),i.depth=Math.max(i.depth,n.depth),i.italic=n.italic,t.splice(e+1,1),e--)}return t}},Qt={number:3,unit:"mu"},te={number:4,unit:"mu"},ee={number:5,unit:"mu"},ie={mord:{mop:Qt,mbin:te,mrel:ee,minner:Qt},mop:{mord:Qt,mop:Qt,mrel:ee,minner:Qt},mbin:{mord:te,mop:te,mopen:te,minner:te},mrel:{mord:ee,mop:ee,mopen:ee,minner:ee},mopen:{},mclose:{mop:Qt,mbin:te,mrel:ee,minner:Qt},mpunct:{mord:Qt,mop:Qt,mrel:ee,mopen:Qt,mclose:Qt,mpunct:Qt,minner:Qt},minner:{mord:Qt,mop:Qt,mbin:te,mrel:ee,mopen:Qt,mpunct:Qt,minner:Qt}},ne={mord:{mop:Qt},mop:{mord:Qt,mop:Qt},mbin:{},mrel:{},mopen:{},mclose:{mop:Qt},mpunct:{},minner:{mop:Qt}},re={},se={},ae={};function oe(t){for(var{type:e,names:i,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=t,o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r},l=0;l<i.length;++l)re[i[l]]=o;e&&(s&&(se[e]=s),a&&(ae[e]=a))}function le(t){var{type:e,htmlBuilder:i,mathmlBuilder:n}=t;oe({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:i,mathmlBuilder:n})}var he=function(t){return"ordgroup"===t.type&&1===t.body.length?t.body[0]:t},ce=function(t){return"ordgroup"===t.type?t.body:[t]},de=Jt.makeSpan,ue=["leftmost","mbin","mopen","mrel","mop","mpunct"],pe=["rightmost","mrel","mclose","mpunct"],fe={display:k.DISPLAY,text:k.TEXT,script:k.SCRIPT,scriptscript:k.SCRIPTSCRIPT},ge={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},me=function(t,e,i,n){void 0===n&&(n=[null,null]);for(var r=[],s=0;s<t.length;s++){var a=ke(t[s],e);if(a instanceof T){var o=a.children;r.push(...o)}else r.push(a)}if(Jt.tryCombineChars(r),!i)return r;var l=e;if(1===t.length){var h=t[0];"sizing"===h.type?l=e.havingSize(h.size):"styling"===h.type&&(l=e.havingStyle(fe[h.style]))}var d=de([n[0]||"leftmost"],[],e),u=de([n[1]||"rightmost"],[],e),p="root"===i;return be(r,((t,e)=>{var i=e.classes[0],n=t.classes[0];"mbin"===i&&c.contains(pe,n)?e.classes[0]="mord":"mbin"===n&&c.contains(ue,i)&&(t.classes[0]="mord")}),{node:d},u,p),be(r,((t,e)=>{var i=ye(e),n=ye(t),r=i&&n?t.hasClass("mtight")?ne[i][n]:ie[i][n]:null;if(r)return Jt.makeGlue(r,l)}),{node:d},u,p),r},be=function t(e,i,n,r,s){r&&e.push(r);for(var a=0;a<e.length;a++){var o=e[a],l=xe(o);if(l)t(l.children,i,n,null,s);else{var h=!o.hasClass("mspace");if(h){var c=i(o,n.node);c&&(n.insertAfter?n.insertAfter(c):(e.unshift(c),a++))}h?n.node=o:s&&o.hasClass("newline")&&(n.node=de(["leftmost"])),n.insertAfter=(t=>i=>{e.splice(t+1,0,i),a++})(a)}}r&&e.pop()},xe=function(t){return t instanceof T||t instanceof $||t instanceof U&&t.hasClass("enclosing")?t:null},ve=function t(e,i){var n=xe(e);if(n){var r=n.children;if(r.length){if("right"===i)return t(r[r.length-1],"right");if("left"===i)return t(r[0],"left")}}return e},ye=function(t,e){return t?(e&&(t=ve(t,e)),ge[t.classes[0]]||null):null},we=function(t,e){var i=["nulldelimiter"].concat(t.baseSizingClasses());return de(e.concat(i))},ke=function(t,e,i){if(!t)return de();if(se[t.type]){var n=se[t.type](t,e);if(i&&e.size!==i.size){n=de(e.sizingClasses(i),[n],e);var r=e.sizeMultiplier/i.sizeMultiplier;n.height*=r,n.depth*=r}return n}throw new s("Got group of unknown type: '"+t.type+"'")};function Ae(t,e){var i=de(["base"],t,e),n=de(["strut"]);return n.style.height=j(i.height+i.depth),i.depth&&(n.style.verticalAlign=j(-i.depth)),i.children.unshift(n),i}function Se(t,e){var i=null;1===t.length&&"tag"===t[0].type&&(i=t[0].tag,t=t[0].body);var n,r=me(t,e,"root");2===r.length&&r[1].hasClass("tag")&&(n=r.pop());for(var s,a=[],o=[],l=0;l<r.length;l++)if(o.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var h=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,o.push(r[l]),r[l].hasClass("nobreak")&&(h=!0);h||(a.push(Ae(o,e)),o=[])}else r[l].hasClass("newline")&&(o.pop(),o.length>0&&(a.push(Ae(o,e)),o=[]),a.push(r[l]));o.length>0&&a.push(Ae(o,e)),i?((s=Ae(me(i,e,!0))).classes=["tag"],a.push(s)):n&&a.push(n);var c=de(["katex-html"],a);if(c.setAttribute("aria-hidden","true"),s){var d=s.children[0];d.style.height=j(c.height+c.depth),c.depth&&(d.style.verticalAlign=j(-c.depth))}return c}function Ce(t){return new T(t)}class _e{constructor(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=G(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof Me&&this.children[i+1]instanceof Me){for(var n=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof Me;)n+=this.children[++i].toText();t.appendChild(new Me(n).toNode())}else t.appendChild(this.children[i].toNode());return t}toMarkup(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=c.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+c.escape(G(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">"}toText(){return this.children.map((t=>t.toText())).join("")}}class Me{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return c.escape(this.toText())}toText(){return this.text}}var Te={MathNode:_e,TextNode:Me,SpaceNode:class{constructor(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?"":t>=.1666&&t<=.1667?"":t>=.2222&&t<=.2223?"":t>=.2777&&t<=.2778?"":t>=-.05556&&t<=-.05555?"":t>=-.1667&&t<=-.1666?"":t>=-.2223&&t<=-.2222?"":t>=-.2778&&t<=-.2777?"":null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",j(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+j(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:Ce},Ee=function(t,e,i){return!st[e][t]||!st[e][t].replace||55349===t.charCodeAt(0)||kt.hasOwnProperty(t)&&i&&(i.fontFamily&&"tt"===i.fontFamily.slice(4,6)||i.font&&"tt"===i.font.slice(4,6))||(t=st[e][t].replace),new Te.TextNode(t)},Ne=function(t){return 1===t.length?t[0]:new Te.MathNode("mrow",t)},Pe=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var i=e.font;if(!i||"mathnormal"===i)return null;var n=t.mode;if("mathit"===i)return"italic";if("boldsymbol"===i)return"textord"===t.type?"bold":"bold-italic";if("mathbf"===i)return"bold";if("mathbb"===i)return"double-struck";if("mathsfit"===i)return"sans-serif-italic";if("mathfrak"===i)return"fraktur";if("mathscr"===i||"mathcal"===i)return"script";if("mathsf"===i)return"sans-serif";if("mathtt"===i)return"monospace";var r=t.text;return c.contains(["\\imath","\\jmath"],r)?null:(st[n][r]&&st[n][r].replace&&(r=st[n][r].replace),L(r,Jt.fontMap[i].fontName,n)?Jt.fontMap[i].variant:null)};function Le(t){if(!t)return!1;if("mi"===t.type&&1===t.children.length){var e=t.children[0];return e instanceof Me&&"."===e.text}if("mo"===t.type&&1===t.children.length&&"true"===t.getAttribute("separator")&&"0em"===t.getAttribute("lspace")&&"0em"===t.getAttribute("rspace")){var i=t.children[0];return i instanceof Me&&","===i.text}return!1}var Ie=function(t,e,i){if(1===t.length){var n=Oe(t[0],e);return i&&n instanceof _e&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var r,s=[],a=0;a<t.length;a++){var o=Oe(t[a],e);if(o instanceof _e&&r instanceof _e){if("mtext"===o.type&&"mtext"===r.type&&o.getAttribute("mathvariant")===r.getAttribute("mathvariant")){r.children.push(...o.children);continue}if("mn"===o.type&&"mn"===r.type){r.children.push(...o.children);continue}if(Le(o)&&"mn"===r.type){r.children.push(...o.children);continue}if("mn"===o.type&&Le(r))o.children=[...r.children,...o.children],s.pop();else if(("msup"===o.type||"msub"===o.type)&&o.children.length>=1&&("mn"===r.type||Le(r))){var l=o.children[0];l instanceof _e&&"mn"===l.type&&(l.children=[...r.children,...l.children],s.pop())}else if("mi"===r.type&&1===r.children.length){var h=r.children[0];if(h instanceof Me&&""===h.text&&("mo"===o.type||"mi"===o.type||"mn"===o.type)){var c=o.children[0];c instanceof Me&&c.text.length>0&&(c.text=c.text.slice(0,1)+""+c.text.slice(1),s.pop())}}}s.push(o),r=o}return s},Re=function(t,e,i){return Ne(Ie(t,e,i))},Oe=function(t,e){if(!t)return new Te.MathNode("mrow");if(ae[t.type])return ae[t.type](t,e);throw new s("Got group of unknown type: '"+t.type+"'")};function De(t,e,i,n,r){var s,a=Ie(t,i);s=1===a.length&&a[0]instanceof _e&&c.contains(["mrow","mtable"],a[0].type)?a[0]:new Te.MathNode("mrow",a);var o=new Te.MathNode("annotation",[new Te.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var l=new Te.MathNode("semantics",[s,o]),h=new Te.MathNode("math",[l]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var d=r?"katex":"katex-mathml";return Jt.makeSpan([d],[h])}var ze=function(t){return new z({style:t.displayMode?k.DISPLAY:k.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Fe=function(t,e){if(e.displayMode){var i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=Jt.makeSpan(i,[t])}return t},Be={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},He={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},qe=function(t,e,i,n,r){var s,a=t.height+t.depth+i+n;if(/fbox|color|angl/.test(e)){if(s=Jt.makeSpan(["stretchy",e],[],r),"fbox"===e){var o=r.color&&r.getColor();o&&(s.style.borderColor=o)}}else{var l=[];/^[bx]cancel$/.test(e)&&l.push(new et({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&l.push(new et({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new Q(l,{width:"100%",height:j(a)});s=Jt.makeSvgSpan([],[h],r)}return s.height=a,s.style.height=j(a),s},je=function(t){var e=new Te.MathNode("mo",[new Te.TextNode(Be[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},Ge=function(t,e){var{span:i,minWidth:n,height:r}=function(){var i=4e5,n=t.label.slice(1);if(c.contains(["widehat","widecheck","widetilde","utilde"],n)){var r,s,a,o="ordgroup"===(f=t.base).type?f.body.length:1;if(o>5)"widehat"===n||"widecheck"===n?(r=420,i=2364,a=.42,s=n+"4"):(r=312,i=2340,a=.34,s="tilde4");else{var l=[1,1,2,2,3,3][o];"widehat"===n||"widecheck"===n?(i=[0,1062,2364,2364,2364][l],r=[0,239,300,360,420][l],a=[0,.24,.3,.3,.36,.42][l],s=n+l):(i=[0,600,1033,2339,2340][l],r=[0,260,286,306,312][l],a=[0,.26,.286,.3,.306,.34][l],s="tilde"+l)}var h=new tt(s),d=new Q([h],{width:"100%",height:j(a),viewBox:"0 0 "+i+" "+r,preserveAspectRatio:"none"});return{span:Jt.makeSvgSpan([],[d],e),minWidth:0,height:a}}var u,p,f,g=[],m=He[n],[b,x,v]=m,y=v/1e3,w=b.length;if(1===w)u=["hide-tail"],p=[m[3]];else if(2===w)u=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==w)throw new Error("Correct katexImagesData or update code here to support\n                    "+w+" children.");u=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var k=0;k<w;k++){var A=new tt(b[k]),S=new Q([A],{width:"400em",height:j(y),viewBox:"0 0 "+i+" "+v,preserveAspectRatio:p[k]+" slice"}),C=Jt.makeSvgSpan([u[k]],[S],e);if(1===w)return{span:C,minWidth:x,height:y};C.style.height=j(y),g.push(C)}return{span:Jt.makeSpan(["stretchy"],g,e),minWidth:x,height:y}}();return i.height=r,i.style.height=j(r),n>0&&(i.style.minWidth=j(n)),i};function Xe(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function Ve(t){var e=We(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function We(t){return t&&("atom"===t.type||rt.hasOwnProperty(t.type))?t:null}var Ye=(t,e)=>{var i,n,r;t&&"supsub"===t.type?(i=(n=Xe(t.base,"accent")).base,t.base=i,r=function(t){if(t instanceof U)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(ke(t,e)),t.base=n):i=(n=Xe(t,"accent")).base;var s=ke(i,e.havingCrampedStyle()),a=0;if(n.isShifty&&c.isCharacterBox(i)){var o=c.getBaseElem(i);a=it(ke(o,e.havingCrampedStyle())).skew}var l,h="\\c"===n.label,d=h?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight);if(n.isStretchy)l=Ge(n,e),l=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+j(2*a)+")",marginLeft:j(2*a)}:void 0}]},e);else{var u,p;"\\vec"===n.label?(u=Jt.staticSvg("vec",e),p=Jt.svgData.vec[1]):((u=it(u=Jt.makeOrd({mode:n.mode,text:n.label},e,"textord"))).italic=0,p=u.width,h&&(d+=u.depth)),l=Jt.makeSpan(["accent-body"],[u]);var f="\\textcircled"===n.label;f&&(l.classes.push("accent-full"),d=s.height);var g=a;f||(g-=p/2),l.style.left=j(g),"\\textcircled"===n.label&&(l.style.top=".2em"),l=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-d},{type:"elem",elem:l}]},e)}var m=Jt.makeSpan(["mord","accent"],[l],e);return r?(r.children[0]=m,r.height=Math.max(m.height,r.height),r.classes[0]="mord",r):m},Ue=(t,e)=>{var i=t.isStretchy?je(t.label):new Te.MathNode("mo",[Ee(t.label,t.mode)]),n=new Te.MathNode("mover",[Oe(t.base,e),i]);return n.setAttribute("accent","true"),n},$e=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((t=>"\\"+t)).join("|"));oe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var i=he(e[0]),n=!$e.test(t.funcName),r=!n||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:r,base:i}},htmlBuilder:Ye,mathmlBuilder:Ue}),oe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var i=e[0],n=t.parser.mode;return"math"===n&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:i}},htmlBuilder:Ye,mathmlBuilder:Ue}),oe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=e[0];return{type:"accentUnder",mode:i.mode,label:n,base:r}},htmlBuilder:(t,e)=>{var i=ke(t.base,e),n=Ge(t,e),r="\\utilde"===t.label?.12:0,s=Jt.makeVList({positionType:"top",positionData:i.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:i}]},e);return Jt.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var i=je(t.label),n=new Te.MathNode("munder",[Oe(t.base,e),i]);return n.setAttribute("accentunder","true"),n}});var Ke=t=>{var e=new Te.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};oe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){var{parser:n,funcName:r}=t;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:i[0]}},htmlBuilder(t,e){var i,n=e.style,r=e.havingStyle(n.sup()),s=Jt.wrapFragment(ke(t.body,r,e),e),a="\\x"===t.label.slice(0,2)?"x":"cd";s.classes.push(a+"-arrow-pad"),t.below&&(r=e.havingStyle(n.sub()),(i=Jt.wrapFragment(ke(t.below,r,e),e)).classes.push(a+"-arrow-pad"));var o,l=Ge(t,e),h=-e.fontMetrics().axisHeight+.5*l.height,c=-e.fontMetrics().axisHeight-.5*l.height-.111;if((s.depth>.25||"\\xleftequilibrium"===t.label)&&(c-=s.depth),i){var d=-e.fontMetrics().axisHeight+i.height+.5*l.height+.111;o=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:l,shift:h},{type:"elem",elem:i,shift:d}]},e)}else o=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:l,shift:h}]},e);return o.children[0].children[0].children[1].classes.push("svg-align"),Jt.makeSpan(["mrel","x-arrow"],[o],e)},mathmlBuilder(t,e){var i,n=je(t.label);if(n.setAttribute("minsize","x"===t.label.charAt(0)?"1.75em":"3.0em"),t.body){var r=Ke(Oe(t.body,e));if(t.below){var s=Ke(Oe(t.below,e));i=new Te.MathNode("munderover",[n,s,r])}else i=new Te.MathNode("mover",[n,r])}else if(t.below){var a=Ke(Oe(t.below,e));i=new Te.MathNode("munder",[n,a])}else i=Ke(),i=new Te.MathNode("mover",[n,i]);return i}});var Ze=Jt.makeSpan;function Je(t,e){var i=me(t.body,e,!0);return Ze([t.mclass],i,e)}function Qe(t,e){var i,n=Ie(t.body,e);return"minner"===t.mclass?i=new Te.MathNode("mpadded",n):"mord"===t.mclass?t.isCharacterBox?(i=n[0]).type="mi":i=new Te.MathNode("mi",n):(t.isCharacterBox?(i=n[0]).type="mo":i=new Te.MathNode("mo",n),"mbin"===t.mclass?(i.attributes.lspace="0.22em",i.attributes.rspace="0.22em"):"mpunct"===t.mclass?(i.attributes.lspace="0em",i.attributes.rspace="0.17em"):"mopen"===t.mclass||"mclose"===t.mclass?(i.attributes.lspace="0em",i.attributes.rspace="0em"):"minner"===t.mclass&&(i.attributes.lspace="0.0556em",i.attributes.width="+0.1111em")),i}oe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:i,funcName:n}=t,r=e[0];return{type:"mclass",mode:i.mode,mclass:"m"+n.slice(5),body:ce(r),isCharacterBox:c.isCharacterBox(r)}},htmlBuilder:Je,mathmlBuilder:Qe});var ti=t=>{var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};oe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:i}=t;return{type:"mclass",mode:i.mode,mclass:ti(e[0]),body:ce(e[1]),isCharacterBox:c.isCharacterBox(e[1])}}}),oe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var i,{parser:n,funcName:r}=t,s=e[1],a=e[0];i="\\stackrel"!==r?ti(s):"mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==r,body:ce(s)},l={type:"supsub",mode:a.mode,base:o,sup:"\\underset"===r?null:a,sub:"\\underset"===r?a:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:c.isCharacterBox(l)}},htmlBuilder:Je,mathmlBuilder:Qe}),oe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"pmb",mode:i.mode,mclass:ti(e[0]),body:ce(e[0])}},htmlBuilder(t,e){var i=me(t.body,e,!0),n=Jt.makeSpan([t.mclass],i,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var i=Ie(t.body,e),n=new Te.MathNode("mstyle",i);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ei={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},ii=t=>"textord"===t.type&&"@"===t.text;function ni(t,e,i){var n=ei[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return i.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":var r={type:"atom",text:n,mode:"math",family:"rel"},s={type:"ordgroup",mode:"math",body:[i.callFunction("\\\\cdleft",[e[0]],[]),i.callFunction("\\Big",[r],[]),i.callFunction("\\\\cdright",[e[1]],[])]};return i.callFunction("\\\\cdparent",[s],[]);case"\\\\cdlongequal":return i.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return i.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}oe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:n}=t;return{type:"cdlabel",mode:i.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var i=e.havingStyle(e.style.sup()),n=Jt.wrapFragment(ke(t.label,i,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=j(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var i=new Te.MathNode("mrow",[Oe(t.label,e)]);return(i=new Te.MathNode("mpadded",[i])).setAttribute("width","0"),"left"===t.side&&i.setAttribute("lspace","-1width"),i.setAttribute("voffset","0.7em"),(i=new Te.MathNode("mstyle",[i])).setAttribute("displaystyle","false"),i.setAttribute("scriptlevel","1"),i}}),oe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:i}=t;return{type:"cdlabelparent",mode:i.mode,fragment:e[0]}},htmlBuilder(t,e){var i=Jt.wrapFragment(ke(t.fragment,e),e);return i.classes.push("cd-vert-arrow"),i},mathmlBuilder:(t,e)=>new Te.MathNode("mrow",[Oe(t.fragment,e)])}),oe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:i}=t,n=Xe(e[0],"ordgroup").body,r="",a=0;a<n.length;a++){r+=Xe(n[a],"textord").text}var o,l=parseInt(r);if(isNaN(l))throw new s("\\@char has non-numeric argument "+r);if(l<0||l>=1114111)throw new s("\\@char with invalid code point "+r);return l<=65535?o=String.fromCharCode(l):(l-=65536,o=String.fromCharCode(55296+(l>>10),56320+(1023&l))),{type:"textord",mode:i.mode,text:o}}});var ri=(t,e)=>{var i=me(t.body,e.withColor(t.color),!1);return Jt.makeFragment(i)},si=(t,e)=>{var i=Ie(t.body,e.withColor(t.color)),n=new Te.MathNode("mstyle",i);return n.setAttribute("mathcolor",t.color),n};oe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:i}=t,n=Xe(e[0],"color-token").color,r=e[1];return{type:"color",mode:i.mode,color:n,body:ce(r)}},htmlBuilder:ri,mathmlBuilder:si}),oe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:i,breakOnTokenText:n}=t,r=Xe(e[0],"color-token").color;i.gullet.macros.set("\\current@color",r);var s=i.parseExpression(!0,n);return{type:"color",mode:i.mode,color:r,body:s}},htmlBuilder:ri,mathmlBuilder:si}),oe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,i){var{parser:n}=t,r="["===n.gullet.future().text?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&Xe(r,"size").value}},htmlBuilder(t,e){var i=Jt.makeSpan(["mspace"],[],e);return t.newLine&&(i.classes.push("newline"),t.size&&(i.style.marginTop=j(q(t.size,e)))),i},mathmlBuilder(t,e){var i=new Te.MathNode("mspace");return t.newLine&&(i.setAttribute("linebreak","newline"),t.size&&i.setAttribute("height",j(q(t.size,e)))),i}});var ai={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},oi=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new s("Expected a control sequence",t);return e},li=(t,e,i,n)=>{var r=t.gullet.macros.get(i.text);null==r&&(i.noexpand=!0,r={tokens:[i],numArgs:0,unexpandable:!t.gullet.isExpandable(i.text)}),t.gullet.macros.set(e,r,n)};oe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:i}=t;e.consumeSpaces();var n=e.fetch();if(ai[n.text])return"\\global"!==i&&"\\\\globallong"!==i||(n.text=ai[n.text]),Xe(e.parseFunction(),"internal");throw new s("Invalid token after macro prefix",n)}}),oe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,n=e.gullet.popToken(),r=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new s("Expected a control sequence",n);for(var a,o=0,l=[[]];"{"!==e.gullet.future().text;)if("#"===(n=e.gullet.popToken()).text){if("{"===e.gullet.future().text){a=e.gullet.future(),l[o].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new s('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==o+1)throw new s('Argument number "'+n.text+'" out of order');o++,l.push([])}else{if("EOF"===n.text)throw new s("Expected a macro definition");l[o].push(n.text)}var{tokens:h}=e.gullet.consumeArg();return a&&h.unshift(a),"\\edef"!==i&&"\\xdef"!==i||(h=e.gullet.expandTokens(h)).reverse(),e.gullet.macros.set(r,{tokens:h,numArgs:o,delimiters:l},i===ai[i]),{type:"internal",mode:e.mode}}}),oe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,n=oi(e.gullet.popToken());e.gullet.consumeSpaces();var r=(t=>{var e=t.gullet.popToken();return"="===e.text&&" "===(e=t.gullet.popToken()).text&&(e=t.gullet.popToken()),e})(e);return li(e,n,r,"\\\\globallet"===i),{type:"internal",mode:e.mode}}}),oe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,n=oi(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return li(e,n,s,"\\\\globalfuture"===i),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var hi=function(t,e,i){var n=L(st.math[t]&&st.math[t].replace||t,e,i);if(!n)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return n},ci=function(t,e,i,n){var r=i.havingBaseStyle(e),s=Jt.makeSpan(n.concat(r.sizingClasses(i)),[t],i),a=r.sizeMultiplier/i.sizeMultiplier;return s.height*=a,s.depth*=a,s.maxFontSize=r.sizeMultiplier,s},di=function(t,e,i){var n=e.havingBaseStyle(i),r=(1-e.sizeMultiplier/n.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=j(r),t.height-=r,t.depth+=r},ui=function(t,e,i,n,r,s){var a=function(t,e,i,n){return Jt.makeSymbol(t,"Size"+e+"-Regular",i,n)}(t,e,r,n),o=ci(Jt.makeSpan(["delimsizing","size"+e],[a],n),k.TEXT,n,s);return i&&di(o,n,k.TEXT),o},pi=function(t,e,i){var n;return n="Size1-Regular"===e?"delim-size1":"delim-size4",{type:"elem",elem:Jt.makeSpan(["delimsizinginner",n],[Jt.makeSpan([],[Jt.makeSymbol(t,e,i)])])}},fi=function(t,e,i){var n=E["Size4-Regular"][t.charCodeAt(0)]?E["Size4-Regular"][t.charCodeAt(0)][4]:E["Size1-Regular"][t.charCodeAt(0)][4],r=new tt("inner",function(t,e){switch(t){case"":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145zM367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z";case"":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257zM478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z";default:return""}}(t,Math.round(1e3*e))),s=new Q([r],{width:j(n),height:j(e),style:"width:"+j(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),a=Jt.makeSvgSpan([],[s],i);return a.height=e,a.style.height=j(e),a.style.width=j(n),{type:"elem",elem:a}},gi={type:"kern",size:-.008},mi=["|","\\lvert","\\rvert","\\vert"],bi=["\\|","\\lVert","\\rVert","\\Vert"],xi=function(t,e,i,n,r,s){var a,o,l,h,d="",u=0;a=l=h=t,o=null;var p="Size1-Regular";"\\uparrow"===t?l=h="":"\\Uparrow"===t?l=h="":"\\downarrow"===t?a=l="":"\\Downarrow"===t?a=l="":"\\updownarrow"===t?(a="\\uparrow",l="",h="\\downarrow"):"\\Updownarrow"===t?(a="\\Uparrow",l="",h="\\Downarrow"):c.contains(mi,t)?(l="",d="vert",u=333):c.contains(bi,t)?(l="",d="doublevert",u=556):"["===t||"\\lbrack"===t?(a="",l="",h="",p="Size4-Regular",d="lbrack",u=667):"]"===t||"\\rbrack"===t?(a="",l="",h="",p="Size4-Regular",d="rbrack",u=667):"\\lfloor"===t||""===t?(l=a="",h="",p="Size4-Regular",d="lfloor",u=667):"\\lceil"===t||""===t?(a="",l=h="",p="Size4-Regular",d="lceil",u=667):"\\rfloor"===t||""===t?(l=a="",h="",p="Size4-Regular",d="rfloor",u=667):"\\rceil"===t||""===t?(a="",l=h="",p="Size4-Regular",d="rceil",u=667):"("===t||"\\lparen"===t?(a="",l="",h="",p="Size4-Regular",d="lparen",u=875):")"===t||"\\rparen"===t?(a="",l="",h="",p="Size4-Regular",d="rparen",u=875):"\\{"===t||"\\lbrace"===t?(a="",o="",h="",l="",p="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(a="",o="",h="",l="",p="Size4-Regular"):"\\lgroup"===t||""===t?(a="",h="",l="",p="Size4-Regular"):"\\rgroup"===t||""===t?(a="",h="",l="",p="Size4-Regular"):"\\lmoustache"===t||""===t?(a="",h="",l="",p="Size4-Regular"):"\\rmoustache"!==t&&""!==t||(a="",h="",l="",p="Size4-Regular");var f=hi(a,p,r),g=f.height+f.depth,m=hi(l,p,r),b=m.height+m.depth,x=hi(h,p,r),v=x.height+x.depth,y=0,w=1;if(null!==o){var A=hi(o,p,r);y=A.height+A.depth,w=2}var S=g+v+y,C=S+Math.max(0,Math.ceil((e-S)/(w*b)))*w*b,_=n.fontMetrics().axisHeight;i&&(_*=n.sizeMultiplier);var M=C/2-_,T=[];if(d.length>0){var E=C-g-v,N=Math.round(1e3*C),P=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+e+" v585 h43z\nM367 15 v585 v"+e+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-e+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+" v602 h84z\nM403 1759 V0 H319 V1759 v"+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+e+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(e+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(e+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(e+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(e+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(d,Math.round(1e3*E)),L=new tt(d,P),I=(u/1e3).toFixed(3)+"em",R=(N/1e3).toFixed(3)+"em",O=new Q([L],{width:I,height:R,viewBox:"0 0 "+u+" "+N}),D=Jt.makeSvgSpan([],[O],n);D.height=N/1e3,D.style.width=I,D.style.height=R,T.push({type:"elem",elem:D})}else{if(T.push(pi(h,p,r)),T.push(gi),null===o){var z=C-g-v+.016;T.push(fi(l,z,n))}else{var F=(C-g-v-y)/2+.016;T.push(fi(l,F,n)),T.push(gi),T.push(pi(o,p,r)),T.push(gi),T.push(fi(l,F,n))}T.push(gi),T.push(pi(a,p,r))}var B=n.havingBaseStyle(k.TEXT),H=Jt.makeVList({positionType:"bottom",positionData:M,children:T},B);return ci(Jt.makeSpan(["delimsizing","mult"],[H],B),k.TEXT,n,s)},vi=.08,yi=function(t,e,i,n,r){var s=function(t,e,i){e*=1e3;var n="";switch(t){case"sqrtMain":n=function(t,e){return"M95,"+(622+t+e)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,_);break;case"sqrtSize1":n=function(t,e){return"M263,"+(601+t+e)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,_);break;case"sqrtSize2":n=function(t,e){return"M983 "+(10+t+e)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,_);break;case"sqrtSize3":n=function(t,e){return"M424,"+(2398+t+e)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" "+e+"\nh400000v"+(40+t)+"h-400000z"}(e,_);break;case"sqrtSize4":n=function(t,e){return"M473,"+(2713+t+e)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}(e,_);break;case"sqrtTall":n=function(t,e,i){return"M702 "+(t+e)+"H400000"+(40+t)+"\nH742v"+(i-54-e-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+e+"H400000v"+(40+t)+"H742z"}(e,_,i)}return n}(t,n,i),a=new tt(t,s),o=new Q([a],{width:"400em",height:j(e),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return Jt.makeSvgSpan(["hide-tail"],[o],r)},wi=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],ki=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Ai=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Si=[0,1.2,1.8,2.4,3],Ci=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_i=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"stack"}],Mi=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Ti=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Ei=function(t,e,i,n){for(var r=Math.min(2,3-n.style.size);r<i.length&&"stack"!==i[r].type;r++){var s=hi(t,Ti(i[r]),"math"),a=s.height+s.depth;if("small"===i[r].type&&(a*=n.havingBaseStyle(i[r].style).sizeMultiplier),a>e)return i[r]}return i[i.length-1]},Ni=function(t,e,i,n,r,s){var a;"<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),a=c.contains(Ai,t)?Ci:c.contains(wi,t)?Mi:_i;var o=Ei(t,e,a,n);return"small"===o.type?function(t,e,i,n,r,s){var a=Jt.makeSymbol(t,"Main-Regular",r,n),o=ci(a,e,n,s);return i&&di(o,n,e),o}(t,o.style,i,n,r,s):"large"===o.type?ui(t,o.size,i,n,r,s):xi(t,e,i,n,r,s)},Pi={sqrtImage:function(t,e){var i,n,r=e.havingBaseSizing(),s=Ei("\\surd",t*r.sizeMultiplier,Mi,r),a=r.sizeMultiplier,o=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),l=0,h=0,c=0;return"small"===s.type?(t<1?a=1:t<1.4&&(a=.7),h=(1+o)/a,(i=yi("sqrtMain",l=(1+o+vi)/a,c=1e3+1e3*o+80,o,e)).style.minWidth="0.853em",n=.833/a):"large"===s.type?(c=1080*Si[s.size],h=(Si[s.size]+o)/a,l=(Si[s.size]+o+vi)/a,(i=yi("sqrtSize"+s.size,l,c,o,e)).style.minWidth="1.02em",n=1/a):(l=t+o+vi,h=t+o,c=Math.floor(1e3*t+o)+80,(i=yi("sqrtTall",l,c,o,e)).style.minWidth="0.742em",n=1.056),i.height=h,i.style.height=j(l),{span:i,advanceWidth:n,ruleWidth:(e.fontMetrics().sqrtRuleThickness+o)*a}},sizedDelim:function(t,e,i,n,r){if("<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),c.contains(wi,t)||c.contains(Ai,t))return ui(t,e,!1,i,n,r);if(c.contains(ki,t))return xi(t,Si[e],!1,i,n,r);throw new s("Illegal delimiter: '"+t+"'")},sizeToMaxHeight:Si,customSizedDelim:Ni,leftRightDelim:function(t,e,i,n,r,s){var a=n.fontMetrics().axisHeight*n.sizeMultiplier,o=5/n.fontMetrics().ptPerEm,l=Math.max(e-a,i+a),h=Math.max(l/500*901,2*l-o);return Ni(t,h,!0,n,r,s)}},Li={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ii=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Ri(t,e){var i=We(t);if(i&&c.contains(Ii,i.text))return i;throw new s(i?"Invalid delimiter '"+i.text+"' after '"+e.funcName+"'":"Invalid delimiter type '"+t.type+"'",t)}function Oi(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}oe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var i=Ri(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:Li[t.funcName].size,mclass:Li[t.funcName].mclass,delim:i.text}},htmlBuilder:(t,e)=>"."===t.delim?Jt.makeSpan([t.mclass]):Pi.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];"."!==t.delim&&e.push(Ee(t.delim,t.mode));var i=new Te.MathNode("mo",e);"mopen"===t.mclass||"mclose"===t.mclass?i.setAttribute("fence","true"):i.setAttribute("fence","false"),i.setAttribute("stretchy","true");var n=j(Pi.sizeToMaxHeight[t.size]);return i.setAttribute("minsize",n),i.setAttribute("maxsize",n),i}}),oe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=t.parser.gullet.macros.get("\\current@color");if(i&&"string"!=typeof i)throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Ri(e[0],t).text,color:i}}}),oe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=Ri(e[0],t),n=t.parser;++n.leftrightDepth;var r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=Xe(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:i.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{Oi(t);for(var i,n,r=me(t.body,e,!0,["mopen","mclose"]),s=0,a=0,o=!1,l=0;l<r.length;l++)r[l].isMiddle?o=!0:(s=Math.max(r[l].height,s),a=Math.max(r[l].depth,a));if(s*=e.sizeMultiplier,a*=e.sizeMultiplier,i="."===t.left?we(e,["mopen"]):Pi.leftRightDelim(t.left,s,a,e,t.mode,["mopen"]),r.unshift(i),o)for(var h=1;h<r.length;h++){var c=r[h].isMiddle;c&&(r[h]=Pi.leftRightDelim(c.delim,s,a,c.options,t.mode,[]))}if("."===t.right)n=we(e,["mclose"]);else{var d=t.rightColor?e.withColor(t.rightColor):e;n=Pi.leftRightDelim(t.right,s,a,d,t.mode,["mclose"])}return r.push(n),Jt.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{Oi(t);var i=Ie(t.body,e);if("."!==t.left){var n=new Te.MathNode("mo",[Ee(t.left,t.mode)]);n.setAttribute("fence","true"),i.unshift(n)}if("."!==t.right){var r=new Te.MathNode("mo",[Ee(t.right,t.mode)]);r.setAttribute("fence","true"),t.rightColor&&r.setAttribute("mathcolor",t.rightColor),i.push(r)}return Ne(i)}}),oe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=Ri(e[0],t);if(!t.parser.leftrightDepth)throw new s("\\middle without preceding \\left",i);return{type:"middle",mode:t.parser.mode,delim:i.text}},htmlBuilder:(t,e)=>{var i;if("."===t.delim)i=we(e,[]);else{i=Pi.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};i.isMiddle=n}return i},mathmlBuilder:(t,e)=>{var i="\\vert"===t.delim||"|"===t.delim?Ee("|","text"):Ee(t.delim,t.mode),n=new Te.MathNode("mo",[i]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var Di=(t,e)=>{var i,n,r,s=Jt.wrapFragment(ke(t.body,e),e),a=t.label.slice(1),o=e.sizeMultiplier,l=0,h=c.isCharacterBox(t.body);if("sout"===a)(i=Jt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/o,l=-.5*e.fontMetrics().xHeight;else if("phase"===a){var d=q({number:.6,unit:"pt"},e),u=q({number:.35,unit:"ex"},e);o/=e.havingBaseSizing().sizeMultiplier;var p=s.height+s.depth+d+u;s.style.paddingLeft=j(p/2+d);var f=Math.floor(1e3*p*o),g="M400000 "+(n=f)+" H0 L"+n/2+" 0 l65 45 L145 "+(n-80)+" H400000z",m=new Q([new tt("phase",g)],{width:"400em",height:j(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});(i=Jt.makeSvgSpan(["hide-tail"],[m],e)).style.height=j(p),l=s.depth+d+u}else{/cancel/.test(a)?h||s.classes.push("cancel-pad"):"angl"===a?s.classes.push("anglpad"):s.classes.push("boxpad");var b=0,x=0,v=0;/box/.test(a)?(v=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),x=b=e.fontMetrics().fboxsep+("colorbox"===a?0:v)):"angl"===a?(b=4*(v=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness)),x=Math.max(0,.25-s.depth)):x=b=h?.2:0,i=qe(s,a,b,x,e),/fbox|boxed|fcolorbox/.test(a)?(i.style.borderStyle="solid",i.style.borderWidth=j(v)):"angl"===a&&.049!==v&&(i.style.borderTopWidth=j(v),i.style.borderRightWidth=j(v)),l=s.depth+x,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}if(t.backgroundColor)r=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:l},{type:"elem",elem:s,shift:0}]},e);else{var y=/cancel|phase/.test(a)?["svg-align"]:[];r=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:i,shift:l,wrapperClasses:y}]},e)}return/cancel/.test(a)&&(r.height=s.height,r.depth=s.depth),/cancel/.test(a)&&!h?Jt.makeSpan(["mord","cancel-lap"],[r],e):Jt.makeSpan(["mord"],[r],e)},zi=(t,e)=>{var i=0,n=new Te.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Oe(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(i=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*i+"pt"),n.setAttribute("height","+"+2*i+"pt"),n.setAttribute("lspace",i+"pt"),n.setAttribute("voffset",i+"pt"),"\\fcolorbox"===t.label){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+r+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};oe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,i){var{parser:n,funcName:r}=t,s=Xe(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:a}},htmlBuilder:Di,mathmlBuilder:zi}),oe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,i){var{parser:n,funcName:r}=t,s=Xe(e[0],"color-token").color,a=Xe(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:a,borderColor:s,body:o}},htmlBuilder:Di,mathmlBuilder:zi}),oe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\fbox",body:e[0]}}}),oe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:n}=t,r=e[0];return{type:"enclose",mode:i.mode,label:n,body:r}},htmlBuilder:Di,mathmlBuilder:zi}),oe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\angl",body:e[0]}}});var Fi={};function Bi(t){for(var{type:e,names:i,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=t,o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},l=0;l<i.length;++l)Fi[i[l]]=o;s&&(se[e]=s),a&&(ae[e]=a)}var Hi={};function qi(t,e){Hi[t]=e}function ji(t){var e=[];t.consumeSpaces();var i=t.fetch().text;for("\\relax"===i&&(t.consume(),t.consumeSpaces(),i=t.fetch().text);"\\hline"===i||"\\hdashline"===i;)t.consume(),e.push("\\hdashline"===i),t.consumeSpaces(),i=t.fetch().text;return e}var Gi=t=>{if(!t.parser.settings.displayMode)throw new s("{"+t.envName+"} can be used only in display mode.")};function Xi(t){if(-1===t.indexOf("ed"))return-1===t.indexOf("*")}function Vi(t,e,i){var{hskipBeforeAndAfter:n,addJot:a,cols:o,arraystretch:l,colSeparationType:h,autoTag:c,singleRow:d,emptySingleRow:u,maxNumCols:p,leqno:f}=e;if(t.gullet.beginGroup(),d||t.gullet.macros.set("\\cr","\\\\\\relax"),!l){var g=t.gullet.expandMacroAsText("\\arraystretch");if(null==g)l=1;else if(!(l=parseFloat(g))||l<0)throw new s("Invalid \\arraystretch: "+g)}t.gullet.beginGroup();var m=[],b=[m],x=[],v=[],y=null!=c?[]:void 0;function w(){c&&t.gullet.macros.set("\\@eqnsw","1",!0)}function k(){y&&(t.gullet.macros.get("\\df@tag")?(y.push(t.subparse([new r("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(c)&&"1"===t.gullet.macros.get("\\@eqnsw")))}for(w(),v.push(ji(t));;){var A=t.parseExpression(!1,d?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),A={type:"ordgroup",mode:t.mode,body:A},i&&(A={type:"styling",mode:t.mode,style:i,body:[A]}),m.push(A);var S=t.fetch().text;if("&"===S){if(p&&m.length===p){if(d||h)throw new s("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else{if("\\end"===S){k(),1===m.length&&"styling"===A.type&&0===A.body[0].body.length&&(b.length>1||!u)&&b.pop(),v.length<b.length+1&&v.push([]);break}if("\\\\"!==S)throw new s("Expected & or \\\\ or \\cr or \\end",t.nextToken);t.consume();var C=void 0;" "!==t.gullet.future().text&&(C=t.parseSizeGroup(!0)),x.push(C?C.value:null),k(),v.push(ji(t)),m=[],b.push(m),w()}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:l,body:b,cols:o,rowGaps:x,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:h,tags:y,leqno:f}}function Wi(t){return"d"===t.slice(0,1)?"display":"text"}var Yi=function(t,e){var i,n,r=t.body.length,a=t.hLinesBeforeRow,o=0,l=new Array(r),h=[],d=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),u=1/e.fontMetrics().ptPerEm,p=5*u;t.colSeparationType&&"small"===t.colSeparationType&&(p=e.havingStyle(k.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var f="CD"===t.colSeparationType?q({number:3,unit:"ex"},e):12*u,g=3*u,m=t.arraystretch*f,b=.7*m,x=.3*m,v=0;function y(t){for(var e=0;e<t.length;++e)e>0&&(v+=.25),h.push({pos:v,isDashed:t[e]})}for(y(a[0]),i=0;i<t.body.length;++i){var w=t.body[i],A=b,S=x;o<w.length&&(o=w.length);var C=new Array(w.length);for(n=0;n<w.length;++n){var _=ke(w[n],e);S<_.depth&&(S=_.depth),A<_.height&&(A=_.height),C[n]=_}var M=t.rowGaps[i],T=0;M&&(T=q(M,e))>0&&(S<(T+=x)&&(S=T),T=0),t.addJot&&(S+=g),C.height=A,C.depth=S,v+=A,C.pos=v,v+=S+T,l[i]=C,y(a[i+1])}var E,N,P=v/2+e.fontMetrics().axisHeight,L=t.cols||[],I=[],R=[];if(t.tags&&t.tags.some((t=>t)))for(i=0;i<r;++i){var O=l[i],D=O.pos-P,z=t.tags[i],F=void 0;(F=!0===z?Jt.makeSpan(["eqn-num"],[],e):!1===z?Jt.makeSpan([],[],e):Jt.makeSpan([],me(z,e,!0),e)).depth=O.depth,F.height=O.height,R.push({type:"elem",elem:F,shift:D})}for(n=0,N=0;n<o||N<L.length;++n,++N){for(var B=L[N]||{},H=!0;"separator"===B.type;){if(H||((E=Jt.makeSpan(["arraycolsep"],[])).style.width=j(e.fontMetrics().doubleRuleSep),I.push(E)),"|"!==B.separator&&":"!==B.separator)throw new s("Invalid separator type: "+B.separator);var G="|"===B.separator?"solid":"dashed",X=Jt.makeSpan(["vertical-separator"],[],e);X.style.height=j(v),X.style.borderRightWidth=j(d),X.style.borderRightStyle=G,X.style.margin="0 "+j(-d/2);var V=v-P;V&&(X.style.verticalAlign=j(-V)),I.push(X),B=L[++N]||{},H=!1}if(!(n>=o)){var W=void 0;(n>0||t.hskipBeforeAndAfter)&&0!==(W=c.deflt(B.pregap,p))&&((E=Jt.makeSpan(["arraycolsep"],[])).style.width=j(W),I.push(E));var Y=[];for(i=0;i<r;++i){var U=l[i],$=U[n];if($){var K=U.pos-P;$.depth=U.depth,$.height=U.height,Y.push({type:"elem",elem:$,shift:K})}}Y=Jt.makeVList({positionType:"individualShift",children:Y},e),Y=Jt.makeSpan(["col-align-"+(B.align||"c")],[Y]),I.push(Y),(n<o-1||t.hskipBeforeAndAfter)&&0!==(W=c.deflt(B.postgap,p))&&((E=Jt.makeSpan(["arraycolsep"],[])).style.width=j(W),I.push(E))}}if(l=Jt.makeSpan(["mtable"],I),h.length>0){for(var Z=Jt.makeLineSpan("hline",e,d),J=Jt.makeLineSpan("hdashline",e,d),Q=[{type:"elem",elem:l,shift:0}];h.length>0;){var tt=h.pop(),et=tt.pos-P;tt.isDashed?Q.push({type:"elem",elem:J,shift:et}):Q.push({type:"elem",elem:Z,shift:et})}l=Jt.makeVList({positionType:"individualShift",children:Q},e)}if(0===R.length)return Jt.makeSpan(["mord"],[l],e);var it=Jt.makeVList({positionType:"individualShift",children:R},e);return it=Jt.makeSpan(["tag"],[it],e),Jt.makeFragment([l,it])},Ui={c:"center ",l:"left ",r:"right "},$i=function(t,e){for(var i=[],n=new Te.MathNode("mtd",[],["mtr-glue"]),r=new Te.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<t.body.length;s++){for(var a=t.body[s],o=[],l=0;l<a.length;l++)o.push(new Te.MathNode("mtd",[Oe(a[l],e)]));t.tags&&t.tags[s]&&(o.unshift(n),o.push(n),t.leqno?o.unshift(r):o.push(r)),i.push(new Te.MathNode("mtr",o))}var h=new Te.MathNode("mtable",i),c=.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0);h.setAttribute("rowspacing",j(c));var d="",u="";if(t.cols&&t.cols.length>0){var p=t.cols,f="",g=!1,m=0,b=p.length;"separator"===p[0].type&&(d+="top ",m=1),"separator"===p[p.length-1].type&&(d+="bottom ",b-=1);for(var x=m;x<b;x++)"align"===p[x].type?(u+=Ui[p[x].align],g&&(f+="none "),g=!0):"separator"===p[x].type&&g&&(f+="|"===p[x].separator?"solid ":"dashed ",g=!1);h.setAttribute("columnalign",u.trim()),/[sd]/.test(f)&&h.setAttribute("columnlines",f.trim())}if("align"===t.colSeparationType){for(var v=t.cols||[],y="",w=1;w<v.length;w++)y+=w%2?"0em ":"1em ";h.setAttribute("columnspacing",y.trim())}else"alignat"===t.colSeparationType||"gather"===t.colSeparationType?h.setAttribute("columnspacing","0em"):"small"===t.colSeparationType?h.setAttribute("columnspacing","0.2778em"):"CD"===t.colSeparationType?h.setAttribute("columnspacing","0.5em"):h.setAttribute("columnspacing","1em");var k="",A=t.hLinesBeforeRow;d+=A[0].length>0?"left ":"",d+=A[A.length-1].length>0?"right ":"";for(var S=1;S<A.length-1;S++)k+=0===A[S].length?"none ":A[S][0]?"dashed ":"solid ";return/[sd]/.test(k)&&h.setAttribute("rowlines",k.trim()),""!==d&&(h=new Te.MathNode("menclose",[h])).setAttribute("notation",d.trim()),t.arraystretch&&t.arraystretch<1&&(h=new Te.MathNode("mstyle",[h])).setAttribute("scriptlevel","1"),h},Ki=function(t,e){-1===t.envName.indexOf("ed")&&Gi(t);var i,n=[],r=t.envName.indexOf("at")>-1?"alignat":"align",a="split"===t.envName,o=Vi(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:Xi(t.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),l=0,h={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&"ordgroup"===e[0].type){for(var c="",d=0;d<e[0].body.length;d++){c+=Xe(e[0].body[d],"textord").text}i=Number(c),l=2*i}var u=!l;o.body.forEach((function(t){for(var e=1;e<t.length;e+=2){var n=Xe(t[e],"styling");Xe(n.body[0],"ordgroup").body.unshift(h)}if(u)l<t.length&&(l=t.length);else{var r=t.length/2;if(i<r)throw new s("Too many math in a row: expected "+i+", but got "+r,t[0])}}));for(var p=0;p<l;++p){var f="r",g=0;p%2==1?f="l":p>0&&u&&(g=1),n[p]={type:"align",align:f,pregap:g,postgap:0}}return o.colSeparationType=u?"align":"alignat",o};Bi({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var i=(We(e[0])?[e[0]]:Xe(e[0],"ordgroup").body).map((function(t){var e=Ve(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+e,t)})),n={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Vi(t.parser,n,Wi(t.envName))},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],i="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:i}]};if("*"===t.envName.charAt(t.envName.length-1)){var r=t.parser;if(r.consumeSpaces(),"["===r.fetch().text){if(r.consume(),r.consumeSpaces(),i=r.fetch().text,-1==="lcr".indexOf(i))throw new s("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),n.cols=[{type:"align",align:i}]}}var a=Vi(t.parser,n,Wi(t.envName)),o=Math.max(0,...a.body.map((t=>t.length)));return a.cols=new Array(o).fill({type:"align",align:i}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e=Vi(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var i=(We(e[0])?[e[0]]:Xe(e[0],"ordgroup").body).map((function(t){var e=Ve(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new s("Unknown column alignment: "+e,t)}));if(i.length>1)throw new s("{subarray} can contain only one column");var n={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=Vi(t.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new s("{subarray} can contain only one column");return n},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e=Vi(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Wi(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Ki,htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){c.contains(["gather","gather*"],t.envName)&&Gi(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Xi(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Vi(t.parser,e,"display")},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Ki,htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Gi(t);var e={autoTag:Xi(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Vi(t.parser,e,"display")},htmlBuilder:Yi,mathmlBuilder:$i}),Bi({type:"array",names:["CD"],props:{numArgs:0},handler:t=>(Gi(t),function(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var i=t.fetch().text;if("&"!==i&&"\\\\"!==i){if("\\end"===i){0===e[e.length-1].length&&e.pop();break}throw new s("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}for(var n,r,a=[],o=[a],l=0;l<e.length;l++){for(var h=e[l],c={type:"styling",body:[],mode:"math",style:"display"},d=0;d<h.length;d++)if(ii(h[d])){a.push(c);var u=Ve(h[d+=1]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(u)>-1);else{if(!("<>AV".indexOf(u)>-1))throw new s('Expected one of "<>AV=|." after @',h[d]);for(var f=0;f<2;f++){for(var g=!0,m=d+1;m<h.length;m++){if(r=u,("mathord"===(n=h[m]).type||"atom"===n.type)&&n.text===r){g=!1,d=m;break}if(ii(h[m]))throw new s("Missing a "+u+" character to complete a CD arrow.",h[m]);p[f].body.push(h[m])}if(g)throw new s("Missing a "+u+" character to complete a CD arrow.",h[d])}}var b={type:"styling",body:[ni(u,p,t)],mode:"math",style:"display"};a.push(b),c={type:"styling",body:[],mode:"math",style:"display"}}else c.body.push(h[d]);l%2==0?a.push(c):a.shift(),a=[],o.push(a)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:o,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(o[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(o.length+1).fill([])}}(t.parser)),htmlBuilder:Yi,mathmlBuilder:$i}),qi("\\nonumber","\\gdef\\@eqnsw{0}"),qi("\\notag","\\nonumber"),oe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new s(t.funcName+" valid only within array environment")}});var Zi=Fi;oe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:i,funcName:n}=t,r=e[0];if("ordgroup"!==r.type)throw new s("Invalid environment name",r);for(var a="",o=0;o<r.body.length;++o)a+=Xe(r.body[o],"textord").text;if("\\begin"===n){if(!Zi.hasOwnProperty(a))throw new s("No such environment: "+a,r);var l=Zi[a],{args:h,optArgs:c}=i.parseArguments("\\begin{"+a+"}",l),d={mode:i.mode,envName:a,parser:i},u=l.handler(d,h,c);i.expect("\\end",!1);var p=i.nextToken,f=Xe(i.parseFunction(),"environment");if(f.name!==a)throw new s("Mismatch: \\begin{"+a+"} matched by \\end{"+f.name+"}",p);return u}return{type:"environment",mode:i.mode,name:a,nameGroup:r}}});var Ji=(t,e)=>{var i=t.font,n=e.withFont(i);return ke(t.body,n)},Qi=(t,e)=>{var i=t.font,n=e.withFont(i);return Oe(t.body,n)},tn={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};oe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=he(e[0]),s=n;return s in tn&&(s=tn[s]),{type:"font",mode:i.mode,font:s.slice(1),body:r}},htmlBuilder:Ji,mathmlBuilder:Qi}),oe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:i}=t,n=e[0],r=c.isCharacterBox(n);return{type:"mclass",mode:i.mode,mclass:ti(n),body:[{type:"font",mode:i.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}}),oe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:i,funcName:n,breakOnTokenText:r}=t,{mode:s}=i,a=i.parseExpression(!0,r);return{type:"font",mode:s,font:"math"+n.slice(1),body:{type:"ordgroup",mode:i.mode,body:a}}},htmlBuilder:Ji,mathmlBuilder:Qi});var en=(t,e)=>{var i=e;return"display"===t?i=i.id>=k.SCRIPT.id?i.text():k.DISPLAY:"text"===t&&i.size===k.DISPLAY.size?i=k.TEXT:"script"===t?i=k.SCRIPT:"scriptscript"===t&&(i=k.SCRIPTSCRIPT),i},nn=(t,e)=>{var i,n=en(t.size,e.style),r=n.fracNum(),s=n.fracDen();i=e.havingStyle(r);var a=ke(t.numer,i,e);if(t.continued){var o=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;a.height=a.height<o?o:a.height,a.depth=a.depth<l?l:a.depth}i=e.havingStyle(s);var h,c,d,u,p,f,g,m,b,x,v=ke(t.denom,i,e);if(t.hasBarLine?(t.barSize?(c=q(t.barSize,e),h=Jt.makeLineSpan("frac-line",e,c)):h=Jt.makeLineSpan("frac-line",e),c=h.height,d=h.height):(h=null,c=0,d=e.fontMetrics().defaultRuleThickness),n.size===k.DISPLAY.size||"display"===t.size?(u=e.fontMetrics().num1,p=c>0?3*d:7*d,f=e.fontMetrics().denom1):(c>0?(u=e.fontMetrics().num2,p=d):(u=e.fontMetrics().num3,p=3*d),f=e.fontMetrics().denom2),h){var y=e.fontMetrics().axisHeight;u-a.depth-(y+.5*c)<p&&(u+=p-(u-a.depth-(y+.5*c))),y-.5*c-(v.height-f)<p&&(f+=p-(y-.5*c-(v.height-f)));var w=-(y-.5*c);g=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:f},{type:"elem",elem:h,shift:w},{type:"elem",elem:a,shift:-u}]},e)}else{var A=u-a.depth-(v.height-f);A<p&&(u+=.5*(p-A),f+=.5*(p-A)),g=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:f},{type:"elem",elem:a,shift:-u}]},e)}return i=e.havingStyle(n),g.height*=i.sizeMultiplier/e.sizeMultiplier,g.depth*=i.sizeMultiplier/e.sizeMultiplier,m=n.size===k.DISPLAY.size?e.fontMetrics().delim1:n.size===k.SCRIPTSCRIPT.size?e.havingStyle(k.SCRIPT).fontMetrics().delim2:e.fontMetrics().delim2,b=null==t.leftDelim?we(e,["mopen"]):Pi.customSizedDelim(t.leftDelim,m,!0,e.havingStyle(n),t.mode,["mopen"]),x=t.continued?Jt.makeSpan([]):null==t.rightDelim?we(e,["mclose"]):Pi.customSizedDelim(t.rightDelim,m,!0,e.havingStyle(n),t.mode,["mclose"]),Jt.makeSpan(["mord"].concat(i.sizingClasses(e)),[b,Jt.makeSpan(["mfrac"],[g]),x],e)},rn=(t,e)=>{var i=new Te.MathNode("mfrac",[Oe(t.numer,e),Oe(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var n=q(t.barSize,e);i.setAttribute("linethickness",j(n))}}else i.setAttribute("linethickness","0px");var r=en(t.size,e.style);if(r.size!==e.style.size){i=new Te.MathNode("mstyle",[i]);var s=r.size===k.DISPLAY.size?"true":"false";i.setAttribute("displaystyle",s),i.setAttribute("scriptlevel","0")}if(null!=t.leftDelim||null!=t.rightDelim){var a=[];if(null!=t.leftDelim){var o=new Te.MathNode("mo",[new Te.TextNode(t.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}if(a.push(i),null!=t.rightDelim){var l=new Te.MathNode("mo",[new Te.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return Ne(a)}return i};oe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var i,{parser:n,funcName:r}=t,s=e[0],a=e[1],o=null,l=null,h="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",l=")";break;case"\\\\bracefrac":i=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:l,size:h,barSize:null}},htmlBuilder:nn,mathmlBuilder:rn}),oe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=e[0],s=e[1];return{type:"genfrac",mode:i.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),oe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var e,{parser:i,funcName:n,token:r}=t;switch(n){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:i.mode,replaceWith:e,token:r}}});var sn=["display","text","script","scriptscript"],an=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};oe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var i,{parser:n}=t,r=e[4],s=e[5],a=he(e[0]),o="atom"===a.type&&"open"===a.family?an(a.text):null,l=he(e[1]),h="atom"===l.type&&"close"===l.family?an(l.text):null,c=Xe(e[2],"size"),d=null;i=!!c.isBlank||(d=c.value).number>0;var u="auto",p=e[3];if("ordgroup"===p.type){if(p.body.length>0){var f=Xe(p.body[0],"textord");u=sn[Number(f.text)]}}else p=Xe(p,"textord"),u=sn[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:i,barSize:d,leftDelim:o,rightDelim:h,size:u}},htmlBuilder:nn,mathmlBuilder:rn}),oe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:i,funcName:n,token:r}=t;return{type:"infix",mode:i.mode,replaceWith:"\\\\abovefrac",size:Xe(e[0],"size").value,token:r}}}),oe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=e[0],s=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(Xe(e[1],"infix").size),a=e[2],o=s.number>0;return{type:"genfrac",mode:i.mode,numer:r,denom:a,continued:!1,hasBarLine:o,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:nn,mathmlBuilder:rn});var on=(t,e)=>{var i,n,r=e.style;"supsub"===t.type?(i=t.sup?ke(t.sup,e.havingStyle(r.sup()),e):ke(t.sub,e.havingStyle(r.sub()),e),n=Xe(t.base,"horizBrace")):n=Xe(t,"horizBrace");var s,a=ke(n.base,e.havingBaseStyle(k.DISPLAY)),o=Ge(n,e);if(n.isOver?(s=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(s=Jt.makeVList({positionType:"bottom",positionData:a.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},e)).children[0].children[0].children[0].classes.push("svg-align"),i){var l=Jt.makeSpan(["mord",n.isOver?"mover":"munder"],[s],e);s=n.isOver?Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:i}]},e):Jt.makeVList({positionType:"bottom",positionData:l.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Jt.makeSpan(["mord",n.isOver?"mover":"munder"],[s],e)};oe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:n}=t;return{type:"horizBrace",mode:i.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:on,mathmlBuilder:(t,e)=>{var i=je(t.label);return new Te.MathNode(t.isOver?"mover":"munder",[Oe(t.base,e),i])}}),oe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,n=e[1],r=Xe(e[0],"url").url;return i.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:i.mode,href:r,body:ce(n)}:i.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var i=me(t.body,e,!1);return Jt.makeAnchor(t.href,[],i,e)},mathmlBuilder:(t,e)=>{var i=Re(t.body,e);return i instanceof _e||(i=new _e("mrow",[i])),i.setAttribute("href",t.href),i}}),oe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,n=Xe(e[0],"url").url;if(!i.settings.isTrusted({command:"\\url",url:n}))return i.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<n.length;s++){var a=n[s];"~"===a&&(a="\\textasciitilde"),r.push({type:"textord",mode:"text",text:a})}var o={type:"text",mode:i.mode,font:"\\texttt",body:r};return{type:"href",mode:i.mode,href:n,body:ce(o)}}}),oe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:i}=t;return{type:"hbox",mode:i.mode,body:ce(e[0])}},htmlBuilder(t,e){var i=me(t.body,e,!1);return Jt.makeFragment(i)},mathmlBuilder:(t,e)=>new Te.MathNode("mrow",Ie(t.body,e))}),oe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var i,{parser:n,funcName:r,token:a}=t,o=Xe(e[0],"raw").string,l=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var h={};switch(r){case"\\htmlClass":h.class=o,i={command:"\\htmlClass",class:o};break;case"\\htmlId":h.id=o,i={command:"\\htmlId",id:o};break;case"\\htmlStyle":h.style=o,i={command:"\\htmlStyle",style:o};break;case"\\htmlData":for(var c=o.split(","),d=0;d<c.length;d++){var u=c[d].split("=");if(2!==u.length)throw new s("Error parsing key-value for \\htmlData");h["data-"+u[0].trim()]=u[1].trim()}i={command:"\\htmlData",attributes:h};break;default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(i)?{type:"html",mode:n.mode,attributes:h,body:ce(l)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var i=me(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var r=Jt.makeSpan(n,i,e);for(var s in t.attributes)"class"!==s&&t.attributes.hasOwnProperty(s)&&r.setAttribute(s,t.attributes[s]);return r},mathmlBuilder:(t,e)=>Re(t.body,e)}),oe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t;return{type:"htmlmathml",mode:i.mode,html:ce(e[0]),mathml:ce(e[1])}},htmlBuilder:(t,e)=>{var i=me(t.html,e,!1);return Jt.makeFragment(i)},mathmlBuilder:(t,e)=>Re(t.mathml,e)});var ln=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new s("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(e[1]+e[2]),unit:e[3]};if(!H(i))throw new s("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};oe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,i)=>{var{parser:n}=t,r={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(i[0])for(var h=Xe(i[0],"raw").string.split(","),c=0;c<h.length;c++){var d=h[c].split("=");if(2===d.length){var u=d[1].trim();switch(d[0].trim()){case"alt":l=u;break;case"width":r=ln(u);break;case"height":a=ln(u);break;case"totalheight":o=ln(u);break;default:throw new s("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var p=Xe(e[0],"url").url;return""===l&&(l=(l=(l=p).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:n.mode,alt:l,width:r,height:a,totalheight:o,src:p}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var i=q(t.height,e),n=0;t.totalheight.number>0&&(n=q(t.totalheight,e)-i);var r=0;t.width.number>0&&(r=q(t.width,e));var s={height:j(i+n)};r>0&&(s.width=j(r)),n>0&&(s.verticalAlign=j(-n));var a=new K(t.src,t.alt,s);return a.height=i,a.depth=n,a},mathmlBuilder:(t,e)=>{var i=new Te.MathNode("mglyph",[]);i.setAttribute("alt",t.alt);var n=q(t.height,e),r=0;if(t.totalheight.number>0&&(r=q(t.totalheight,e)-n,i.setAttribute("valign",j(-r))),i.setAttribute("height",j(n+r)),t.width.number>0){var s=q(t.width,e);i.setAttribute("width",j(s))}return i.setAttribute("src",t.src),i}}),oe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:i,funcName:n}=t,r=Xe(e[0],"size");if(i.settings.strict){var s="m"===n[1],a="mu"===r.value.unit;s?(a||i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+r.value.unit+" units"),"math"!==i.mode&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):a&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:i.mode,dimension:r.value}},htmlBuilder:(t,e)=>Jt.makeGlue(t.dimension,e),mathmlBuilder(t,e){var i=q(t.dimension,e);return new Te.SpaceNode(i)}}),oe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=e[0];return{type:"lap",mode:i.mode,alignment:n.slice(5),body:r}},htmlBuilder:(t,e)=>{var i;"clap"===t.alignment?(i=Jt.makeSpan([],[ke(t.body,e)]),i=Jt.makeSpan(["inner"],[i],e)):i=Jt.makeSpan(["inner"],[ke(t.body,e)]);var n=Jt.makeSpan(["fix"],[]),r=Jt.makeSpan([t.alignment],[i,n],e),s=Jt.makeSpan(["strut"]);return s.style.height=j(r.height+r.depth),r.depth&&(s.style.verticalAlign=j(-r.depth)),r.children.unshift(s),r=Jt.makeSpan(["thinbox"],[r],e),Jt.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(t,e)=>{var i=new Te.MathNode("mpadded",[Oe(t.body,e)]);if("rlap"!==t.alignment){var n="llap"===t.alignment?"-1":"-0.5";i.setAttribute("lspace",n+"width")}return i.setAttribute("width","0px"),i}}),oe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:i,parser:n}=t,r=n.mode;n.switchMode("math");var s="\\("===i?"\\)":"$",a=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:a}}}),oe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new s("Mismatched "+t.funcName)}});var hn=(t,e)=>{switch(e.style.size){case k.DISPLAY.size:return t.display;case k.TEXT.size:return t.text;case k.SCRIPT.size:return t.script;case k.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};oe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:i}=t;return{type:"mathchoice",mode:i.mode,display:ce(e[0]),text:ce(e[1]),script:ce(e[2]),scriptscript:ce(e[3])}},htmlBuilder:(t,e)=>{var i=hn(t,e),n=me(i,e,!1);return Jt.makeFragment(n)},mathmlBuilder:(t,e)=>{var i=hn(t,e);return Re(i,e)}});var cn=(t,e,i,n,r,s,a)=>{t=Jt.makeSpan([],[t]);var o,l,h,d=i&&c.isCharacterBox(i);if(e){var u=ke(e,n.havingStyle(r.sup()),n);l={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(i){var p=ke(i,n.havingStyle(r.sub()),n);o={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}if(l&&o){var f=n.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+t.depth+a;h=Jt.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:j(-s)},{type:"kern",size:o.kern},{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:j(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(o){var g=t.height-a;h=Jt.makeVList({positionType:"top",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:j(-s)},{type:"kern",size:o.kern},{type:"elem",elem:t}]},n)}else{if(!l)return t;var m=t.depth+a;h=Jt.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:j(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var b=[h];if(o&&0!==s&&!d){var x=Jt.makeSpan(["mspace"],[],n);x.style.marginRight=j(s),b.unshift(x)}return Jt.makeSpan(["mop","op-limits"],b,n)},dn=["\\smallint"],un=(t,e)=>{var i,n,r,s=!1;"supsub"===t.type?(i=t.sup,n=t.sub,r=Xe(t.base,"op"),s=!0):r=Xe(t,"op");var a,o=e.style,l=!1;if(o.size===k.DISPLAY.size&&r.symbol&&!c.contains(dn,r.name)&&(l=!0),r.symbol){var h=l?"Size2-Regular":"Size1-Regular",d="";if("\\oiint"!==r.name&&"\\oiiint"!==r.name||(d=r.name.slice(1),r.name="oiint"===d?"\\iint":"\\iiint"),a=Jt.makeSymbol(r.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),d.length>0){var u=a.italic,p=Jt.staticSvg(d+"Size"+(l?"2":"1"),e);a=Jt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},e),r.name="\\"+d,a.classes.unshift("mop"),a.italic=u}}else if(r.body){var f=me(r.body,e,!0);1===f.length&&f[0]instanceof J?(a=f[0]).classes[0]="mop":a=Jt.makeSpan(["mop"],f,e)}else{for(var g=[],m=1;m<r.name.length;m++)g.push(Jt.mathsym(r.name[m],r.mode,e));a=Jt.makeSpan(["mop"],g,e)}var b=0,x=0;return(a instanceof J||"\\oiint"===r.name||"\\oiiint"===r.name)&&!r.suppressBaseShift&&(b=(a.height-a.depth)/2-e.fontMetrics().axisHeight,x=a.italic),s?cn(a,i,n,e,o,x,b):(b&&(a.style.position="relative",a.style.top=j(b)),a)},pn=(t,e)=>{var i;if(t.symbol)i=new _e("mo",[Ee(t.name,t.mode)]),c.contains(dn,t.name)&&i.setAttribute("largeop","false");else if(t.body)i=new _e("mo",Ie(t.body,e));else{i=new _e("mi",[new Me(t.name.slice(1))]);var n=new _e("mo",[Ee("","text")]);i=t.parentIsSupSub?new _e("mrow",[i,n]):Ce([i,n])}return i},fn={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};oe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=n;return 1===r.length&&(r=fn[r]),{type:"op",mode:i.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:un,mathmlBuilder:pn}),oe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:i}=t,n=e[0];return{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ce(n)}},htmlBuilder:un,mathmlBuilder:pn});var gn={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};oe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:un,mathmlBuilder:pn}),oe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:un,mathmlBuilder:pn}),oe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t,n=i;return 1===n.length&&(n=gn[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:un,mathmlBuilder:pn});var mn=(t,e)=>{var i,n,r,s,a=!1;if("supsub"===t.type?(i=t.sup,n=t.sub,r=Xe(t.base,"operatorname"),a=!0):r=Xe(t,"operatorname"),r.body.length>0){for(var o=r.body.map((t=>{var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t})),l=me(o,e.withFont("mathrm"),!0),h=0;h<l.length;h++){var c=l[h];c instanceof J&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Jt.makeSpan(["mop"],l,e)}else s=Jt.makeSpan(["mop"],[],e);return a?cn(s,i,n,e,e.style,0,0):s};function bn(t,e,i){for(var n=me(t,e,!1),r=e.sizeMultiplier/i.sizeMultiplier,s=0;s<n.length;s++){var a=n[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(i)):n[s].classes[a+1]==="reset-size"+e.size&&(n[s].classes[a+1]="reset-size"+i.size),n[s].height*=r,n[s].depth*=r}return Jt.makeFragment(n)}oe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:i,funcName:n}=t,r=e[0];return{type:"operatorname",mode:i.mode,body:ce(r),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:mn,mathmlBuilder:(t,e)=>{for(var i=Ie(t.body,e.withFont("mathrm")),n=!0,r=0;r<i.length;r++){var s=i[r];if(s instanceof Te.SpaceNode);else if(s instanceof Te.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var a=s.children[0];1===s.children.length&&a instanceof Te.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var o=i.map((t=>t.toText())).join("");i=[new Te.TextNode(o)]}var l=new Te.MathNode("mi",i);l.setAttribute("mathvariant","normal");var h=new Te.MathNode("mo",[Ee("","text")]);return t.parentIsSupSub?new Te.MathNode("mrow",[l,h]):Te.newDocumentFragment([l,h])}}),qi("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),le({type:"ordgroup",htmlBuilder:(t,e)=>t.semisimple?Jt.makeFragment(me(t.body,e,!1)):Jt.makeSpan(["mord"],me(t.body,e,!0),e),mathmlBuilder:(t,e)=>Re(t.body,e,!0)}),oe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:i}=t,n=e[0];return{type:"overline",mode:i.mode,body:n}},htmlBuilder(t,e){var i=ke(t.body,e.havingCrampedStyle()),n=Jt.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return Jt.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var i=new Te.MathNode("mo",[new Te.TextNode("")]);i.setAttribute("stretchy","true");var n=new Te.MathNode("mover",[Oe(t.body,e),i]);return n.setAttribute("accent","true"),n}}),oe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,n=e[0];return{type:"phantom",mode:i.mode,body:ce(n)}},htmlBuilder:(t,e)=>{var i=me(t.body,e.withPhantom(),!1);return Jt.makeFragment(i)},mathmlBuilder:(t,e)=>{var i=Ie(t.body,e);return new Te.MathNode("mphantom",i)}}),oe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,n=e[0];return{type:"hphantom",mode:i.mode,body:n}},htmlBuilder:(t,e)=>{var i=Jt.makeSpan([],[ke(t.body,e.withPhantom())]);if(i.height=0,i.depth=0,i.children)for(var n=0;n<i.children.length;n++)i.children[n].height=0,i.children[n].depth=0;return i=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e),Jt.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var i=Ie(ce(t.body),e),n=new Te.MathNode("mphantom",i),r=new Te.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}}),oe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,n=e[0];return{type:"vphantom",mode:i.mode,body:n}},htmlBuilder:(t,e)=>{var i=Jt.makeSpan(["inner"],[ke(t.body,e.withPhantom())]),n=Jt.makeSpan(["fix"],[]);return Jt.makeSpan(["mord","rlap"],[i,n],e)},mathmlBuilder:(t,e)=>{var i=Ie(ce(t.body),e),n=new Te.MathNode("mphantom",i),r=new Te.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}}),oe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:i}=t,n=Xe(e[0],"size").value,r=e[1];return{type:"raisebox",mode:i.mode,dy:n,body:r}},htmlBuilder(t,e){var i=ke(t.body,e),n=q(t.dy,e);return Jt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:i}]},e)},mathmlBuilder(t,e){var i=new Te.MathNode("mpadded",[Oe(t.body,e)]),n=t.dy.number+t.dy.unit;return i.setAttribute("voffset",n),i}}),oe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}}),oe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,i){var{parser:n}=t,r=i[0],s=Xe(e[0],"size"),a=Xe(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&Xe(r,"size").value,width:s.value,height:a.value}},htmlBuilder(t,e){var i=Jt.makeSpan(["mord","rule"],[],e),n=q(t.width,e),r=q(t.height,e),s=t.shift?q(t.shift,e):0;return i.style.borderRightWidth=j(n),i.style.borderTopWidth=j(r),i.style.bottom=j(s),i.width=n,i.height=r+s,i.depth=-s,i.maxFontSize=1.125*r*e.sizeMultiplier,i},mathmlBuilder(t,e){var i=q(t.width,e),n=q(t.height,e),r=t.shift?q(t.shift,e):0,s=e.color&&e.getColor()||"black",a=new Te.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",j(i)),a.setAttribute("height",j(n));var o=new Te.MathNode("mpadded",[a]);return r>=0?o.setAttribute("height",j(r)):(o.setAttribute("height",j(r)),o.setAttribute("depth",j(-r))),o.setAttribute("voffset",j(r)),o}});var xn=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];oe({type:"sizing",names:xn,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:i,funcName:n,parser:r}=t,s=r.parseExpression(!1,i);return{type:"sizing",mode:r.mode,size:xn.indexOf(n)+1,body:s}},htmlBuilder:(t,e)=>{var i=e.havingSize(t.size);return bn(t.body,i,e)},mathmlBuilder:(t,e)=>{var i=e.havingSize(t.size),n=Ie(t.body,i),r=new Te.MathNode("mstyle",n);return r.setAttribute("mathsize",j(i.sizeMultiplier)),r}}),oe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,i)=>{var{parser:n}=t,r=!1,s=!1,a=i[0]&&Xe(i[0],"ordgroup");if(a)for(var o="",l=0;l<a.body.length;++l){if("t"===(o=a.body[l].text))r=!0;else{if("b"!==o){r=!1,s=!1;break}s=!0}}else r=!0,s=!0;var h=e[0];return{type:"smash",mode:n.mode,body:h,smashHeight:r,smashDepth:s}},htmlBuilder:(t,e)=>{var i=Jt.makeSpan([],[ke(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return i;if(t.smashHeight&&(i.height=0,i.children))for(var n=0;n<i.children.length;n++)i.children[n].height=0;if(t.smashDepth&&(i.depth=0,i.children))for(var r=0;r<i.children.length;r++)i.children[r].depth=0;var s=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e);return Jt.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var i=new Te.MathNode("mpadded",[Oe(t.body,e)]);return t.smashHeight&&i.setAttribute("height","0px"),t.smashDepth&&i.setAttribute("depth","0px"),i}}),oe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){var{parser:n}=t,r=i[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder(t,e){var i=ke(t.body,e.havingCrampedStyle());0===i.height&&(i.height=e.fontMetrics().xHeight),i=Jt.wrapFragment(i,e);var n=e.fontMetrics().defaultRuleThickness,r=n;e.style.id<k.TEXT.id&&(r=e.fontMetrics().xHeight);var s=n+r/4,a=i.height+i.depth+s+n,{span:o,ruleWidth:l,advanceWidth:h}=Pi.sqrtImage(a,e),c=o.height-l;c>i.height+i.depth+s&&(s=(s+c-i.height-i.depth)/2);var d=o.height-i.height-s-l;i.style.paddingLeft=j(h);var u=Jt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:-(i.height+d)},{type:"elem",elem:o},{type:"kern",size:l}]},e);if(t.index){var p=e.havingStyle(k.SCRIPTSCRIPT),f=ke(t.index,p,e),g=.6*(u.height-u.depth),m=Jt.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:f}]},e),b=Jt.makeSpan(["root"],[m]);return Jt.makeSpan(["mord","sqrt"],[b,u],e)}return Jt.makeSpan(["mord","sqrt"],[u],e)},mathmlBuilder(t,e){var{body:i,index:n}=t;return n?new Te.MathNode("mroot",[Oe(i,e),Oe(n,e)]):new Te.MathNode("msqrt",[Oe(i,e)])}});var vn={display:k.DISPLAY,text:k.TEXT,script:k.SCRIPT,scriptscript:k.SCRIPTSCRIPT};oe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:i,funcName:n,parser:r}=t,s=r.parseExpression(!0,i),a=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:a,body:s}},htmlBuilder(t,e){var i=vn[t.style],n=e.havingStyle(i).withFont("");return bn(t.body,n,e)},mathmlBuilder(t,e){var i=vn[t.style],n=e.havingStyle(i),r=Ie(t.body,n),s=new Te.MathNode("mstyle",r),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});le({type:"supsub",htmlBuilder(t,e){var i=function(t,e){var i=t.base;return i?"op"===i.type?i.limits&&(e.style.size===k.DISPLAY.size||i.alwaysHandleSupSub)?un:null:"operatorname"===i.type?i.alwaysHandleSupSub&&(e.style.size===k.DISPLAY.size||i.limits)?mn:null:"accent"===i.type?c.isCharacterBox(i.base)?Ye:null:"horizBrace"===i.type&&!t.sub===i.isOver?on:null:null}(t,e);if(i)return i(t,e);var n,r,s,{base:a,sup:o,sub:l}=t,h=ke(a,e),d=e.fontMetrics(),u=0,p=0,f=a&&c.isCharacterBox(a);if(o){var g=e.havingStyle(e.style.sup());n=ke(o,g,e),f||(u=h.height-g.fontMetrics().supDrop*g.sizeMultiplier/e.sizeMultiplier)}if(l){var m=e.havingStyle(e.style.sub());r=ke(l,m,e),f||(p=h.depth+m.fontMetrics().subDrop*m.sizeMultiplier/e.sizeMultiplier)}s=e.style===k.DISPLAY?d.sup1:e.style.cramped?d.sup3:d.sup2;var b,x=e.sizeMultiplier,v=j(.5/d.ptPerEm/x),y=null;if(r){var w=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(h instanceof J||w)&&(y=j(-h.italic))}if(n&&r){u=Math.max(u,s,n.depth+.25*d.xHeight),p=Math.max(p,d.sub2);var A=4*d.defaultRuleThickness;if(u-n.depth-(r.height-p)<A){p=A-(u-n.depth)+r.height;var S=.8*d.xHeight-(u-n.depth);S>0&&(u+=S,p-=S)}var C=[{type:"elem",elem:r,shift:p,marginRight:v,marginLeft:y},{type:"elem",elem:n,shift:-u,marginRight:v}];b=Jt.makeVList({positionType:"individualShift",children:C},e)}else if(r){p=Math.max(p,d.sub1,r.height-.8*d.xHeight);var _=[{type:"elem",elem:r,marginLeft:y,marginRight:v}];b=Jt.makeVList({positionType:"shift",positionData:p,children:_},e)}else{if(!n)throw new Error("supsub must have either sup or sub.");u=Math.max(u,s,n.depth+.25*d.xHeight),b=Jt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:n,marginRight:v}]},e)}var M=ye(h,"right")||"mord";return Jt.makeSpan([M],[h,Jt.makeSpan(["msupsub"],[b])],e)},mathmlBuilder(t,e){var i,n=!1;t.base&&"horizBrace"===t.base.type&&!!t.sup===t.base.isOver&&(n=!0,i=t.base.isOver),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);var r,s=[Oe(t.base,e)];if(t.sub&&s.push(Oe(t.sub,e)),t.sup&&s.push(Oe(t.sup,e)),n)r=i?"mover":"munder";else if(t.sub)if(t.sup){var a=t.base;r=a&&"op"===a.type&&a.limits&&e.style===k.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(e.style===k.DISPLAY||a.limits)?"munderover":"msubsup"}else{var o=t.base;r=o&&"op"===o.type&&o.limits&&(e.style===k.DISPLAY||o.alwaysHandleSupSub)||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(o.limits||e.style===k.DISPLAY)?"munder":"msub"}else{var l=t.base;r=l&&"op"===l.type&&l.limits&&(e.style===k.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||e.style===k.DISPLAY)?"mover":"msup"}return new Te.MathNode(r,s)}}),le({type:"atom",htmlBuilder:(t,e)=>Jt.mathsym(t.text,t.mode,e,["m"+t.family]),mathmlBuilder(t,e){var i=new Te.MathNode("mo",[Ee(t.text,t.mode)]);if("bin"===t.family){var n=Pe(t,e);"bold-italic"===n&&i.setAttribute("mathvariant",n)}else"punct"===t.family?i.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||i.setAttribute("stretchy","false");return i}});var yn={mi:"italic",mn:"normal",mtext:"normal"};le({type:"mathord",htmlBuilder:(t,e)=>Jt.makeOrd(t,e,"mathord"),mathmlBuilder(t,e){var i=new Te.MathNode("mi",[Ee(t.text,t.mode,e)]),n=Pe(t,e)||"italic";return n!==yn[i.type]&&i.setAttribute("mathvariant",n),i}}),le({type:"textord",htmlBuilder:(t,e)=>Jt.makeOrd(t,e,"textord"),mathmlBuilder(t,e){var i,n=Ee(t.text,t.mode,e),r=Pe(t,e)||"normal";return i="text"===t.mode?new Te.MathNode("mtext",[n]):/[0-9]/.test(t.text)?new Te.MathNode("mn",[n]):"\\prime"===t.text?new Te.MathNode("mo",[n]):new Te.MathNode("mi",[n]),r!==yn[i.type]&&i.setAttribute("mathvariant",r),i}});var wn={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},kn={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};le({type:"spacing",htmlBuilder(t,e){if(kn.hasOwnProperty(t.text)){var i=kn[t.text].className||"";if("text"===t.mode){var n=Jt.makeOrd(t,e,"textord");return n.classes.push(i),n}return Jt.makeSpan(["mspace",i],[Jt.mathsym(t.text,t.mode,e)],e)}if(wn.hasOwnProperty(t.text))return Jt.makeSpan(["mspace",wn[t.text]],[],e);throw new s('Unknown type of space "'+t.text+'"')},mathmlBuilder(t,e){if(!kn.hasOwnProperty(t.text)){if(wn.hasOwnProperty(t.text))return new Te.MathNode("mspace");throw new s('Unknown type of space "'+t.text+'"')}return new Te.MathNode("mtext",[new Te.TextNode("")])}});var An=()=>{var t=new Te.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};le({type:"tag",mathmlBuilder(t,e){var i=new Te.MathNode("mtable",[new Te.MathNode("mtr",[An(),new Te.MathNode("mtd",[Re(t.body,e)]),An(),new Te.MathNode("mtd",[Re(t.tag,e)])])]);return i.setAttribute("width","100%"),i}});var Sn={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Cn={"\\textbf":"textbf","\\textmd":"textmd"},_n={"\\textit":"textit","\\textup":"textup"},Mn=(t,e)=>{var i=t.font;return i?Sn[i]?e.withTextFontFamily(Sn[i]):Cn[i]?e.withTextFontWeight(Cn[i]):"\\emph"===i?"textit"===e.fontShape?e.withTextFontShape("textup"):e.withTextFontShape("textit"):e.withTextFontShape(_n[i]):e};oe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:i,funcName:n}=t,r=e[0];return{type:"text",mode:i.mode,body:ce(r),font:n}},htmlBuilder(t,e){var i=Mn(t,e),n=me(t.body,i,!0);return Jt.makeSpan(["mord","text"],n,i)},mathmlBuilder(t,e){var i=Mn(t,e);return Re(t.body,i)}}),oe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"underline",mode:i.mode,body:e[0]}},htmlBuilder(t,e){var i=ke(t.body,e),n=Jt.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Jt.makeVList({positionType:"top",positionData:i.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:i}]},e);return Jt.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var i=new Te.MathNode("mo",[new Te.TextNode("")]);i.setAttribute("stretchy","true");var n=new Te.MathNode("munder",[Oe(t.body,e),i]);return n.setAttribute("accentunder","true"),n}}),oe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:i}=t;return{type:"vcenter",mode:i.mode,body:e[0]}},htmlBuilder(t,e){var i=ke(t.body,e),n=e.fontMetrics().axisHeight,r=.5*(i.height-n-(i.depth+n));return Jt.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:i}]},e)},mathmlBuilder:(t,e)=>new Te.MathNode("mpadded",[Oe(t.body,e)],["vcenter"])}),oe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,i){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var i=Tn(t),n=[],r=e.havingStyle(e.style.text()),s=0;s<i.length;s++){var a=i[s];"~"===a&&(a="\\textasciitilde"),n.push(Jt.makeSymbol(a,"Typewriter-Regular",t.mode,r,["mord","texttt"]))}return Jt.makeSpan(["mord","text"].concat(r.sizingClasses(e)),Jt.tryCombineChars(n),r)},mathmlBuilder(t,e){var i=new Te.TextNode(Tn(t)),n=new Te.MathNode("mtext",[i]);return n.setAttribute("mathvariant","monospace"),n}});var Tn=t=>t.body.replace(/ /g,t.star?"":""),En=re,Nn="[ \r\n\t]",Pn="(\\\\[a-zA-Z@]+)"+Nn+"*",Ln="[-]",In=new RegExp(Ln+"+$"),Rn="("+Nn+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]---]"+Ln+"*|[\ud800-\udbff][\udc00-\udfff]"+Ln+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+Pn+"|\\\\[^\ud800-\udfff])";class On{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(Rn,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new r("EOF",new n(this,e,e));var i=this.tokenRegex.exec(t);if(null===i||i.index!==e)throw new s("Unexpected character: '"+t[e]+"'",new r(t[e],new n(this,e,e+1)));var a=i[6]||i[3]||(i[2]?"\\ ":" ");if(14===this.catcodes[a]){var o=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===o?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new r(a,new n(this,e,this.tokenRegex.lastIndex))}}class Dn{constructor(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(null==t[e]?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,i){if(void 0===i&&(i=!1),i){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var r=this.undefStack[this.undefStack.length-1];r&&!r.hasOwnProperty(t)&&(r[t]=this.current[t])}null==e?delete this.current[t]:this.current[t]=e}}var zn=Hi;qi("\\noexpand",(function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}})),qi("\\expandafter",(function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}})),qi("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),qi("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),qi("\\@ifnextchar",(function(t){var e=t.consumeArgs(3);t.consumeSpaces();var i=t.future();return 1===e[0].length&&e[0][0].text===i.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),qi("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),qi("\\TextOrMath",(function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));var Fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};qi("\\char",(function(t){var e,i=t.popToken(),n="";if("'"===i.text)e=8,i=t.popToken();else if('"'===i.text)e=16,i=t.popToken();else if("`"===i.text)if("\\"===(i=t.popToken()).text[0])n=i.text.charCodeAt(1);else{if("EOF"===i.text)throw new s("\\char` missing argument");n=i.text.charCodeAt(0)}else e=10;if(e){if(null==(n=Fn[i.text])||n>=e)throw new s("Invalid base-"+e+" digit "+i.text);for(var r;null!=(r=Fn[t.future().text])&&r<e;)n*=e,n+=r,t.popToken()}return"\\@char{"+n+"}"}));var Bn=(t,e,i,n)=>{var r=t.consumeArg().tokens;if(1!==r.length)throw new s("\\newcommand's first argument must be a macro name");var a=r[0].text,o=t.isDefined(a);if(o&&!e)throw new s("\\newcommand{"+a+"} attempting to redefine "+a+"; use \\renewcommand");if(!o&&!i)throw new s("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var l=0;if(1===(r=t.consumeArg().tokens).length&&"["===r[0].text){for(var h="",c=t.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)h+=c.text,c=t.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+h);l=parseInt(h),r=t.consumeArg().tokens}return o&&n||t.macros.set(a,{tokens:r,numArgs:l}),""};qi("\\newcommand",(t=>Bn(t,!1,!0,!1))),qi("\\renewcommand",(t=>Bn(t,!0,!1,!1))),qi("\\providecommand",(t=>Bn(t,!0,!0,!0))),qi("\\message",(t=>{t.consumeArgs(1)[0];return""})),qi("\\errmessage",(t=>{t.consumeArgs(1)[0];return""})),qi("\\show",(t=>{t.popToken().text;return""})),qi("\\bgroup","{"),qi("\\egroup","}"),qi("~","\\nobreakspace"),qi("\\lq","`"),qi("\\rq","'"),qi("\\aa","\\r a"),qi("\\AA","\\r A"),qi("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),qi("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),qi("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),qi("","\\mathscr{B}"),qi("","\\mathscr{E}"),qi("","\\mathscr{F}"),qi("","\\mathscr{H}"),qi("","\\mathscr{I}"),qi("","\\mathscr{L}"),qi("","\\mathscr{M}"),qi("","\\mathscr{R}"),qi("","\\mathfrak{C}"),qi("","\\mathfrak{H}"),qi("","\\mathfrak{Z}"),qi("\\Bbbk","\\Bbb{k}"),qi("","\\cdotp"),qi("\\llap","\\mathllap{\\textrm{#1}}"),qi("\\rlap","\\mathrlap{\\textrm{#1}}"),qi("\\clap","\\mathclap{\\textrm{#1}}"),qi("\\mathstrut","\\vphantom{(}"),qi("\\underbar","\\underline{\\text{#1}}"),qi("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),qi("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),qi("\\ne","\\neq"),qi("","\\neq"),qi("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),qi("","\\notin"),qi("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),qi("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),qi("","\\perp"),qi("","\\mathclose{!\\mkern-0.8mu!}"),qi("","\\notni"),qi("","\\ulcorner"),qi("","\\urcorner"),qi("","\\llcorner"),qi("","\\lrcorner"),qi("","\\copyright"),qi("","\\textregistered"),qi("","\\textregistered"),qi("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),qi("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),qi("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),qi("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),qi("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),qi("","\\vdots"),qi("\\varGamma","\\mathit{\\Gamma}"),qi("\\varDelta","\\mathit{\\Delta}"),qi("\\varTheta","\\mathit{\\Theta}"),qi("\\varLambda","\\mathit{\\Lambda}"),qi("\\varXi","\\mathit{\\Xi}"),qi("\\varPi","\\mathit{\\Pi}"),qi("\\varSigma","\\mathit{\\Sigma}"),qi("\\varUpsilon","\\mathit{\\Upsilon}"),qi("\\varPhi","\\mathit{\\Phi}"),qi("\\varPsi","\\mathit{\\Psi}"),qi("\\varOmega","\\mathit{\\Omega}"),qi("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),qi("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),qi("\\boxed","\\fbox{$\\displaystyle{#1}$}"),qi("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),qi("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),qi("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),qi("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),qi("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Hn={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};qi("\\dots",(function(t){var e="\\dotso",i=t.expandAfterFuture().text;return i in Hn?e=Hn[i]:("\\not"===i.slice(0,4)||i in st.math&&c.contains(["bin","rel"],st.math[i].group))&&(e="\\dotsb"),e}));var qn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};qi("\\dotso",(function(t){return t.future().text in qn?"\\ldots\\,":"\\ldots"})),qi("\\dotsc",(function(t){var e=t.future().text;return e in qn&&","!==e?"\\ldots\\,":"\\ldots"})),qi("\\cdots",(function(t){return t.future().text in qn?"\\@cdots\\,":"\\@cdots"})),qi("\\dotsb","\\cdots"),qi("\\dotsm","\\cdots"),qi("\\dotsi","\\!\\cdots"),qi("\\dotsx","\\ldots\\,"),qi("\\DOTSI","\\relax"),qi("\\DOTSB","\\relax"),qi("\\DOTSX","\\relax"),qi("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),qi("\\,","\\tmspace+{3mu}{.1667em}"),qi("\\thinspace","\\,"),qi("\\>","\\mskip{4mu}"),qi("\\:","\\tmspace+{4mu}{.2222em}"),qi("\\medspace","\\:"),qi("\\;","\\tmspace+{5mu}{.2777em}"),qi("\\thickspace","\\;"),qi("\\!","\\tmspace-{3mu}{.1667em}"),qi("\\negthinspace","\\!"),qi("\\negmedspace","\\tmspace-{4mu}{.2222em}"),qi("\\negthickspace","\\tmspace-{5mu}{.277em}"),qi("\\enspace","\\kern.5em "),qi("\\enskip","\\hskip.5em\\relax"),qi("\\quad","\\hskip1em\\relax"),qi("\\qquad","\\hskip2em\\relax"),qi("\\tag","\\@ifstar\\tag@literal\\tag@paren"),qi("\\tag@paren","\\tag@literal{({#1})}"),qi("\\tag@literal",(t=>{if(t.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),qi("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),qi("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),qi("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),qi("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),qi("\\newline","\\\\\\relax"),qi("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var jn=j(E["Main-Regular"]["T".charCodeAt(0)][1]-.7*E["Main-Regular"]["A".charCodeAt(0)][1]);qi("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+jn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),qi("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+jn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),qi("\\hspace","\\@ifstar\\@hspacer\\@hspace"),qi("\\@hspace","\\hskip #1\\relax"),qi("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),qi("\\ordinarycolon",":"),qi("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),qi("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),qi("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),qi("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),qi("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),qi("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),qi("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),qi("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),qi("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),qi("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),qi("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),qi("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),qi("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),qi("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),qi("","\\dblcolon"),qi("","\\eqcolon"),qi("","\\coloneqq"),qi("","\\eqqcolon"),qi("","\\Coloneqq"),qi("\\ratio","\\vcentcolon"),qi("\\coloncolon","\\dblcolon"),qi("\\colonequals","\\coloneqq"),qi("\\coloncolonequals","\\Coloneqq"),qi("\\equalscolon","\\eqqcolon"),qi("\\equalscoloncolon","\\Eqqcolon"),qi("\\colonminus","\\coloneq"),qi("\\coloncolonminus","\\Coloneq"),qi("\\minuscolon","\\eqcolon"),qi("\\minuscoloncolon","\\Eqcolon"),qi("\\coloncolonapprox","\\Colonapprox"),qi("\\coloncolonsim","\\Colonsim"),qi("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),qi("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),qi("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),qi("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),qi("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),qi("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),qi("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),qi("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),qi("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),qi("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),qi("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),qi("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),qi("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),qi("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),qi("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),qi("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),qi("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),qi("\\nleqq","\\html@mathml{\\@nleqq}{}"),qi("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),qi("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),qi("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),qi("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),qi("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),qi("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),qi("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),qi("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),qi("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),qi("\\imath","\\html@mathml{\\@imath}{}"),qi("\\jmath","\\html@mathml{\\@jmath}{}"),qi("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),qi("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),qi("","\\llbracket"),qi("","\\rrbracket"),qi("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),qi("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),qi("","\\lBrace"),qi("","\\rBrace"),qi("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),qi("","\\minuso"),qi("\\darr","\\downarrow"),qi("\\dArr","\\Downarrow"),qi("\\Darr","\\Downarrow"),qi("\\lang","\\langle"),qi("\\rang","\\rangle"),qi("\\uarr","\\uparrow"),qi("\\uArr","\\Uparrow"),qi("\\Uarr","\\Uparrow"),qi("\\N","\\mathbb{N}"),qi("\\R","\\mathbb{R}"),qi("\\Z","\\mathbb{Z}"),qi("\\alef","\\aleph"),qi("\\alefsym","\\aleph"),qi("\\Alpha","\\mathrm{A}"),qi("\\Beta","\\mathrm{B}"),qi("\\bull","\\bullet"),qi("\\Chi","\\mathrm{X}"),qi("\\clubs","\\clubsuit"),qi("\\cnums","\\mathbb{C}"),qi("\\Complex","\\mathbb{C}"),qi("\\Dagger","\\ddagger"),qi("\\diamonds","\\diamondsuit"),qi("\\empty","\\emptyset"),qi("\\Epsilon","\\mathrm{E}"),qi("\\Eta","\\mathrm{H}"),qi("\\exist","\\exists"),qi("\\harr","\\leftrightarrow"),qi("\\hArr","\\Leftrightarrow"),qi("\\Harr","\\Leftrightarrow"),qi("\\hearts","\\heartsuit"),qi("\\image","\\Im"),qi("\\infin","\\infty"),qi("\\Iota","\\mathrm{I}"),qi("\\isin","\\in"),qi("\\Kappa","\\mathrm{K}"),qi("\\larr","\\leftarrow"),qi("\\lArr","\\Leftarrow"),qi("\\Larr","\\Leftarrow"),qi("\\lrarr","\\leftrightarrow"),qi("\\lrArr","\\Leftrightarrow"),qi("\\Lrarr","\\Leftrightarrow"),qi("\\Mu","\\mathrm{M}"),qi("\\natnums","\\mathbb{N}"),qi("\\Nu","\\mathrm{N}"),qi("\\Omicron","\\mathrm{O}"),qi("\\plusmn","\\pm"),qi("\\rarr","\\rightarrow"),qi("\\rArr","\\Rightarrow"),qi("\\Rarr","\\Rightarrow"),qi("\\real","\\Re"),qi("\\reals","\\mathbb{R}"),qi("\\Reals","\\mathbb{R}"),qi("\\Rho","\\mathrm{P}"),qi("\\sdot","\\cdot"),qi("\\sect","\\S"),qi("\\spades","\\spadesuit"),qi("\\sub","\\subset"),qi("\\sube","\\subseteq"),qi("\\supe","\\supseteq"),qi("\\Tau","\\mathrm{T}"),qi("\\thetasym","\\vartheta"),qi("\\weierp","\\wp"),qi("\\Zeta","\\mathrm{Z}"),qi("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),qi("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),qi("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),qi("\\bra","\\mathinner{\\langle{#1}|}"),qi("\\ket","\\mathinner{|{#1}\\rangle}"),qi("\\braket","\\mathinner{\\langle{#1}\\rangle}"),qi("\\Bra","\\left\\langle#1\\right|"),qi("\\Ket","\\left|#1\\right\\rangle");var Gn=t=>e=>{var i=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var l=e=>i=>{t&&(i.macros.set("|",a),r.length&&i.macros.set("\\|",o));var s=e;!e&&r.length&&("|"===i.future().text&&(i.popToken(),s=!0));return{tokens:s?r:n,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));var h=e.consumeArg().tokens,c=e.expandTokens([...s,...h,...i]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};qi("\\bra@ket",Gn(!1)),qi("\\bra@set",Gn(!0)),qi("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),qi("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),qi("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),qi("\\angln","{\\angl n}"),qi("\\blue","\\textcolor{##6495ed}{#1}"),qi("\\orange","\\textcolor{##ffa500}{#1}"),qi("\\pink","\\textcolor{##ff00af}{#1}"),qi("\\red","\\textcolor{##df0030}{#1}"),qi("\\green","\\textcolor{##28ae7b}{#1}"),qi("\\gray","\\textcolor{gray}{#1}"),qi("\\purple","\\textcolor{##9d38bd}{#1}"),qi("\\blueA","\\textcolor{##ccfaff}{#1}"),qi("\\blueB","\\textcolor{##80f6ff}{#1}"),qi("\\blueC","\\textcolor{##63d9ea}{#1}"),qi("\\blueD","\\textcolor{##11accd}{#1}"),qi("\\blueE","\\textcolor{##0c7f99}{#1}"),qi("\\tealA","\\textcolor{##94fff5}{#1}"),qi("\\tealB","\\textcolor{##26edd5}{#1}"),qi("\\tealC","\\textcolor{##01d1c1}{#1}"),qi("\\tealD","\\textcolor{##01a995}{#1}"),qi("\\tealE","\\textcolor{##208170}{#1}"),qi("\\greenA","\\textcolor{##b6ffb0}{#1}"),qi("\\greenB","\\textcolor{##8af281}{#1}"),qi("\\greenC","\\textcolor{##74cf70}{#1}"),qi("\\greenD","\\textcolor{##1fab54}{#1}"),qi("\\greenE","\\textcolor{##0d923f}{#1}"),qi("\\goldA","\\textcolor{##ffd0a9}{#1}"),qi("\\goldB","\\textcolor{##ffbb71}{#1}"),qi("\\goldC","\\textcolor{##ff9c39}{#1}"),qi("\\goldD","\\textcolor{##e07d10}{#1}"),qi("\\goldE","\\textcolor{##a75a05}{#1}"),qi("\\redA","\\textcolor{##fca9a9}{#1}"),qi("\\redB","\\textcolor{##ff8482}{#1}"),qi("\\redC","\\textcolor{##f9685d}{#1}"),qi("\\redD","\\textcolor{##e84d39}{#1}"),qi("\\redE","\\textcolor{##bc2612}{#1}"),qi("\\maroonA","\\textcolor{##ffbde0}{#1}"),qi("\\maroonB","\\textcolor{##ff92c6}{#1}"),qi("\\maroonC","\\textcolor{##ed5fa6}{#1}"),qi("\\maroonD","\\textcolor{##ca337c}{#1}"),qi("\\maroonE","\\textcolor{##9e034e}{#1}"),qi("\\purpleA","\\textcolor{##ddd7ff}{#1}"),qi("\\purpleB","\\textcolor{##c6b9fc}{#1}"),qi("\\purpleC","\\textcolor{##aa87ff}{#1}"),qi("\\purpleD","\\textcolor{##7854ab}{#1}"),qi("\\purpleE","\\textcolor{##543b78}{#1}"),qi("\\mintA","\\textcolor{##f5f9e8}{#1}"),qi("\\mintB","\\textcolor{##edf2df}{#1}"),qi("\\mintC","\\textcolor{##e0e5cc}{#1}"),qi("\\grayA","\\textcolor{##f6f7f7}{#1}"),qi("\\grayB","\\textcolor{##f0f1f2}{#1}"),qi("\\grayC","\\textcolor{##e3e5e6}{#1}"),qi("\\grayD","\\textcolor{##d6d8da}{#1}"),qi("\\grayE","\\textcolor{##babec2}{#1}"),qi("\\grayF","\\textcolor{##888d93}{#1}"),qi("\\grayG","\\textcolor{##626569}{#1}"),qi("\\grayH","\\textcolor{##3b3e40}{#1}"),qi("\\grayI","\\textcolor{##21242c}{#1}"),qi("\\kaBlue","\\textcolor{##314453}{#1}"),qi("\\kaGreen","\\textcolor{##71B307}{#1}");var Xn={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Vn{constructor(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new Dn(zn,e.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new On(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var e,i,n;if(t){if(this.consumeSpaces(),"["!==this.future().text)return null;e=this.popToken(),({tokens:n,end:i}=this.consumeArg(["]"]))}else({tokens:n,start:e,end:i}=this.consumeArg());return this.pushToken(new r("EOF",i.loc)),this.pushTokens(n),e.range(i,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(t){var e=[],i=t&&t.length>0;i||this.consumeSpaces();var n,r=this.future(),a=0,o=0;do{if(n=this.popToken(),e.push(n),"{"===n.text)++a;else if("}"===n.text){if(-1===--a)throw new s("Extra }",n)}else if("EOF"===n.text)throw new s("Unexpected end of input in a macro argument, expected '"+(t&&i?t[o]:"}")+"'",n);if(t&&i)if((0===a||1===a&&"{"===t[o])&&n.text===t[o]){if(++o===t.length){e.splice(-o,o);break}}else o=0}while(0!==a||i);return"{"===r.text&&"}"===e[e.length-1].text&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:r,end:n}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new s("The length of delimiters doesn't match the number of args!");for(var i=e[0],n=0;n<i.length;n++){var r=this.popToken();if(i[n]!==r.text)throw new s("Use of the macro doesn't match its definition",r)}}for(var a=[],o=0;o<t;o++)a.push(this.consumeArg(e&&e[o+1]).tokens);return a}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var e=this.popToken(),i=e.text,n=e.noexpand?null:this._getExpansion(i);if(null==n||t&&n.unexpandable){if(t&&null==n&&"\\"===i[0]&&!this.isDefined(i))throw new s("Undefined control sequence: "+i);return this.pushToken(e),!1}this.countExpansion(1);var r=n.tokens,a=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs)for(var o=(r=r.slice()).length-1;o>=0;--o){var l=r[o];if("#"===l.text){if(0===o)throw new s("Incomplete placeholder at end of macro body",l);if("#"===(l=r[--o]).text)r.splice(o+1,1);else{if(!/^[1-9]$/.test(l.text))throw new s("Not a valid argument number",l);r.splice(o,2,...a[+l.text-1])}}}return this.pushTokens(r),r.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new r(t)]):void 0}expandTokens(t){var e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(!1===this.expandOnce(!0)){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),e.push(n)}return this.countExpansion(e.length),e}expandMacroAsText(t){var e=this.expandMacro(t);return e?e.map((t=>t.text)).join(""):e}_getExpansion(t){var e=this.macros.get(t);if(null==e)return e;if(1===t.length){var i=this.lexer.catcodes[t];if(null!=i&&13!==i)return}var n="function"==typeof e?e(this):e;if("string"==typeof n){var r=0;if(-1!==n.indexOf("#"))for(var s=n.replace(/##/g,"");-1!==s.indexOf("#"+(r+1));)++r;for(var a=new On(n,this.settings),o=[],l=a.lex();"EOF"!==l.text;)o.push(l),l=a.lex();return o.reverse(),{tokens:o,numArgs:r}}return n}isDefined(t){return this.macros.has(t)||En.hasOwnProperty(t)||st.math.hasOwnProperty(t)||st.text.hasOwnProperty(t)||Xn.hasOwnProperty(t)}isExpandable(t){var e=this.macros.get(t);return null!=e?"string"==typeof e||"function"==typeof e||!e.unexpandable:En.hasOwnProperty(t)&&!En[t].primitive}}var Wn=/^[]/,Yn=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"a",:"e",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"x",:"",:"",:"",:"",:"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"A",:"B",:"D",:"E",:"G",:"H",:"I",:"J",:"K",:"L",:"M",:"N",:"O",:"P",:"R",:"T",:"U",:"V",:"W",:"a",:"b",:"c",:"d",:"e",:"f",:"g",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"w",:"x",:"y",:"z",:"",:"",:"",:"",:"",:""}),Un={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},$n={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Kn{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Vn(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(void 0===e&&(e=!0),this.fetch().text!==t)throw new s("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var e=this.nextToken;this.consume(),this.gullet.pushToken(new r("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,i}parseExpression(t,e){for(var i=[];;){"math"===this.mode&&this.consumeSpaces();var n=this.fetch();if(-1!==Kn.endOfExpression.indexOf(n.text))break;if(e&&n.text===e)break;if(t&&En[n.text]&&En[n.text].infix)break;var r=this.parseAtom(e);if(!r)break;"internal"!==r.type&&i.push(r)}return"text"===this.mode&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var e,i=-1,n=0;n<t.length;n++)if("infix"===t[n].type){if(-1!==i)throw new s("only one infix operator per group",t[n].token);i=n,e=t[n].replaceWith}if(-1!==i&&e){var r,a,o=t.slice(0,i),l=t.slice(i+1);return r=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},a=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===e?this.callFunction(e,[r,t[i],a],[]):this.callFunction(e,[r,a],[])]}return t}handleSupSubscript(t){var e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();var n=this.parseGroup(t);if(!n)throw new s("Expected group after '"+i+"'",e);return n}formatUnsupportedCmd(t){for(var e=[],i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});var n={type:"text",mode:this.mode,body:e};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(t){var e,i,n=this.parseGroup("atom",t);if("text"===this.mode)return n;for(;;){this.consumeSpaces();var a=this.fetch();if("\\limits"===a.text||"\\nolimits"===a.text){if(n&&"op"===n.type){var o="\\limits"===a.text;n.limits=o,n.alwaysHandleSupSub=!0}else{if(!n||"operatorname"!==n.type)throw new s("Limit controls must follow a math operator",a);n.alwaysHandleSupSub&&(n.limits="\\limits"===a.text)}this.consume()}else if("^"===a.text){if(e)throw new s("Double superscript",a);e=this.handleSupSubscript("superscript")}else if("_"===a.text){if(i)throw new s("Double subscript",a);i=this.handleSupSubscript("subscript")}else if("'"===a.text){if(e)throw new s("Double superscript",a);var l={type:"textord",mode:this.mode,text:"\\prime"},h=[l];for(this.consume();"'"===this.fetch().text;)h.push(l),this.consume();"^"===this.fetch().text&&h.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:h}}else{if(!Yn[a.text])break;var c=Wn.test(a.text),d=[];for(d.push(new r(Yn[a.text])),this.consume();;){var u=this.fetch().text;if(!Yn[u])break;if(Wn.test(u)!==c)break;d.unshift(new r(Yn[u])),this.consume()}var p=this.subparse(d);c?i={type:"ordgroup",mode:"math",body:p}:e={type:"ordgroup",mode:"math",body:p}}}return e||i?{type:"supsub",mode:this.mode,base:n,sup:e,sub:i}:n}parseFunction(t,e){var i=this.fetch(),n=i.text,r=En[n];if(!r)return null;if(this.consume(),e&&"atom"!==e&&!r.allowedInArgument)throw new s("Got function '"+n+"' with no arguments"+(e?" as "+e:""),i);if("text"===this.mode&&!r.allowedInText)throw new s("Can't use function '"+n+"' in text mode",i);if("math"===this.mode&&!1===r.allowedInMath)throw new s("Can't use function '"+n+"' in math mode",i);var{args:a,optArgs:o}=this.parseArguments(n,r);return this.callFunction(n,a,o,i,t)}callFunction(t,e,i,n,r){var a={funcName:t,parser:this,token:n,breakOnTokenText:r},o=En[t];if(o&&o.handler)return o.handler(a,e,i);throw new s("No function handler for "+t)}parseArguments(t,e){var i=e.numArgs+e.numOptionalArgs;if(0===i)return{args:[],optArgs:[]};for(var n=[],r=[],a=0;a<i;a++){var o=e.argTypes&&e.argTypes[a],l=a<e.numOptionalArgs;(e.primitive&&null==o||"sqrt"===e.type&&1===a&&null==r[0])&&(o="primitive");var h=this.parseGroupOfType("argument to '"+t+"'",o,l);if(l)r.push(h);else{if(null==h)throw new s("Null argument, please report this as a bug");n.push(h)}}return{args:n,optArgs:r}}parseGroupOfType(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":var n=this.parseArgumentGroup(i,"text");return null!=n?{type:"styling",mode:n.mode,body:[n],style:"text"}:null;case"raw":var r=this.parseStringGroup("raw",i);return null!=r?{type:"raw",mode:"text",string:r.text}:null;case"primitive":if(i)throw new s("A primitive argument cannot be optional");var a=this.parseGroup(t);if(null==a)throw new s("Expected group as "+t,this.fetch());return a;case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new s("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(t,e){var i=this.gullet.scanArgument(e);if(null==i)return null;for(var n,r="";"EOF"!==(n=this.fetch()).text;)r+=n.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(t,e){for(var i,n=this.fetch(),r=n,a="";"EOF"!==(i=this.fetch()).text&&t.test(a+i.text);)a+=(r=i).text,this.consume();if(""===a)throw new s("Invalid "+e+": '"+n.text+"'",n);return n.range(r,a)}parseColorGroup(t){var e=this.parseStringGroup("color",t);if(null==e)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new s("Invalid color: '"+e.text+"'",e);var n=i[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(t){var e,i=!1;if(this.gullet.consumeSpaces(),!(e=t||"{"===this.gullet.future().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",i=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!n)throw new s("Invalid size: '"+e.text+"'",e);var r={number:+(n[1]+n[2]),unit:n[3]};if(!H(r))throw new s("Invalid unit: '"+r.unit+"'",e);return{type:"size",mode:this.mode,value:r,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==e)return null;var i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,e){var i=this.gullet.scanArgument(t);if(null==i)return null;var n=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var r=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:i.loc,body:r};return e&&this.switchMode(n),s}parseGroup(t,e){var i,r=this.fetch(),a=r.text;if("{"===a||"\\begingroup"===a){this.consume();var o="{"===a?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,o),h=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:n.range(r,h),body:l,semisimple:"\\begingroup"===a||void 0}}else if(null==(i=this.parseFunction(e,t)||this.parseSymbol())&&"\\"===a[0]&&!Xn.hasOwnProperty(a)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+a,r);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(t){for(var e=t.length-1,i=0;i<e;++i){var r=t[i],s=r.text;"-"===s&&"-"===t[i+1].text&&(i+1<e&&"-"===t[i+2].text?(t.splice(i,3,{type:"textord",mode:"text",loc:n.range(r,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:n.range(r,t[i+1]),text:"--"}),e-=1)),"'"!==s&&"`"!==s||t[i+1].text!==s||(t.splice(i,2,{type:"textord",mode:"text",loc:n.range(r,t[i+1]),text:s+s}),e-=1)}}parseSymbol(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var i=e.slice(5),r="*"===i.charAt(0);if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new s("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:i=i.slice(1,-1),star:r}}$n.hasOwnProperty(e[0])&&!st[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=$n[e[0]]+e.slice(1));var a,o=In.exec(e);if(o&&("i"===(e=e.substring(0,o.index))?e="":"j"===e&&(e="")),st[this.mode][e]){this.settings.strict&&"math"===this.mode&&zt.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var l,h=st[this.mode][e].group,c=n.range(t);if(nt.hasOwnProperty(h)){var d=h;l={type:"atom",mode:this.mode,family:d,loc:c,text:e}}else l={type:h,mode:this.mode,loc:c,text:e};a=l}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(C(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),a={type:"textord",mode:"text",loc:n.range(t),text:e}}if(this.consume(),o)for(var u=0;u<o[0].length;u++){var p=o[0][u];if(!Un[p])throw new s("Unknown accent ' "+p+"'",t);var f=Un[p][this.mode]||Un[p].text;if(!f)throw new s("Accent "+p+" unsupported in "+this.mode+" mode",t);a={type:"accent",mode:this.mode,loc:n.range(t),label:f,isStretchy:!1,isShifty:!0,base:a}}return a}}Kn.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Zn=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new Kn(t,e);delete i.gullet.macros.current["\\df@tag"];var n=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new s("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:i.subparse([new r("\\df@tag")])}]}return n},Jn=function(t,e,i){e.textContent="";var n=tr(t,i).toNode();e.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&(Jn=function(){throw new s("KaTeX doesn't work in quirks mode.")});var Qn=function(t,e,i){if(i.throwOnError||!(t instanceof s))throw t;var n=Jt.makeSpan(["katex-error"],[new J(e)]);return n.setAttribute("title",t.toString()),n.setAttribute("style","color:"+i.errorColor),n},tr=function(t,e){var i=new p(e);try{return function(t,e,i){var n,r=ze(i);if("mathml"===i.output)return De(t,e,r,i.displayMode,!0);if("html"===i.output){var s=Se(t,r);n=Jt.makeSpan(["katex"],[s])}else{var a=De(t,e,r,i.displayMode,!1),o=Se(t,r);n=Jt.makeSpan(["katex"],[a,o])}return Fe(n,i)}(Zn(t,i),t,i)}catch(e){return Qn(e,t,i)}},er={version:"0.16.21",render:Jn,renderToString:function(t,e){return tr(t,e).toMarkup()},ParseError:s,SETTINGS_SCHEMA:d,__parse:function(t,e){var i=new p(e);return Zn(t,i)},__renderToDomTree:tr,__renderToHTMLTree:function(t,e){var i=new p(e);try{return function(t,e,i){var n=Se(t,ze(i)),r=Jt.makeSpan(["katex"],[n]);return Fe(r,i)}(Zn(t,i),0,i)}catch(e){return Qn(e,t,i)}},__setFontMetrics:function(t,e){E[t]=e},__defineSymbol:at,__defineFunction:oe,__defineMacro:qi,__domTree:{Span:U,Anchor:$,SymbolNode:J,SvgNode:Q,PathNode:tt,LineNode:et}}},89469:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});const n=function(){this.__data__=[],this.size=0};var r=i(66984);const s=function(t,e){for(var i=t.length;i--;)if((0,r.A)(t[i][0],e))return i;return-1};var a=Array.prototype.splice;const o=function(t){var e=this.__data__,i=s(e,t);return!(i<0)&&(i==e.length-1?e.pop():a.call(e,i,1),--this.size,!0)};const l=function(t){var e=this.__data__,i=s(e,t);return i<0?void 0:e[i][1]};const h=function(t){return s(this.__data__,t)>-1};const c=function(t,e){var i=this.__data__,n=s(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};function d(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=o,d.prototype.get=l,d.prototype.has=h,d.prototype.set=c;const u=d},68335:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(28562),r=i(41917);const s=(0,n.A)(r.A,"Map")},62050:(t,e,i)=>{"use strict";i.d(e,{A:()=>A});const n=(0,i(28562).A)(Object,"create");const r=function(){this.__data__=n?n(null):{},this.size=0};const s=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var a=Object.prototype.hasOwnProperty;const o=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return a.call(e,t)?e[t]:void 0};var l=Object.prototype.hasOwnProperty;const h=function(t){var e=this.__data__;return n?void 0!==e[t]:l.call(e,t)};const c=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this};function d(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=o,d.prototype.has=h,d.prototype.set=c;const u=d;var p=i(89469),f=i(68335);const g=function(){this.size=0,this.__data__={hash:new u,map:new(f.A||p.A),string:new u}};const m=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const b=function(t,e){var i=t.__data__;return m(e)?i["string"==typeof e?"string":"hash"]:i.map};const x=function(t){var e=b(this,t).delete(t);return this.size-=e?1:0,e};const v=function(t){return b(this,t).get(t)};const y=function(t){return b(this,t).has(t)};const w=function(t,e){var i=b(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function k(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}k.prototype.clear=g,k.prototype.delete=x,k.prototype.get=v,k.prototype.has=y,k.prototype.set=w;const A=k},39857:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(28562),r=i(41917);const s=(0,n.A)(r.A,"Set")},8300:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(62050);const r=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const s=function(t){return this.__data__.has(t)};function a(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new n.A;++e<i;)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=s;const o=a},22080:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var n=i(89469);const r=function(){this.__data__=new n.A,this.size=0};const s=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i};const a=function(t){return this.__data__.get(t)};const o=function(t){return this.__data__.has(t)};var l=i(68335),h=i(62050);const c=function(t,e){var i=this.__data__;if(i instanceof n.A){var r=i.__data__;if(!l.A||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new h.A(r)}return i.set(t,e),this.size=i.size,this};function d(t){var e=this.__data__=new n.A(t);this.size=e.size}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=a,d.prototype.has=o,d.prototype.set=c;const u=d},241:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=i(41917).A.Symbol},43988:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=i(41917).A.Uint8Array},72641:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}},2634:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[r++]=a)}return s}},2505:(t,e,i)=>{"use strict";i.d(e,{A:()=>c});const n=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n};var r=i(25175),s=i(92049),a=i(41200),o=i(25353),l=i(54749),h=Object.prototype.hasOwnProperty;const c=function(t,e){var i=(0,s.A)(t),c=!i&&(0,r.A)(t),d=!i&&!c&&(0,a.A)(t),u=!i&&!c&&!d&&(0,l.A)(t),p=i||c||d||u,f=p?n(t.length,String):[],g=f.length;for(var m in t)!e&&!h.call(t,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||(0,o.A)(m,g))||f.push(m);return f}},76912:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}},63736:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}},52851:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(52528),r=i(66984),s=Object.prototype.hasOwnProperty;const a=function(t,e,i){var a=t[e];s.call(t,e)&&(0,r.A)(a,i)&&(void 0!==i||e in t)||(0,n.A)(t,e,i)}},52528:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(84171);const r=function(t,e,i){"__proto__"==e&&n.A?(0,n.A)(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},94507:(t,e,i)=>{"use strict";i.d(e,{A:()=>$});var n=i(22080),r=i(72641),s=i(52851),a=i(22031),o=i(27422);const l=function(t,e){return t&&(0,a.A)(e,(0,o.A)(e),t)};var h=i(79999);const c=function(t,e){return t&&(0,a.A)(e,(0,h.A)(e),t)};var d=i(80154),u=i(39759),p=i(14792);const f=function(t,e){return(0,a.A)(t,(0,p.A)(t),e)};var g=i(83511);const m=function(t,e){return(0,a.A)(t,(0,g.A)(t),e)};var b=i(19042),x=i(83973),v=i(9137),y=Object.prototype.hasOwnProperty;const w=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&y.call(t,"index")&&(i.index=t.index,i.input=t.input),i};var k=i(90565);const A=function(t,e){var i=e?(0,k.A)(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)};var S=/\w*$/;const C=function(t){var e=new t.constructor(t.source,S.exec(t));return e.lastIndex=t.lastIndex,e};var _=i(241),M=_.A?_.A.prototype:void 0,T=M?M.valueOf:void 0;const E=function(t){return T?Object(T.call(t)):{}};var N=i(1801);const P=function(t,e,i){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return(0,k.A)(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return A(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,N.A)(t,i);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return C(t);case"[object Symbol]":return E(t)}};var L=i(50407),I=i(92049),R=i(41200),O=i(53098);const D=function(t){return(0,O.A)(t)&&"[object Map]"==(0,v.A)(t)};var z=i(52789),F=i(64841),B=F.A&&F.A.isMap;const H=B?(0,z.A)(B):D;var q=i(23149);const j=function(t){return(0,O.A)(t)&&"[object Set]"==(0,v.A)(t)};var G=F.A&&F.A.isSet;const X=G?(0,z.A)(G):j;var V="[object Arguments]",W="[object Function]",Y="[object Object]",U={};U[V]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U[Y]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U[W]=U["[object WeakMap]"]=!1;const $=function t(e,i,a,p,g,y){var k,A=1&i,S=2&i,C=4&i;if(a&&(k=g?a(e,p,g,y):a(e)),void 0!==k)return k;if(!(0,q.A)(e))return e;var _=(0,I.A)(e);if(_){if(k=w(e),!A)return(0,u.A)(e,k)}else{var M=(0,v.A)(e),T=M==W||"[object GeneratorFunction]"==M;if((0,R.A)(e))return(0,d.A)(e,A);if(M==Y||M==V||T&&!g){if(k=S||T?{}:(0,L.A)(e),!A)return S?m(e,c(k,e)):f(e,l(k,e))}else{if(!U[M])return g?e:{};k=P(e,M,A)}}y||(y=new n.A);var E=y.get(e);if(E)return E;y.set(e,k),X(e)?e.forEach((function(n){k.add(t(n,i,a,n,e,y))})):H(e)&&e.forEach((function(n,r){k.set(r,t(n,i,a,r,e,y))}));var N=C?S?x.A:b.A:S?h.A:o.A,O=_?void 0:N(e);return(0,r.A)(O||e,(function(n,r){O&&(n=e[r=n]),(0,s.A)(k,r,t(n,i,a,r,e,y))})),k}},97132:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return function(e,i,n){for(var r=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[t?o:++r];if(!1===i(s[l],l,s))break}return e}}()},33831:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(76912),r=i(92049);const s=function(t,e,i){var s=e(t);return(0,r.A)(t)?s:(0,n.A)(s,i(t))}},2383:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var n=i(241),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,o=n.A?n.A.toStringTag:void 0;const l=function(t){var e=s.call(t,o),i=t[o];try{t[o]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[o]=i:delete t[o]),r};var h=Object.prototype.toString;const c=function(t){return h.call(t)};var d=n.A?n.A.toStringTag:void 0;const u=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?l(t):c(t)}},14259:(t,e,i)=>{"use strict";i.d(e,{A:()=>E});var n=i(22080),r=i(8300),s=i(63736),a=i(64099);const o=function(t,e,i,n,o,l){var h=1&i,c=t.length,d=e.length;if(c!=d&&!(h&&d>c))return!1;var u=l.get(t),p=l.get(e);if(u&&p)return u==e&&p==t;var f=-1,g=!0,m=2&i?new r.A:void 0;for(l.set(t,e),l.set(e,t);++f<c;){var b=t[f],x=e[f];if(n)var v=h?n(x,b,f,e,t,l):n(b,x,f,t,e,l);if(void 0!==v){if(v)continue;g=!1;break}if(m){if(!(0,s.A)(e,(function(t,e){if(!(0,a.A)(m,e)&&(b===t||o(b,t,i,n,l)))return m.push(e)}))){g=!1;break}}else if(b!==x&&!o(b,x,i,n,l)){g=!1;break}}return l.delete(t),l.delete(e),g};var l=i(241),h=i(43988),c=i(66984);const d=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i};var u=i(29959),p=l.A?l.A.prototype:void 0,f=p?p.valueOf:void 0;const g=function(t,e,i,n,r,s,a){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new h.A(t),new h.A(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,c.A)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=d;case"[object Set]":var p=1&n;if(l||(l=u.A),t.size!=e.size&&!p)return!1;var g=a.get(t);if(g)return g==e;n|=2,a.set(t,e);var m=o(l(t),l(e),n,r,s,a);return a.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1};var m=i(19042),b=Object.prototype.hasOwnProperty;const x=function(t,e,i,n,r,s){var a=1&i,o=(0,m.A)(t),l=o.length;if(l!=(0,m.A)(e).length&&!a)return!1;for(var h=l;h--;){var c=o[h];if(!(a?c in e:b.call(e,c)))return!1}var d=s.get(t),u=s.get(e);if(d&&u)return d==e&&u==t;var p=!0;s.set(t,e),s.set(e,t);for(var f=a;++h<l;){var g=t[c=o[h]],x=e[c];if(n)var v=a?n(x,g,c,e,t,s):n(g,x,c,t,e,s);if(!(void 0===v?g===x||r(g,x,i,n,s):v)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(t),s.delete(e),p};var v=i(9137),y=i(92049),w=i(41200),k=i(54749),A="[object Arguments]",S="[object Array]",C="[object Object]",_=Object.prototype.hasOwnProperty;const M=function(t,e,i,r,s,a){var l=(0,y.A)(t),h=(0,y.A)(e),c=l?S:(0,v.A)(t),d=h?S:(0,v.A)(e),u=(c=c==A?C:c)==C,p=(d=d==A?C:d)==C,f=c==d;if(f&&(0,w.A)(t)){if(!(0,w.A)(e))return!1;l=!0,u=!1}if(f&&!u)return a||(a=new n.A),l||(0,k.A)(t)?o(t,e,i,r,s,a):g(t,e,c,i,r,s,a);if(!(1&i)){var m=u&&_.call(t,"__wrapped__"),b=p&&_.call(e,"__wrapped__");if(m||b){var M=m?t.value():t,T=b?e.value():e;return a||(a=new n.A),s(M,T,i,r,a)}}return!!f&&(a||(a=new n.A),x(t,e,i,r,s,a))};var T=i(53098);const E=function t(e,i,n,r,s){return e===i||(null==e||null==i||!(0,T.A)(e)&&!(0,T.A)(i)?e!=e&&i!=i:M(e,i,n,r,t,s))}},14453:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(97271);const r=(0,i(40367).A)(Object.keys,Object);var s=Object.prototype.hasOwnProperty;const a=function(t){if(!(0,n.A)(t))return r(t);var e=[];for(var i in Object(t))s.call(t,i)&&"constructor"!=i&&e.push(i);return e}},24326:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(29008),r=i(65255),s=i(57424);const a=function(t,e){return(0,s.A)((0,r.A)(t,e,n.A),t+"")}},52789:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return function(e){return t(e)}}},64099:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){return t.has(e)}},90565:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(43988);const r=function(t){var e=new t.constructor(t.byteLength);return new n.A(e).set(new n.A(t)),e}},80154:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(41917),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=r&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===r?n.A.Buffer:void 0,o=a?a.allocUnsafe:void 0;const l=function(t,e){if(e)return t.slice();var i=t.length,n=o?o(i):new t.constructor(i);return t.copy(n),n}},1801:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(90565);const r=function(t,e){var i=e?(0,n.A)(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},39759:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},22031:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(52851),r=i(52528);const s=function(t,e,i,s){var a=!i;i||(i={});for(var o=-1,l=e.length;++o<l;){var h=e[o],c=s?s(i[h],t[h],h,i,t):void 0;void 0===c&&(c=t[h]),a?(0,r.A)(i,h,c):(0,n.A)(i,h,c)}return i}},3767:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(24326),r=i(6832);const s=function(t){return(0,n.A)((function(e,i){var n=-1,s=i.length,a=s>1?i[s-1]:void 0,o=s>2?i[2]:void 0;for(a=t.length>3&&"function"==typeof a?(s--,a):void 0,o&&(0,r.A)(i[0],i[1],o)&&(a=s<3?void 0:a,s=1),e=Object(e);++n<s;){var l=i[n];l&&t(e,l,n,a)}return e}))}},84171:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(28562);const r=function(){try{var t=(0,n.A)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}()},72136:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},19042:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(33831),r=i(14792),s=i(27422);const a=function(t){return(0,n.A)(t,s.A,r.A)}},83973:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(33831),r=i(83511),s=i(79999);const a=function(t){return(0,n.A)(t,s.A,r.A)}},28562:(t,e,i)=>{"use strict";i.d(e,{A:()=>x});var n=i(89610);const r=i(41917).A["__core-js_shared__"];var s,a=(s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";const o=function(t){return!!a&&a in t};var l=i(23149),h=i(81121),c=/^\[object .+?Constructor\]$/,d=Function.prototype,u=Object.prototype,p=d.toString,f=u.hasOwnProperty,g=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(t){return!(!(0,l.A)(t)||o(t))&&((0,n.A)(t)?g:c).test((0,h.A)(t))};const b=function(t,e){return null==t?void 0:t[e]};const x=function(t,e){var i=b(t,e);return m(i)?i:void 0}},15647:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=(0,i(40367).A)(Object.getPrototypeOf,Object)},14792:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(2634),r=i(13153),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;const o=a?function(t){return null==t?[]:(t=Object(t),(0,n.A)(a(t),(function(e){return s.call(t,e)})))}:r.A},83511:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(76912),r=i(15647),s=i(14792),a=i(13153);const o=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)(0,n.A)(e,(0,s.A)(t)),t=(0,r.A)(t);return e}:a.A},9137:(t,e,i)=>{"use strict";i.d(e,{A:()=>A});var n=i(28562),r=i(41917);const s=(0,n.A)(r.A,"DataView");var a=i(68335);const o=(0,n.A)(r.A,"Promise");var l=i(39857);const h=(0,n.A)(r.A,"WeakMap");var c=i(2383),d=i(81121),u="[object Map]",p="[object Promise]",f="[object Set]",g="[object WeakMap]",m="[object DataView]",b=(0,d.A)(s),x=(0,d.A)(a.A),v=(0,d.A)(o),y=(0,d.A)(l.A),w=(0,d.A)(h),k=c.A;(s&&k(new s(new ArrayBuffer(1)))!=m||a.A&&k(new a.A)!=u||o&&k(o.resolve())!=p||l.A&&k(new l.A)!=f||h&&k(new h)!=g)&&(k=function(t){var e=(0,c.A)(t),i="[object Object]"==e?t.constructor:void 0,n=i?(0,d.A)(i):"";if(n)switch(n){case b:return m;case x:return u;case v:return p;case y:return f;case w:return g}return e});const A=k},50407:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(23149),r=Object.create;const s=function(){function t(){}return function(e){if(!(0,n.A)(e))return{};if(r)return r(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();var a=i(15647),o=i(97271);const l=function(t){return"function"!=typeof t.constructor||(0,o.A)(t)?{}:s((0,a.A)(t))}},25353:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=/^(?:0|[1-9]\d*)$/;const r=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},6832:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(66984),r=i(38446),s=i(25353),a=i(23149);const o=function(t,e,i){if(!(0,a.A)(i))return!1;var o=typeof e;return!!("number"==o?(0,r.A)(i)&&(0,s.A)(e,i.length):"string"==o&&e in i)&&(0,n.A)(i[e],t)}},97271:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=Object.prototype;const r=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},64841:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(72136),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=r&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===r&&n.A.process;const o=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}()},40367:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){return function(i){return t(e(i))}}},65255:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const n=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)};var r=Math.max;const s=function(t,e,i){return e=r(void 0===e?t.length-1:e,0),function(){for(var s=arguments,a=-1,o=r(s.length-e,0),l=Array(o);++a<o;)l[a]=s[e+a];a=-1;for(var h=Array(e+1);++a<e;)h[a]=s[a];return h[e]=i(l),n(t,this,h)}}},41917:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(72136),r="object"==typeof self&&self&&self.Object===Object&&self;const s=n.A||r||Function("return this")()},29959:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}},57424:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(39142),r=i(84171),s=i(29008);const a=r.A?function(t,e){return(0,r.A)(t,"toString",{configurable:!0,enumerable:!1,value:(0,n.A)(e),writable:!0})}:s.A;var o=Date.now;const l=function(t){var e=0,i=0;return function(){var n=o(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(a)},81121:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=Function.prototype.toString;const r=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},20903:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(94507);const r=function(t){return(0,n.A)(t,5)}},39142:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return function(){return t}}},66984:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t,e){return t===e||t!=t&&e!=e}},29008:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return t}},25175:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var n=i(2383),r=i(53098);const s=function(t){return(0,r.A)(t)&&"[object Arguments]"==(0,n.A)(t)};var a=Object.prototype,o=a.hasOwnProperty,l=a.propertyIsEnumerable;const h=s(function(){return arguments}())?s:function(t){return(0,r.A)(t)&&o.call(t,"callee")&&!l.call(t,"callee")}},92049:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=Array.isArray},38446:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(89610),r=i(5254);const s=function(t){return null!=t&&(0,r.A)(t.length)&&!(0,n.A)(t)}},53533:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(38446),r=i(53098);const s=function(t){return(0,r.A)(t)&&(0,n.A)(t)}},41200:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(41917);const r=function(){return!1};var s="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=s&&"object"==typeof module&&module&&!module.nodeType&&module,o=a&&a.exports===s?n.A.Buffer:void 0;const l=(o?o.isBuffer:void 0)||r},89610:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(2383),r=i(23149);const s=function(t){if(!(0,r.A)(t))return!1;var e=(0,n.A)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},5254:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},23149:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},53098:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return null!=t&&"object"==typeof t}},54749:(t,e,i)=>{"use strict";i.d(e,{A:()=>d});var n=i(2383),r=i(5254),s=i(53098),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;const o=function(t){return(0,s.A)(t)&&(0,r.A)(t.length)&&!!a[(0,n.A)(t)]};var l=i(52789),h=i(64841),c=h.A&&h.A.isTypedArray;const d=c?(0,l.A)(c):o},27422:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(2505),r=i(14453),s=i(38446);const a=function(t){return(0,s.A)(t)?(0,n.A)(t):(0,r.A)(t)}},79999:(t,e,i)=>{"use strict";i.d(e,{A:()=>c});var n=i(2505),r=i(23149),s=i(97271);const a=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e};var o=Object.prototype.hasOwnProperty;const l=function(t){if(!(0,r.A)(t))return a(t);var e=(0,s.A)(t),i=[];for(var n in t)("constructor"!=n||!e&&o.call(t,n))&&i.push(n);return i};var h=i(38446);const c=function(t){return(0,h.A)(t)?(0,n.A)(t,!0):l(t)}},7222:(t,e,i)=>{"use strict";i.d(e,{A:()=>R});var n=i(22080),r=i(52528),s=i(66984);const a=function(t,e,i){(void 0!==i&&!(0,s.A)(t[e],i)||void 0===i&&!(e in t))&&(0,r.A)(t,e,i)};var o=i(97132),l=i(80154),h=i(1801),c=i(39759),d=i(50407),u=i(25175),p=i(92049),f=i(53533),g=i(41200),m=i(89610),b=i(23149),x=i(2383),v=i(15647),y=i(53098),w=Function.prototype,k=Object.prototype,A=w.toString,S=k.hasOwnProperty,C=A.call(Object);const _=function(t){if(!(0,y.A)(t)||"[object Object]"!=(0,x.A)(t))return!1;var e=(0,v.A)(t);if(null===e)return!0;var i=S.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&A.call(i)==C};var M=i(54749);const T=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var E=i(22031),N=i(79999);const P=function(t){return(0,E.A)(t,(0,N.A)(t))};const L=function(t,e,i,n,r,s,o){var x=T(t,i),v=T(e,i),y=o.get(v);if(y)a(t,i,y);else{var w=s?s(x,v,i+"",t,e,o):void 0,k=void 0===w;if(k){var A=(0,p.A)(v),S=!A&&(0,g.A)(v),C=!A&&!S&&(0,M.A)(v);w=v,A||S||C?(0,p.A)(x)?w=x:(0,f.A)(x)?w=(0,c.A)(x):S?(k=!1,w=(0,l.A)(v,!0)):C?(k=!1,w=(0,h.A)(v,!0)):w=[]:_(v)||(0,u.A)(v)?(w=x,(0,u.A)(x)?w=P(x):(0,b.A)(x)&&!(0,m.A)(x)||(w=(0,d.A)(v))):k=!1}k&&(o.set(v,w),r(w,v,n,s,o),o.delete(v)),a(t,i,w)}};const I=function t(e,i,r,s,l){e!==i&&(0,o.A)(i,(function(o,h){if(l||(l=new n.A),(0,b.A)(o))L(e,i,h,r,t,s,l);else{var c=s?s(T(e,h),o,h+"",e,i,l):void 0;void 0===c&&(c=o),a(e,h,c)}}),N.A)};const R=(0,i(3767).A)((function(t,e,i){I(t,e,i)}))},13153:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(){return[]}},60023:(t,e,i)=>{"use strict";function n(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}i.d(e,{xI:()=>pt});var r={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function s(t){r=t}var a={exec:()=>null};function o(t,e=""){let i="string"==typeof t?t:t.source;const n={replace:(t,e)=>{let r="string"==typeof e?e:e.source;return r=r.replace(l.caret,"$1"),i=i.replace(t,r),n},getRegex:()=>new RegExp(i,e)};return n}var l={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},h=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,c=/(?:[*+-]|\d{1,9}[.)])/,d=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,u=o(d).replace(/bull/g,c).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),p=o(d).replace(/bull/g,c).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),f=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,g=/(?!\s*\])(?:\\.|[^\[\]\\])+/,m=o(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",g).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),b=o(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,c).getRegex(),x="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",v=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,y=o("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",v).replace("tag",x).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),w=o(f).replace("hr",h).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex(),k={blockquote:o(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",w).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:m,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:h,html:y,lheading:u,list:b,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:w,table:a,text:/^[^\n]+/},A=o("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",h).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex(),S={...k,lheading:p,table:A,paragraph:o(f).replace("hr",h).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",A).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex()},C={...k,html:o("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",v).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:a,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:o(f).replace("hr",h).replace("heading"," *#{1,6} *[^\n]").replace("lheading",u).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_=/^( {2,}|\\)\n(?!\s*$)/,M=/[\p{P}\p{S}]/u,T=/[\s\p{P}\p{S}]/u,E=/[^\s\p{P}\p{S}]/u,N=o(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,T).getRegex(),P=/(?!~)[\p{P}\p{S}]/u,L=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,I=o(L,"u").replace(/punct/g,M).getRegex(),R=o(L,"u").replace(/punct/g,P).getRegex(),O="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",D=o(O,"gu").replace(/notPunctSpace/g,E).replace(/punctSpace/g,T).replace(/punct/g,M).getRegex(),z=o(O,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,P).getRegex(),F=o("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,E).replace(/punctSpace/g,T).replace(/punct/g,M).getRegex(),B=o(/\\(punct)/,"gu").replace(/punct/g,M).getRegex(),H=o(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),q=o(v).replace("(?:--\x3e|$)","--\x3e").getRegex(),j=o("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",q).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),G=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X=o(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",G).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),V=o(/^!?\[(label)\]\[(ref)\]/).replace("label",G).replace("ref",g).getRegex(),W=o(/^!?\[(ref)\](?:\[\])?/).replace("ref",g).getRegex(),Y={_backpedal:a,anyPunctuation:B,autolink:H,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:_,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:a,emStrongLDelim:I,emStrongRDelimAst:D,emStrongRDelimUnd:F,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:X,nolink:W,punctuation:N,reflink:V,reflinkSearch:o("reflink|nolink(?!\\()","g").replace("reflink",V).replace("nolink",W).getRegex(),tag:j,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:a},U={...Y,link:o(/^!?\[(label)\]\((.*?)\)/).replace("label",G).getRegex(),reflink:o(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",G).getRegex()},$={...Y,emStrongRDelimAst:z,emStrongLDelim:R,url:o(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},K={...$,br:o(_).replace("{2,}","*").getRegex(),text:o($.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Z={normal:k,gfm:S,pedantic:C},J={normal:Y,gfm:$,breaks:K,pedantic:U},Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tt=t=>Q[t];function et(t,e){if(e){if(l.escapeTest.test(t))return t.replace(l.escapeReplace,tt)}else if(l.escapeTestNoEncode.test(t))return t.replace(l.escapeReplaceNoEncode,tt);return t}function it(t){try{t=encodeURI(t).replace(l.percentDecode,"%")}catch{return null}return t}function nt(t,e){const i=t.replace(l.findPipe,((t,e,i)=>{let n=!1,r=e;for(;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"})).split(l.splitPipe);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(l.slashPipe,"|");return i}function rt(t,e,i){const n=t.length;if(0===n)return"";let r=0;for(;r<n;){const s=t.charAt(n-r-1);if(s!==e||i){if(s===e||!i)break;r++}else r++}return t.slice(0,n-r)}function st(t,e,i,n,r){const s=e.href,a=e.title||null,o=t[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;const l={type:"!"===t[0].charAt(0)?"image":"link",raw:i,href:s,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}var at=class{options;rules;lexer;constructor(t){this.options=t||r}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:rt(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],i=function(t,e,i){const n=t.match(i.other.indentCodeCompensation);if(null===n)return e;const r=n[1];return e.split("\n").map((t=>{const e=t.match(i.other.beginningSpace);if(null===e)return t;const[n]=e;return n.length>=r.length?t.slice(r.length):t})).join("\n")}(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const e=rt(t,"#");this.options.pedantic?t=e.trim():e&&!this.rules.other.endingSpaceChar.test(e)||(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:rt(e[0],"\n")}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let t=rt(e[0],"\n").split("\n"),i="",n="";const r=[];for(;t.length>0;){let e=!1;const s=[];let a;for(a=0;a<t.length;a++)if(this.rules.other.blockquoteStart.test(t[a]))s.push(t[a]),e=!0;else{if(e)break;s.push(t[a])}t=t.slice(a);const o=s.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}\n${o}`:o,n=n?`${n}\n${l}`:l;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=h,0===t.length)break;const c=r.at(-1);if("code"===c?.type)break;if("blockquote"===c?.type){const e=c,s=e.raw+"\n"+t.join("\n"),a=this.blockquote(s);r[r.length-1]=a,i=i.substring(0,i.length-e.raw.length)+a.raw,n=n.substring(0,n.length-e.text.length)+a.text;break}if("list"!==c?.type);else{const e=c,s=e.raw+"\n"+t.join("\n"),a=this.list(s);r[r.length-1]=a,i=i.substring(0,i.length-c.raw.length)+a.raw,n=n.substring(0,n.length-e.raw.length)+a.raw,t=s.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:i,tokens:r,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim();const n=i.length>1,r={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");const s=this.rules.other.listItemRegex(i);let a=!1;for(;t;){let i=!1,n="",o="";if(!(e=s.exec(t)))break;if(this.rules.block.hr.test(t))break;n=e[0],t=t.substring(n.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(t=>" ".repeat(3*t.length))),h=t.split("\n",1)[0],c=!l.trim(),d=0;if(this.options.pedantic?(d=2,o=l.trimStart()):c?d=e[1].length+1:(d=e[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,o=l.slice(d),d+=e[1].length),c&&this.rules.other.blankLine.test(h)&&(n+=h+"\n",t=t.substring(h.length+1),i=!0),!i){const e=this.rules.other.nextBulletRegex(d),i=this.rules.other.hrRegex(d),r=this.rules.other.fencesBeginRegex(d),s=this.rules.other.headingBeginRegex(d),a=this.rules.other.htmlBeginRegex(d);for(;t;){const u=t.split("\n",1)[0];let p;if(h=u,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),p=h):p=h.replace(this.rules.other.tabCharGlobal,"    "),r.test(h))break;if(s.test(h))break;if(a.test(h))break;if(e.test(h))break;if(i.test(h))break;if(p.search(this.rules.other.nonSpaceChar)>=d||!h.trim())o+="\n"+p.slice(d);else{if(c)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(r.test(l))break;if(s.test(l))break;if(i.test(l))break;o+="\n"+h}c||h.trim()||(c=!0),n+=u+"\n",t=t.substring(u.length+1),l=p.slice(d)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(n)&&(a=!0));let u,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(o),p&&(u="[ ] "!==p[0],o=o.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:n,task:!!p,checked:u,loose:!1,text:o,tokens:[]}),r.raw+=n}const o=r.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),r.raw=r.raw.trimEnd();for(let t=0;t<r.items.length;t++)if(this.lexer.state.top=!1,r.items[t].tokens=this.lexer.blockTokens(r.items[t].text,[]),!r.loose){const e=r.items[t].tokens.filter((t=>"space"===t.type)),i=e.length>0&&e.some((t=>this.rules.other.anyLine.test(t.raw)));r.loose=i}if(r.loose)for(let t=0;t<r.items.length;t++)r.items[t].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e){return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}}def(t){const e=this.rules.block.def.exec(t);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:n}}}table(t){const e=this.rules.block.table.exec(t);if(!e)return;if(!this.rules.other.tableDelimiter.test(e[2]))return;const i=nt(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===n.length){for(const t of n)this.rules.other.tableAlignRight.test(t)?s.align.push("right"):this.rules.other.tableAlignCenter.test(t)?s.align.push("center"):this.rules.other.tableAlignLeft.test(t)?s.align.push("left"):s.align.push(null);for(let t=0;t<i.length;t++)s.header.push({text:i[t],tokens:this.lexer.inline(i[t]),header:!0,align:s.align[t]});for(const t of r)s.rows.push(nt(t,s.header.length).map(((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:s.align[e]}))));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const e=rt(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;let i=0;for(let n=0;n<t.length;n++)if("\\"===t[n])n++;else if(t[n]===e[0])i++;else if(t[n]===e[1]&&(i--,i<0))return n;return i>0?-2:-1}(e[2],"()");if(-2===t)return;if(t>-1){const i=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let i=e[2],n="";if(this.options.pedantic){const t=this.rules.other.pedanticHrefTitle.exec(i);t&&(i=t[1],n=t[3])}else n=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?i.slice(1):i.slice(1,-1)),st(e,{href:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i,title:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n},e[0],this.lexer,this.rules)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const t=e[(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){const t=i[0].charAt(0);return{type:"text",raw:t,text:t}}return st(i,t,i[0],this.lexer,this.rules)}}emStrong(t,e,i=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!n)return;if(n[3]&&i.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const i=[...n[0]].length-1;let r,s,a=i,o=0;const l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+i);null!=(n=l.exec(e));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(s=[...r].length,n[3]||n[4]){a+=s;continue}if((n[5]||n[6])&&i%3&&!((i+s)%3)){o+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+o);const e=[...n[0]][0].length,l=t.slice(0,i+n.index+e+s);if(Math.min(i,s)%2){const t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}const h=l.slice(2,-2);return{type:"strong",raw:l,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(t),n=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return i&&n&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let t,i;return"@"===e[2]?(t=e[1],i="mailto:"+t):(t=e[1],i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,i;if("@"===e[2])t=e[0],i="mailto:"+t;else{let n;do{n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(n!==e[0]);t=e[0],i="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ot=class t{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||r,this.options.tokenizer=this.options.tokenizer||new at,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={other:l,block:Z.normal,inline:J.normal};this.options.pedantic?(e.block=Z.pedantic,e.inline=J.pedantic):this.options.gfm&&(e.block=Z.gfm,this.options.breaks?e.inline=J.breaks:e.inline=J.gfm),this.tokenizer.rules=e}static get rules(){return{block:Z,inline:J}}static lex(e,i){return new t(i).lex(e)}static lexInline(e,i){return new t(i).inlineTokens(e)}lex(t){t=t.replace(l.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(l.tabCharGlobal,"    ").replace(l.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some((i=>!!(n=i.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0))))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);const i=e.at(-1);1===n.raw.length&&void 0!==i?i.raw+="\n":e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);const i=e.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.at(-1).src=i.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);const i=e.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}let r=t;if(this.options.extensions?.startBlock){let e=1/0;const i=t.slice(1);let n;this.options.extensions.startBlock.forEach((t=>{n=t.call({lexer:this},i),"number"==typeof n&&n>=0&&(e=Math.min(e,n))})),e<1/0&&e>=0&&(r=t.substring(0,e+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r))){const s=e.at(-1);i&&"paragraph"===s?.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):e.push(n),i=r.length!==t.length,t=t.substring(n.raw.length)}else if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);const i=e.at(-1);"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):e.push(n)}else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent)break;throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,n=null;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(i));)t.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(i));)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(i));)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,s="";for(;t;){let n;if(r||(s=""),r=!1,this.options.extensions?.inline?.some((i=>!!(n=i.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0))))continue;if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length);const i=e.at(-1);"text"===n.type&&"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(t,i,s)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),e.push(n);continue}let a=t;if(this.options.extensions?.startInline){let e=1/0;const i=t.slice(1);let n;this.options.extensions.startInline.forEach((t=>{n=t.call({lexer:this},i),"number"==typeof n&&n>=0&&(e=Math.min(e,n))})),e<1/0&&e>=0&&(a=t.substring(0,e+1))}if(n=this.tokenizer.inlineText(a)){t=t.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),r=!0;const i=e.at(-1);"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):e.push(n)}else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent)break;throw new Error(e)}}return e}},lt=class{options;parser;constructor(t){this.options=t||r}space(t){return""}code({text:t,lang:e,escaped:i}){const n=(e||"").match(l.notSpaceStart)?.[0],r=t.replace(l.endingNewline,"")+"\n";return n?'<pre><code class="language-'+et(n)+'">'+(i?r:et(r,!0))+"</code></pre>\n":"<pre><code>"+(i?r:et(r,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){const e=t.ordered,i=t.start;let n="";for(let e=0;e<t.items.length;e++){const i=t.items[e];n+=this.listitem(i)}const r=e?"ol":"ul";return"<"+r+(e&&1!==i?' start="'+i+'"':"")+">\n"+n+"</"+r+">\n"}listitem(t){let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=i+" "+et(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",i="";for(let e=0;e<t.header.length;e++)i+=this.tablecell(t.header[e]);e+=this.tablerow({text:i});let n="";for(let e=0;e<t.rows.length;e++){const r=t.rows[e];i="";for(let t=0;t<r.length;t++)i+=this.tablecell(r[t]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){const e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${et(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){const n=this.parser.parseInline(i),r=it(t);if(null===r)return n;let s='<a href="'+(t=r)+'"';return e&&(s+=' title="'+et(e)+'"'),s+=">"+n+"</a>",s}image({href:t,title:e,text:i,tokens:n}){n&&(i=this.parser.parseInline(n,this.parser.textRenderer));const r=it(t);if(null===r)return et(i);let s=`<img src="${t=r}" alt="${i}"`;return e&&(s+=` title="${et(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:et(t.text)}},ht=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ct=class t{options;renderer;textRenderer;constructor(t){this.options=t||r,this.options.renderer=this.options.renderer||new lt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ht}static parse(e,i){return new t(i).parse(e)}static parseInline(e,i){return new t(i).parseInline(e)}parse(t,e=!0){let i="";for(let n=0;n<t.length;n++){const r=t[n];if(this.options.extensions?.renderers?.[r.type]){const t=r,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(t.type)){i+=e||"";continue}}const s=r;switch(s.type){case"space":i+=this.renderer.space(s);continue;case"hr":i+=this.renderer.hr(s);continue;case"heading":i+=this.renderer.heading(s);continue;case"code":i+=this.renderer.code(s);continue;case"table":i+=this.renderer.table(s);continue;case"blockquote":i+=this.renderer.blockquote(s);continue;case"list":i+=this.renderer.list(s);continue;case"html":i+=this.renderer.html(s);continue;case"paragraph":i+=this.renderer.paragraph(s);continue;case"text":{let r=s,a=this.renderer.text(r);for(;n+1<t.length&&"text"===t[n+1].type;)r=t[++n],a+="\n"+this.renderer.text(r);i+=e?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{const t='Token with "'+s.type+'" type was not found.';if(this.options.silent)return"";throw new Error(t)}}}return i}parseInline(t,e=this.renderer){let i="";for(let n=0;n<t.length;n++){const r=t[n];if(this.options.extensions?.renderers?.[r.type]){const t=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=t||"";continue}}const s=r;switch(s.type){case"escape":case"text":i+=e.text(s);break;case"html":i+=e.html(s);break;case"link":i+=e.link(s);break;case"image":i+=e.image(s);break;case"strong":i+=e.strong(s);break;case"em":i+=e.em(s);break;case"codespan":i+=e.codespan(s);break;case"br":i+=e.br(s);break;case"del":i+=e.del(s);break;default:{const t='Token with "'+s.type+'" type was not found.';if(this.options.silent)return"";throw new Error(t)}}}return i}},dt=class{options;block;constructor(t){this.options=t||r}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?ot.lex:ot.lexInline}provideParser(){return this.block?ct.parse:ct.parseInline}},ut=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ct;Renderer=lt;TextRenderer=ht;Lexer=ot;Tokenizer=at;Hooks=dt;constructor(...t){this.use(...t)}walkTokens(t,e){let i=[];for(const n of t)switch(i=i.concat(e.call(this,n)),n.type){case"table":{const t=n;for(const n of t.header)i=i.concat(this.walkTokens(n.tokens,e));for(const n of t.rows)for(const t of n)i=i.concat(this.walkTokens(t.tokens,e));break}case"list":{const t=n;i=i.concat(this.walkTokens(t.items,e));break}default:{const t=n;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach((n=>{const r=t[n].flat(1/0);i=i.concat(this.walkTokens(r,e))})):t.tokens&&(i=i.concat(this.walkTokens(t.tokens,e)))}}return i}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const i=e.renderers[t.name];e.renderers[t.name]=i?function(...e){let n=t.renderer.apply(this,e);return!1===n&&(n=i.apply(this,e)),n}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const i=e[t.level];i?i.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),i.extensions=e),t.renderer){const e=this.defaults.renderer||new lt(this.defaults);for(const i in t.renderer){if(!(i in e))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const n=i,r=t.renderer[n],s=e[n];e[n]=(...t)=>{let i=r.apply(e,t);return!1===i&&(i=s.apply(e,t)),i||""}}i.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new at(this.defaults);for(const i in t.tokenizer){if(!(i in e))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const n=i,r=t.tokenizer[n],s=e[n];e[n]=(...t)=>{let i=r.apply(e,t);return!1===i&&(i=s.apply(e,t)),i}}i.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new dt;for(const i in t.hooks){if(!(i in e))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const n=i,r=t.hooks[n],s=e[n];dt.passThroughHooks.has(i)?e[n]=t=>{if(this.defaults.async)return Promise.resolve(r.call(e,t)).then((t=>s.call(e,t)));const i=r.call(e,t);return s.call(e,i)}:e[n]=(...t)=>{let i=r.apply(e,t);return!1===i&&(i=s.apply(e,t)),i}}i.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,n=t.walkTokens;i.walkTokens=function(t){let i=[];return i.push(n.call(this,t)),e&&(i=i.concat(e.call(this,t))),i}}this.defaults={...this.defaults,...i}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return ot.lex(t,e??this.defaults)}parser(t,e){return ct.parse(t,e??this.defaults)}parseMarkdown(t){return(e,i)=>{const n={...i},r={...this.defaults,...n},s=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===n.async)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==e)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=t);const a=r.hooks?r.hooks.provideLexer():t?ot.lex:ot.lexInline,o=r.hooks?r.hooks.provideParser():t?ct.parse:ct.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then((t=>a(t,r))).then((t=>r.hooks?r.hooks.processAllTokens(t):t)).then((t=>r.walkTokens?Promise.all(this.walkTokens(t,r.walkTokens)).then((()=>t)):t)).then((t=>o(t,r))).then((t=>r.hooks?r.hooks.postprocess(t):t)).catch(s);try{r.hooks&&(e=r.hooks.preprocess(e));let t=a(e,r);r.hooks&&(t=r.hooks.processAllTokens(t)),r.walkTokens&&this.walkTokens(t,r.walkTokens);let i=o(t,r);return r.hooks&&(i=r.hooks.postprocess(i)),i}catch(t){return s(t)}}}onError(t,e){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const t="<p>An error occurred:</p><pre>"+et(i.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(i);throw i}}};function pt(t,e){return ut.parse(t,e)}pt.options=pt.setOptions=function(t){return ut.setOptions(t),pt.defaults=ut.defaults,s(pt.defaults),pt},pt.getDefaults=n,pt.defaults=r,pt.use=function(...t){return ut.use(...t),pt.defaults=ut.defaults,s(pt.defaults),pt},pt.walkTokens=function(t,e){return ut.walkTokens(t,e)},pt.parseInline=ut.parseInline,pt.Parser=ct,pt.parser=ct.parse,pt.Renderer=lt,pt.TextRenderer=ht,pt.Lexer=ot,pt.lexer=ot.lex,pt.Tokenizer=at,pt.Hooks=dt,pt.parse=pt;pt.options,pt.setOptions,pt.use,pt.walkTokens,pt.parseInline,ct.parse,ot.lex},91100:(t,e,i)=>{"use strict";i.d(e,{EA:()=>hr,YE:()=>cr});var n={d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},r=globalThis.pdfjsLib={};n.d(r,{AbortException:()=>mt,AnnotationEditorLayer:()=>or,AnnotationEditorParamsType:()=>v,AnnotationEditorType:()=>x,AnnotationEditorUIManager:()=>ee,AnnotationLayer:()=>jn,AnnotationMode:()=>b,ColorPicker:()=>Jn,DOMSVGFactory:()=>cn,DrawLayer:()=>lr,FeatureTest:()=>yt,GlobalWorkerOptions:()=>hi,ImageKind:()=>M,InvalidPDFException:()=>ut,MissingPDFException:()=>pt,OPS:()=>J,OutputScale:()=>Wt,PDFDataRangeTransport:()=>Yi,PDFDateString:()=>Ht,PDFWorker:()=>Zi,PasswordResponses:()=>Q,PermissionFlag:()=>y,PixelsPerInch:()=>Tt,RenderingCancelledException:()=>Pt,TextLayer:()=>zi,TouchManager:()=>ne,UnexpectedResponseException:()=>ft,Util:()=>kt,VerbosityLevel:()=>Z,XfaLayer:()=>dn,build:()=>sn,createValidAbsoluteUrl:()=>ot,fetchData:()=>Et,getDocument:()=>Xi,getFilenameFromUrl:()=>Rt,getPdfFilenameFromUrl:()=>Ot,getXfaPageViewport:()=>qt,isDataScheme:()=>Lt,isPdfFile:()=>It,noContextMenu:()=>Ft,normalizeUnicode:()=>Ct,setLayerDimensions:()=>Vt,shadow:()=>lt,stopEvent:()=>Bt,version:()=>rn});const s=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),a=[1,0,0,1,0,0],o=[.001,0,0,.001,0,0],l=1.35,h=1,c=2,d=4,u=16,p=32,f=64,g=128,m=256,b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},x={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},v={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},w=0,k=1,A=2,S=3,C=3,_=4,M={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},T=1,E=2,N=3,P=4,L=5,I=6,R=7,O=8,D=9,z=10,F=11,B=12,H=13,q=14,j=15,G=16,X=17,V=20,W=1,Y=2,U=3,$=4,K=5,Z={ERRORS:0,WARNINGS:1,INFOS:5},J={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tt=Z.WARNINGS;function et(t){Number.isInteger(t)&&(tt=t)}function it(){return tt}function nt(t){Z.INFOS}function rt(t){Z.WARNINGS}function st(t){throw new Error(t)}function at(t,e){t||st(e)}function ot(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const n=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch{}return null}function lt(t,e,i,n=!1){return Object.defineProperty(t,e,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const ht=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class ct extends ht{constructor(t,e){super(t,"PasswordException"),this.code=e}}class dt extends ht{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ut extends ht{constructor(t){super(t,"InvalidPDFException")}}class pt extends ht{constructor(t){super(t,"MissingPDFException")}}class ft extends ht{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class gt extends ht{constructor(t){super(t,"FormatError")}}class mt extends ht{constructor(t){super(t,"AbortException")}}function bt(t){"object"==typeof t&&void 0!==t?.length||st("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const n=[];for(let r=0;r<e;r+=i){const s=Math.min(r+i,e),a=t.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function xt(t){"string"!=typeof t&&st("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function vt(t){const e=Object.create(null);for(const[i,n]of t)e[i]=n;return e}class yt{static get isLittleEndian(){return lt(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return lt(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return lt(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return lt(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?lt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):lt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return lt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const wt=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class kt{static makeHexColor(t,e,i){return`#${wt[t]}${wt[e]}${wt[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),s=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],r[0],s[0]),Math.min(i[1],n[1],r[1],s[1]),Math.max(i[0],n[0],r[0],s[0]),Math.max(i[1],n[1],r[1],s[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],a=(i+s)/2,o=Math.sqrt((i+s)**2-4*(i*s-r*n))/2,l=a+o||1,h=a-o||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[i,r,n,s]}static#t(t,e,i,n,r,s,a,o,l,h){if(l<=0||l>=1)return;const c=1-l,d=l*l,u=d*l,p=c*(c*(c*t+3*l*e)+3*d*i)+u*n,f=c*(c*(c*r+3*l*s)+3*d*a)+u*o;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}static#e(t,e,i,n,r,s,a,o,l,h,c,d){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&this.#t(t,e,i,n,r,s,a,o,-c/h,d));const u=h**2-4*c*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;this.#t(t,e,i,n,r,s,a,o,(-h+p)/f,d),this.#t(t,e,i,n,r,s,a,o,(-h-p)/f,d)}static bezierBoundingBox(t,e,i,n,r,s,a,o,l){return l?(l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o)):l=[Math.min(t,a),Math.min(e,o),Math.max(t,a),Math.max(e,o)],this.#e(t,i,r,a,e,n,s,o,3*(3*(i-r)-t+a),6*(t-2*i+r),3*(i-t),l),this.#e(t,i,r,a,e,n,s,o,3*(3*(n-s)-e+o),6*(e-2*n+s),3*(n-e),l),l}}let At=null,St=null;function Ct(t){return At||(At=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,St=new Map([["","t"]])),t.replaceAll(At,((t,e,i)=>e?e.normalize("NFKC"):St.get(i)))}const _t="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(t,...e){return new Promise((i=>{i(t(...e))}))});const Mt="http://www.w3.org/2000/svg";class Tt{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Et(t,e="text"){if(zt(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)n(new Error(r.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(r.response)}i(r.responseText)}},r.send(null)}))}class Nt{constructor({viewBox:t,userUnit:e,scale:i,rotation:n,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=n,this.offsetX=r,this.offsetY=s,i*=e;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,c,d,u,p,f,g,m;switch((n%=360)<0&&(n+=360),n){case 180:h=-1,c=0,d=0,u=1;break;case 90:h=0,c=1,d=1,u=0;break;case 270:h=0,c=-1,d=-1,u=0;break;case 0:h=1,c=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===h?(p=Math.abs(l-t[1])*i+r,f=Math.abs(o-t[0])*i+s,g=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(p=Math.abs(o-t[0])*i+r,f=Math.abs(l-t[1])*i+s,g=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,c*i,d*i,u*i,p-h*i*o-d*i*l,f-c*i*o-u*i*l],this.width=g,this.height=m}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map((e=>e*t));return lt(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new Nt({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return kt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=kt.applyTransform([t[0],t[1]],this.transform),i=kt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return kt.applyInverseTransform([t,e],this.transform)}}class Pt extends ht{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Lt(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function It(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function Rt(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Ot(t,e="document.pdf"){if("string"!=typeof t)return e;if(Lt(t))return rt(),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class Dt{started=Object.create(null);times=[];time(t){t in this.started&&rt(),this.started[t]=Date.now()}timeEnd(t){t in this.started||rt(),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:t}of this.times)e=Math.max(t.length,e);for(const{name:i,start:n,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-n}ms\n`);return t.join("")}}function zt(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function Ft(t){t.preventDefault()}function Bt(t){t.preventDefault(),t.stopPropagation()}class Ht{static#i;static toDateObject(t){if(!t||"string"!=typeof t)return null;this.#i||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#i.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(s+=h,a+=c):"+"===l&&(s-=h,a-=c),new Date(Date.UTC(i,n,r,s,a,o))}}function qt(t,{scale:e=1,rotation:i=0}){const{width:n,height:r}=t.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new Nt({viewBox:s,userUnit:1,scale:e,rotation:i})}function jt(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(rt(),[0,0,0])}function Gt(t){const{a:e,b:i,c:n,d:r,e:s,f:a}=t.getTransform();return[e,i,n,r,s,a]}function Xt(t){const{a:e,b:i,c:n,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,i,n,r,s,a]}function Vt(t,e,i=!1,n=!0){if(e instanceof Nt){const{pageWidth:n,pageHeight:r}=e.rawDims,{style:s}=t,a=yt.isCSSRoundSupported,o=`var(--scale-factor) * ${n}px`,l=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${o}, var(--scale-round-x, 1px))`:`calc(${o})`,c=a?`round(down, ${l}, var(--scale-round-y, 1px))`:`calc(${l})`;i&&e.rotation%180!=0?(s.width=c,s.height=h):(s.width=h,s.height=c)}n&&t.setAttribute("data-main-rotation",e.rotation)}class Wt{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class Yt{#n=null;#r=null;#s;#a=null;#o=null;static#l=null;constructor(t){this.#s=t,Yt.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#n=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;t.addEventListener("contextmenu",Ft,{signal:e}),t.addEventListener("pointerdown",Yt.#h,{signal:e});const i=this.#a=document.createElement("div");i.className="buttons",t.append(i);const n=this.#s.toolbarPosition;if(n){const{style:e}=t,i="ltr"===this.#s._uiManager.direction?1-n[0]:n[0];e.insetInlineEnd=100*i+"%",e.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#c(),t}get div(){return this.#n}static#h(t){t.stopPropagation()}#d(t){this.#s._focusEventsAllowed=!1,Bt(t)}#u(t){this.#s._focusEventsAllowed=!0,Bt(t)}#p(t){const e=this.#s._uiManager._signal;t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ft,{signal:e})}hide(){this.#n.classList.add("hidden"),this.#r?.hideDropdown()}show(){this.#n.classList.remove("hidden"),this.#o?.shown()}#c(){const{editorType:t,_uiManager:e}=this.#s,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Yt.#l[t]),this.#p(i),i.addEventListener("click",(t=>{e.delete()}),{signal:e._signal}),this.#a.append(i)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#p(e),this.#a.prepend(e,this.#f),this.#o=t}addColorPicker(t){this.#r=t;const e=t.renderButton();this.#p(e),this.#a.prepend(e,this.#f)}remove(){this.#n.remove(),this.#r?.destroy(),this.#r=null}}class Ut{#a=null;#n=null;#g;constructor(t){this.#g=t}#m(){const t=this.#n=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ft,{signal:this.#g._signal});const e=this.#a=document.createElement("div");return e.className="buttons",t.append(e),this.#b(),t}#x(t,e){let i=0,n=0;for(const r of t){const t=r.y+r.height;if(t<i)continue;const s=r.x+(e?r.width:0);t>i?(n=s,i=t):e?s>n&&(n=s):s<n&&(n=s)}return[e?1-n:n,i]}show(t,e,i){const[n,r]=this.#x(e,i),{style:s}=this.#n||=this.#m();t.append(this.#n),s.insetInlineEnd=100*n+"%",s.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#n.remove()}#b(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#g._signal;t.addEventListener("contextmenu",Ft,{signal:i}),t.addEventListener("click",(()=>{this.#g.highlightSelection("floating_button")}),{signal:i}),this.#a.append(t)}}function $t(t,e,i){for(const n of i)e.addEventListener(n,t[n].bind(t))}class Kt{#v=0;get id(){return"pdfjs_internal_editor_"+this.#v++}}class Zt{#y=function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),bt(t)}();#v=0;#w=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return lt(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async#k(t,e){this.#w||=new Map;let i=this.#w.get(t);if(null===i)return null;if(i?.bitmap)return i.refCounter+=1,i;try{let t;if(i||={bitmap:null,id:`image_${this.#y}_${this.#v++}`,refCounter:0,isSvg:!1},"string"==typeof e?(i.url=e,t=await Et(e,"blob")):e instanceof File?t=i.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=Zt._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise(((t,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;r.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},r.onerror=n.onerror=s}));n.readAsDataURL(t),await s}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(t){rt(),i=null}return this.#w.set(t,i),i&&this.#w.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:r}=t;return this.#k(`${e}_${i}_${n}_${r}`,t)}async getFromUrl(t){return this.#k(t,t)}async getFromBlob(t,e){const i=await e;return this.#k(t,i)}async getFromId(t){this.#w||=new Map;const e=this.#w.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#w||=new Map;let i=this.#w.get(t);if(i?.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#y}_${this.#v++}`,refCounter:1,isSvg:!1},this.#w.set(t,i),this.#w.set(i.id,i),i}getSvgUrl(t){const e=this.#w.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#w||=new Map;const e=this.#w.get(t);if(!e)return;if(e.refCounter-=1,0!==e.refCounter)return;const{bitmap:i}=e;if(!e.url&&!e.file){const t=new OffscreenCanvas(i.width,i.height);t.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=t.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#y}_`)}}class Jt{#A=[];#S=!1;#C;#_=-1;constructor(t=128){this.#C=t}add({cmd:t,undo:e,post:i,mustExec:n,type:r=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(n&&t(),this.#S)return;const o={cmd:t,undo:e,post:i,type:r};if(-1===this.#_)return this.#A.length>0&&(this.#A.length=0),this.#_=0,void this.#A.push(o);if(s&&this.#A[this.#_].type===r)return a&&(o.undo=this.#A[this.#_].undo),void(this.#A[this.#_]=o);const l=this.#_+1;l===this.#C?this.#A.splice(0,1):(this.#_=l,l<this.#A.length&&this.#A.splice(l)),this.#A.push(o)}undo(){if(-1===this.#_)return;this.#S=!0;const{undo:t,post:e}=this.#A[this.#_];t(),e?.(),this.#S=!1,this.#_-=1}redo(){if(this.#_<this.#A.length-1){this.#_+=1,this.#S=!0;const{cmd:t,post:e}=this.#A[this.#_];t(),e?.(),this.#S=!1}}hasSomethingToUndo(){return-1!==this.#_}hasSomethingToRedo(){return this.#_<this.#A.length-1}cleanType(t){if(-1!==this.#_){for(let e=this.#_;e>=0;e--)if(this.#A[e].type!==t)return this.#A.splice(e+1,this.#_-e),void(this.#_=e);this.#A.length=0,this.#_=-1}}destroy(){this.#A=null}}class Qt{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=yt.platform;for(const[i,n,r={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:n,options:r}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:n,options:r}),this.allKeys.add(t.split("+").at(-1)))}}#M(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#M(e));if(!i)return;const{callback:n,options:{bubbles:r=!1,args:s=[],checker:a=null}}=i;a&&!a(t,e)||(n.bind(t,...s,e)(),r||Bt(e))}}class te{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const n=window.getComputedStyle(e).color;t.set(i,jt(n))}e.remove()}(t),lt(this,"_colors",t)}convert(t){const e=jt(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[t,i]of this._colors)if(i.every(((t,i)=>t===e[i])))return te._colorsMapping.get(t);return e}getHexCode(t){const e=this._colors.get(t);return e?kt.makeHexColor(...e):t}}class ee{#T=new AbortController;#E=null;#N=new Map;#P=new Map;#L=null;#I=null;#R=null;#O=new Jt;#D=null;#z=null;#F=0;#B=new Set;#H=null;#q=null;#j=new Set;_editorUndoBar=null;#G=!1;#X=!1;#V=!1;#W=null;#Y=null;#U=null;#$=null;#K=!1;#Z=null;#J=new Kt;#Q=!1;#tt=!1;#et=null;#it=null;#nt=null;#rt=null;#st=x.NONE;#at=new Set;#ot=null;#lt=null;#ht=null;#ct={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#dt=[0,0];#ut=null;#pt=null;#ft=null;#gt=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ee.prototype,e=t=>t.#pt.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>{if(e instanceof HTMLInputElement){const{type:t}=e;return"text"!==t&&"number"!==t}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return lt(this,"_keyboardManager",new Qt([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#pt.contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#pt.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,i,n,r,s,a,o,l,h,c,d,u){const p=this._signal=this.#T.signal;this.#pt=t,this.#ft=e,this.#L=i,this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:p}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),n._on("setpreference",this.onSetPreference.bind(this),{signal:p}),n._on("switchannotationeditorparams",(t=>this.updateParams(t.type,t.value)),{signal:p}),this.#mt(),this.#bt(),this.#xt(),this.#I=r.annotationStorage,this.#W=r.filterFactory,this.#lt=s,this.#$=a||null,this.#G=o,this.#X=l,this.#V=h,this.#rt=c||null,this.viewParameters={realScale:Tt.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=!1!==u}destroy(){this.#gt?.resolve(),this.#gt=null,this.#T?.abort(),this.#T=null,this._signal=null;for(const t of this.#P.values())t.destroy();this.#P.clear(),this.#N.clear(),this.#j.clear(),this.#E=null,this.#at.clear(),this.#O.destroy(),this.#L?.destroy(),this.#Z?.hide(),this.#Z=null,this.#Y&&(clearTimeout(this.#Y),this.#Y=null),this.#ut&&(clearTimeout(this.#ut),this.#ut=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#rt}get useNewAltTextFlow(){return this.#X}get useNewAltTextWhenAddingImage(){return this.#V}get hcmFilter(){return lt(this,"hcmFilter",this.#lt?this.#W.addHCMFilter(this.#lt.foreground,this.#lt.background):"none")}get direction(){return lt(this,"direction",getComputedStyle(this.#pt).direction)}get highlightColors(){return lt(this,"highlightColors",this.#$?new Map(this.#$.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return lt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#z=t}setMainHighlightColorPicker(t){this.#nt=t}editAltText(t,e=!1){this.#L?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){if("enableNewAltTextWhenAddingImage"===t)this.#V=e}onPageChanging({pageNumber:t}){this.#F=t-1}focusMainContainer(){this.#pt.focus()}findParent(t,e){for(const i of this.#P.values()){const{x:n,y:r,width:s,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+s&&e>=r&&e<=r+a)return i}return null}disableUserSelect(t=!1){this.#ft.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#j.add(t)}removeShouldRescale(t){this.#j.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Tt.PDF_TO_CSS_UNITS;for(const t of this.#j)t.onScaleChanging();this.#z?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#vt({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#yt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const e of this.#P.values())if(e.hasTextLayer(t))return e;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}=e,a=e.toString(),o=this.#vt(e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;e.empty();const h=this.#yt(o),c=this.#st===x.NONE,d=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s,text:a}),c&&this.showAllEditors("highlight",!0,!0)};c?this.switchToMode(x.HIGHLIGHT,d):d()}#wt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=this.#vt(t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(this.#Z||=new Ut(this),this.#Z.show(e,i,"ltr"===this.direction))}addToAnnotationStorage(t){t.isEmpty()||!this.#I||this.#I.has(t.id)||this.#I.setValue(t.id,t)}#kt(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#ot&&(this.#Z?.hide(),this.#ot=null,this.#At({hasSelectedText:!1})));const{anchorNode:e}=t;if(e===this.#ot)return;const i=this.#vt(t).closest(".textLayer");if(i){if(this.#Z?.hide(),this.#ot=e,this.#At({hasSelectedText:!0}),(this.#st===x.HIGHLIGHT||this.#st===x.NONE)&&(this.#st===x.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#K=this.isShiftKeyDown,!this.isShiftKeyDown)){const t=this.#st===x.HIGHLIGHT?this.#yt(i):null;t?.toggleDrawing();const e=new AbortController,n=this.combinedSignal(e),r=i=>{"pointerup"===i.type&&0!==i.button||(e.abort(),t?.toggleDrawing(!0),"pointerup"===i.type&&this.#St("main_toolbar"))};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}}else this.#ot&&(this.#Z?.hide(),this.#ot=null,this.#At({hasSelectedText:!1}))}#St(t=""){this.#st===x.HIGHLIGHT?this.highlightSelection(t):this.#G&&this.#wt()}#mt(){document.addEventListener("selectionchange",this.#kt.bind(this),{signal:this._signal})}#Ct(){if(this.#U)return;this.#U=new AbortController;const t=this.combinedSignal(this.#U);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#_t(){this.#U?.abort(),this.#U=null}blur(){if(this.isShiftKeyDown=!1,this.#K&&(this.#K=!1,this.#St("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#at)if(e.div.contains(t)){this.#it=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#it)return;const[t,e]=this.#it;this.#it=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),e.focus()}#xt(){if(this.#et)return;this.#et=new AbortController;const t=this.combinedSignal(this.#et);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#Mt(){this.#et?.abort(),this.#et=null}#Tt(){if(this.#D)return;this.#D=new AbortController;const t=this.combinedSignal(this.#D);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Et(){this.#D?.abort(),this.#D=null}#bt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#xt(),this.#Tt()}removeEditListeners(){this.#Mt(),this.#Et()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#q)if(i.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#q)if(i.isHandlingMimeForPasting(e.type))return i.paste(e,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#E?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const t of this.#at){const i=t.serialize(!0);i&&e.push(i)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const t of e.items)for(const e of this.#q)if(e.isHandlingMimeForPasting(t.type))return void e.paste(t,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(t){return void rt(t.message)}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const t=[];for(const e of i){const i=await n.deserialize(e);if(!i)return;t.push(i)}const e=()=>{for(const e of t)this.#Nt(e);this.#Pt(t)},r=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:r,mustExec:!0})}catch(t){rt(t.message)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),this.#st===x.NONE||this.isEditorHandlingKeyboard||ee._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#K&&(this.#K=!1,this.#St("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#At(t){Object.entries(t).some((([t,e])=>this.#ct[t]!==e))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#ct,t)}),this.#st===x.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#Lt([[v.HIGHLIGHT_FREE,!0]]))}#Lt(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#Ct(),this.#Tt(),this.#At({isEditing:this.#st!==x.NONE,isEmpty:this.#It(),hasSomethingToUndo:this.#O.hasSomethingToUndo(),hasSomethingToRedo:this.#O.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#_t(),this.#Et(),this.#At({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#q){this.#q=t;for(const t of this.#q)this.#Lt(t.defaultPropertiesToUpdate)}}getId(){return this.#J.id}get currentLayer(){return this.#P.get(this.#F)}getLayer(t){return this.#P.get(t)}get currentPageIndex(){return this.#F}addLayer(t){this.#P.set(t.pageIndex,t),this.#Q?t.enable():t.disable()}removeLayer(t){this.#P.delete(t.pageIndex)}async updateMode(t,e=null,i=!1){if(this.#st!==t&&(!this.#gt||(await this.#gt.promise,this.#gt))){if(this.#gt=Promise.withResolvers(),this.#st=t,t===x.NONE)return this.setEditingState(!1),this.#Rt(),this._editorUndoBar?.hide(),void this.#gt.resolve();this.setEditingState(!0),await this.#Ot(),this.unselectAll();for(const e of this.#P.values())e.updateMode(t);if(!e)return i&&this.addNewEditorFromKeyboard(),void this.#gt.resolve();for(const t of this.#N.values())t.annotationElementId===e?(this.setSelected(t),t.enterInEditMode()):t.unselect();this.#gt.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#st&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#q){switch(t){case v.CREATE:return void this.currentLayer.addNewEditor();case v.HIGHLIGHT_DEFAULT_COLOR:this.#nt?.updateColor(e);break;case v.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#ht||=new Map).set(t,e),this.showAllEditors("highlight",e)}for(const i of this.#at)i.updateParams(t,e);for(const i of this.#q)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const i of this.#N.values())i.editorType===t&&i.show(e);(this.#ht?.get(v.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#Lt([[v.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#tt!==t){this.#tt=t;for(const e of this.#P.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#Ot(){if(!this.#Q){this.#Q=!0;const t=[];for(const e of this.#P.values())t.push(e.enable());await Promise.all(t);for(const t of this.#N.values())t.enable()}}#Rt(){if(this.unselectAll(),this.#Q){this.#Q=!1;for(const t of this.#P.values())t.disable();for(const t of this.#N.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#N.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#N.get(t)}addEditor(t){this.#N.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#Y&&clearTimeout(this.#Y),this.#Y=setTimeout((()=>{this.focusMainContainer(),this.#Y=null}),0)),this.#N.delete(t.id),this.unselect(t),t.annotationElementId&&this.#B.has(t.annotationElementId)||this.#I?.remove(t.id)}addDeletedAnnotationElement(t){this.#B.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#B.has(t)}removeDeletedAnnotationElement(t){this.#B.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Nt(t){const e=this.#P.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#E!==t&&(this.#E=t,t&&this.#Lt(t.propertiesToUpdate))}get#Dt(){let t=null;for(t of this.#at);return t}updateUI(t){this.#Dt===t&&this.#Lt(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#Lt(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#at.has(t))return this.#at.delete(t),t.unselect(),void this.#At({hasSelectedEditor:this.hasSelection});this.#at.add(t),t.select(),this.#Lt(t.propertiesToUpdate),this.#At({hasSelectedEditor:!0})}setSelected(t){this.#z?.commitOrRemove();for(const e of this.#at)e!==t&&e.unselect();this.#at.clear(),this.#at.add(t),t.select(),this.#Lt(t.propertiesToUpdate),this.#At({hasSelectedEditor:!0})}isSelected(t){return this.#at.has(t)}get firstSelectedEditor(){return this.#at.values().next().value}unselect(t){t.unselect(),this.#at.delete(t),this.#At({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#at.size}get isEnterHandled(){return 1===this.#at.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#O.undo(),this.#At({hasSomethingToUndo:this.#O.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#It()}),this._editorUndoBar?.hide()}redo(){this.#O.redo(),this.#At({hasSomethingToUndo:!0,hasSomethingToRedo:this.#O.hasSomethingToRedo(),isEmpty:this.#It()})}addCommands(t){this.#O.add(t),this.#At({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#It()})}cleanUndoStack(t){this.#O.cleanType(t)}#It(){if(0===this.#N.size)return!0;if(1===this.#N.size)for(const t of this.#N.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#at],i=()=>{for(const t of e)this.#Nt(t)};this.addCommands({cmd:()=>{this._editorUndoBar?.show(i,1===e.length?e[0].editorType:e.length);for(const t of e)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){this.#E?.commitOrRemove()}hasSomethingToControl(){return this.#E||this.hasSelection}#Pt(t){for(const t of this.#at)t.unselect();this.#at.clear();for(const e of t)e.isEmpty()||(this.#at.add(e),e.select());this.#At({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#at)t.commit();this.#Pt(this.#N.values())}unselectAll(){if((!this.#E||(this.#E.commitOrRemove(),this.#st===x.NONE))&&!this.#z?.commitOrRemove()&&this.hasSelection){for(const t of this.#at)t.unselect();this.#at.clear(),this.#At({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#dt[0]+=t,this.#dt[1]+=e;const[n,r]=this.#dt,s=[...this.#at];this.#ut&&clearTimeout(this.#ut),this.#ut=setTimeout((()=>{this.#ut=null,this.#dt[0]=this.#dt[1]=0,this.addCommands({cmd:()=>{for(const t of s)this.#N.has(t.id)&&t.translateInPage(n,r)},undo:()=>{for(const t of s)this.#N.has(t.id)&&t.translateInPage(-n,-r)},mustExec:!1})}),1e3);for(const i of s)i.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#H=new Map;for(const t of this.#at)this.#H.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#H)return!1;this.disableUserSelect(!1);const t=this.#H;this.#H=null;let e=!1;for(const[{x:i,y:n,pageIndex:r},s]of t)s.newX=i,s.newY=n,s.newPageIndex=r,e||=i!==s.savedX||n!==s.savedY||r!==s.savedPageIndex;if(!e)return!1;const i=(t,e,i,n)=>{if(this.#N.has(t.id)){const r=this.#P.get(n);r?t._setParentAndPosition(r,e,i):(t.pageIndex=n,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:n,newY:r,newPageIndex:s}]of t)i(e,n,r,s)},undo:()=>{for(const[e,{savedX:n,savedY:r,savedPageIndex:s}]of t)i(e,n,r,s)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#H)for(const i of this.#H.keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#at.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#E===t}getActive(){return this.#E}getMode(){return this.#st}get imageManager(){return lt(this,"imageManager",new Zt)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let i=0,n=e.rangeCount;i<n;i++)if(!t.contains(e.getRangeAt(i).commonAncestorContainer))return null;const{x:i,y:n,width:r,height:s}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-n)/s,y:1-(t+a-i)/r,width:o/s,height:a/r});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/r,y:1-(e+o-n)/s,width:a/r,height:o/s});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-n)/s,y:(t-i)/r,width:o/s,height:a/r});break;default:a=(t,e,a,o)=>({x:(t-i)/r,y:(e-n)/s,width:a/r,height:o/s})}const o=[];for(let t=0,i=e.rangeCount;t<i;t++){const i=e.getRangeAt(t);if(!i.collapsed)for(const{x:t,y:e,width:n,height:r}of i.getClientRects())0!==n&&0!==r&&o.push(a(t,e,n,r))}return 0===o.length?null:o}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#R||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#R?.delete(t)}renderAnnotationElement(t){const e=this.#R?.get(t.data.id);if(!e)return;const i=this.#I.getRawValue(e);i&&(this.#st!==x.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}class ie{#o=null;#zt=!1;#Ft=null;#Bt=null;#Ht=null;#qt=null;#jt=!1;#Gt=null;#s=null;#Xt=null;#Vt=null;#Wt=!1;static#Yt=null;static _l10n=null;constructor(t){this.#s=t,this.#Wt=t._uiManager.useNewAltTextFlow,ie.#Yt||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ie._l10n??=t}async render(){const t=this.#Ft=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#Bt=document.createElement("span");t.append(e),this.#Wt?(t.classList.add("new"),t.setAttribute("data-l10n-id",ie.#Yt.missing),e.setAttribute("data-l10n-id",ie.#Yt["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#s._uiManager._signal;t.addEventListener("contextmenu",Ft,{signal:i}),t.addEventListener("pointerdown",(t=>t.stopPropagation()),{signal:i});const n=t=>{t.preventDefault(),this.#s._uiManager.editAltText(this.#s),this.#Wt&&this.#s._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#Ut}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#jt=!0,n(e))}),{signal:i}),await this.#$t(),t}get#Ut(){return(this.#o?"added":null===this.#o&&this.guessedText&&"review")||"missing"}finish(){this.#Ft&&(this.#Ft.focus({focusVisible:this.#jt}),this.#jt=!1)}isEmpty(){return this.#Wt?null===this.#o:!this.#o&&!this.#zt}hasData(){return this.#Wt?null!==this.#o||!!this.#Xt:this.isEmpty()}get guessedText(){return this.#Xt}async setGuessedText(t){null===this.#o&&(this.#Xt=t,this.#Vt=await ie._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#$t())}toggleAltTextBadge(t=!1){if(!this.#Wt||this.#o)return this.#Gt?.remove(),void(this.#Gt=null);if(!this.#Gt){const t=this.#Gt=document.createElement("div");t.className="noAltTextBadge",this.#s.div.append(t)}this.#Gt.classList.toggle("hidden",!t)}serialize(t){let e=this.#o;return t||this.#Xt!==e||(e=this.#Vt),{altText:e,decorative:this.#zt,guessedText:this.#Xt,textWithDisclaimer:this.#Vt}}get data(){return{altText:this.#o,decorative:this.#zt}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:r=!1}){i&&(this.#Xt=i,this.#Vt=n),this.#o===t&&this.#zt===e||(r||(this.#o=t,this.#zt=e),this.#$t())}toggle(t=!1){this.#Ft&&(!t&&this.#qt&&(clearTimeout(this.#qt),this.#qt=null),this.#Ft.disabled=!t)}shown(){this.#s._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#Ut}})}destroy(){this.#Ft?.remove(),this.#Ft=null,this.#Bt=null,this.#Ht=null,this.#Gt?.remove(),this.#Gt=null}async#$t(){const t=this.#Ft;if(!t)return;if(this.#Wt){if(t.classList.toggle("done",!!this.#o),t.setAttribute("data-l10n-id",ie.#Yt[this.#Ut]),this.#Bt?.setAttribute("data-l10n-id",ie.#Yt[`${this.#Ut}-label`]),!this.#o)return void this.#Ht?.remove()}else{if(!this.#o&&!this.#zt)return t.classList.remove("done"),void this.#Ht?.remove();t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#Ht;if(!e){this.#Ht=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#s.id}`;const i=100,n=this.#s._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(this.#qt),this.#qt=null}),{once:!0}),t.addEventListener("mouseenter",(()=>{this.#qt=setTimeout((()=>{this.#qt=null,this.#Ht.classList.add("show"),this.#s._reportTelemetry({action:"alt_text_tooltip"})}),i)}),{signal:n}),t.addEventListener("mouseleave",(()=>{this.#qt&&(clearTimeout(this.#qt),this.#qt=null),this.#Ht?.classList.remove("show")}),{signal:n})}this.#zt?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#o),e.parentNode||t.append(e);const i=this.#s.getImageForAltText();i?.setAttribute("aria-describedby",e.id)}}class ne{#pt;#Kt=!1;#Zt=null;#Jt;#Qt;#te;#ee;#ie;#ne=null;#re;#se=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:s=null,signal:a}){this.#pt=t,this.#Zt=i,this.#Jt=e,this.#Qt=n,this.#te=r,this.#ee=s,this.#re=new AbortController,this.#ie=AbortSignal.any([a,this.#re.signal]),t.addEventListener("touchstart",this.#ae.bind(this),{passive:!1,signal:this.#ie})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return lt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#ae(t){if(this.#Jt?.()||t.touches.length<2)return;if(!this.#se){this.#se=new AbortController;const t=AbortSignal.any([this.#ie,this.#se.signal]),e=this.#pt,i={signal:t,passive:!1};e.addEventListener("touchmove",this.#oe.bind(this),i),e.addEventListener("touchend",this.#le.bind(this),i),e.addEventListener("touchcancel",this.#le.bind(this),i),this.#Qt?.()}if(Bt(t),2!==t.touches.length||this.#Zt?.())return void(this.#ne=null);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#ne={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#oe(t){if(!this.#ne||2!==t.touches.length)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:n,screenY:r}=e,{screenX:s,screenY:a}=i,o=this.#ne,{touch0X:l,touch0Y:h,touch1X:c,touch1Y:d}=o,u=c-l,p=d-h,f=s-n,g=a-r,m=Math.hypot(f,g)||1,b=Math.hypot(u,p)||1;if(!this.#Kt&&Math.abs(b-m)<=ne.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=n,o.touch0Y=r,o.touch1X=s,o.touch1Y=a,t.preventDefault(),!this.#Kt)return void(this.#Kt=!0);const x=[(n+s)/2,(r+a)/2];this.#te?.(x,b,m)}#le(t){this.#se.abort(),this.#se=null,this.#ee?.(),this.#ne&&(t.preventDefault(),this.#ne=null,this.#Kt=!1)}destroy(){this.#re?.abort(),this.#re=null}}class re{#he=null;#ce=null;#o=null;#de=!1;#ue=null;#pe="";#fe=!1;#ge=null;#me=null;#be=null;#xe=null;#ve="";#ye=!1;#we=null;#ke=!1;#Ae=!1;#Se=!1;#Ce=null;#_e=0;#Me=0;#Te=null;#Ee=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#Ne=!1;#Pe=re._zIndex++;static _borderLineWidth=-1;static _colorManager=new te;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=re.prototype._resizeWithKeyboard,e=ee.TRANSLATE_SMALL,i=ee.TRANSLATE_BIG;return lt(this,"_resizerKeyboardManager",new Qt([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],re.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,s];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return lt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new se({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(re._l10n??=t,re._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==re._borderLineWidth)return;const i=getComputedStyle(document.documentElement);re._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){st("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#Ne}set _isDraggable(t){this.#Ne=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#Pe}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#Le(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#ye?this.#ye=!1:this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[r,s]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/r,this.y=(e+n)/s,this.fixAndSetPosition()}#Ie([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#Ie(this.parentDimensions,t,e)}translateInPage(t,e){this.#we||=[this.x,this.y,this.width,this.height],this.#Ie(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#we||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:h}=i;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#we&&(this.#we[0]!==this.x||this.#we[1]!==this.y)}get _hasBeenResized(){return!!this.#we&&(this.#we[2]!==this.width||this.#we[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=re,n=i/t,r=i/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,n]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=i,o*=n,r*=i,s*=n,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(i-a,r)),s=Math.max(0,Math.min(n-o,s));break;case 90:r=Math.max(0,Math.min(i-o,r)),s=Math.min(n,Math.max(a,s));break;case 180:r=Math.min(i,Math.max(a,r)),s=Math.min(n,Math.max(o,s));break;case 270:r=Math.min(i,Math.max(o,r)),s=Math.max(0,Math.min(n-a,s))}this.x=r/=i,this.y=s/=n;const[l,h]=this.getBaseTranslation();r+=l,s+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#Re(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return re.#Re(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return re.#Re(t,e,360-this.parentRotation)}#Oe(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/i).toFixed(2)}%`,this.#fe||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),r=!this.#fe&&e.endsWith("%");if(n&&r)return;const[s,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/s).toFixed(2)}%`),this.#fe||r||(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#De(){if(this.#ge)return;this.#ge=document.createElement("div"),this.#ge.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const t=document.createElement("div");this.#ge.append(t),t.classList.add("resizer",i),t.setAttribute("data-resizer-name",i),t.addEventListener("pointerdown",this.#ze.bind(this,i),{signal:e}),t.addEventListener("contextmenu",Ft,{signal:e}),t.tabIndex=-1}this.div.prepend(this.#ge)}#ze(t,e){e.preventDefault();const{isMac:i}=yt.platform;if(0!==e.button||e.ctrlKey&&i)return;this.#o?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,this.#me=[e.screenX,e.screenY];const r=new AbortController,s=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#Fe.bind(this,t),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Bt,{passive:!1,signal:s}),window.addEventListener("contextmenu",Ft,{signal:s}),this.#be={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const l=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#o?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=a,this.div.style.cursor=o,this.#Be()};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}#He(t,e,i,n){this.width=i,this.height=n,this.x=t,this.y=e;const[r,s]=this.parentDimensions;this.setDims(r*i,s*n),this.fixAndSetPosition(),this._onResized()}_onResized(){}#Be(){if(!this.#be)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#be;this.#be=null;const r=this.x,s=this.y,a=this.width,o=this.height;r===t&&s===e&&a===i&&o===n||this.addCommands({cmd:this.#He.bind(this,r,s,a,o),undo:this.#He.bind(this,t,e,i,n),mustExec:!0})}static _round(t){return Math.round(1e4*t)/1e4}#Fe(t,e){const[i,n]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=re.MIN_SIZE/i,h=re.MIN_SIZE/n,c=this.#Oe(this.rotation),d=(t,e)=>[c[0]*t+c[2]*e,c[1]*t+c[3]*e],u=this.#Oe(360-this.rotation);let p,f,g=!1,m=!1;switch(t){case"topLeft":g=!0,p=(t,e)=>[0,0],f=(t,e)=>[t,e];break;case"topMiddle":p=(t,e)=>[t/2,0],f=(t,e)=>[t/2,e];break;case"topRight":g=!0,p=(t,e)=>[t,0],f=(t,e)=>[0,e];break;case"middleRight":m=!0,p=(t,e)=>[t,e/2],f=(t,e)=>[0,e/2];break;case"bottomRight":g=!0,p=(t,e)=>[t,e],f=(t,e)=>[0,0];break;case"bottomMiddle":p=(t,e)=>[t/2,e],f=(t,e)=>[t/2,0];break;case"bottomLeft":g=!0,p=(t,e)=>[0,e],f=(t,e)=>[t,0];break;case"middleLeft":m=!0,p=(t,e)=>[0,e/2],f=(t,e)=>[t,e/2]}const b=p(a,o),x=f(a,o);let v=d(...x);const y=re._round(r+v[0]),w=re._round(s+v[1]);let k,A,S=1,C=1;if(e.fromKeyboard)({deltaX:k,deltaY:A}=e);else{const{screenX:t,screenY:i}=e,[n,r]=this.#me;[k,A]=this.screenToPageTranslation(t-n,i-r),this.#me[0]=t,this.#me[1]=i}var _,M;if([k,A]=(_=k/i,M=A/n,[u[0]*_+u[2]*M,u[1]*_+u[3]*M]),g){const t=Math.hypot(a,o);S=C=Math.max(Math.min(Math.hypot(x[0]-b[0]-k,x[1]-b[1]-A)/t,1/a,1/o),l/a,h/o)}else m?S=Math.max(l,Math.min(1,Math.abs(x[0]-b[0]-k)))/a:C=Math.max(h,Math.min(1,Math.abs(x[1]-b[1]-A)))/o;const T=re._round(a*S),E=re._round(o*C);v=d(...f(T,E));const N=y-v[0],P=w-v[1];this.#we||=[this.x,this.y,this.width,this.height],this.width=T,this.height=E,this.x=N,this.y=P,this.setDims(i*T,n*E),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#o?.finish()}async addEditToolbar(){return this._editToolbar||this.#Ae||(this._editToolbar=new Yt(this),this.div.append(this._editToolbar.render()),this.#o&&await this._editToolbar.addAltText(this.#o)),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#o?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#o||(ie.initialize(re._l10n),this.#o=new ie(this),this.#he&&(this.#o.data=this.#he,this.#he=null),await this.addEditToolbar())}get altTextData(){return this.#o?.data}set altTextData(t){this.#o&&(this.#o.data=t)}get guessedAltText(){return this.#o?.guessedText}async setGuessedAltText(t){await(this.#o?.setGuessedText(t))}serializeAltText(t){return this.#o?.serialize(t)}hasAltText(){return!!this.#o&&!this.#o.isEmpty()}hasAltTextData(){return this.#o?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#de?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#qe();const[t,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),$t(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#Ee||=new ne({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#je.bind(this),onPinching:this.#Ge.bind(this),onPinchEnd:this.#Xe.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#je(){this.#be={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#o?.toggle(!1),this.parent.togglePointerEvents(!1)}#Ge(t,e,i){let n=i/e*.7+1-.7;if(1===n)return;const r=this.#Oe(this.rotation),s=(t,e)=>[r[0]*t+r[2]*e,r[1]*t+r[3]*e],[a,o]=this.parentDimensions,l=this.x,h=this.y,c=this.width,d=this.height,u=re.MIN_SIZE/a,p=re.MIN_SIZE/o;n=Math.max(Math.min(n,1/c,1/d),u/c,p/d);const f=re._round(c*n),g=re._round(d*n);if(f===c&&g===d)return;this.#we||=[l,h,c,d];const m=s(c/2,d/2),b=re._round(l+m[0]),x=re._round(h+m[1]),v=s(f/2,g/2);this.x=b-v[0],this.y=x-v[1],this.width=f,this.height=g,this.setDims(a*f,o*g),this.fixAndSetPosition(),this._onResizing()}#Xe(){this.#o?.toggle(!0),this.parent.togglePointerEvents(!0),this.#Be()}pointerdown(t){const{isMac:e}=yt.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#ye=!0,this._isDraggable?this.#Ve(t):this.#We(t))}get isSelected(){return this._uiManager.isSelected(this)}#We(t){const{isMac:e}=yt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#Ve(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),s={capture:!0,passive:!1,signal:r},a=t=>{n.abort(),this.#ue=null,this.#ye=!1,this._uiManager.endDragSession()||this.#We(t),i&&this._onStopDragging()};e&&(this.#_e=t.clientX,this.#Me=t.clientY,this.#ue=t.pointerId,this.#pe=t.pointerType,window.addEventListener("pointermove",(t=>{i||(i=!0,this._onStartDragging());const{clientX:e,clientY:n,pointerId:r}=t;if(r!==this.#ue)return void Bt(t);const[s,a]=this.screenToPageTranslation(e-this.#_e,n-this.#Me);this.#_e=e,this.#Me=n,this._uiManager.dragSelectedEditors(s,a)}),s),window.addEventListener("touchmove",Bt,s),window.addEventListener("pointerdown",(t=>{t.pointerType===this.#pe&&(this.#Ee||t.isPrimary)&&a(t),Bt(t)}),s));const o=t=>{this.#ue&&this.#ue!==t.pointerId?Bt(t):a(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#Ce&&clearTimeout(this.#Ce),this.#Ce=setTimeout((()=>{this.#Ce=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const n=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/n,h=e/n,c=this.x*r,d=this.y*s,u=this.width*r,p=this.height*s;switch(i){case 0:return[c+l+a,s-d-h-p+o,c+l+u+a,s-d-h+o];case 90:return[c+h+a,s-d+l+o,c+h+p+a,s-d+l+u+o];case 180:return[c-l-u+a,s-d+h+o,c-l+a,s-d+h+p+o];case 270:return[c-h-p+a,s-d-l-u+o,c-h+a,s-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,r,s]=t,a=r-i,o=s-n;switch(this.rotation){case 0:return[i,e-s,a,o];case 90:return[i,e-n,o,a];case 180:return[r,e-n,a,o];case 270:return[r,e-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){this.#Ae=!0}disableEditMode(){this.#Ae=!1}isInEditMode(){return this.#Ae}shouldGetKeyboardEvents(){return this.#Se}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return e<s&&n>0&&t<r&&i>0}#qe(){if(this.#xe||!this.div)return;this.#xe=new AbortController;const t=this._uiManager.combinedSignal(this.#xe);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#qe()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){st("An editor must be serializable")}static async deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,n.#he=t.accessibilityData;const[r,s]=n.pageDimensions,[a,o,l,h]=n.getRectInCurrentCoords(t.rect,s);return n.x=a/r,n.y=o/s,n.width=l/r,n.height=h/s,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#xe?.abort(),this.#xe=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#Ce&&(clearTimeout(this.#Ce),this.#Ce=null),this.#Le(),this.removeEditToolbar(),this.#Te){for(const t of this.#Te.values())clearTimeout(t);this.#Te=null}this.parent=null,this.#Ee?.destroy(),this.#Ee=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#De(),this.#ge.classList.remove("hidden"),$t(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),this.#be={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#ge.children;if(!this.#ce){this.#ce=Array.from(e);const t=this.#Ye.bind(this),i=this.#Ue.bind(this),n=this._uiManager._signal;for(const e of this.#ce){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:n}),e.addEventListener("blur",i,{signal:n}),e.addEventListener("focus",this.#$e.bind(this,r),{signal:n}),e.setAttribute("data-l10n-id",re._l10nResizer[r])}}const i=this.#ce[0];let n=0;for(const t of e){if(t===i)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#ce.length/4);if(r!==n){if(r<n)for(let t=0;t<n-r;t++)this.#ge.append(this.#ge.firstChild);else if(r>n)for(let t=0;t<r-n;t++)this.#ge.firstChild.before(this.#ge.lastChild);let t=0;for(const i of e){const e=this.#ce[t++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",re._l10nResizer[e])}}this.#Ke(0),this.#Se=!0,this.#ge.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Ye(t){re._resizerKeyboardManager.exec(this,t)}#Ue(t){this.#Se&&t.relatedTarget?.parentNode!==this.#ge&&this.#Le()}#$e(t){this.#ve=this.#Se?t:""}#Ke(t){if(this.#ce)for(const e of this.#ce)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#Se&&this.#Fe(this.#ve,{deltaX:t,deltaY:e,fromKeyboard:!0})}#Le(){this.#Se=!1,this.#Ke(-1),this.#Be()}_stopResizingWithKeyboard(){this.#Le(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#o?.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()}))}unselect(){this.#ge?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#o?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#ke}set isEditing(t){this.#ke=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#fe=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#Te||=new Map;const{action:e}=t;let i=this.#Te.get(e);return i&&clearTimeout(i),i=setTimeout((()=>{this._reportTelemetry(t),this.#Te.delete(e),0===this.#Te.size&&(this.#Te=null)}),re._telemetryTimeout),void this.#Te.set(e,i)}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#de=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#de=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e?.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class se extends re{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ae=3285377520,oe=4294901760,le=65535;class he{constructor(t){this.h1=t?4294967295&t:ae,this.h2=t?4294967295&t:ae}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,r=t.length;n<r;n++){const r=t.charCodeAt(n);r<=255?e[i++]=r:(e[i++]=r>>>8,e[i++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const n=i>>2,r=i-4*n,s=new Uint32Array(e.buffer,0,n);let a=0,o=0,l=this.h1,h=this.h2;const c=3432918353,d=461845907,u=11601,p=13715;for(let t=0;t<n;t++)1&t?(a=s[t],a=a*c&oe|a*u&le,a=a<<15|a>>>17,a=a*d&oe|a*p&le,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[t],o=o*c&oe|o*u&le,o=o<<15|o>>>17,o=o*d&oe|o*p&le,h^=o,h=h<<13|h>>>19,h=5*h+3864292196);switch(a=0,r){case 3:a^=e[4*n+2]<<16;case 2:a^=e[4*n+1]<<8;case 1:a^=e[4*n],a=a*c&oe|a*u&le,a=a<<15|a>>>17,a=a*d&oe|a*p&le,1&n?l^=a:h^=a}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&oe|36045*t&le,e=4283543511*e&oe|(2950163797*(e<<16|t>>>16)&oe)>>>16,t^=e>>>1,t=444984403*t&oe|60499*t&le,e=3301882366*e&oe|(3120437893*(e<<16|t>>>16)&oe)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ce=Object.freeze({map:null,hash:"",transfer:void 0});class de{#Ze=!1;#Je=null;#Qe=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#Qe.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this.#Qe.get(t)}remove(t){if(this.#Qe.delete(t),0===this.#Qe.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#Qe.values())if(t instanceof re)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#Qe.get(t);let n=!1;if(void 0!==i)for(const[t,r]of Object.entries(e))i[t]!==r&&(n=!0,i[t]=r);else n=!0,this.#Qe.set(t,e);n&&this.#ti(),e instanceof re&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#Qe.has(t)}getAll(){return this.#Qe.size>0?vt(this.#Qe):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#Qe.size}#ti(){this.#Ze||(this.#Ze=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#Ze&&(this.#Ze=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new ue(this)}get serializable(){if(0===this.#Qe.size)return ce;const t=new Map,e=new he,i=[],n=Object.create(null);let r=!1;for(const[i,s]of this.#Qe){const a=s instanceof re?s.serialize(!1,n):s;a&&(t.set(i,a),e.update(`${i}:${JSON.stringify(a)}`),r||=!!a.bitmap)}if(r)for(const e of t.values())e.bitmap&&i.push(e.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:ce}get editorStats(){let t=null;const e=new Map;for(const i of this.#Qe.values()){if(!(i instanceof re))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const s=t[r]||=new Map;for(const[t,e]of Object.entries(n)){if("type"===t)continue;let i=s.get(t);i||(i=new Map,s.set(t,i));const n=i.get(e)??0;i.set(e,n+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#Je=null}get modifiedIds(){if(this.#Je)return this.#Je;const t=[];for(const e of this.#Qe.values())e instanceof re&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return this.#Je={ids:new Set(t),hash:t.join(",")}}}class ue extends de{#ei;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,r=structuredClone(e,n?{transfer:n}:null);this.#ei={map:r,hash:i,transfer:n}}get print(){st("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#ei}get modifiedIds(){return lt(this,"modifiedIds",{ids:new Set,hash:""})}}class pe{#ii=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#ii.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(t&&!this.#ii.has(t.loadedName))if(at(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:r}=t,s=new FontFace(i,n,r);this.addNativeFontFace(s);try{await s.load(),this.#ii.add(i),e?.(t)}catch{rt(t.baseFontName),this.removeNativeFontFace(s)}}else st("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw rt(e.family),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){return lt(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let t=!1;return(s||"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),lt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(at(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return lt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function n(t,e,i,n){return t.substring(0,e)+n+t.substring(e+i)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=n(c,976,h.length,h);const d=1482184792;let u=i(c,16);for(r=0,s=h.length-3;r<s;r+=4)u=u-d+i(h,r)|0;var p;r<h.length&&(u=u-d+i(h+"XXX",r)|0),c=n(c,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${h}";src:${`url(data:font/opentype;base64,${btoa(c)});`}}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const e of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=e,g.append(t)}this._document.body.append(g),function t(e,i){if(++l>30)return rt(),void i();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(h,(()=>{g.remove(),e.complete()}))}}class fe{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.disableFontFace=!0===e,this.fontExtraProperties=!0===i,this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${e=this.data,Uint8Array.prototype.toBase64?e.toBase64():btoa(bt(e))});`;var e;let i;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let n;try{n=t.get(i)}catch(t){rt()}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}}const ge=1,me=2,be=1,xe=2,ve=3,ye=4,we=5,ke=6,Ae=7,Se=8;function Ce(){}function _e(t){if(t instanceof mt||t instanceof ut||t instanceof pt||t instanceof ct||t instanceof ft||t instanceof dt)return t;switch(t instanceof Error||"object"==typeof t&&null!==t||st('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new mt(t.message);case"InvalidPDFException":return new ut(t.message);case"MissingPDFException":return new pt(t.message);case"PasswordException":return new ct(t.message,t.code);case"UnexpectedResponseException":return new ft(t.message,t.status);case"UnknownErrorException":return new dt(t.message,t.details)}return new dt(t.message,t.toString())}class Me{#ni=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#ri.bind(this),{signal:this.#ni.signal})}#ri({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream)return void this.#si(t);if(t.callback){const e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],t.callback===ge)i.resolve(t.data);else{if(t.callback!==me)throw new Error("Unexpected callback case");i.reject(_e(t.reason))}return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then((function(e){r.postMessage({sourceName:i,targetName:n,callback:ge,callbackId:t.callbackId,data:e})}),(function(e){r.postMessage({sourceName:i,targetName:n,callback:me,callbackId:t.callbackId,reason:_e(e)})}))}else t.streamId?this.#ai(t):e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(t){r.reject(t)}return r.promise}sendWithStream(t,e,i,n){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:t,streamId:r,data:e,desiredSize:i.desiredSize},n),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[r].pullCall=e,o.postMessage({sourceName:s,targetName:a,stream:ke,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:t=>{at(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[r].cancelCall=e,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:be,streamId:r,reason:_e(t)}),e.promise}},i)}#ai(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,s=this,a=this.actionHandler[t.action],o={enqueue(t,s=1,a){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:ye,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:ve,streamId:e}),delete s.streamSinks[e])},error(t){at(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:we,streamId:e,reason:_e(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(a,t.data,o).then((function(){r.postMessage({sourceName:i,targetName:n,stream:Se,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:i,targetName:n,stream:Se,streamId:e,reason:_e(t)})}))}#si(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,s=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Se:t.success?s.startCall.resolve():s.startCall.reject(_e(t.reason));break;case Ae:t.success?s.pullCall.resolve():s.pullCall.reject(_e(t.reason));break;case ke:if(!a){r.postMessage({sourceName:i,targetName:n,stream:Ae,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||Ce).then((function(){r.postMessage({sourceName:i,targetName:n,stream:Ae,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:i,targetName:n,stream:Ae,streamId:e,reason:_e(t)})}));break;case ye:if(at(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case ve:if(at(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#oi(s,e);break;case we:at(s,"error should have stream controller"),s.controller.error(_e(t.reason)),this.#oi(s,e);break;case xe:t.success?s.cancelCall.resolve():s.cancelCall.reject(_e(t.reason)),this.#oi(s,e);break;case be:if(!a)break;const o=_e(t.reason);Promise.try(a.onCancel||Ce,o).then((function(){r.postMessage({sourceName:i,targetName:n,stream:xe,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:i,targetName:n,stream:xe,streamId:e,reason:_e(t)})})),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#oi(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#ni?.abort(),this.#ni=null}}class Te{#li=!1;constructor({enableHWA:t=!1}){this.#li=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#li})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){st("Abstract method `_createCanvas` called.")}}class Ee{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then((t=>({cMapData:t,isCompressed:this.isCompressed}))).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}async _fetch(t){st("Abstract method `_fetch` called.")}}class Ne extends Ee{async _fetch(t){const e=await Et(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):xt(e)}}class Pe{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,r){return"none"}destroy(t=!1){}}class Le{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}async _fetch(t){st("Abstract method `_fetch` called.")}}class Ie extends Le{async _fetch(t){const e=await Et(t,"arraybuffer");return new Uint8Array(e)}}async function Re(t){const e=process.getBuiltinModule("fs"),i=await e.promises.readFile(t);return new Uint8Array(i)}s&&rt();const Oe="Fill",De="Stroke",ze="Shading";function Fe(t,e){if(!e)return;const i=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],i,n),t.clip(r)}class Be{getPattern(){st("Abstract method `getPattern` called.")}}class He extends Be{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,i,n){let r;if(n===De||n===Oe){const s=e.current.getClippedPathBoundingBox(n,Gt(t))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),i=kt.transform(i,[1,0,0,1,s[0],s[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Fe(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(i);r.setTransform(c)}else Fe(t,this._bbox),r=this._createGradient(t);return r}}function qe(t,e,i,n,r,s,a,o){const l=e.coords,h=e.colors,c=t.data,d=4*t.width;let u;l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=s,s=a,a=u),l[n+1]>l[r+1]&&(u=n,n=r,r=u,u=a,a=o,o=u),l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=s,s=a,a=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,b=(l[r]+e.offsetX)*e.scaleX,x=(l[r+1]+e.offsetY)*e.scaleY;if(f>=x)return;const v=h[s],y=h[s+1],w=h[s+2],k=h[a],A=h[a+1],S=h[a+2],C=h[o],_=h[o+1],M=h[o+2],T=Math.round(f),E=Math.round(x);let N,P,L,I,R,O,D,z;for(let t=T;t<=E;t++){if(t<m){const e=t<f?0:(f-t)/(f-m);N=p-(p-g)*e,P=v-(v-k)*e,L=y-(y-A)*e,I=w-(w-S)*e}else{let e;e=t>x?1:m===x?0:(m-t)/(m-x),N=g-(g-b)*e,P=k-(k-C)*e,L=A-(A-_)*e,I=S-(S-M)*e}let e;e=t<f?0:t>x?1:(f-t)/(f-x),R=p-(p-b)*e,O=v-(v-C)*e,D=y-(y-_)*e,z=w-(w-M)*e;const i=Math.round(Math.min(N,R)),n=Math.round(Math.max(N,R));let r=d*t+4*i;for(let t=i;t<=n;t++)e=(N-t)/(N-R),e<0?e=0:e>1&&(e=1),c[r++]=P-(P-O)*e|0,c[r++]=L-(L-D)*e|0,c[r++]=I-(I-z)*e|0,c[r++]=255}}function je(t,e,i){const n=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,h=o-1;for(s=0;s<l;s++){let e=s*o;for(let s=0;s<h;s++,e++)qe(t,i,n[e],n[e+1],n[e+o],r[e],r[e+1],r[e+o]),qe(t,i,n[e+o+1],n[e+1],n[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)qe(t,i,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Ge extends Be{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),h=s/o,c=a/l,d={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/h,scaleY:1/c},u=o+4,p=l+4,f=i.getCanvas("mesh",u,p),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let i=0,n=t.length;i<n;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const t of this._figures)je(m,t,d);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:n-2*h,offsetY:r-2*c,scaleX:h,scaleY:c}}getPattern(t,e,i,n){let r;if(Fe(t,this._bbox),n===ze)r=kt.singularValueDecompose2dScale(Gt(t));else if(r=kt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=kt.singularValueDecompose2dScale(this.matrix);r=[r[0]*t[0],r[1]*t[1]]}const s=this._createMeshCanvas(r,n===ze?null:this._background,e.cachedCanvases);return n!==ze&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}class Xe extends Be{getPattern(){return"hotpink"}}const Ve=1,We=2;class Ye{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:n,tilingType:r,color:s,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),nt();const h=e[0],c=e[1],d=e[2],u=e[3],p=d-h,f=u-c,g=kt.singularValueDecompose2dScale(this.matrix),m=kt.singularValueDecompose2dScale(this.baseTransform),b=g[0]*m[0],x=g[1]*m[1];let v=p,y=f,w=!1,k=!1;const A=Math.ceil(o*b),S=Math.ceil(l*x);A>=Math.ceil(p*b)?v=o:w=!0,S>=Math.ceil(f*x)?y=l:k=!0;const C=this.getSizeAndScale(v,this.ctx.canvas.width,b),_=this.getSizeAndScale(y,this.ctx.canvas.height,x),M=t.cachedCanvases.getCanvas("pattern",C.size,_.size),T=M.context,E=a.createCanvasGraphics(T);if(E.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(E,n,s),T.translate(-C.scale*h,-_.scale*c),E.transform(C.scale,0,0,_.scale,0,0),T.save(),this.clipBbox(E,h,c,d,u),E.baseTransform=Gt(E.ctx),E.executeOperatorList(i),E.endDrawing(),T.restore(),w||k){const e=M.canvas;w&&(v=o),k&&(y=l);const i=this.getSizeAndScale(v,this.ctx.canvas.width,b),n=this.getSizeAndScale(y,this.ctx.canvas.height,x),r=i.size,s=n.size,a=t.cachedCanvases.getCanvas("pattern-workaround",r,s),d=a.context,u=w?Math.floor(p/o):0,g=k?Math.floor(f/l):0;for(let t=0;t<=u;t++)for(let i=0;i<=g;i++)d.drawImage(e,r*t,s*i,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:i.scale,scaleY:n.scale,offsetX:h,offsetY:c}}return{canvas:M.canvas,scaleX:C.scale,scaleY:_.scale,offsetX:h,offsetY:c}}getSizeAndScale(t,e,i){const n=Math.max(Ye.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=n?r=n:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,n,r){const s=n-e,a=r-i;t.ctx.rect(e,i,s,a),t.current.updateRectMinMax(Gt(t.ctx),[e,i,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,r=t.current;switch(e){case Ve:const t=this.ctx;n.fillStyle=t.fillStyle,n.strokeStyle=t.strokeStyle,r.fillColor=t.fillStyle,r.strokeColor=t.strokeStyle;break;case We:const s=kt.makeHexColor(i[0],i[1],i[2]);n.fillStyle=s,n.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new gt(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let r=i;n!==ze&&(r=kt.transform(r,e.baseTransform),this.matrix&&(r=kt.transform(r,this.matrix)));const s=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const o=t.createPattern(s.canvas,"repeat");return o.setTransform(a),o}}function Ue({src:t,srcPos:e=0,dest:i,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=yt.isLittleEndian?4278190080:255,[l,h]=a?[s,o]:[o,s],c=n>>3,d=7&n,u=t.length;i=new Uint32Array(i.buffer);let p=0;for(let n=0;n<r;n++){for(const n=e+c;e<n;e++){const n=e<u?t[e]:255;i[p++]=128&n?h:l,i[p++]=64&n?h:l,i[p++]=32&n?h:l,i[p++]=16&n?h:l,i[p++]=8&n?h:l,i[p++]=4&n?h:l,i[p++]=2&n?h:l,i[p++]=1&n?h:l}if(0===d)continue;const n=e<u?t[e++]:255;for(let t=0;t<d;t++)i[p++]=n&1<<7-t?h:l}return{srcPos:e,destPos:p}}const $e=16;class Ke{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ze(t,e,i,n,r,s,a,o,l,h){const[c,d,u,p,f,g]=Gt(t);if(0===d&&0===u){const m=a*c+f,b=Math.round(m),x=o*p+g,v=Math.round(x),y=(a+l)*c+f,w=Math.abs(Math.round(y)-b)||1,k=(o+h)*p+g,A=Math.abs(Math.round(k)-v)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),b,v),t.drawImage(e,i,n,r,s,0,0,w,A),t.setTransform(c,d,u,p,f,g),[w,A]}if(0===c&&0===p){const m=o*u+f,b=Math.round(m),x=a*d+g,v=Math.round(x),y=(o+h)*u+f,w=Math.abs(Math.round(y)-b)||1,k=(a+l)*d+g,A=Math.abs(Math.round(k)-v)||1;return t.setTransform(0,Math.sign(d),Math.sign(u),0,b,v),t.drawImage(e,i,n,r,s,0,0,A,w),t.setTransform(c,d,u,p,f,g),[A,w]}t.drawImage(e,i,n,r,s,a,o,l,h);return[Math.hypot(c,d)*l,Math.hypot(u,p)*h]}class Je{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a,this.textMatrixScale=1,this.fontMatrix=o,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=w,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=kt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=kt.applyTransform(e,t),n=kt.applyTransform(e.slice(2),t),r=kt.applyTransform([e[0],e[3]],t),s=kt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],r[0],s[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],s[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],s[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],s[1])}updateScalingPathMinMax(t,e){kt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,r,s,a,o,l,h){const c=kt.bezierBoundingBox(e,i,n,r,s,a,o,l,h);h||this.updateRectMinMax(t,c)}getPathBoundingBox(t=Oe,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===De){e||st("Stroke bounding box must include transform.");const t=kt.singularValueDecompose2dScale(e),n=t[0]*this.lineWidth/2,r=t[1]*this.lineWidth/2;i[0]-=n,i[1]-=r,i[2]+=n,i[3]+=r}return i}updateClipFromPath(){const t=kt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Oe,e=null){return kt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Qe(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,n=e.width,r=i%$e,s=(i-r)/$e,a=0===r?s:s+1,o=t.createImageData(n,$e);let l,h=0;const c=e.data,d=o.data;let u,p,f,g;if(e.kind===M.GRAYSCALE_1BPP){const e=c.byteLength,i=new Uint32Array(d.buffer,0,d.byteLength>>2),g=i.length,m=n+7>>3,b=4294967295,x=yt.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<s?$e:r,l=0,p=0;p<f;p++){const t=e-h;let r=0;const s=t>m?n:8*t-7,a=-8&s;let o=0,d=0;for(;r<a;r+=8)d=c[h++],i[l++]=128&d?b:x,i[l++]=64&d?b:x,i[l++]=32&d?b:x,i[l++]=16&d?b:x,i[l++]=8&d?b:x,i[l++]=4&d?b:x,i[l++]=2&d?b:x,i[l++]=1&d?b:x;for(;r<s;r++)0===o&&(d=c[h++],o=128),i[l++]=d&o?b:x,o>>=1}for(;l<g;)i[l++]=0;t.putImageData(o,0,u*$e)}}else if(e.kind===M.RGBA_32BPP){for(p=0,g=n*$e*4,u=0;u<s;u++)d.set(c.subarray(h,h+g)),h+=g,t.putImageData(o,0,p),p+=$e;u<a&&(g=n*r*4,d.set(c.subarray(h,h+g)),t.putImageData(o,0,p))}else{if(e.kind!==M.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=$e,g=n*f,u=0;u<a;u++){for(u>=s&&(f=r,g=n*f),l=0,p=g;p--;)d[l++]=c[h++],d[l++]=c[h++],d[l++]=c[h++],d[l++]=255;t.putImageData(o,0,u*$e)}}}function ti(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,n=e.width,r=i%$e,s=(i-r)/$e,a=0===r?s:s+1,o=t.createImageData(n,$e);let l=0;const h=e.data,c=o.data;for(let e=0;e<a;e++){const i=e<s?$e:r;({srcPos:l}=Ue({src:h,srcPos:l,dest:c,width:n,height:i,nonBlackColor:0})),t.putImageData(o,0,e*$e)}}function ei(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)void 0!==t[n]&&(e[n]=t[n]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function ii(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!s){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function ni(t,e){if(e)return!0;const i=kt.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Tt.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}const ri=["butt","round","square"],si=["miter","round","bevel"],ai={},oi={};class li{constructor(t,e,i,n,r,{optionalContentConfig:s,markedContentStack:a=null},o,l){this.ctx=t,this.current=new Je(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new Ke(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const r=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,s),this.ctx.fillStyle=a,i){const t=this.cachedCanvases.getCanvas("transparent",r,s);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),ii(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(t,e,i,n){const r=t.argsArray,s=t.fnArray;let a=e||0;const o=r.length;if(o===a)return a;const l=o-a>10&&"function"==typeof i,h=l?Date.now()+15:0;let c=0;const d=this.commonObjs,u=this.objs;let p;for(;;){if(void 0!==n&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(p=s[a],p!==J.dependency)this[p].apply(this,r[a]);else for(const t of r[a]){const e=t.startsWith("g_")?d:u;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++c>10){if(Date.now()>h)return i(),a;c=0}}}#hi(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#hi(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#ci()}#ci(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,n=t.height??t.displayHeight;let r,s,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,h=n,c="prescale1";for(;a>2&&l>1||o>2&&h>1;){let e=l,i=h;a>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),o>2&&h>1&&(i=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/i),r=this.cachedCanvases.getCanvas(c,e,i),s=r.context,s.clearRect(0,0,e,i),s.drawImage(t,0,0,l,h,0,0,e,i),t=r.canvas,l=e,h=i,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,r=this.current.fillColor,s=this.current.patternFill,a=Gt(e);let o,l,h,c;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(s?a:[a.slice(0,4),r]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!s){return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}h=i}h||(c=this.cachedCanvases.getCanvas("maskCanvas",i,n),ti(c.context,t));let d=kt.transform(a,[1/i,0,0,-1/n,0,0]);d=kt.transform(d,[1,0,0,1,0,-n]);const[u,p,f,g]=kt.getAxialAlignedBoundingBox([0,0,i,n],d),m=Math.round(f-u)||1,b=Math.round(g-p)||1,x=this.cachedCanvases.getCanvas("fillCanvas",m,b),v=x.context,y=u,w=p;v.translate(-y,-w),v.transform(...d),h||(h=this._scaleImage(c.canvas,Xt(v)),h=h.img,o&&s&&o.set(l,h)),v.imageSmoothingEnabled=ni(Gt(v),t.interpolate),Ze(v,h,0,0,h.width,h.height,0,0,i,n),v.globalCompositeOperation="source-in";const k=kt.transform(Xt(v),[1,0,0,1,-y,-w]);return v.fillStyle=s?r.getPattern(e,this,k,Oe):r,v.fillRect(0,0,i,n),o&&!s&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,x.canvas)),{canvas:x.canvas,offsetX:Math.round(y),offsetY:Math.round(w)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ri[t]}setLineJoin(t){this.ctx.lineJoin=si[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...Gt(this.suspendedCtx)),ei(this.suspendedCtx,r),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,n,r,s,a){e.transform(t,i,n,r,s,a),this.__originalTransform(t,i,n,r,s,a)},t.setTransform=function(t,i,n,r,s,a){e.setTransform(t,i,n,r,s,a),this.__originalSetTransform(t,i,n,r,s,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,n,r,s,a){e.bezierCurveTo(t,i,n,r,s,a),this.__originalBezierCurveTo(t,i,n,r,s,a)},t.rect=function(t,i,n,r){e.rect(t,i,n,r),this.__originalRect(t,i,n,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ei(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const r=n[0],s=n[1],a=n[2]-r,o=n[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,r,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,r,s,a,o,l,h,c){let d=t.canvas,u=o-h,p=l-c;if(s){const e=kt.makeHexColor(...s);if(u<0||p<0||u+i>d.width||p+n>d.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,n),r=t.context;r.drawImage(d,-u,-p),r.globalCompositeOperation="destination-atop",r.fillStyle=e,r.fillRect(0,0,i,n),r.globalCompositeOperation="source-over",d=t.canvas,u=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const r=new Path2D;r.rect(u,p,i,n),t.clip(r),t.globalCompositeOperation="destination-atop",t.fillStyle=e,t.fillRect(u,p,i,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,i,n),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(d,u,p,i,n,o,l,i,n),e.restore()}save(){this.inSMaskMode?(ei(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ei(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,r,s){this.ctx.transform(t,e,i,n,r,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,r=this.current;let s,a,o=r.x,l=r.y;const h=Gt(n),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=c?i.slice(0):null;for(let i=0,u=0,p=t.length;i<p;i++)switch(0|t[i]){case J.rectangle:o=e[u++],l=e[u++];const t=e[u++],i=e[u++],p=o+t,f=l+i;n.moveTo(o,l),0===t||0===i?n.lineTo(p,f):(n.lineTo(p,l),n.lineTo(p,f),n.lineTo(o,f)),c||r.updateRectMinMax(h,[o,l,p,f]),n.closePath();break;case J.moveTo:o=e[u++],l=e[u++],n.moveTo(o,l),c||r.updatePathMinMax(h,o,l);break;case J.lineTo:o=e[u++],l=e[u++],n.lineTo(o,l),c||r.updatePathMinMax(h,o,l);break;case J.curveTo:s=o,a=l,o=e[u+4],l=e[u+5],n.bezierCurveTo(e[u],e[u+1],e[u+2],e[u+3],o,l),r.updateCurvePathMinMax(h,s,a,e[u],e[u+1],e[u+2],e[u+3],o,l,d),u+=6;break;case J.curveTo2:s=o,a=l,n.bezierCurveTo(o,l,e[u],e[u+1],e[u+2],e[u+3]),r.updateCurvePathMinMax(h,s,a,o,l,e[u],e[u+1],e[u+2],e[u+3],d),o=e[u+2],l=e[u+3],u+=4;break;case J.curveTo3:s=o,a=l,o=e[u+2],l=e[u+3],n.bezierCurveTo(e[u],e[u+1],o,l,o,l),r.updateCurvePathMinMax(h,s,a,e[u],e[u+1],o,l,o,l,d),u+=4;break;case J.closePath:n.closePath()}c&&r.updateScalingPathMinMax(h,d),r.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,Xt(e),De),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor;let n=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,Xt(e),Oe),n=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ai}eoClip(){this.pendingClip=oi}beginText(){this.current.textMatrix=a,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0===t)return void e.beginPath();const i=new Path2D,n=e.getTransform().invertSelf();for(const{transform:e,x:r,y:s,fontSize:a,path:o}of t)i.addPath(o,new DOMMatrix(e).preMultiplySelf(n).translate(r,s).scale(a,-a));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||o,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||rt(),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",s=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let h=e;e<16?h=16:e>100&&(h=100),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${a} ${h}px ${s}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,r,s){this.current.textMatrix=[t,e,i,n,r,s],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#di(t,e,i){const n=new Path2D;return n.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),n}paintChar(t,e,i,n,r){const s=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,c=l&C,d=!!(l&_),u=a.patternFill&&!o.missingFile,p=a.patternStroke&&!o.missingFile;let f;if((o.disableFontFace||d||u||p)&&(f=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||u||p){if(s.save(),s.translate(e,i),s.scale(h,-h),c===w||c===A)if(n){const t=s.getTransform();s.setTransform(...n),s.fill(this.#di(f,t,n))}else s.fill(f);if(c===k||c===A)if(r){const t=s.getTransform();s.setTransform(...r),s.stroke(this.#di(f,t,r))}else s.lineWidth/=h,s.stroke(f);s.restore()}else c!==w&&c!==A||s.fillText(t,e,i),c!==k&&c!==A||s.strokeText(t,e,i);if(d){(this.pendingTextPaths||=[]).push({transform:Gt(s),x:e,y:i,fontSize:h,path:f})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){i=!0;break}return lt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(0===n)return;const r=this.ctx,s=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=i.vertical,u=d?1:-1,p=i.defaultVMetrics,f=n*e.fontMatrix[0],g=e.textRenderingMode===w&&!i.disableFontFace&&!e.patternFill;let m,b;if(r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),l>0?r.scale(h,-1):r.scale(h,1),e.patternFill){r.save();const t=e.fillColor.getPattern(r,this,Xt(r),Oe);m=Gt(r),r.restore(),r.fillStyle=t}if(e.patternStroke){r.save();const t=e.strokeColor.getPattern(r,this,Xt(r),De);b=Gt(r),r.restore(),r.strokeStyle=t}let x=e.lineWidth;const v=e.textMatrixScale;if(0===v||0===x){const t=e.textRenderingMode&C;t!==k&&t!==A||(x=this.getSinglePixelWidth())}else x/=v;if(1!==s&&(r.scale(s,s),x/=s),r.lineWidth=x,i.isInvalidPDFjsFont){const i=[];let n=0;for(const e of t)i.push(e.unicode),n+=e.width;return r.fillText(i.join(""),0,0),e.x+=n*f*h,r.restore(),void this.compose()}let y,S=0;for(y=0;y<c;++y){const e=t[y];if("number"==typeof e){S+=u*e*n/1e3;continue}let h=!1;const c=(e.isSpace?o:0)+a,x=e.fontChar,v=e.accent;let w,k,A=e.width;if(d){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*A)*f,n=t[2]*f;A=t?-t[0]:A,w=i/s,k=(S+n)/s}else w=S/s,k=0;if(i.remeasure&&A>0){const t=1e3*r.measureText(x).width/n*s;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;h=!0,r.save(),r.scale(e,1),w/=e}else A!==t&&(w+=(A-t)/2e3*n/s)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!v)r.fillText(x,w,k);else if(this.paintChar(x,w,k,m,b),v){const t=w+n*v.offset.x/s,e=k-n*v.offset.y/s;this.paintChar(v.fontChar,t,e,m,b)}S+=d?A*f-c*l:A*f+c*l,h&&r.restore()}d?e.y-=S:e.x+=S*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,r=i.fontSize,s=i.fontDirection,a=n.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,c=i.textHScale*s,d=i.fontMatrix||o,u=t.length;let p,f,g,m;if(!(i.textRenderingMode===S)&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,s),p=0;p<u;++p){if(f=t[p],"number"==typeof f){m=a*f*r/1e3,this.ctx.translate(m,0),i.x+=m*c;continue}const s=(f.isSpace?h:0)+l,o=n.charProcOperatorList[f.operatorListId];if(!o){rt(f.operatorListId);continue}this.contentVisible&&(this.processingType3=f,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(o),this.restore());g=kt.applyTransform([f.width,0],d)[0]*r+s,e.translate(g,0),i.x+=g*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,r,s){this.ctx.rect(i,n,r-i,s-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],n=this.baseTransform||Gt(this.ctx),r={createCanvasGraphics:t=>new li(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ye(t,i,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=kt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=kt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=function(t){switch(t[0]){case"RadialAxial":return new He(t);case"Mesh":return new Ge(t);case"Dummy":return new Xe}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Xt(e),ze);const n=Xt(e);if(n){const{width:t,height:i}=e.canvas,[r,s,a,o]=kt.getAxialAlignedBoundingBox([0,0,t,i],n);this.ctx.fillRect(r,s,a-r,o-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){st("Should not call beginInlineImage")}beginImageData(){st("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Gt(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(Gt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||nt(),t.knockout&&rt();const i=Gt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=kt.getAxialAlignedBoundingBox(t.bbox,Gt(e));const r=[0,0,e.canvas.width,e.canvas.height];n=kt.intersect(n,r)||[0,0,0,0];const s=Math.floor(n[0]),a=Math.floor(n[1]),o=Math.max(Math.ceil(n[2])-s,1),l=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,o,l),d=c.context;d.translate(-s,-a),d.transform(...i),t.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:s,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.save()),ei(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=Gt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=kt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,n,r){if(this.#hi(),ii(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const n=e[2]-e[0],s=e[3]-e[1];if(r&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=n,e[3]=s;const[r,a]=kt.singularValueDecompose2dScale(Gt(this.ctx)),{viewportScale:o}=this,l=Math.ceil(n*this.outputScaleX*o),h=Math.ceil(s*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,h);const{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(r,0,0,-a,0,s*a),ii(this.ctx)}else ii(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],n,s),this.ctx.clip(),this.ctx.beginPath()}this.current=new Je(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#ci(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let s,a,o,l=new Uint8Array(r*(i+1));const h=e+7&-8;let c=new Uint8Array(h*i),d=0;for(const e of t.data){let t=128;for(;t>0;)c[d++]=e&t?0:255,t>>=1}let u=0;for(d=0,0!==c[d]&&(l[0]=1,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++u),d++;for(0!==c[d]&&(l[a]=2,++u),s=1;s<i;s++){d=s*h,o=s*r,c[d-h]!==c[d]&&(l[o]=c[d]?1:8,++u);let t=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0),n[t]&&(l[o+a]=n[t],++u),d++;if(c[d-h]!==c[d]&&(l[o+a]=c[d]?2:4,++u),u>1e3)return null}for(d=h*(i-1),o=s*r,0!==c[d]&&(l[o]=8,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[o+a]=c[d]?4:8,++u),d++;if(0!==c[d]&&(l[o+a]=4,++u),u>1e3)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),f=new Path2D;for(s=0;u&&s<=i;s++){let t=s*r;const i=t+e;for(;t<i&&!l[t];)t++;if(t===i)continue;f.moveTo(t%r,s);const n=t;let a=l[t];do{const e=p[a];do{t+=e}while(!l[t]);const i=l[t];5!==i&&10!==i?(a=i,l[t]=0):(a=i&51*a>>4,l[t]&=a>>2|a<<2),f.lineTo(t%r,t/r|0),l[t]||--u}while(n!==t);--s}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(f),t.beginPath(),t.restore()}}(t)),n.compiled))return void n.compiled(i);const r=this._createMaskCanvas(t),s=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,r,s){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=Gt(a);a.transform(e,i,n,r,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let t=0,h=s.length;t<h;t+=2){const h=kt.transform(o,[e,i,n,r,s[t],s[t+1]]),[c,d]=kt.applyTransform([0,0],h);a.drawImage(l.canvas,c,d)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:t,width:s,height:a,transform:o}=r,l=this.cachedCanvases.getCanvas("maskCanvas",s,a),h=l.context;h.save();ti(h,this.getObject(t,r)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,Xt(e),Oe):i,h.fillRect(0,0,s,a),h.restore(),e.save(),e.transform(...o),e.scale(1,-1),Ze(e,l.canvas,0,0,s,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):rt()}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r)return void rt();const s=r.width,a=r.height,o=[];for(let t=0,r=n.length;t<r;t+=2)o.push({transform:[e,0,0,i,n[t],n[t+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(r,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,n),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!s){const{filter:t}=n;"none"!==t&&""!==t&&(n.filter="none")}let r;if(n.scale(1/e,-1/i),t.bitmap)r=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Qe(n,t),r=this.applyTransferMapsToCanvas(n)}const a=this._scaleImage(r,Xt(n));n.imageSmoothingEnabled=ni(Gt(n),t.interpolate),Ze(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const e=t.width,i=t.height,r=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Qe(r,t),n=this.applyTransferMapsToCanvas(r)}for(const t of e)i.save(),i.transform(...t.transform),i.scale(1,-1),Ze(i,n,t.x,t.y,t.w,t.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===oi?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Gt(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:r}=this.ctx.getTransform();let s,a;if(0===i&&0===n){const i=Math.abs(e),n=Math.abs(r);if(i===n)if(0===t)s=a=1/i;else{const e=i*t;s=a=e<1?1/e:1}else if(0===t)s=1/i,a=1/n;else{const e=i*t,r=n*t;s=e<1?1/e:1,a=r<1?1/r:1}}else{const o=Math.abs(e*r-i*n),l=Math.hypot(e,i),h=Math.hypot(n,r);if(0===t)s=h/o,a=l/o;else{const e=t*o;s=h>e?h/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=i||1,1===n&&1===r)return void e.stroke();const s=e.getLineDash();if(t&&e.save(),e.scale(n,r),s.length>0){const t=Math.max(n,r);e.setLineDash(s.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const t in J)void 0!==li.prototype[t]&&(li.prototype[J[t]]=li.prototype[t]);class hi{static#ui=null;static#pi="";static get workerPort(){return this.#ui}static set workerPort(t){if(!("undefined"!=typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");this.#ui=t}static get workerSrc(){return this.#pi}static set workerSrc(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");this.#pi=t}}class ci{#fi;#gi;constructor({parsedData:t,rawData:e}){this.#fi=t,this.#gi=e}getRaw(){return this.#gi}get(t){return this.#fi.get(t)??null}getAll(){return vt(this.#fi)}has(t){return this.#fi.has(t)}}const di=Symbol("INTERNAL");class ui{#mi=!1;#bi=!1;#xi=!1;#vi=!0;constructor(t,{name:e,intent:i,usage:n,rbGroups:r}){this.#mi=!!(t&c),this.#bi=!!(t&d),this.name=e,this.intent=i,this.usage=n,this.rbGroups=r}get visible(){if(this.#xi)return this.#vi;if(!this.#vi)return!1;const{print:t,view:e}=this.usage;return this.#mi?"OFF"!==e?.viewState:!this.#bi||"OFF"!==t?.printState}_setVisible(t,e,i=!1){t!==di&&st("Internal method `_setVisible` called."),this.#xi=i,this.#vi=e}}class pi{#yi=null;#wi=new Map;#ki=null;#Ai=null;constructor(t,e=c){if(this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#Ai=t.order;for(const i of t.groups)this.#wi.set(i.id,new ui(e,i));if("OFF"===t.baseState)for(const t of this.#wi.values())t._setVisible(di,!1);for(const e of t.on)this.#wi.get(e)._setVisible(di,!0);for(const e of t.off)this.#wi.get(e)._setVisible(di,!1);this.#ki=this.getHash()}}#Si(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const e=t[n];let r;if(Array.isArray(e))r=this.#Si(e);else{if(!this.#wi.has(e))return rt(),!0;r=this.#wi.get(e).visible}switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===i}isVisible(t){if(0===this.#wi.size)return!0;if(!t)return nt(),!0;if("OCG"===t.type)return this.#wi.has(t.id)?this.#wi.get(t.id).visible:(rt(t.id),!0);if("OCMD"===t.type){if(t.expression)return this.#Si(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#wi.has(e))return rt(),!0;if(this.#wi.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#wi.has(e))return rt(),!0;if(!this.#wi.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#wi.has(e))return rt(),!0;if(!this.#wi.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#wi.has(e))return rt(),!0;if(this.#wi.get(e).visible)return!1}return!0}return rt(t.policy),!0}return rt(t.type),!0}setVisibility(t,e=!0,i=!0){const n=this.#wi.get(t);if(n){if(i&&e&&n.rbGroups.length)for(const e of n.rbGroups)for(const i of e)i!==t&&this.#wi.get(i)?._setVisible(di,!1,!0);n._setVisible(di,!!e,!0),this.#yi=null}else rt()}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const t=this.#wi.get(n);if(t)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!t.visible,e)}}this.#yi=null}get hasInitialVisibility(){return null===this.#ki||this.getHash()===this.#ki}getOrder(){return this.#wi.size?this.#Ai?this.#Ai.slice():[...this.#wi.keys()]:null}getGroups(){return this.#wi.size>0?vt(this.#wi):null}getGroup(t){return this.#wi.get(t)||null}getHash(){if(null!==this.#yi)return this.#yi;const t=new he;for(const[e,i]of this.#wi)t.update(`${e}:${i.visible}`);return this.#yi=t.hexdigest()}}class fi{constructor(t,{disableRange:e=!1,disableStream:i=!1}){at(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:s,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,r?.length>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{at(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){at(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new gi(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new mi(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class gi{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=It(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mi{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bi(t,e){const i=new Headers;if(!t||!e||"object"!=typeof e)return i;for(const t in e){const n=e[t];void 0!==n&&i.append(t,n)}return i}function xi(t){try{return new URL(t).origin}catch{}return null}function vi({responseHeaders:t,isHttp:e,rangeChunkSize:i,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(s))return r;if(r.suggestedLength=s,s<=2*i)return r;if(n||!e)return r;if("bytes"!==t.get("Accept-Ranges"))return r;return"identity"!==(t.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function yi(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,i=n("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=o(t),t=l(t),s(t)}if(i=function(t){const e=[];let i;const r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=r.exec(t));){let[,t,n,r]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[n,r]}const s=[];for(let t=0;t<e.length&&t in e;++t){let[i,n]=e[t];n=a(n),i&&(n=unescape(n),0===t&&(n=o(n))),s.push(n)}return s.join("")}(t),i)return s(l(i));if(i=n("filename","i").exec(t),i){i=i[1];let t=a(i);return t=l(t),s(t)}function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function r(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const n=new TextDecoder(t,{fatal:!0}),r=xt(i);i=n.decode(r),e=!1}catch{}}return i}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=r("utf-8",t),e&&(t=r("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:r(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,n){if("q"===i||"Q"===i)return r(e,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch{}return r(e,n)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(It(t))return t}return null}function wi(t,e){return 404===t||0===t&&e.startsWith("file:")?new pt('Missing PDF "'+e+'".'):new ft(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function ki(t){return 200===t||206===t}function Ai(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Si(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(rt(),new Uint8Array(t).buffer)}class Ci{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=bi(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return at(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _i(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Mi(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class _i{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),n=e.url;fetch(n,Ai(i,this._withCredentials,this._abortController)).then((e=>{if(t._responseOrigin=xi(e.url),!ki(e.status))throw wi(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const i=e.headers,{allowRangeRequests:r,suggestedLength:s}=vi({responseHeaders:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=yi(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mt("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Si(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Mi{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const s=n.url;fetch(s,Ai(r,this._withCredentials,this._abortController)).then((e=>{const i=xi(e.url);if(i!==t._responseOrigin)throw new Error(`Expected range response-origin "${i}" to match "${t._responseOrigin}".`);if(!ki(e.status))throw wi(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Si(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Ti{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=bi(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[t,i]of this.headers)e.setRequestHeader(t,i);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",at(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===n.status&&this.isHttp)return void i.onError(n.status);const r=n.status||200;if(!(200===r&&206===i.expectedStatus)&&r!==i.expectedStatus)return void i.onError(n.status);const s=function(t){const e=t.response;return"string"!=typeof e?e:xt(e).buffer}(n);if(206===r){const t=n.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?i.onDone({begin:parseInt(e[1],10),chunk:s}):(rt(),i.onError(0))}else s?i.onDone({begin:0,chunk:s}):i.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Ei{constructor(t){this._source=t,this._manager=new Ti(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return at(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ni(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Pi(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Ni{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=xi(e.responseURL);const i=e.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map((t=>{const[e,...i]=t.split(": ");return[e,i.join(": ")]})):[]),{allowRangeRequests:r,suggestedLength:s}=vi({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=yi(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wi(t,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Pi{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=xi(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=wi(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Li=/^[a-z][a-z0-9\-+.]+:/i;class Ii{constructor(t){this.source=t,this.url=function(t){if(Li.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),at("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return at(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ri(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Oi(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Ri{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then((t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new pt(`Missing PDF "${this._url}".`)),this._storedError=t,this._headersCapability.reject(t)}))}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Oi{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}const Di=30;class zi{#Ci=Promise.withResolvers();#pt=null;#_i=!1;#Mi=!!globalThis.FontInspector?.enabled;#Ti=null;#Ei=null;#Ni=0;#Pi=0;#Li=null;#Ii=null;#Ri=0;#Oi=0;#Di=Object.create(null);#zi=[];#Fi=null;#Bi=[];#Hi=new WeakMap;#qi=null;static#ji=new Map;static#Gi=new Map;static#Xi=new WeakMap;static#Vi=null;static#Wi=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#Fi=t;else{if("object"!=typeof t)throw new Error('No "textContentSource" parameter specified.');this.#Fi=new ReadableStream({start(e){e.enqueue(t),e.close()}})}this.#pt=this.#Ii=e,this.#Oi=i.scale*(globalThis.devicePixelRatio||1),this.#Ri=i.rotation,this.#Ei={div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:r,pageX:s,pageY:a}=i.rawDims;this.#qi=[1,0,0,-1,-s,a+r],this.#Pi=n,this.#Ni=r,zi.#Yi(),Vt(e,i),this.#Ci.promise.finally((()=>{zi.#Wi.delete(this),this.#Ei=null,this.#Di=null})).catch((()=>{}))}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=yt.platform;return lt(this,"fontFamilyMap",new Map([["sans-serif",(t&&e?"Calibri, ":"")+"sans-serif"],["monospace",(t&&e?"Lucida Console, ":"")+"monospace"]]))}render(){const t=()=>{this.#Li.read().then((({value:e,done:i})=>{i?this.#Ci.resolve():(this.#Ti??=e.lang,Object.assign(this.#Di,e.styles),this.#Ui(e.items),t())}),this.#Ci.reject)};return this.#Li=this.#Fi.getReader(),zi.#Wi.add(this),t(),this.#Ci.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==this.#Ri&&(e?.(),this.#Ri=n,Vt(this.#Ii,{rotation:n})),i!==this.#Oi){e?.(),this.#Oi=i;const t={div:null,properties:null,ctx:zi.#$i(this.#Ti)};for(const e of this.#Bi)t.properties=this.#Hi.get(e),t.div=e,this.#Ki(t)}}cancel(){const t=new mt("TextLayer task cancelled.");this.#Li?.cancel(t).catch((()=>{})),this.#Li=null,this.#Ci.reject(t)}get textDivs(){return this.#Bi}get textContentItemsStr(){return this.#zi}#Ui(t){if(this.#_i)return;this.#Ei.ctx??=zi.#$i(this.#Ti);const e=this.#Bi,i=this.#zi;for(const n of t){if(e.length>1e5)return rt(),void(this.#_i=!0);if(void 0!==n.str)i.push(n.str),this.#Zi(n);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const t=this.#pt;this.#pt=document.createElement("span"),this.#pt.classList.add("markedContent"),null!==n.id&&this.#pt.setAttribute("id",`${n.id}`),t.append(this.#pt)}else"endMarkedContent"===n.type&&(this.#pt=this.#pt.parentNode)}}#Zi(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};this.#Bi.push(e);const n=kt.transform(this.#qi,t.transform);let r=Math.atan2(n[1],n[0]);const s=this.#Di[t.fontName];s.vertical&&(r+=Math.PI/2);let a=this.#Mi&&s.fontSubstitution||s.fontFamily;a=zi.fontFamilyMap.get(a)||a;const o=Math.hypot(n[2],n[3]),l=o*zi.#Ji(a,this.#Ti);let h,c;0===r?(h=n[4],c=n[5]-l):(h=n[4]+l*Math.sin(r),c=n[5]-l*Math.cos(r));const d="calc(var(--scale-factor)*",u=e.style;this.#pt===this.#Ii?(u.left=`${(100*h/this.#Pi).toFixed(2)}%`,u.top=`${(100*c/this.#Ni).toFixed(2)}%`):(u.left=`${d}${h.toFixed(2)}px)`,u.top=`${d}${c.toFixed(2)}px)`),u.fontSize=`${d}${(zi.#Vi*o).toFixed(2)}px)`,u.fontFamily=a,i.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#Mi&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==r&&(i.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(p=!0)}if(p&&(i.canvasWidth=s.vertical?t.height:t.width),this.#Hi.set(e,i),this.#Ei.div=e,this.#Ei.properties=i,this.#Ki(this.#Ei),i.hasText&&this.#pt.append(e),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this.#pt.append(t)}}#Ki(t){const{div:e,properties:i,ctx:n}=t,{style:r}=e;let s="";if(zi.#Vi>1&&(s=`scale(${1/zi.#Vi})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:t}=r,{canvasWidth:a,fontSize:o}=i;zi.#Qi(n,o*this.#Oi,t);const{width:l}=n.measureText(e.textContent);l>0&&(s=`scaleX(${a*this.#Oi/l}) ${s}`)}0!==i.angle&&(s=`rotate(${i.angle}deg) ${s}`),s.length>0&&(r.transform=s)}static cleanup(){if(!(this.#Wi.size>0)){this.#ji.clear();for(const{canvas:t}of this.#Gi.values())t.remove();this.#Gi.clear()}}static#$i(t=null){let e=this.#Gi.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#Gi.set(t,e),this.#Xi.set(e,{size:0,family:""})}return e}static#Qi(t,e,i){const n=this.#Xi.get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)}static#Yi(){if(null!==this.#Vi)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#Vi=t.getBoundingClientRect().height,t.remove()}static#Ji(t,e){const i=this.#ji.get(t);if(i)return i;const n=this.#$i(e);n.canvas.width=n.canvas.height=Di,this.#Qi(n,Di,t);const r=n.measureText("");let s=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(s){const e=s/(s+a);return this.#ji.set(t,e),n.canvas.width=n.canvas.height=0,e}n.strokeStyle="red",n.clearRect(0,0,Di,Di),n.strokeText("g",0,0);let o=n.getImageData(0,0,Di,Di).data;a=0;for(let t=o.length-1-3;t>=0;t-=4)if(o[t]>0){a=Math.ceil(t/4/Di);break}n.clearRect(0,0,Di,Di),n.strokeText("A",0,Di),o=n.getImageData(0,0,Di,Di).data,s=0;for(let t=0,e=o.length;t<e;t+=4)if(o[t]>0){s=Di-Math.floor(t/4/Di);break}n.canvas.width=n.canvas.height=0;const l=s?s/(s+a):.8;return this.#ji.set(t,l),l}}class Fi{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){if(!i)return;let n=null;const r=i.name;if("#text"===r)n=i.value;else{if(!Fi.shouldBuildText(r))return;i?.attributes?.textContent?n=i.attributes.textContent:i.value&&(n=i.value)}if(null!==n&&e.push({str:n}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Bi=65536,Hi=s?class extends Te{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire("file:///home/chris/Projects/simtheory/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(t,e)}}:class extends Te{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},qi=s?class extends Ee{async _fetch(t){return Re(t)}}:Ne,ji=s?class extends Pe{}:class extends Pe{#tn;#en;#in;#nn;#rn;#sn;#v=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#nn=t,this.#rn=e}get#w(){return this.#en||=new Map}get#an(){return this.#sn||=new Map}get#on(){if(!this.#in){const t=this.#rn.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#rn.createElementNS(Mt,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#in=this.#rn.createElementNS(Mt,"defs"),t.append(i),i.append(this.#in),this.#rn.body.append(t)}return this.#in}#ln(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const n=i.join(",");return[n,n,n]}const[e,i,n]=t,r=new Array(256),s=new Array(256),a=new Array(256);for(let t=0;t<256;t++)r[t]=e[t]/255,s[t]=i[t]/255,a[t]=n[t]/255;return[r.join(","),s.join(","),a.join(",")]}#hn(t){if(void 0===this.#tn){this.#tn="";const t=this.#rn.URL;t!==this.#rn.baseURI&&(Lt(t)?rt():this.#tn=t.split("#",1)[0])}return`url(${this.#tn}#${t})`}addFilter(t){if(!t)return"none";let e=this.#w.get(t);if(e)return e;const[i,n,r]=this.#ln(t),s=1===t.length?i:`${i}${n}${r}`;if(e=this.#w.get(s),e)return this.#w.set(t,e),e;const a=`g_${this.#nn}_transfer_map_${this.#v++}`,o=this.#hn(a);this.#w.set(t,o),this.#w.set(s,o);const l=this.#cn(a);return this.#dn(i,n,r,l),o}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let r=this.#an.get(n);if(r?.key===i)return r.url;if(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#an.set(n,r)),!t||!e)return r.url;const s=this.#un(t);t=kt.makeHexColor(...s);const a=this.#un(e);if(e=kt.makeHexColor(...a),this.#on.style.color="","#000000"===t&&"#ffffff"===e||t===e)return r.url;const o=new Array(256);for(let t=0;t<=255;t++){const e=t/255;o[t]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const l=o.join(","),h=`g_${this.#nn}_hcm_filter`,c=r.filter=this.#cn(h);this.#dn(l,l,l,c),this.#pn(c);const d=(t,e)=>{const i=s[t]/255,n=a[t]/255,r=new Array(e+1);for(let t=0;t<=e;t++)r[t]=i+t/e*(n-i);return r.join(",")};return this.#dn(d(0,5),d(1,5),d(2,5),c),r.url=this.#hn(h),r.url}addAlphaFilter(t){let e=this.#w.get(t);if(e)return e;const[i]=this.#ln([t]),n=`alpha_${i}`;if(e=this.#w.get(n),e)return this.#w.set(t,e),e;const r=`g_${this.#nn}_alpha_map_${this.#v++}`,s=this.#hn(r);this.#w.set(t,s),this.#w.set(n,s);const a=this.#cn(r);return this.#fn(i,a),s}addLuminosityFilter(t){let e,i,n=this.#w.get(t||"luminosity");if(n)return n;if(t?([e]=this.#ln([t]),i=`luminosity_${e}`):i="luminosity",n=this.#w.get(i),n)return this.#w.set(t,n),n;const r=`g_${this.#nn}_luminosity_map_${this.#v++}`,s=this.#hn(r);this.#w.set(t,s),this.#w.set(i,s);const a=this.#cn(r);return this.#gn(a),t&&this.#fn(e,a),s}addHighlightHCMFilter(t,e,i,n,r){const s=`${e}-${i}-${n}-${r}`;let a=this.#an.get(t);if(a?.key===s)return a.url;if(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#an.set(t,a)),!e||!i)return a.url;const[o,l]=[e,i].map(this.#un.bind(this));let h=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[d,u]=[n,r].map(this.#un.bind(this));c<h&&([h,c,d,u]=[c,h,u,d]),this.#on.style.color="";const p=(t,e,i)=>{const n=new Array(256),r=(c-h)/i,s=t/255,a=(e-t)/(255*i);let o=0;for(let t=0;t<=i;t++){const e=Math.round(h+t*r),i=s+t*a;for(let t=o;t<=e;t++)n[t]=i;o=e+1}for(let t=o;t<256;t++)n[t]=n[o-1];return n.join(",")},f=`g_${this.#nn}_hcm_${t}_filter`,g=a.filter=this.#cn(f);return this.#pn(g),this.#dn(p(d[0],u[0],5),p(d[1],u[1],5),p(d[2],u[2],5),g),a.url=this.#hn(f),a.url}destroy(t=!1){t&&this.#sn?.size||(this.#in?.parentNode.parentNode.remove(),this.#in=null,this.#en?.clear(),this.#en=null,this.#sn?.clear(),this.#sn=null,this.#v=0)}#gn(t){const e=this.#rn.createElementNS(Mt,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#pn(t){const e=this.#rn.createElementNS(Mt,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#cn(t){const e=this.#rn.createElementNS(Mt,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#on.append(e),e}#mn(t,e,i){const n=this.#rn.createElementNS(Mt,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#dn(t,e,i,n){const r=this.#rn.createElementNS(Mt,"feComponentTransfer");n.append(r),this.#mn(r,"feFuncR",t),this.#mn(r,"feFuncG",e),this.#mn(r,"feFuncB",i)}#fn(t,e){const i=this.#rn.createElementNS(Mt,"feComponentTransfer");e.append(i),this.#mn(i,"feFuncA",t)}#un(t){return this.#on.style.color=t,jt(getComputedStyle(this.#on).getPropertyValue("color"))}},Gi=s?class extends Le{async _fetch(t){return Re(t)}}:Ie;function Xi(t={}){"string"==typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new Wi,{docId:i}=e,n=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(s&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,r=t.data?function(t){if(s&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return xt(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"==typeof t&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,a=t.httpHeaders||null,o=!0===t.withCredentials,l=t.password??null,h=t.range instanceof Yi?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:Bi;let d=t.worker instanceof Zi?t.worker:null;const u=t.verbosity,p="string"!=typeof t.docBaseUrl||Lt(t.docBaseUrl)?null:t.docBaseUrl,f="string"==typeof t.cMapUrl?t.cMapUrl:null,g=!1!==t.cMapPacked,m=t.CMapReaderFactory||qi,b="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,x=t.StandardFontDataFactory||Gi,v=!0!==t.stopAtErrors,y=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,w=!1!==t.isEvalSupported,k="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!s,A="boolean"==typeof t.isImageDecoderSupported?t.isImageDecoderSupported:!s&&(yt.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,C="boolean"==typeof t.disableFontFace?t.disableFontFace:s,_=!0===t.fontExtraProperties,M=!0===t.enableXfa,T=t.ownerDocument||globalThis.document,E=!0===t.disableRange,N=!0===t.disableStream,P=!0===t.disableAutoFetch,L=!0===t.pdfBug,I=t.CanvasFactory||Hi,R=t.FilterFactory||ji,O=!0===t.enableHWA,D=h?h.length:t.length??NaN,z="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!s&&!C,F="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:m===Ne&&x===Ie&&f&&b&&zt(f,document.baseURI)&&zt(b,document.baseURI);et(u);const B={canvasFactory:new I({ownerDocument:T,enableHWA:O}),filterFactory:new R({docId:i,ownerDocument:T}),cMapReaderFactory:F?null:new m({baseUrl:f,isCompressed:g}),standardFontDataFactory:F?null:new x({baseUrl:b})};if(!d){const t={verbosity:u,port:hi.workerPort};d=t.port?Zi.fromPort(t):new Zi(t),e._worker=d}const H={docId:i,apiVersion:"4.10.38",data:r,password:l,disableAutoFetch:P,rangeChunkSize:c,length:D,docBaseUrl:p,enableXfa:M,evaluatorOptions:{maxImageSize:y,disableFontFace:C,ignoreErrors:v,isEvalSupported:w,isOffscreenCanvasSupported:k,isImageDecoderSupported:A,canvasMaxAreaInBytes:S,fontExtraProperties:_,useSystemFonts:z,cMapUrl:F?f:null,standardFontDataUrl:F?b:null}},q={disableFontFace:C,fontExtraProperties:_,ownerDocument:T,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:M}};return d.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",H,r?[r.buffer]:null);let l;if(h)l=new fi(h,{disableRange:E,disableStream:N});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let t;if(s)if(zt(n)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");t=Ci}else t=Ii;else t=zt(n)?Ci:Ei;l=new t({url:n,length:D,httpHeaders:a,withCredentials:o,rangeChunkSize:c,disableRange:E,disableStream:N})}return t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new Me(i,t,d.port),r=new Ji(n,e,l,q,B);e._transport=r,n.send("Ready",null)}))})).catch(e._capability.reject),e}function Vi(t){return"object"==typeof t&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0}class Wi{static#nn=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+Wi.#nn++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}}class Yi{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){st("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Ui{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return lt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class $i{#bn=null;#xn=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new Dt:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new tn,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new Nt({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return lt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=b.ENABLE,transform:r=null,background:s=null,optionalContentConfigPromise:a=null,annotationCanvasMap:o=null,pageColors:l=null,printAnnotationStorage:h=null,isEditing:c=!1}){this._stats?.time("Overall");const u=this._transport.getRenderingIntent(i,n,h,c),{renderingIntent:p,cacheKey:f}=u;this.#xn=!1,this.#vn(),a||=this._transport.getOptionalContentConfig(p);let g=this._intentStates.get(f);g||(g=Object.create(null),this._intentStates.set(f,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const m=!!(p&d);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const x=t=>{g.renderTasks.delete(v),(this._maybeCleanupAfterRender||m)&&(this.#xn=!0),this.#yn(!m),t?(v.capability.reject(t),this._abortOperatorList({intentState:g,reason:t instanceof Error?t:new Error(t)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new nn({callback:x,params:{canvasContext:t,viewport:e,transform:r,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:l});(g.renderTasks||=new Set).add(v);const y=v.task;return Promise.all([g.displayReadyCapability.promise,a]).then((([t,e])=>{if(this.destroyed)x();else{if(this._stats?.time("Rendering"),!(e.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:t,optionalContentConfig:e}),v.operatorListChanged()}})).catch(x),y}getOperatorList({intent:t="display",annotationMode:e=b.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){const r=this._transport.getRenderingIntent(t,e,i,n,!0);let s,a=this._intentStates.get(r.cacheKey);return a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>Fi.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const n=e.getReader(),r={items:[],styles:Object.create(null),lang:null};!function e(){n.read().then((function({value:i,done:n}){n?t(r):(r.lang??=i.lang,Object.assign(r.styles,i.styles),r.items.push(...i.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#xn=!1,this.#vn(),Promise.all(t)}cleanup(t=!1){this.#xn=!0;const e=this.#yn(!1);return t&&e&&(this._stats&&=new Dt),e}#yn(t=!1){if(this.#vn(),!this.#xn||this.destroyed)return!1;if(t)return this.#bn=setTimeout((()=>{this.#bn=null,this.#yn(!1)}),5e3),!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#xn=!1,!0}#vn(){this.#bn&&(clearTimeout(this.#bn),this.#bn=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this.#yn(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:r,transfer:s}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},s).getReader(),o=this._intentStates.get(e);o.streamReader=a;const l=()=>{a.read().then((({value:t,done:e})=>{e?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();this.#yn(!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Pt){let i=100;return e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),i))}}if(t.streamReader.cancel(new mt(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}class Ki{#wn=new Map;#kn=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#kn.then((()=>{for(const[t]of this.#wn)t.call(this,i)}))}addEventListener(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){const{signal:r}=i;if(r.aborted)return void rt();const s=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}this.#wn.set(e,n)}removeEventListener(t,e){const i=this.#wn.get(e);i?.(),this.#wn.delete(e)}terminate(){for(const[,t]of this.#wn)t?.();this.#wn.clear()}}class Zi{static#An=0;static#Sn=!1;static#Cn;static{s&&(this.#Sn=!0,hi.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const n=new URL(e,i);return i.origin===n.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=it()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Zi.#Cn?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(Zi.#Cn||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return this._readyCapability.promise}#_n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Me("main","worker",t),this._messageHandler.on("ready",(function(){})),this.#_n()}_initialize(){if(Zi.#Sn||Zi.#Mn)return void this._setupFakeWorker();let{workerSrc:t}=Zi;try{Zi._isSameOrigin(window.location.href,t)||(t=Zi._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Me("main","worker",e),n=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",(()=>{this._webWorker||n()}),{signal:r.signal}),i.on("test",(t=>{r.abort(),!this.destroyed&&t?(this._messageHandler=i,this._port=e,this._webWorker=e,this.#_n()):n()})),i.on("ready",(t=>{if(r.abort(),this.destroyed)n();else try{s()}catch{this._setupFakeWorker()}}));const s=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void s()}catch{nt()}this._setupFakeWorker()}_setupFakeWorker(){Zi.#Sn||(rt(),Zi.#Sn=!0),Zi._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new Ki;this._port=e;const i="fake"+Zi.#An++,n=new Me(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new Me(i,i+"_worker",e),this.#_n()})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Zi.#Cn?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#Cn?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Zi(t)}static get workerSrc(){if(hi.workerSrc)return hi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#Mn(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return lt(this,"_setupFakeWorkerGlobal",(async()=>{if(this.#Mn)return this.#Mn;return(await import(this.workerSrc)).WorkerMessageHandler})())}}class Ji{#Tn=new Map;#En=new Map;#Nn=new Map;#Pn=new Map;#Ln=null;constructor(t,e,i,n,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new tn,this.fontLoader=new pe({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#In(t,e=null){const i=this.#Tn.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#Tn.set(t,n),n}get annotationStorage(){return lt(this,"annotationStorage",new de)}getRenderingIntent(t,e=b.ENABLE,i=null,n=!1,r=!1){let s=c,a=ce;switch(t){case"any":s=h;break;case"display":break;case"print":s=d;break;default:rt()}const o=s&d&&i instanceof ue?i:this.annotationStorage;switch(e){case b.DISABLE:s+=f;break;case b.ENABLE:break;case b.ENABLE_FORMS:s+=u;break;case b.ENABLE_STORAGE:s+=p,a=o.serializable;break;default:rt()}n&&(s+=g),r&&(s+=m);const{ids:l,hash:x}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,x].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#Ln?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#En.values())t.push(e._destroy());this.#En.clear(),this.#Nn.clear(),this.#Pn.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#Tn.clear(),this.filterFactory.destroy(),zi.cleanup(),this._networkStream?.cancelAllRequests(new mt("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{at(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():(at(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(async t=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:n,contentLength:r}=this._fullReader;return i&&n||(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),{isStreamingSupported:i,isRangeSupported:n,contentLength:r}})),t.on("GetRangeReader",((t,e)=>{at(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():(at(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new Ui(t,this))})),t.on("DocException",(t=>{e._capability.reject(_e(t))})),t.on("PasswordRequest",(t=>{this.#Ln=Promise.withResolvers();try{if(!e.onPassword)throw _e(t);const i=t=>{t instanceof Error?this.#Ln.reject(t):this.#Ln.resolve({password:t})};e.onPassword(i,t.code)}catch(t){this.#Ln.reject(t)}return this.#Ln.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.#En.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,n])=>{if(this.destroyed)return null;if(this.commonObjs.has(e))return null;switch(i){case"Font":const{disableFontFace:r,fontExtraProperties:s,pdfBug:a}=this._params;if("error"in n){const t=n.error;rt(),this.commonObjs.resolve(e,t);break}const o=a&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,l=new fe(n,{disableFontFace:r,fontExtraProperties:s,inspectFont:o});this.fontLoader.bind(l).catch((()=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!s&&l.data&&(l.data=null),this.commonObjs.resolve(e,l)}));break;case"CopyLocalImage":const{imageRef:h}=n;at(h,"The imageRef must be defined.");for(const t of this.#En.values())for(const[,i]of t.objs)if(i?.ref===h)return i.dataLen?(this.commonObjs.resolve(e,structuredClone(i)),i.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,n);break;default:throw new Error(`Got unknown common object type ${i}`)}return null})),t.on("obj",(([t,e,i,n])=>{if(this.destroyed)return;const r=this.#En.get(e);if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":r.objs.resolve(t,n),n?.dataLen>1e7&&(r._maybeCleanupAfterRender=!0);break;case"Pattern":r.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${i}`)}else n?.bitmap?.close()})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(t)})),t.on("FetchStandardFontData",(async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(t)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&rt();const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#Nn.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#Pn.set(i.refStr,t);const n=new $i(e,i,this,this._params.pdfBug);return this.#En.set(e,n),n}));return this.#Nn.set(e,n),n}getPageIndex(t){return Vi(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#In("GetFieldObjects")}hasJSActions(){return this.#In("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#In("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#In("GetOptionalContentConfig").then((e=>new pi(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#Tn.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new ci(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#Tn.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#En.values()){if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`)}this.commonObjs.clear(),t||this.fontLoader.clear(),this.#Tn.clear(),this.filterFactory.destroy(!0),zi.cleanup()}}cachedPageNumber(t){if(!Vi(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#Pn.get(e)??null}}const Qi=Symbol("INITIAL_DATA");class tn{#Rn=Object.create(null);#On(t){return this.#Rn[t]||={...Promise.withResolvers(),data:Qi}}get(t,e=null){if(e){const i=this.#On(t);return i.promise.then((()=>e(i.data))),null}const i=this.#Rn[t];if(!i||i.data===Qi)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#Rn[t];return!!e&&e.data!==Qi}delete(t){const e=this.#Rn[t];return!(!e||e.data===Qi)&&(delete this.#Rn[t],!0)}resolve(t,e=null){const i=this.#On(t);i.data=e,i.resolve()}clear(){for(const t in this.#Rn){const{data:e}=this.#Rn[t];e?.bitmap?.close()}this.#Rn=Object.create(null)}*[Symbol.iterator](){for(const t in this.#Rn){const{data:e}=this.#Rn[t];e!==Qi&&(yield[t,e])}}}class en{#Dn=null;constructor(t){this.#Dn=t,this.onContinue=null}get promise(){return this.#Dn.capability.promise}cancel(t=0){this.#Dn.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#Dn.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#Dn;return t.form||t.canvas&&e?.size>0}}class nn{#zn=null;static#Fn=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:s,pageIndex:a,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=c,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new en(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(nn.#Fn.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");nn.#Fn.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:r,background:s}=this.params;this.gfx=new li(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#zn&&(window.cancelAnimationFrame(this.#zn),this.#zn=null),nn.#Fn.delete(this._canvas),this.callback(t||new Pt(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#zn=window.requestAnimationFrame((()=>{this.#zn=null,this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),nn.#Fn.delete(this._canvas),this.callback())))}}const rn="4.10.38",sn="f9bea397f";function an(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function on(t){return Math.max(0,Math.min(255,255*t))}class ln{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=on(t),t,t]}static G_HTML([t]){const e=an(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(on)}static RGB_HTML(t){return`#${t.map(an).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[on(1-Math.min(1,t+n)),on(1-Math.min(1,i+n)),on(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,r=1-e,s=1-i;return["CMYK",n,r,s,Math.min(n,r,s)]}}class hn{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){st("Abstract method `_createSVG` called.")}}class cn extends hn{_createSVG(t){return document.createElementNS(Mt,t)}}class dn{static setupStorage(t,e,i,n,r){const s=n.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(s.value===i.attributes.xfaOn?t.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==s.value){t.setAttribute("value",s.value);for(const t of i.children)t.attributes.value===s.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(e,{value:r})}))}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:r}){const{attributes:s}=e,a=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name=`${s.name}-${n}`);for(const[e,i]of Object.entries(s))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:(!a||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,i)}a&&r.addLinkAttributes(t,s.href,s.newWindow),i&&s.dataId&&this.setupStorage(t,s.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,r=t.intent||"display",s=document.createElement(n.name);n.attributes&&this.setAttributes({html:s,element:n,intent:r,linkService:i});const a="richText"!==r,o=t.div;if(o.append(s),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===n.children.length){if(n.value){const t=document.createTextNode(n.value);s.append(t),a&&Fi.shouldBuildText(n.name)&&l.push(t)}return{textDivs:l}}const h=[[n,-1,s]];for(;h.length>0;){const[t,n,s]=h.at(-1);if(n+1===t.children.length){h.pop();continue}const o=t.children[++h.at(-1)[1]];if(null===o)continue;const{name:c}=o;if("#text"===c){const t=document.createTextNode(o.value);l.push(t),s.append(t);continue}const d=o?.attributes?.xmlns?document.createElementNS(o.attributes.xmlns,c):document.createElement(c);if(s.append(d),o.attributes&&this.setAttributes({html:d,element:o,storage:e,intent:r,linkService:i}),o.children?.length>0)h.push([o,-1,d]);else if(o.value){const t=document.createTextNode(o.value);a&&Fi.shouldBuildText(c)&&l.push(t),d.append(t)}}for(const t of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const un=1e3,pn=new WeakSet;function fn(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class gn{static create(t){switch(t.data.annotationType){case E:return new bn(t);case T:return new xn(t);case V:switch(t.data.fieldType){case"Tx":return new yn(t);case"Btn":return t.data.radioButton?new An(t):t.data.checkBox?new kn(t):new Sn(t);case"Ch":return new Cn(t);case"Sig":return new wn(t)}return new vn(t);case G:return new _n(t);case N:return new Tn(t);case P:return new En(t);case L:return new Nn(t);case I:return new Pn(t);case O:return new Ln(t);case q:return new Rn(t);case j:return new On(t);case R:return new In(t);case D:return new Dn(t);case z:return new zn(t);case F:return new Fn(t);case B:return new Bn(t);case H:return new Hn(t);case X:return new qn(t);default:return new mn(t)}}}class mn{#Bn=null;#Hn=!1;#qn=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return mn._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#Bn||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#jn(e),this.#qn?.popup.updateEdited(t)}resetEdited(){this.#Bn&&(this.#jn(this.#Bn.rect),this.#qn?.popup.resetEdited(),this.#Bn=null)}#jn(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;i?.splice(0,4,...t);const{width:l,height:h}=fn(t);e.left=100*(t[0]-a)/r+"%",e.top=100*(s-t[3]+o)/s+"%",0===n?(e.width=100*l/r+"%",e.height=100*h/s+"%"):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof vn||(r.tabIndex=un);const{style:s}=r;if(s.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof _n){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,r),r}const{width:a,height:o}=fn(e.rect);if(!t&&e.borderStyle.width>0){s.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;s.borderRadius=e}else if(this instanceof An){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;s.borderRadius=t}switch(e.borderStyle.style){case W:s.borderStyle="solid";break;case Y:s.borderStyle="dashed";break;case U:case $:rt();break;case K:s.borderBottomStyle="solid"}const n=e.borderColor||null;n?(this.#Hn=!0,s.borderColor=kt.makeHexColor(0|n[0],0|n[1],0|n[2])):s.borderWidth=0}const l=kt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:d,pageY:u}=n.rawDims;s.left=100*(l[0]-d)/h+"%",s.top=100*(l[1]-u)/c+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(s.width=100*a/h+"%",s.height=100*o/c+"%"):this.setRotation(p,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:s}=fn(this.data.rect);let a,o;t%180==0?(a=100*r/i,o=100*s/n):(a=100*s/i,o=100*r/n),e.style.width=`${a}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const n=i.detail[t],r=n[0],s=n.slice(1);i.target.style[e]=ln[`${r}_HTML`](s),this.annotationStorage.setValue(this.data.id,{[e]:ln[`${r}_rgb`](s)})};return lt(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||i[n];r?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,r]of Object.entries(e)){const s=i[n];if(s){s({detail:{[n]:r},target:t}),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,r]=this.data.rect.map((t=>Math.fround(t)));if(8===t.length){const[s,a,o,l]=t.subarray(2,6);if(n===s&&r===a&&e===o&&i===l)return}const{style:s}=this.container;let a;if(this.#Hn){const{borderColor:t,borderWidth:e}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=n-e,l=r-i,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);const d=h.createElement("defs");c.append(d);const u=h.createElement("clipPath"),p=`clippath_${this.data.id}`;u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),d.append(u);for(let i=2,n=t.length;i<n;i+=8){const n=t[i],s=t[i+1],c=t[i+2],d=t[i+3],p=h.createElement("rect"),f=(c-e)/o,g=(r-s)/l,m=(n-c)/o,b=(s-d)/l;p.setAttribute("x",f),p.setAttribute("y",g),p.setAttribute("width",m),p.setAttribute("height",b),u.append(p),a?.push(`<rect vector-effect="non-scaling-stroke" x="${f}" y="${g}" width="${m}" height="${b}"/>`)}this.#Hn&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:t}=this,e=this.#qn=new _n({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){st("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:t,id:r,exportValues:s}of n){if(-1===t)continue;if(r===e)continue;const n="string"==typeof s?s:null,a=document.querySelector(`[data-element-id="${r}"]`);!a||pn.has(a)?i.push({id:r,exportValue:n,domElement:a}):rt()}return i}for(const n of document.getElementsByName(t)){const{exportValue:t}=n,r=n.getAttribute("data-element-id");r!==e&&(pn.has(n)&&i.push({id:r,exportValue:t,domElement:n}))}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class bn extends mn{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#Gn(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#Xn(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#Vn(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#Vn()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#Vn()}#Gn(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#Vn()}#Xn(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#Vn()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=i.get(n);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#Vn()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#Vn(),!this._fieldObjects)return rt(),void(i||(t.onclick=()=>!1));t.onclick=()=>{i?.();const{fields:t,refs:n,include:r}=e,s=[];if(0!==t.length||0!==n.length){const e=new Set(n);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===r&&s.push(i)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,o=[];for(const t of s){const{id:e}=t;switch(o.push(e),t.type){case"text":{const i=t.defaultValue||"";a.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;a.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";a.setValue(e,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${e}"]`);i&&(pn.has(i)?i.dispatchEvent(new Event("resetform")):rt())}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}),!1}}}class xn extends mn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class vn extends mn{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return yt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,r){i.includes("mouse")?t.addEventListener(i,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(t)}})}))}_setEventListeners(t,e,i,n){for(const[r,s]of i)("Action"===s||this.data.actions?.[s])&&("Focus"!==s&&"Blur"!==s||(e||={focused:!1}),this._setEventListener(t,e,r,s,n),"Focus"!==s||this.data.actions?.Blur?"Blur"!==s||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":kt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,r=t.style;let s;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(l*n))||1);s=Math.min(n,a(e/l))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(n,a(t/l))}r.fontSize=`calc(${s}px * var(--scale-factor))`,r.color=kt.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class yn extends vn{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,n){const r=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=i),r.setValue(s.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let r=n.value||"";const s=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;s&&r.length>s&&(r=r.slice(0,s));let a=n.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const o={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),pn.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=un,this._setRequired(i,this.data.required),s&&(i.maxLength=s),i.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),o.formattedValue=null})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=o.userValue=e,o.formattedValue=null}));let l=t=>{const{formattedValue:e}=o;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{if(o.focused)return;const{target:e}=t;o.userValue&&(e.value=o.userValue),o.lastCommittedValue=e.value,o.commitKey=1,this.data.actions?.Focus||(o.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target);const n={value(i){o.userValue=i.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){const{formattedValue:n}=i.detail;o.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{const{charLimit:n}=i.detail,{target:r}=i;if(0===n)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",n);let s=o.userValue;!s||s.length<=n||(s=s.slice(0,n),r.value=o.userValue=s,t.setValue(e,{value:s}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(n,i)})),i.addEventListener("keydown",(t=>{o.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(o.commitKey=3):i=2,-1===i)return;const{value:n}=t.target;o.lastCommittedValue!==n&&(o.lastCommittedValue=n,o.userValue=n,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const n=l;l=null,i.addEventListener("blur",(t=>{if(!o.focused||!t.relatedTarget)return;this.data.actions?.Blur||(o.focused=!1);const{value:i}=t.target;o.userValue=i,o.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:o.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),n(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{o.lastCommittedValue=null;const{data:i,target:n}=t,{value:r,selectionStart:s,selectionEnd:a}=n;let l=s,h=a;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,s).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(s).match(/^[^\w]*\w*/);t&&(h+=t[0].length);break}case"deleteContentBackward":s===a&&(l-=1);break;case"deleteContentForward":s===a&&(h+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(l&&i.addEventListener("blur",l),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/s;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wn extends vn{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class kn extends vn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return pn.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=un,r.addEventListener("change",(n=>{const{name:r,checked:s}=n.target;for(const n of this._getElementsByName(r,i)){const i=s&&n.exportValue===e.exportValue;n.domElement&&(n.domElement.checked=i),t.setValue(n.id,{value:i})}t.setValue(i,{value:s})})),r.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class An extends vn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const n of this._getElementsByName(e.fieldName,i))t.setValue(n.id,{value:!1});const r=document.createElement("input");if(pn.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=un,r.addEventListener("change",(e=>{const{name:n,checked:r}=e.target;for(const e of this._getElementsByName(n,i))t.setValue(e.id,{value:!1});t.setValue(i,{value:r})})),r.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;r.addEventListener("updatefromsandbox",(e=>{const r={value:e=>{const r=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=r&&n.id===i;n.domElement&&(n.domElement.checked=e),t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Sn extends bn{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class Cn extends vn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");pn.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=un;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of n.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,i.value.includes(t.exportValue)&&(e.setAttribute("selected",!0),r=!1),n.append(e)}let s=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),n.prepend(t),s=()=>{t.remove(),n.removeEventListener("input",s),s=null},n.addEventListener("input",s)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:r}=n;return r?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",(i=>{const r={value(i){s?.();const r=i.detail.value,l=new Set(Array.isArray(r)?r:[r]);for(const t of n.options)t.selected=l.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){n.multiple=!0},remove(i){const r=n.options,s=i.detail.remove;if(r[s].selected=!1,n.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,(t=>t.selected))&&(r[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==n.length;)n.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:r,displayValue:s,exportValue:h}=i.detail.insert,c=n.children[r],d=document.createElement("option");d.textContent=s,d.value=h,c?c.before(d):n.append(d),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(const t of r){const{displayValue:e,exportValue:i}=t,r=document.createElement("option");r.textContent=e,r.value=i,n.append(r)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const n=new Set(i.detail.indices);for(const t of i.target.options)t.selected=n.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,i)})),n.addEventListener("input",(i=>{const n=a(!0),r=a(!1);t.setValue(e,{value:n}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:r,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):n.addEventListener("input",(function(i){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class _n extends mn{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:mn._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Mn({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${_t}${t}`)).join(",")),this.container}}class Mn{#Wn=this.#Yn.bind(this);#Un=this.#$n.bind(this);#Kn=this.#Zn.bind(this);#Jn=this.#Qn.bind(this);#tr=null;#pt=null;#er=null;#ir=null;#nr=null;#rr=null;#sr=null;#ar=!1;#or=null;#_=null;#lr=null;#hr=null;#cr=null;#Bn=null;#dr=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:r,contentsObj:s,richText:a,parent:o,rect:l,parentRect:h,open:c}){this.#pt=t,this.#cr=n,this.#er=s,this.#hr=a,this.#rr=o,this.#tr=e,this.#lr=l,this.#sr=h,this.#nr=i,this.#ir=Ht.toDateObject(r),this.trigger=i.flatMap((t=>t.getElementsToTriggerPopup()));for(const t of this.trigger)t.addEventListener("click",this.#Jn),t.addEventListener("mouseenter",this.#Kn),t.addEventListener("mouseleave",this.#Un),t.classList.add("popupTriggerArea");for(const t of i)t.container?.addEventListener("keydown",this.#Wn);this.#pt.hidden=!0,c&&this.#Qn()}render(){if(this.#or)return;const t=this.#or=document.createElement("div");if(t.className="popup",this.#tr){const e=t.style.outlineColor=kt.makeHexColor(...this.#tr);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;t.style.backgroundColor=kt.makeHexColor(...this.#tr.map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#cr),t.append(e),this.#ir){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#ir.valueOf()})),e.append(t)}const n=this.#ur;if(n)dn.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(this.#er);t.append(e)}this.#pt.append(t)}get#ur(){const t=this.#hr,e=this.#er;return!t?.str||e?.str&&e.str!==t.str?null:this.#hr.html||null}get#pr(){return this.#ur?.attributes?.style?.fontSize||0}get#fr(){return this.#ur?.attributes?.style?.color||null}#gr(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#fr,fontSize:this.#pr?`calc(${this.#pr}px * var(--scale-factor))`:""}};for(const i of t.split("\n"))e.push({name:"span",value:i,attributes:n});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t){const r=n[t];i.append(document.createTextNode(r)),t<e-1&&i.append(document.createElement("br"))}return i}#Yn(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#ar)&&this.#Qn()}updateEdited({rect:t,popupContent:e}){this.#Bn||={contentsObj:this.#er,richText:this.#hr},t&&(this.#_=null),e&&(this.#hr=this.#gr(e),this.#er=null),this.#or?.remove(),this.#or=null}resetEdited(){this.#Bn&&(({contentsObj:this.#er,richText:this.#hr}=this.#Bn),this.#Bn=null,this.#or?.remove(),this.#or=null,this.#_=null)}#mr(){if(null!==this.#_)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:r}}}=this.#rr;let s=!!this.#sr,a=s?this.#sr:this.#lr;for(const t of this.#nr)if(!a||null!==kt.intersect(t.data.rect,a)){a=t.data.rect,s=!0;break}const o=kt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=s?a[2]-a[0]+5:0,h=o[0]+l,c=o[1];this.#_=[100*(h-n)/e,100*(c-r)/i];const{style:d}=this.#pt;d.left=`${this.#_[0]}%`,d.top=`${this.#_[1]}%`}#Qn(){this.#ar=!this.#ar,this.#ar?(this.#Zn(),this.#pt.addEventListener("click",this.#Jn),this.#pt.addEventListener("keydown",this.#Wn)):(this.#$n(),this.#pt.removeEventListener("click",this.#Jn),this.#pt.removeEventListener("keydown",this.#Wn))}#Zn(){this.#or||this.render(),this.isVisible?this.#ar&&this.#pt.classList.add("focused"):(this.#mr(),this.#pt.hidden=!1,this.#pt.style.zIndex=parseInt(this.#pt.style.zIndex)+1e3)}#$n(){this.#pt.classList.remove("focused"),!this.#ar&&this.isVisible&&(this.#pt.hidden=!0,this.#pt.style.zIndex=parseInt(this.#pt.style.zIndex)-1e3)}forceHide(){this.#dr=this.isVisible,this.#dr&&(this.#pt.hidden=!0)}maybeShow(){this.#dr&&(this.#or||this.#Zn(),this.#dr=!1,this.#pt.hidden=!1)}get isVisible(){return!1===this.#pt.hidden}}class Tn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=x.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class En extends mn{#br=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=fn(t.rect),n=this.svgFactory.create(e,i,!0),r=this.#br=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#br}addHighlightArea(){this.container.classList.add("highlightArea")}}class Nn extends mn{#xr=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=fn(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,s=this.#xr=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",i-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#xr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Pn extends mn{#vr=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=fn(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,s=this.#vr=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",i/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",i/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#vr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ln extends mn{#yr=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n}}=this;if(!e)return this.container;const{width:r,height:s}=fn(t),a=this.svgFactory.create(r,s,!0);let o=[];for(let i=0,n=e.length;i<n;i+=2){const n=e[i]-t[0],r=t[3]-e[i+1];o.push(`${n},${r}`)}o=o.join(" ");const l=this.#yr=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",o),l.setAttribute("stroke-width",i.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#yr}addHighlightArea(){this.container.classList.add("highlightArea")}}class In extends Ln{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Rn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class On extends mn{#wr=null;#kr=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?x.HIGHLIGHT:x.INK}#Ar(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:n,popupRef:r}}=this,{transform:s,width:a,height:o}=this.#Ar(e,t),l=this.svgFactory.create(a,o,!0),h=this.#wr=this.svgFactory.createElement("svg:g");l.append(h),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",s);for(let t=0,e=i.length;t<e;t++){const e=this.svgFactory.createElement(this.svgElementName);this.#kr.push(e),e.setAttribute("points",i[t].join(",")),h.append(e)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:n}=t,r=this.#wr;if(e>=0&&r.setAttribute("stroke-width",e||1),i)for(let t=0,e=this.#kr.length;t<e;t++)this.#kr[t].setAttribute("points",i[t].join(","));if(n){const{transform:t,width:e,height:i}=this.#Ar(this.data.rotation,n);r.parentElement.setAttribute("viewBox",`0 0 ${e} ${i}`),r.setAttribute("transform",t)}}getElementsToTriggerPopup(){return this.#kr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=x.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class zn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Fn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Bn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Hn extends mn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=x.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class qn extends mn{#Sr=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#Cr.bind(this)),this.#Sr=i;const{isMac:n}=yt.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(n?t.metaKey:t.ctrlKey)&&this.#Cr()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#Sr}addHighlightArea(){this.container.classList.add("highlightArea")}#Cr(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class jn{#_r=null;#Mr=null;#Tr=new Map;#Er=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:s,structTreeLayer:a}){this.div=t,this.#_r=e,this.#Mr=i,this.#Er=a||null,this.page=r,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#Tr.size>0}async#Nr(t,e){const i=t.firstChild||t,n=i.id=`${_t}${e}`,r=await(this.#Er?.getAriaAttributes(n));if(r)for(const[t,e]of r)i.setAttribute(t,e);this.div.append(t),this.#_r?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;Vt(i,this.viewport);const n=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new cn,annotationStorage:t.annotationStorage||new de,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const t of e){if(t.noHTML)continue;const e=t.annotationType===G;if(e){const e=n.get(t.id);if(!e)continue;r.elements=e}else{const{width:e,height:i}=fn(t.rect);if(e<=0||i<=0)continue}r.data=t;const i=gn.create(r);if(!i.isRenderable)continue;if(!e&&t.popupRef){const e=n.get(t.popupRef);e?e.push(i):n.set(t.popupRef,[i])}const s=i.render();t.hidden&&(s.style.visibility="hidden"),await this.#Nr(s,t.id),i._isEditable&&(this.#Tr.set(i.data.id,i),this._annotationEditorUIManager?.renderAnnotationElement(i))}this.#Pr()}update({viewport:t}){const e=this.div;this.viewport=t,Vt(e,{rotation:t.rotation}),this.#Pr(),e.hidden=!1}#Pr(){if(!this.#Mr)return;const t=this.div;for(const[e,i]of this.#Mr){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:r}=n;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}this.#Mr.clear()}getEditableAnnotations(){return Array.from(this.#Tr.values())}getEditableAnnotation(t){return this.#Tr.get(t)}}const Gn=/\r\n?|\n/g;class Xn extends re{#tr;#Lr="";#Ir=`${this.id}-editor`;#Rr=null;#pr;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Xn.prototype,e=t=>t.isEmpty(),i=ee.TRANSLATE_SMALL,n=ee.TRANSLATE_BIG;return lt(this,"_keyboardManager",new Qt([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=x.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#tr=t.color||Xn._defaultColor||re._defaultLineColor,this.#pr=t.fontSize||Xn._defaultFontSize}static initialize(t,e){re.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case v.FREETEXT_SIZE:Xn._defaultFontSize=e;break;case v.FREETEXT_COLOR:Xn._defaultColor=e}}updateParams(t,e){switch(t){case v.FREETEXT_SIZE:this.#Or(e);break;case v.FREETEXT_COLOR:this.#Dr(e)}}static get defaultPropertiesToUpdate(){return[[v.FREETEXT_SIZE,Xn._defaultFontSize],[v.FREETEXT_COLOR,Xn._defaultColor||re._defaultLineColor]]}get propertiesToUpdate(){return[[v.FREETEXT_SIZE,this.#pr],[v.FREETEXT_COLOR,this.#tr]]}#Or(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#pr)*this.parentScale),this.#pr=t,this.#zr()},i=this.#pr;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:v.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Dr(t){const e=t=>{this.#tr=this.editorDiv.style.color=t},i=this.#tr;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:v.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Xn._internalPadding*t,-(Xn._internalPadding+this.#pr)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(x.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#Rr=new AbortController;const t=this._uiManager.combinedSignal(this.#Rr);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Ir),this._isDraggable=!0,this.#Rr?.abort(),this.#Rr=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#Fr(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&"BR"===i.nodeName||(t.push(Xn.#Br(i)),e=i);return t.join("\n")}#zr(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,n=e.style.display,r=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=n,e.classList.toggle("hidden",r)}this.rotation%180==this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#Lr,e=this.#Lr=this.#Fr().trimEnd();if(t===e)return;const i=t=>{this.#Lr=t,t?(this.#Hr(),this._uiManager.rebuild(this),this.#zr()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#zr()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Xn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Ir),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#pr}px * var(--scale-factor))`,i.color=this.#tr,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),$t(this,this.div,["dblclick","keydown"]),this.width){const[i,n]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[h,c]=this.pageTranslation;let d,u;switch(this.rotation){case 0:d=t+(r[0]-h)/o,u=e+this.height-(r[1]-c)/l;break;case 90:d=t+(r[0]-h)/o,u=e-(r[1]-c)/l,[s,a]=[a,-s];break;case 180:d=t-this.width+(r[0]-h)/o,u=e-(r[1]-c)/l,[s,a]=[-s,-a];break;case 270:d=t+(r[0]-h-this.height*l)/o,u=e+(r[1]-c-this.width*o)/l,[s,a]=[-a,s]}this.setAt(d*i,u*n,s,a)}else this.setAt(t*i,e*n,this.width*i,this.height*n);this.#Hr(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#Br(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Gn,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const n=Xn.#qr(e.getData("text")||"").replaceAll(Gn,"\n");if(!n)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!n.includes("\n"))return s.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],h=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(h.push(a.nodeValue.slice(o).replaceAll(Gn,"")),t!==this.editorDiv){let e=l;for(const i of this.editorDiv.childNodes)i!==t?e.push(Xn.#Br(i)):e=h}l.push(a.nodeValue.slice(0,o).replaceAll(Gn,""))}else if(a===this.editorDiv){let t=l,e=0;for(const i of this.editorDiv.childNodes)e++===o&&(t=h),t.push(Xn.#Br(i))}this.#Lr=`${l.join("\n")}${n}${h.join("\n")}`,this.#Hr();const c=new Range;let d=l.reduce(((t,e)=>t+e.length),0);for(const{firstChild:t}of this.editorDiv.childNodes)if(t.nodeType===Node.TEXT_NODE){const e=t.nodeValue.length;if(d<=e){c.setStart(t,d),c.setEnd(t,d);break}d-=e}r.removeAllRanges(),r.addRange(c)}#Hr(){if(this.editorDiv.replaceChildren(),this.#Lr)for(const t of this.#Lr.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#jr(){return this.#Lr.replaceAll(""," ")}static#qr(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,i){let n=null;if(t instanceof Tn){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:r,rotation:s,id:a,popupRef:o},textContent:l,textPosition:h,parent:{page:{pageNumber:c}}}=t;if(!l||0===l.length)return null;n=t={annotationType:x.FREETEXT,color:Array.from(i),fontSize:e,value:l.join("\n"),position:h,pageIndex:c-1,rect:r.slice(0),rotation:s,id:a,deleted:!1,popupRef:o}}const r=await super.deserialize(t,e,i);return r.#pr=t.fontSize,r.#tr=kt.makeHexColor(...t.color),r.#Lr=Xn.#qr(t.value),r.annotationElementId=t.id||null,r._initialData=n,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Xn._internalPadding*this.parentScale,i=this.getRect(e,e),n=re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#tr),r={annotationType:x.FREETEXT,color:n,fontSize:this.#pr,value:this.#jr(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!this.#Gr(r)?null:(r.id=this.annotationElementId,r)}#Gr(t){const{value:e,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==n[e]))||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#pr}px * var(--scale-factor))`,i.color=this.#tr,e.replaceChildren();for(const t of this.#Lr.split("\n")){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),e.append(i)}const n=Xn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#Lr}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Vn{static PRECISION=1e-4;toSVGPath(){st("Abstract method `toSVGPath` must be implemented.")}get box(){st("Abstract getter `box` must be implemented.")}serialize(t,e){st("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,n,r,s){s||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a]*n,s[a+1]=i+t[a+1]*r;return s}static _rescaleAndSwap(t,e,i,n,r,s){s||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a+1]*n,s[a+1]=i+t[a]*r;return s}static _translate(t,e,i,n){n||=new Float32Array(t.length);for(let r=0,s=t.length;r<s;r+=2)n[r]=e+t[r],n[r+1]=i+t[r+1];return n}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,i,n,r){switch(r){case 90:return[1-e/i,t/n];case 180:return[1-t/i,1-e/n];case 270:return[e/i,1-t/n];default:return[t/i,e/n]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,n,r,s){return[(t+5*i)/6,(e+5*n)/6,(5*i+r)/6,(5*n+s)/6,(i+r)/2,(n+s)/2]}}class Wn{#Xr;#Vr=[];#Wr;#Yr;#Ur=[];#$r=new Float32Array(18);#Kr;#Zr;#Jr;#Qr;#ts;#es;#is=[];static#ns=8;static#rs=2;static#ss=Wn.#ns+Wn.#rs;constructor({x:t,y:e},i,n,r,s,a=0){this.#Xr=i,this.#es=r*n,this.#Yr=s,this.#$r.set([NaN,NaN,NaN,NaN,t,e],6),this.#Wr=a,this.#Qr=Wn.#ns*n,this.#Jr=Wn.#ss*n,this.#ts=n,this.#is.push(t,e)}isEmpty(){return isNaN(this.#$r[8])}#as(){const t=this.#$r.subarray(4,6),e=this.#$r.subarray(16,18),[i,n,r,s]=this.#Xr;return[(this.#Kr+(t[0]-e[0])/2-i)/r,(this.#Zr+(t[1]-e[1])/2-n)/s,(this.#Kr+(e[0]-t[0])/2-i)/r,(this.#Zr+(e[1]-t[1])/2-n)/s]}add({x:t,y:e}){this.#Kr=t,this.#Zr=e;const[i,n,r,s]=this.#Xr;let[a,o,l,h]=this.#$r.subarray(8,12);const c=t-l,d=e-h,u=Math.hypot(c,d);if(u<this.#Jr)return!1;const p=u-this.#Qr,f=p/u,g=f*c,m=f*d;let b=a,x=o;a=l,o=h,l+=g,h+=m,this.#is?.push(t,e);const v=g/p,y=-m/p*this.#es,w=v*this.#es;if(this.#$r.set(this.#$r.subarray(2,8),0),this.#$r.set([l+y,h+w],4),this.#$r.set(this.#$r.subarray(14,18),12),this.#$r.set([l-y,h-w],16),isNaN(this.#$r[6]))return 0===this.#Ur.length&&(this.#$r.set([a+y,o+w],2),this.#Ur.push(NaN,NaN,NaN,NaN,(a+y-i)/r,(o+w-n)/s),this.#$r.set([a-y,o-w],14),this.#Vr.push(NaN,NaN,NaN,NaN,(a-y-i)/r,(o-w-n)/s)),this.#$r.set([b,x,a,o,l,h],6),!this.isEmpty();this.#$r.set([b,x,a,o,l,h],6);return Math.abs(Math.atan2(x-o,b-a)-Math.atan2(m,g))<Math.PI/2?([a,o,l,h]=this.#$r.subarray(2,6),this.#Ur.push(NaN,NaN,NaN,NaN,((a+l)/2-i)/r,((o+h)/2-n)/s),[a,o,b,x]=this.#$r.subarray(14,18),this.#Vr.push(NaN,NaN,NaN,NaN,((b+a)/2-i)/r,((x+o)/2-n)/s),!0):([b,x,a,o,l,h]=this.#$r.subarray(0,6),this.#Ur.push(((b+5*a)/6-i)/r,((x+5*o)/6-n)/s,((5*a+l)/6-i)/r,((5*o+h)/6-n)/s,((a+l)/2-i)/r,((o+h)/2-n)/s),[l,h,a,o,b,x]=this.#$r.subarray(12,18),this.#Vr.push(((b+5*a)/6-i)/r,((x+5*o)/6-n)/s,((5*a+l)/6-i)/r,((5*o+h)/6-n)/s,((a+l)/2-i)/r,((o+h)/2-n)/s),!0)}toSVGPath(){if(this.isEmpty())return"";const t=this.#Ur,e=this.#Vr;if(isNaN(this.#$r[6])&&!this.isEmpty())return this.#os();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let e=6;e<t.length;e+=6)isNaN(t[e])?i.push(`L${t[e+4]} ${t[e+5]}`):i.push(`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} ${t[e+5]}`);this.#ls(i);for(let t=e.length-6;t>=6;t-=6)isNaN(e[t])?i.push(`L${e[t+4]} ${e[t+5]}`):i.push(`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`);return this.#hs(i),i.join(" ")}#os(){const[t,e,i,n]=this.#Xr,[r,s,a,o]=this.#as();return`M${(this.#$r[2]-t)/i} ${(this.#$r[3]-e)/n} L${(this.#$r[4]-t)/i} ${(this.#$r[5]-e)/n} L${r} ${s} L${a} ${o} L${(this.#$r[16]-t)/i} ${(this.#$r[17]-e)/n} L${(this.#$r[14]-t)/i} ${(this.#$r[15]-e)/n} Z`}#hs(t){const e=this.#Vr;t.push(`L${e[4]} ${e[5]} Z`)}#ls(t){const[e,i,n,r]=this.#Xr,s=this.#$r.subarray(4,6),a=this.#$r.subarray(16,18),[o,l,h,c]=this.#as();t.push(`L${(s[0]-e)/n} ${(s[1]-i)/r} L${o} ${l} L${h} ${c} L${(a[0]-e)/n} ${(a[1]-i)/r}`)}newFreeDrawOutline(t,e,i,n,r,s){return new Yn(t,e,i,n,r,s)}getOutlines(){const t=this.#Ur,e=this.#Vr,i=this.#$r,[n,r,s,a]=this.#Xr,o=new Float32Array((this.#is?.length??0)+2);for(let t=0,e=o.length-2;t<e;t+=2)o[t]=(this.#is[t]-n)/s,o[t+1]=(this.#is[t+1]-r)/a;if(o[o.length-2]=(this.#Kr-n)/s,o[o.length-1]=(this.#Zr-r)/a,isNaN(i[6])&&!this.isEmpty())return this.#cs(o);const l=new Float32Array(this.#Ur.length+24+this.#Vr.length);let h=t.length;for(let e=0;e<h;e+=2)isNaN(t[e])?l[e]=l[e+1]=NaN:(l[e]=t[e],l[e+1]=t[e+1]);h=this.#ds(l,h);for(let t=e.length-6;t>=6;t-=6)for(let i=0;i<6;i+=2)isNaN(e[t+i])?(l[h]=l[h+1]=NaN,h+=2):(l[h]=e[t+i],l[h+1]=e[t+i+1],h+=2);return this.#us(l,h),this.newFreeDrawOutline(l,o,this.#Xr,this.#ts,this.#Wr,this.#Yr)}#cs(t){const e=this.#$r,[i,n,r,s]=this.#Xr,[a,o,l,h]=this.#as(),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-n)/s,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-n)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-n)/s,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-n)/s],0),this.newFreeDrawOutline(c,t,this.#Xr,this.#ts,this.#Wr,this.#Yr)}#us(t,e){const i=this.#Vr;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+6}#ds(t,e){const i=this.#$r.subarray(4,6),n=this.#$r.subarray(16,18),[r,s,a,o]=this.#Xr,[l,h,c,d]=this.#as();return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o],e),e+24}}class Yn extends Vn{#Xr;#ps=new Float32Array(4);#Wr;#Yr;#is;#ts;#fs;constructor(t,e,i,n,r,s){super(),this.#fs=t,this.#is=e,this.#Xr=i,this.#ts=n,this.#Wr=r,this.#Yr=s,this.lastPoint=[NaN,NaN],this.#gs(s);const[a,o,l,h]=this.#ps;for(let e=0,i=t.length;e<i;e+=2)t[e]=(t[e]-a)/l,t[e+1]=(t[e+1]-o)/h;for(let t=0,i=e.length;t<i;t+=2)e[t]=(e[t]-a)/l,e[t+1]=(e[t+1]-o)/h}toSVGPath(){const t=[`M${this.#fs[4]} ${this.#fs[5]}`];for(let e=6,i=this.#fs.length;e<i;e+=6)isNaN(this.#fs[e])?t.push(`L${this.#fs[e+4]} ${this.#fs[e+5]}`):t.push(`C${this.#fs[e]} ${this.#fs[e+1]} ${this.#fs[e+2]} ${this.#fs[e+3]} ${this.#fs[e+4]} ${this.#fs[e+5]}`);return t.push("Z"),t.join(" ")}serialize([t,e,i,n],r){const s=i-t,a=n-e;let o,l;switch(r){case 0:o=Vn._rescale(this.#fs,t,n,s,-a),l=Vn._rescale(this.#is,t,n,s,-a);break;case 90:o=Vn._rescaleAndSwap(this.#fs,t,e,s,a),l=Vn._rescaleAndSwap(this.#is,t,e,s,a);break;case 180:o=Vn._rescale(this.#fs,i,e,-s,a),l=Vn._rescale(this.#is,i,e,-s,a);break;case 270:o=Vn._rescaleAndSwap(this.#fs,i,n,-s,-a),l=Vn._rescaleAndSwap(this.#is,i,n,-s,-a)}return{outline:Array.from(o),points:[Array.from(l)]}}#gs(t){const e=this.#fs;let i=e[4],n=e[5],r=i,s=n,a=i,o=n,l=i,h=n;const c=t?Math.max:Math.min;for(let t=6,d=e.length;t<d;t+=6){if(isNaN(e[t]))r=Math.min(r,e[t+4]),s=Math.min(s,e[t+5]),a=Math.max(a,e[t+4]),o=Math.max(o,e[t+5]),h<e[t+5]?(l=e[t+4],h=e[t+5]):h===e[t+5]&&(l=c(l,e[t+4]));else{const d=kt.bezierBoundingBox(i,n,...e.slice(t,t+6));r=Math.min(r,d[0]),s=Math.min(s,d[1]),a=Math.max(a,d[2]),o=Math.max(o,d[3]),h<d[3]?(l=d[2],h=d[3]):h===d[3]&&(l=c(l,d[2]))}i=e[t+4],n=e[t+5]}const d=this.#ps;d[0]=r-this.#Wr,d[1]=s-this.#Wr,d[2]=a-r+2*this.#Wr,d[3]=o-s+2*this.#Wr,this.lastPoint=[l,h]}get box(){return this.#ps}newOutliner(t,e,i,n,r,s=0){return new Wn(t,e,i,n,r,s)}getNewOutline(t,e){const[i,n,r,s]=this.#ps,[a,o,l,h]=this.#Xr,c=r*l,d=s*h,u=i*l+a,p=n*h+o,f=this.newOutliner({x:this.#is[0]*c+u,y:this.#is[1]*d+p},this.#Xr,this.#ts,t,this.#Yr,e??this.#Wr);for(let t=2;t<this.#is.length;t+=2)f.add({x:this.#is[t]*c+u,y:this.#is[t+1]*d+p});return f.getOutlines()}}class Un{#Xr;#ms;#bs=[];#xs=[];constructor(t,e=0,i=0,n=!0){let r=1/0,s=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:i,y:n,width:h,height:c}of t){const t=Math.floor((i-e)/l)*l,d=Math.ceil((i+h+e)/l)*l,u=Math.floor((n-e)/l)*l,p=Math.ceil((n+c+e)/l)*l,f=[t,u,p,!0],g=[d,u,p,!1];this.#bs.push(f,g),r=Math.min(r,t),s=Math.max(s,d),a=Math.min(a,u),o=Math.max(o,p)}const h=s-r+2*i,c=o-a+2*i,d=r-i,u=a-i,p=this.#bs.at(n?-1:-2),f=[p[0],p[2]];for(const t of this.#bs){const[e,i,n]=t;t[0]=(e-d)/h,t[1]=(i-u)/c,t[2]=(n-u)/c}this.#Xr=new Float32Array([d,u,h,c]),this.#ms=f}getOutlines(){this.#bs.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of this.#bs)e[3]?(t.push(...this.#vs(e)),this.#ys(e)):(this.#ws(e),t.push(...this.#vs(e)));return this.#ks(t)}#ks(t){const e=[],i=new Set;for(const i of t){const[t,n,r]=i;e.push([t,n,i],[t,r,i])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let t=0,n=e.length;t<n;t+=2){const n=e[t][2],r=e[t+1][2];n.push(r),r.push(n),i.add(n),i.add(r)}const n=[];let r;for(;i.size>0;){const t=i.values().next().value;let[e,s,a,o,l]=t;i.delete(t);let h=e,c=s;for(r=[e,a],n.push(r);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,s,a,o,l]=t,h!==e&&(r.push(h,c,e,c===s?s:a),h=e),c=c===s?a:s}r.push(h,c)}return new $n(n,this.#Xr,this.#ms)}#As(t){const e=this.#xs;let i=0,n=e.length-1;for(;i<=n;){const r=i+n>>1,s=e[r][0];if(s===t)return r;s<t?i=r+1:n=r-1}return n+1}#ys([,t,e]){const i=this.#As(t);this.#xs.splice(i,0,[t,e])}#ws([,t,e]){const i=this.#As(t);for(let n=i;n<this.#xs.length;n++){const[i,r]=this.#xs[n];if(i!==t)break;if(i===t&&r===e)return void this.#xs.splice(n,1)}for(let n=i-1;n>=0;n--){const[i,r]=this.#xs[n];if(i!==t)break;if(i===t&&r===e)return void this.#xs.splice(n,1)}}#vs(t){const[e,i,n]=t,r=[[e,i,n]],s=this.#As(n);for(let t=0;t<s;t++){const[i,n]=this.#xs[t];for(let t=0,s=r.length;t<s;t++){const[,a,o]=r[t];if(!(n<=a||o<=i))if(a>=i)if(o>n)r[t][1]=n;else{if(1===s)return[];r.splice(t,1),t--,s--}else r[t][2]=i,o>n&&r.push([e,n,o])}}return r}}class $n extends Vn{#Xr;#Ss;constructor(t,e,i){super(),this.#Ss=t,this.#Xr=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#Ss){let[i,n]=e;t.push(`M${i} ${n}`);for(let r=2;r<e.length;r+=2){const s=e[r],a=e[r+1];s===i?(t.push(`V${a}`),n=a):a===n&&(t.push(`H${s}`),i=s)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],r){const s=[],a=i-t,o=n-e;for(const e of this.#Ss){const i=new Array(e.length);for(let r=0;r<e.length;r+=2)i[r]=t+e[r]*a,i[r+1]=n-e[r+1]*o;s.push(i)}return s}get box(){return this.#Xr}get classNamesForOutlining(){return["highlightOutline"]}}class Kn extends Wn{newFreeDrawOutline(t,e,i,n,r,s){return new Zn(t,e,i,n,r,s)}}class Zn extends Yn{newOutliner(t,e,i,n,r,s=0){return new Kn(t,e,i,n,r,s)}}class Jn{#Cs=null;#_s=null;#Ms;#Ts=null;#Es=!1;#Ns=!1;#s=null;#Ps;#Ls=null;#g=null;#Is;static#Rs=null;static get _keyboardManager(){return lt(this,"_keyboardManager",new Qt([[["Escape","mac+Escape"],Jn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jn.prototype._moveToPrevious],[["Home","mac+Home"],Jn.prototype._moveToBeginning],[["End","mac+End"],Jn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#Ns=!1,this.#Is=v.HIGHLIGHT_COLOR,this.#s=t):(this.#Ns=!0,this.#Is=v.HIGHLIGHT_DEFAULT_COLOR),this.#g=t?._uiManager||e,this.#Ps=this.#g._eventBus,this.#Ms=t?.color||this.#g?.highlightColors.values().next().value||"#FFFF98",Jn.#Rs||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#Cs=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#g._signal;t.addEventListener("click",this.#Os.bind(this),{signal:e}),t.addEventListener("keydown",this.#Yn.bind(this),{signal:e});const i=this.#_s=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#Ms,t.append(i),t}renderMainDropdown(){const t=this.#Ts=this.#Ds();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Ds(){const t=document.createElement("div"),e=this.#g._signal;t.addEventListener("contextmenu",Ft,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of this.#g.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",Jn.#Rs[i]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=n,r.setAttribute("aria-selected",n===this.#Ms),r.addEventListener("click",this.#zs.bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#Yn.bind(this),{signal:e}),t}#zs(t,e){e.stopPropagation(),this.#Ps.dispatch("switchannotationeditorparams",{source:this,type:this.#Is,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#Cs)return void this.#Os(t);const e=t.target.getAttribute("data-color");e&&this.#zs(e,t)}_moveToNext(t){this.#Fs?t.target!==this.#Cs?t.target.nextSibling?.focus():this.#Ts.firstChild?.focus():this.#Os(t)}_moveToPrevious(t){t.target!==this.#Ts?.firstChild&&t.target!==this.#Cs?(this.#Fs||this.#Os(t),t.target.previousSibling?.focus()):this.#Fs&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){this.#Fs?this.#Ts.firstChild?.focus():this.#Os(t)}_moveToEnd(t){this.#Fs?this.#Ts.lastChild?.focus():this.#Os(t)}#Yn(t){Jn._keyboardManager.exec(this,t)}#Os(t){if(this.#Fs)return void this.hideDropdown();if(this.#Es=0===t.detail,this.#Ls||(this.#Ls=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#g.combinedSignal(this.#Ls)})),this.#Ts)return void this.#Ts.classList.remove("hidden");const e=this.#Ts=this.#Ds();this.#Cs.append(e)}#h(t){this.#Ts?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#Ts?.classList.add("hidden"),this.#Ls?.abort(),this.#Ls=null}get#Fs(){return this.#Ts&&!this.#Ts.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#Ns||(this.#Fs?(this.hideDropdown(),this.#Cs.focus({preventScroll:!0,focusVisible:this.#Es})):this.#s?.unselect())}updateColor(t){if(this.#_s&&(this.#_s.style.backgroundColor=t),!this.#Ts)return;const e=this.#g.highlightColors.values();for(const i of this.#Ts.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#Cs?.remove(),this.#Cs=null,this.#_s=null,this.#Ts?.remove(),this.#Ts=null}}class Qn extends re{#Bs=null;#Hs=0;#qs;#js=null;#r=null;#Gs=null;#Xs=null;#Vs=0;#Ws=null;#Ys=null;#v=null;#Us=!1;#ms=null;#$s;#Ks=null;#Zs="";#es;#Js="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=x.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Qn.prototype;return lt(this,"_keyboardManager",new Qt([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Qn._defaultColor,this.#es=t.thickness||Qn._defaultThickness,this.#$s=t.opacity||Qn._defaultOpacity,this.#qs=t.boxes||null,this.#Js=t.methodOfCreation||"",this.#Zs=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#Us=!0,this.#Qs(t),this.#ta()):this.#qs&&(this.#Bs=t.anchorNode,this.#Hs=t.anchorOffset,this.#Xs=t.focusNode,this.#Vs=t.focusOffset,this.#ea(),this.#ta(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#Us?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#es,methodOfCreation:this.#Js}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#ea(){const t=new Un(this.#qs,.001);this.#Ys=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#Ys.box;const e=new Un(this.#qs,.0025,.001,"ltr"===this._uiManager.direction);this.#Gs=e.getOutlines();const{lastPoint:i}=this.#Gs;this.#ms=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#Qs({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#Ys=t;if(this.#Gs=t.getNewOutline(this.#es/2+1.5,.0025),e>=0)this.#v=e,this.#js=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#Ks=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#Gs.box,path:{d:this.#Gs.toSVGPath()}},!0);else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#v,{bbox:Qn.#ia(this.#Ys.box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#Ks,{bbox:Qn.#ia(this.#Gs.box,e),path:{d:this.#Gs.toSVGPath()}})}const[n,r,s,a]=t.box;switch(this.rotation){case 0:this.x=n,this.y=r,this.width=s,this.height=a;break;case 90:{const[t,e]=this.parentDimensions;this.x=r,this.y=1-n,this.width=s*e/t,this.height=a*t/e;break}case 180:this.x=1-n,this.y=1-r,this.width=s,this.height=a;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-r,this.y=n,this.width=s*e/t,this.height=a*t/e;break}}const{lastPoint:o}=this.#Gs;this.#ms=[(o[0]-n)/s,(o[1]-r)/a]}static initialize(t,e){re.initialize(t,e),Qn._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case v.HIGHLIGHT_DEFAULT_COLOR:Qn._defaultColor=e;break;case v.HIGHLIGHT_THICKNESS:Qn._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return this.#ms}updateParams(t,e){switch(t){case v.HIGHLIGHT_COLOR:this.#Dr(e);break;case v.HIGHLIGHT_THICKNESS:this.#na(e)}}static get defaultPropertiesToUpdate(){return[[v.HIGHLIGHT_DEFAULT_COLOR,Qn._defaultColor],[v.HIGHLIGHT_THICKNESS,Qn._defaultThickness]]}get propertiesToUpdate(){return[[v.HIGHLIGHT_COLOR,this.color||Qn._defaultColor],[v.HIGHLIGHT_THICKNESS,this.#es||Qn._defaultThickness],[v.HIGHLIGHT_FREE,this.#Us]]}#Dr(t){const e=(t,e)=>{this.color=t,this.#$s=e,this.parent?.drawLayer.updateProperties(this.#v,{root:{fill:t,"fill-opacity":e}}),this.#r?.updateColor(t)},i=this.color,n=this.#$s;this.addCommands({cmd:e.bind(this,t,Qn._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:v.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#na(t){const e=this.#es,i=t=>{this.#es=t,this.#ra(t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:v.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#r=new Jn({editor:this}),t.addColorPicker(this.#r)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#sa())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#sa())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#aa(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#ta(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#aa():t&&(this.#ta(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#ra(t){if(!this.#Us)return;this.#Qs({highlightOutlines:this.#Ys.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#aa(){null!==this.#v&&this.parent&&(this.parent.drawLayer.remove(this.#v),this.#v=null,this.parent.drawLayer.remove(this.#Ks),this.#Ks=null)}#ta(t=this.parent){null===this.#v&&(({id:this.#v,clipPathId:this.#js}=t.drawLayer.draw({bbox:this.#Ys.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#$s},rootClass:{highlight:!0,free:this.#Us},path:{d:this.#Ys.toSVGPath()}},!1,!0)),this.#Ks=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#Us},bbox:this.#Gs.box,path:{d:this.#Gs.toSVGPath()}},this.#Us),this.#Ws&&(this.#Ws.style.clipPath=this.#js))}static#ia([t,e,i,n],r){switch(r){case 90:return[1-e-n,t,n,i];case 180:return[1-t-i,1-e-n,i,n];case 270:return[e,1-t-i,n,i]}return[t,e,i,n]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#Us?(t=(t-this.rotation+360)%360,i=Qn.#ia(this.#Ys.box,t)):i=Qn.#ia([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#v,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#Ks,{bbox:Qn.#ia(this.#Gs.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#Zs&&(t.setAttribute("aria-label",this.#Zs),t.setAttribute("role","mark")),this.#Us?t.classList.add("free"):this.div.addEventListener("keydown",this.#oa.bind(this),{signal:this._uiManager._signal});const e=this.#Ws=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#js;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),$t(this,this.#Ws,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#Ks,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#Ks,{rootClass:{hovered:!1}})}#oa(t){Qn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#la(!0);break;case 1:case 3:this.#la(!1)}}#la(t){if(!this.#Bs)return;const e=window.getSelection();t?e.setPosition(this.#Bs,this.#Hs):e.setPosition(this.#Xs,this.#Vs)}select(){super.select(),this.#Ks&&this.parent?.drawLayer.updateProperties(this.#Ks,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#Ks&&(this.parent?.drawLayer.updateProperties(this.#Ks,{rootClass:{selected:!1}}),this.#Us||this.#la(!1))}get _mustFixPosition(){return!this.#Us}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#v,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#Ks,{rootClass:{hidden:!t}}))}#sa(){return this.#Us?this.rotation:0}#ha(){if(this.#Us)return null;const[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,r=this.#qs,s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:h,height:c}of r){const r=o*t+i,d=(1-l)*e+n;s[a]=s[a+4]=r,s[a+1]=s[a+3]=d,s[a+2]=s[a+6]=r+h*t,s[a+5]=s[a+7]=d-c*e,a+=8}return s}#ca(t){return this.#Ys.serialize(t,this.#sa())}static startHighlighting(t,e,{target:i,x:n,y:r}){const{x:s,y:a,width:o,height:l}=i.getBoundingClientRect(),h=new AbortController,c=t.combinedSignal(h),d=e=>{h.abort(),this.#da(t,e)};window.addEventListener("blur",d,{signal:c}),window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("pointerdown",Bt,{capture:!0,passive:!1,signal:c}),window.addEventListener("contextmenu",Ft,{signal:c}),i.addEventListener("pointermove",this.#ua.bind(this,t),{signal:c}),this._freeHighlight=new Kn({x:n,y:r},[s,a,o,l],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static#ua(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#da(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let n=null;if(t instanceof Dn){const{data:{quadPoints:e,rect:i,rotation:r,id:s,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:h}}}=t;n=t={annotationType:x.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:s,deleted:!1,popupRef:l}}else if(t instanceof On){const{data:{inkLists:e,rect:i,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:h}}}=t;n=t={annotationType:x.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:s,deleted:!1,popupRef:l}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=t,l=await super.deserialize(t,e,i);l.color=kt.makeHexColor(...r),l.#$s=o||1,a&&(l.#es=t.thickness),l.annotationElementId=t.id||null,l._initialData=n;const[h,c]=l.pageDimensions,[d,u]=l.pageTranslation;if(s){const t=l.#qs=[];for(let e=0;e<s.length;e+=8)t.push({x:(s[e]-d)/h,y:1-(s[e+1]-u)/c,width:(s[e+2]-s[e])/h,height:(s[e+1]-s[e+5])/c});l.#ea(),l.#ta(),l.rotate(l.rotation)}else if(a){l.#Us=!0;const t=a[0],i={x:t[0]-d,y:c-(t[1]-u)},n=new Kn(i,[0,0,h,c],1,l.#es/2,!0,.001);for(let e=0,r=t.length;e<r;e+=2)i.x=t[e]-d,i.y=c-(t[e+1]-u),n.add(i);const{id:r,clipPathId:s}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:n.toSVGPath()}},!0,!0);l.#Qs({highlightOutlines:n.getOutlines(),highlightId:r,clipPathId:s}),l.#ta()}return l}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=re._colorManager.convert(this.color),n={annotationType:x.HIGHLIGHT,color:i,opacity:this.#$s,thickness:this.#es,quadPoints:this.#ha(),outlines:this.#ca(e),pageIndex:this.pageIndex,rect:e,rotation:this.#sa(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#Gr(n)?null:(n.id=this.annotationElementId,n)}#Gr(t){const{color:e}=this._initialData;return t.color.some(((t,i)=>t!==e[i]))}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class tr{#pa=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){this.#pa[t]=e}toSVGProperties(){const t=this.#pa;return this.#pa=Object.create(null),{root:t}}reset(){this.#pa=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){st("Not implemented")}}class er extends re{#fa=null;#ga;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#ma=null;static#ba=null;static#xa=null;static#va=NaN;static#ya=null;static#wa=null;static#ka=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#ga=t.mustBeCommitted||!1,t.drawOutlines&&(this.#Aa(t),this.#ta())}#Aa({drawOutlines:t,drawId:e,drawingOptions:i}){this.#fa=t,this._drawingOptions||=i,e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#Sa(t,this.parent),this.#Ca(t.box)}#Sa(t,e){const{id:i}=e.drawLayer.draw(er._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[n,r]of Object.entries(e))i.has(n)?Object.assign(t[n],r):t[n]=r;return t}static getDefaultDrawingOptions(t){st("Not implemented")}static get typesMap(){st("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(er.#ma.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,n]of this.typesMap)t.push([i,e[n]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,n]of this.constructor.typesMap)t.push([i,e[n]]);return t}_updateProperty(t,e,i){const n=this._drawingOptions,r=n[e],s=t=>{n.updateProperty(e,t);const i=this.#fa.updateProperty(e,t);i&&this.#Ca(i),this.parent?.drawLayer.updateProperties(this._drawId,n.toSVGProperties())};this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,er._mergeSVGProperties(this.#fa.getPathResizingSVGProperties(this.#_a()),{bbox:this.#Ma()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,er._mergeSVGProperties(this.#fa.getPathResizedSVGProperties(this.#_a()),{bbox:this.#Ma()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#Ma(t,e)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,er._mergeSVGProperties(this.#fa.getPathTranslatedSVGProperties(this.#_a(),this.parentDimensions),{bbox:this.#Ma()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#ga&&(this.#ga=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#aa(),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#ta(),this.#Ca(this.#fa.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#aa()):t&&(this._uiManager.addShouldRescale(this),this.#ta(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#aa(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#ta(t=this.parent){null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=this.#Sa(this.#fa,t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))}#Ta([t,e,i,n]){const{parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[e,1-t,i*(s/r),n*(r/s)];case 180:return[1-t,1-e,i,n];case 270:return[1-e,t,i*(s/r),n*(r/s)];default:return[t,e,i,n]}}#_a(){const{x:t,y:e,width:i,height:n,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-e,t,i*(r/s),n*(s/r)];case 180:return[1-t,1-e,i,n];case 270:return[e,1-t,i*(r/s),n*(s/r)];default:return[t,e,i,n]}}#Ca(t){if([this.x,this.y,this.width,this.height]=this.#Ta(t),this.div){this.fixAndSetPosition();const[t,e]=this.parentDimensions;this.setDims(this.width*t,this.height*e)}this._onResized()}#Ma(){const{x:t,y:e,width:i,height:n,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-e-n,t,n,i];case 2:return[1-t-i,1-e-n,i,n];case 3:return[e,1-t-i,n,i];case 4:return[t,e-i*(a/o),n*(o/a),i*(a/o)];case 5:return[1-e,t,i*(a/o),n*(o/a)];case 6:return[1-t-n*(o/a),1-e,n*(o/a),i*(a/o)];case 7:return[e-i*(a/o),1-t-n*(o/a),i*(a/o),n*(o/a)];case 8:return[t-i,e-n,i,n];case 9:return[1-e,t-i,n,i];case 10:return[1-t,1-e,i,n];case 11:return[e-n,1-t,n,i];case 12:return[t-n*(o/a),e,n*(o/a),i*(a/o)];case 13:return[1-e-i*(a/o),t-n*(o/a),i*(a/o),n*(o/a)];case 14:return[1-t,1-e-i*(a/o),n*(o/a),i*(a/o)];case 15:return[e,1-t,i*(a/o),n*(o/a)];default:return[t,e,i,n]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,er._mergeSVGProperties({bbox:this.#Ma()},this.#fa.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#Ca(this.#fa.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const e=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal";const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,e,i,n,r){st("Not implemented")}static startDrawing(t,e,i,n){const{target:r,offsetX:s,offsetY:a,pointerId:o,pointerType:l}=n;if(er.#ya&&er.#ya!==l)return;const{viewport:{rotation:h}}=t,{width:c,height:d}=r.getBoundingClientRect(),u=er.#ba=new AbortController,p=t.combinedSignal(u);er.#va||=o,er.#ya??=l,window.addEventListener("pointerup",(t=>{er.#va===t.pointerId?this._endDraw(t):er.#wa?.delete(t.pointerId)}),{signal:p}),window.addEventListener("pointercancel",(t=>{er.#va===t.pointerId?this._currentParent.endDrawingSession():er.#wa?.delete(t.pointerId)}),{signal:p}),window.addEventListener("pointerdown",(t=>{er.#ya===t.pointerType&&((er.#wa||=new Set).add(t.pointerId),er.#ma.isCancellable()&&(er.#ma.removeLastElement(),er.#ma.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))}),{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Ft,{signal:p}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),r.addEventListener("touchmove",(t=>{t.timeStamp===er.#ka&&Bt(t)}),{signal:p}),t.toggleDrawing(),e._editorUndoBar?.hide(),er.#ma?t.drawLayer.updateProperties(this._currentDrawId,er.#ma.startNew(s,a,c,d,h)):(e.updateUIForDefaultProperties(this),er.#ma=this.createDrawerInstance(s,a,c,d,h),er.#xa=this.getDefaultDrawingOptions(),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(er.#xa.toSVGProperties(),er.#ma.defaultSVGProperties),!0,!1)))}static _drawMove(t){if(er.#ka=-1,!er.#ma)return;const{offsetX:e,offsetY:i,pointerId:n}=t;er.#va===n&&(er.#wa?.size>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,er.#ma.add(e,i)),er.#ka=t.timeStamp,Bt(t)))}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,er.#ma=null,er.#xa=null,er.#ya=null,er.#ka=NaN),er.#ba&&(er.#ba.abort(),er.#ba=null,er.#va=NaN,er.#wa=null)}static _endDraw(t){const e=this._currentParent;if(e)if(e.toggleDrawing(!0),this._cleanup(!1),t&&e.drawLayer.updateProperties(this._currentDrawId,er.#ma.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const t=er.#ma,i=this._currentDrawId,n=t.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,t.setLastElement(n))},undo:()=>{e.drawLayer.updateProperties(i,t.removeLastElement())},mustExec:!1,type:v.DRAW_STEP})}else this.endDrawing(!1)}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(v.DRAW_STEP),!er.#ma.isEmpty()){const{pageDimensions:[i,n],scale:r}=e,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:er.#ma.getOutlines(i*r,n*r,r,this._INNER_MARGIN),drawingOptions:er.#xa,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,n,r,s){st("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=e.viewport,o=this.deserializeDraw(s,a,n,r,this._INNER_MARGIN,t),l=await super.deserialize(t,e,i);return l.createDrawingOptions(t),l.#Aa({drawOutlines:o}),l.#ta(),l.onScaleChanging(),l.rotate(),l}serializeDraw(t){const[e,i]=this.pageTranslation,[n,r]=this.pageDimensions;return this.#fa.serialize([e,i,n,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class ir{#$r=new Float64Array(6);#br;#Ea;#Ri;#es;#is;#Na="";#Pa=0;#Ss=new nr;#La;#Ia;constructor(t,e,i,n,r,s){this.#La=i,this.#Ia=n,this.#Ri=r,this.#es=s,[t,e]=this.#Ra(t,e);const a=this.#br=[NaN,NaN,NaN,NaN,t,e];this.#is=[t,e],this.#Ea=[{line:a,points:this.#is}],this.#$r.set(a,0)}updateProperty(t,e){"stroke-width"===t&&(this.#es=e)}#Ra(t,e){return Vn._normalizePoint(t,e,this.#La,this.#Ia,this.#Ri)}isEmpty(){return!this.#Ea||0===this.#Ea.length}isCancellable(){return this.#is.length<=10}add(t,e){[t,e]=this.#Ra(t,e);const[i,n,r,s]=this.#$r.subarray(2,6),a=t-r,o=e-s;return Math.hypot(this.#La*a,this.#Ia*o)<=2?null:(this.#is.push(t,e),isNaN(i)?(this.#$r.set([r,s,t,e],2),this.#br.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#$r[0])&&this.#br.splice(6,6),this.#$r.set([i,n,r,s,t,e],0),this.#br.push(...Vn.createBezierPoints(i,n,r,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(2===this.#is.length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,n,r){this.#La=i,this.#Ia=n,this.#Ri=r,[t,e]=this.#Ra(t,e);const s=this.#br=[NaN,NaN,NaN,NaN,t,e];this.#is=[t,e];const a=this.#Ea.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#Ea.push({line:s,points:this.#is}),this.#$r.set(s,0),this.#Pa=0,this.toSVGPath(),null}getLastElement(){return this.#Ea.at(-1)}setLastElement(t){return this.#Ea?(this.#Ea.push(t),this.#br=t.line,this.#is=t.points,this.#Pa=0,{path:{d:this.toSVGPath()}}):this.#Ss.setLastElement(t)}removeLastElement(){if(!this.#Ea)return this.#Ss.removeLastElement();this.#Ea.pop(),this.#Na="";for(let t=0,e=this.#Ea.length;t<e;t++){const{line:e,points:i}=this.#Ea[t];this.#br=e,this.#is=i,this.#Pa=0,this.toSVGPath()}return{path:{d:this.#Na}}}toSVGPath(){const t=Vn.svgRound(this.#br[4]),e=Vn.svgRound(this.#br[5]);if(2===this.#is.length)return this.#Na=`${this.#Na} M ${t} ${e} Z`,this.#Na;if(this.#is.length<=6){const i=this.#Na.lastIndexOf("M");this.#Na=`${this.#Na.slice(0,i)} M ${t} ${e}`,this.#Pa=6}if(4===this.#is.length){const t=Vn.svgRound(this.#br[10]),e=Vn.svgRound(this.#br[11]);return this.#Na=`${this.#Na} L ${t} ${e}`,this.#Pa=12,this.#Na}const i=[];0===this.#Pa&&(i.push(`M ${t} ${e}`),this.#Pa=6);for(let t=this.#Pa,e=this.#br.length;t<e;t+=6){const[e,n,r,s,a,o]=this.#br.slice(t,t+6).map(Vn.svgRound);i.push(`C${e} ${n} ${r} ${s} ${a} ${o}`)}return this.#Na+=i.join(" "),this.#Pa=this.#br.length,this.#Na}getOutlines(t,e,i,n){const r=this.#Ea.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#Ss.build(this.#Ea,t,e,i,this.#Ri,this.#es,n),this.#$r=null,this.#br=null,this.#Ea=null,this.#Na=null,this.#Ss}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class nr extends Vn{#ps;#Oa=0;#Wr;#Ea;#La;#Ia;#Da;#Ri;#es;build(t,e,i,n,r,s,a){this.#La=e,this.#Ia=i,this.#Da=n,this.#Ri=r,this.#es=s,this.#Wr=a??0,this.#Ea=t,this.#za()}setLastElement(t){return this.#Ea.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#Ea.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#Ea)if(t.push(`M${Vn.svgRound(e[4])} ${Vn.svgRound(e[5])}`),6!==e.length)if(12!==e.length)for(let i=6,n=e.length;i<n;i+=6){const[n,r,s,a,o,l]=e.subarray(i,i+6).map(Vn.svgRound);t.push(`C${n} ${r} ${s} ${a} ${o} ${l}`)}else t.push(`L${Vn.svgRound(e[10])} ${Vn.svgRound(e[11])}`);else t.push("Z");return t.join("")}serialize([t,e,i,n],r){const s=[],a=[],[o,l,h,c]=this.#Fa();let d,u,p,f,g,m,b,x,v;switch(this.#Ri){case 0:v=Vn._rescale,d=t,u=e+n,p=i,f=-n,g=t+o*i,m=e+(1-l-c)*n,b=t+(o+h)*i,x=e+(1-l)*n;break;case 90:v=Vn._rescaleAndSwap,d=t,u=e,p=i,f=n,g=t+l*i,m=e+o*n,b=t+(l+c)*i,x=e+(o+h)*n;break;case 180:v=Vn._rescale,d=t+i,u=e,p=-i,f=n,g=t+(1-o-h)*i,m=e+l*n,b=t+(1-o)*i,x=e+(l+c)*n;break;case 270:v=Vn._rescaleAndSwap,d=t+i,u=e+n,p=-i,f=-n,g=t+(1-l-c)*i,m=e+(1-o-h)*n,b=t+(1-l)*i,x=e+(1-o)*n}for(const{line:t,points:e}of this.#Ea)s.push(v(t,d,u,p,f,r?new Array(t.length):null)),a.push(v(e,d,u,p,f,r?new Array(e.length):null));return{lines:s,points:a,rect:[g,m,b,x]}}static deserialize(t,e,i,n,r,{paths:{lines:s,points:a},rotation:o,thickness:l}){const h=[];let c,d,u,p,f;switch(o){case 0:f=Vn._rescale,c=-t/i,d=e/n+1,u=1/i,p=-1/n;break;case 90:f=Vn._rescaleAndSwap,c=-e/n,d=-t/i,u=1/n,p=1/i;break;case 180:f=Vn._rescale,c=t/i+1,d=-e/n,u=-1/i,p=1/n;break;case 270:f=Vn._rescaleAndSwap,c=e/n+1,d=t/i+1,u=-1/n,p=-1/i}if(!s){s=[];for(const t of a){const e=t.length;if(2===e){s.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){s.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const i=new Float32Array(3*(e-2));s.push(i);let[n,r,a,o]=t.subarray(0,4);i.set([NaN,NaN,NaN,NaN,n,r],0);for(let s=4;s<e;s+=2){const e=t[s],l=t[s+1];i.set(Vn.createBezierPoints(n,r,a,o,e,l),3*(s-2)),[n,r,a,o]=[a,o,e,l]}}}for(let t=0,e=s.length;t<e;t++)h.push({line:f(s[t].map((t=>t??NaN)),c,d,u,p),points:f(a[t].map((t=>t??NaN)),c,d,u,p)});const g=new nr;return g.build(h,i,n,1,o,l,r),g}#Ba(t=this.#es){const e=this.#Wr+t/2*this.#Da;return this.#Ri%180==0?[e/this.#La,e/this.#Ia]:[e/this.#Ia,e/this.#La]}#Fa(){const[t,e,i,n]=this.#ps,[r,s]=this.#Ba(0);return[t+r,e+s,i-2*r,n-2*s]}#za(){const t=this.#ps=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:e}of this.#Ea){if(e.length<=12){for(let i=4,n=e.length;i<n;i+=6){const[n,r]=e.subarray(i,i+2);t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],r)}continue}let i=e[4],n=e[5];for(let r=6,s=e.length;r<s;r+=6){const[s,a,o,l,h,c]=e.subarray(r,r+6);kt.bezierBoundingBox(i,n,s,a,o,l,h,c,t),i=h,n=c}}const[e,i]=this.#Ba();t[0]=Math.min(1,Math.max(0,t[0]-e)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+e)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#ps}updateProperty(t,e){return"stroke-width"===t?this.#na(e):null}#na(t){const[e,i]=this.#Ba();this.#es=t;const[n,r]=this.#Ba(),[s,a]=[n-e,r-i],o=this.#ps;return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}updateParentDimensions([t,e],i){const[n,r]=this.#Ba();this.#La=t,this.#Ia=e,this.#Da=i;const[s,a]=this.#Ba(),o=s-n,l=a-r,h=this.#ps;return h[0]-=o,h[1]-=l,h[2]+=2*o,h[3]+=2*l,h}updateRotation(t){return this.#Oa=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#ps.map(Vn.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#ps;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Vn.svgRound(t)} ${Vn.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#ps;let i=0,n=0,r=0,s=0,a=0,o=0;switch(this.#Oa){case 90:n=e/t,r=-t/e,a=t;break;case 180:i=-1,s=-1,a=t,o=e;break;case 270:n=-e/t,r=t/e,o=e;break;default:return""}return`matrix(${i} ${n} ${r} ${s} ${Vn.svgRound(a)} ${Vn.svgRound(o)})`}getPathResizingSVGProperties([t,e,i,n]){const[r,s]=this.#Ba(),[a,o,l,h]=this.#ps;if(Math.abs(l-r)<=Vn.PRECISION||Math.abs(h-s)<=Vn.PRECISION){const r=t+i/2-(a+l/2),s=e+n/2-(o+h/2);return{path:{"transform-origin":`${Vn.svgRound(t)} ${Vn.svgRound(e)}`,transform:`${this.rotationTransform} translate(${r} ${s})`}}}const c=(i-2*r)/(l-2*r),d=(n-2*s)/(h-2*s),u=l/i,p=h/n;return{path:{"transform-origin":`${Vn.svgRound(a)} ${Vn.svgRound(o)}`,transform:`${this.rotationTransform} scale(${u} ${p}) translate(${Vn.svgRound(r)} ${Vn.svgRound(s)}) scale(${c} ${d}) translate(${Vn.svgRound(-r)} ${Vn.svgRound(-s)})`}}}getPathResizedSVGProperties([t,e,i,n]){const[r,s]=this.#Ba(),a=this.#ps,[o,l,h,c]=a;if(a[0]=t,a[1]=e,a[2]=i,a[3]=n,Math.abs(h-r)<=Vn.PRECISION||Math.abs(c-s)<=Vn.PRECISION){const r=t+i/2-(o+h/2),s=e+n/2-(l+c/2);for(const{line:t,points:e}of this.#Ea)Vn._translate(t,r,s,t),Vn._translate(e,r,s,e);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Vn.svgRound(t)} ${Vn.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*r)/(h-2*r),u=(n-2*s)/(c-2*s),p=-d*(o+r)+t+r,f=-u*(l+s)+e+s;if(1!==d||1!==u||0!==p||0!==f)for(const{line:t,points:e}of this.#Ea)Vn._rescale(t,p,f,d,u,t),Vn._rescale(e,p,f,d,u,e);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Vn.svgRound(t)} ${Vn.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[n,r]=i,s=this.#ps,a=t-s[0],o=e-s[1];if(this.#La===n&&this.#Ia===r)for(const{line:t,points:e}of this.#Ea)Vn._translate(t,a,o,t),Vn._translate(e,a,o,e);else{const t=this.#La/n,e=this.#Ia/r;this.#La=n,this.#Ia=r;for(const{line:i,points:n}of this.#Ea)Vn._rescale(i,a,o,t,e,i),Vn._rescale(n,a,o,t,e,n);s[2]*=t,s[3]*=e}return s[0]=t,s[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Vn.svgRound(t)} ${Vn.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#ps;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Vn.svgRound(t[0])} ${Vn.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class rr extends tr{#Ha;constructor(t){super(),this.#Ha=t,super.updateProperties({fill:"none",stroke:re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(e??=this["stroke-width"],e*=this.#Ha.realScale),super.updateSVGProperty(t,e)}clone(){const t=new rr(this.#Ha);return t.updateAll(this),t}}class sr extends er{static _type="ink";static _editorType=x.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,e){re.initialize(t,e),this._defaultDrawingOptions=new rr(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return lt(this,"typesMap",new Map([[v.INK_THICKNESS,"stroke-width"],[v.INK_COLOR,"stroke"],[v.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,n,r){return new ir(t,e,i,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,n,r,s){return nr.deserialize(t,e,i,n,r,s)}static async deserialize(t,e,i){let n=null;if(t instanceof On){const{data:{inkLists:e,rect:i,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:h},parent:{page:{pageNumber:c}}}=t;n=t={annotationType:x.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:e},boxes:null,pageIndex:c-1,rect:i.slice(0),rotation:r,id:s,deleted:!1,popupRef:h}}const r=await super.deserialize(t,e,i);return r.annotationElementId=t.id||null,r._initialData=n,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=sr.getDefaultDrawingOptions({stroke:kt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:n}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,o={annotationType:x.INK,color:re._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!this.#Gr(o)?null:(o.id=this.annotationElementId,o)}#Gr(t){const{color:e,thickness:i,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some(((t,i)=>t!==e[i]))||t.thickness!==i||t.opacity!==n||t.pageIndex!==r}renderAnnotationElement(t){const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class ar extends re{#qa=null;#ja=null;#Ga=null;#Xa=null;#Va=null;#Wa="";#Ya=null;#Ua=null;#$a=!1;#Ka=!1;static _type="stamp";static _editorType=x.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#Xa=t.bitmapUrl,this.#Va=t.bitmapFile}static initialize(t,e){re.initialize(t,e)}static get supportedTypes(){return lt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return lt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(x.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#Za(t,e=!1){t?(this.#qa=t.bitmap,e||(this.#ja=t.id,this.#$a=t.isSvg),t.file&&(this.#Wa=t.file.name),this.#Ja()):this.remove()}#Qa(){if(this.#Ga=null,this._uiManager.enableWaiting(!1),this.#Ya){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#qa)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#qa){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:r,height:s}=t||this.copyCanvas(null,null,!0).imageData,a=await i.guess({name:"altText",request:{data:n,width:r,height:s,channels:n.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}#to(){if(this.#ja)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#ja).then((t=>this.#Za(t,!0))).finally((()=>this.#Qa()));if(this.#Xa){const t=this.#Xa;return this.#Xa=null,this._uiManager.enableWaiting(!0),void(this.#Ga=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#Za(t))).finally((()=>this.#Qa())))}if(this.#Va){const t=this.#Va;return this.#Va=null,this._uiManager.enableWaiting(!0),void(this.#Ga=this._uiManager.imageManager.getFromFile(t).then((t=>this.#Za(t))).finally((()=>this.#Qa())))}const t=document.createElement("input");t.type="file",t.accept=ar.supportedTypesStr;const e=this._uiManager._signal;this.#Ga=new Promise((i=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#Za(e)}else this.remove();i()}),{signal:e}),t.addEventListener("cancel",(()=>{this.remove(),i()}),{signal:e})})).finally((()=>this.#Qa())),t.click()}remove(){this.#ja&&(this.#qa=null,this._uiManager.imageManager.deleteId(this.#ja),this.#Ya?.remove(),this.#Ya=null,this.#Ua&&(clearTimeout(this.#Ua),this.#Ua=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#ja&&null===this.#Ya&&this.#to(),this.isAttachedToDOM||this.parent.add(this))):this.#ja&&this.#to()}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#Ga||this.#qa||this.#Xa||this.#Va||this.#ja)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#qa?this.#Ja():this.#to(),this.width&&!this.annotationElementId){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==this.#Ua&&clearTimeout(this.#Ua);this.#Ua=setTimeout((()=>{this.#Ua=null,this.#eo()}),200)}#Ja(){const{div:t}=this;let{width:e,height:i}=this.#qa;const[n,r]=this.pageDimensions,s=.75;if(this.width)e=this.width*n,i=this.height*r;else if(e>s*n||i>s*r){const t=Math.min(s*n/e,s*r/i);e*=t,i*=t}const[a,o]=this.parentDimensions;this.setDims(e*a/n,i*o/r),this._uiManager.enableWaiting(!1);const l=this.#Ya=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=e/n,this.height=i/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),this.#eo(),this.#Ka||(this.parent.addUndoableEditor(this),this.#Ka=!0),this._reportTelemetry({action:"inserted_image"}),this.#Wa&&l.setAttribute("aria-label",this.#Wa)}copyCanvas(t,e,i=!1){t||(t=224);const{width:n,height:r}=this.#qa,s=new Wt;let a=this.#qa,o=n,l=r,h=null;if(e){if(n>e||r>e){const t=Math.min(e/n,e/r);o=Math.floor(n*t),l=Math.floor(r*t)}h=document.createElement("canvas");const t=h.width=Math.ceil(o*s.sx),i=h.height=Math.ceil(l*s.sy);this.#$a||(a=this.#io(t,i));const c=h.getContext("2d");c.filter=this._uiManager.hcmFilter;let d="white",u="#cfcfd8";"none"!==this._uiManager.hcmFilter?u="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(d="#8f8f9d",u="#42414d");const p=15,f=p*s.sx,g=p*s.sy,m=new OffscreenCanvas(2*f,2*g),b=m.getContext("2d");b.fillStyle=d,b.fillRect(0,0,2*f,2*g),b.fillStyle=u,b.fillRect(0,0,f,g),b.fillRect(f,g,f,g),c.fillStyle=c.createPattern(m,"repeat"),c.fillRect(0,0,t,i),c.drawImage(a,0,0,a.width,a.height,0,0,t,i)}let c=null;if(i){let e,i;if(s.symmetric&&a.width<t&&a.height<t)e=a.width,i=a.height;else if(a=this.#qa,n>t||r>t){const s=Math.min(t/n,t/r);e=Math.floor(n*s),i=Math.floor(r*s),this.#$a||(a=this.#io(e,i))}const o=new OffscreenCanvas(e,i).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,e,i),c={width:e,height:i,data:o.getImageData(0,0,e,i).data}}return{canvas:h,width:o,height:l,imageData:c}}#io(t,e){const{width:i,height:n}=this.#qa;let r=i,s=n,a=this.#qa;for(;r>2*t||s>2*e;){const i=r,n=s;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,i,n,0,0,r,s),a=o.transferToImageBitmap()}return a}#eo(){const[t,e]=this.parentDimensions,{width:i,height:n}=this,r=new Wt,s=Math.ceil(i*t*r.sx),a=Math.ceil(n*e*r.sy),o=this.#Ya;if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=this.#$a?this.#qa:this.#io(s,a),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(l,0,0,l.width,l.height,0,0,s,a)}getImageForAltText(){return this.#Ya}#no(t){if(t){if(this.#$a){const t=this._uiManager.imageManager.getSvgUrl(this.#ja);if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=this.#qa);return t.getContext("2d").drawImage(this.#qa,0,0),t.toDataURL()}if(this.#$a){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*Tt.PDF_TO_CSS_UNITS),n=Math.round(this.height*e*Tt.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(i,n);return r.getContext("2d").drawImage(this.#qa,0,0,this.#qa.width,this.#qa.height,0,0,i,n),r.transferToImageBitmap()}return structuredClone(this.#qa)}static async deserialize(t,e,i){let n=null;if(t instanceof Hn){const{data:{rect:r,rotation:s,id:a,structParent:o,popupRef:l},container:h,parent:{page:{pageNumber:c}}}=t,d=h.querySelector("canvas"),u=i.imageManager.getFromCanvas(h.id,d);d.remove();const p=(await e._structTree.getAriaAttributes(`${_t}${a}`))?.get("aria-label")||"";n=t={annotationType:x.STAMP,bitmapId:u.id,bitmap:u.bitmap,pageIndex:c-1,rect:r.slice(0),rotation:s,id:a,deleted:!1,accessibilityData:{decorative:!1,altText:p},isSvg:!1,structParent:o,popupRef:l}}const r=await super.deserialize(t,e,i),{rect:s,bitmap:a,bitmapUrl:o,bitmapId:l,isSvg:h,accessibilityData:c}=t;l&&i.imageManager.isValidId(l)?(r.#ja=l,a&&(r.#qa=a)):r.#Xa=o,r.#$a=h;const[d,u]=r.pageDimensions;return r.width=(s[2]-s[0])/d,r.height=(s[3]-s[1])/u,r.annotationElementId=t.id||null,c&&(r.altTextData=c),r._initialData=n,r.#Ka=!!n,r}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:x.STAMP,bitmapId:this.#ja,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#$a,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#no(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:n,altText:r}=this.serializeAltText(!1);if(!n&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const t=this.#Gr(i);if(t.isSame)return null;t.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,null===e)return i;e.stamps||=new Map;const s=this.#$a?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#ja)){if(this.#$a){const t=e.stamps.get(this.#ja);s>t.area&&(t.area=s,t.serialized.bitmap.close(),t.serialized.bitmap=this.#no(!1))}}else e.stamps.set(this.#ja,{area:s,serialized:i}),i.bitmap=this.#no(!1);return i}#Gr(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,n=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&n&&r,isSameAltText:r}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class or{#_r;#ro=!1;#so=null;#ao=null;#oo=null;#lo=new Map;#ho=!1;#co=!1;#do=!1;#uo=null;#po=null;#fo=null;#go=null;#g;static _initialized=!1;static#q=new Map([Xn,sr,ar,Qn].map((t=>[t._editorType,t])));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:n,accessibilityManager:r,annotationLayer:s,drawLayer:a,textLayer:o,viewport:l,l10n:h}){const c=[...or.#q.values()];if(!or._initialized){or._initialized=!0;for(const e of c)e.initialize(h,t)}t.registerEditorTypes(c),this.#g=t,this.pageIndex=e,this.div=i,this.#_r=r,this.#so=s,this.viewport=l,this.#fo=o,this.drawLayer=a,this._structTree=n,this.#g.addLayer(this)}get isEmpty(){return 0===this.#lo.size}get isInvisible(){return this.isEmpty&&this.#g.getMode()===x.NONE}updateToolbar(t){this.#g.updateToolbar(t)}updateMode(t=this.#g.getMode()){switch(this.#mo(),t){case x.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case x.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case x.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of or.#q.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#fo?.div}setEditingState(t){this.#g.setEditingState(t)}addCommands(t){this.#g.addCommands(t)}cleanUndoStack(t){this.#g.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#so?.div.classList.toggle("disabled",!t)}async enable(){this.#do=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const e of this.#lo.values())e.enableEditing(),e.show(!0),e.annotationElementId&&(this.#g.removeChangedExistingAnnotation(e),t.add(e.annotationElementId));if(!this.#so)return void(this.#do=!1);const e=this.#so.getEditableAnnotations();for(const i of e){if(i.hide(),this.#g.isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}this.#do=!1}disable(){this.#co=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const i of this.#lo.values())i.disableEditing(),i.annotationElementId&&(null===i.serialize()?(e.set(i.annotationElementId,i),this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()):t.set(i.annotationElementId,i));if(this.#so){const i=this.#so.getEditableAnnotations();for(const n of i){const{id:i}=n.data;if(this.#g.isDeletedAnnotationElement(i))continue;let r=e.get(i);r?(r.resetAnnotationElement(n),r.show(!1),n.show()):(r=t.get(i),r&&(this.#g.addChangedExistingAnnotation(r),r.renderAnnotationElement(n)&&r.show(!1)),n.show())}}this.#mo(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const t of or.#q.values())i.remove(`${t._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#co=!1}getEditableAnnotation(t){return this.#so?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#g.getActive()!==t&&this.#g.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#fo?.div&&!this.#go){this.#go=new AbortController;const t=this.#g.combinedSignal(this.#go);this.#fo.div.addEventListener("pointerdown",this.#bo.bind(this),{signal:t}),this.#fo.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#fo?.div&&this.#go&&(this.#go.abort(),this.#go=null,this.#fo.div.classList.remove("highlighting"))}#bo(t){this.#g.unselectAll();const{target:e}=t;if(e===this.#fo.div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&this.#fo.div.contains(e)){const{isMac:e}=yt.platform;if(0!==t.button||t.ctrlKey&&e)return;this.#g.showAllEditors("highlight",!0,!0),this.#fo.div.classList.add("free"),this.toggleDrawing(),Qn.startHighlighting(this,"ltr"===this.#g.direction,{target:this.#fo.div,x:t.x,y:t.y}),this.#fo.div.addEventListener("pointerup",(()=>{this.#fo.div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:this.#g._signal}),t.preventDefault()}}enableClick(){if(this.#ao)return;this.#ao=new AbortController;const t=this.#g.combinedSignal(this.#ao);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#ao?.abort(),this.#ao=null}attach(t){this.#lo.set(t.id,t);const{annotationElementId:e}=t;e&&this.#g.isDeletedAnnotationElement(e)&&this.#g.removeDeletedAnnotationElement(t)}detach(t){this.#lo.delete(t.id),this.#_r?.removePointerInTextLayer(t.contentDiv),!this.#co&&t.annotationElementId&&this.#g.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#g.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#g.addDeletedAnnotationElement(t.annotationElementId),re.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#g.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#do),this.#g.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#oo&&(t._focusEventsAllowed=!1,this.#oo=setTimeout((()=>{this.#oo=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this.#g._signal}),e.focus())}),0)),t._structTreeParentId=this.#_r?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#g.getId()}get#xo(){return or.#q.get(this.#g.getMode())}combinedSignal(t){return this.#g.combinedSignal(t)}#vo(t){const e=this.#xo;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#xo?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#g.updateToolbar(t),this.#g.updateMode(t);const{offsetX:i,offsetY:n}=this.#yo(),r=this.getNextId(),s=this.#vo({parent:this,id:r,x:i,y:n,uiManager:this.#g,isCentered:!0,...e});s&&this.add(s)}async deserialize(t){return await(or.#q.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#g))||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),r=this.#vo({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#g,isCentered:e,...i});return r&&this.add(r),r}#yo(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),s=Math.max(0,e),a=(r+Math.min(window.innerWidth,t+i))/2-t,o=(s+Math.min(window.innerHeight,e+n))/2-e,[l,h]=this.viewport.rotation%180==0?[a,o]:[o,a];return{offsetX:l,offsetY:h}}addNewEditor(){this.createAndAddNewEditor(this.#yo(),!0)}setSelected(t){this.#g.setSelected(t)}toggleSelected(t){this.#g.toggleSelected(t)}unselect(t){this.#g.unselect(t)}pointerup(t){const{isMac:e}=yt.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#ho&&(this.#ho=!1,this.#xo?.isDrawer&&this.#xo.supportMultipleDrawings||(this.#ro?this.#g.getMode()!==x.STAMP?this.createAndAddNewEditor(t,!1):this.#g.unselectAll():this.#ro=!0))}pointerdown(t){if(this.#g.getMode()===x.HIGHLIGHT&&this.enableTextSelection(),this.#ho)return void(this.#ho=!1);const{isMac:e}=yt.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;if(this.#ho=!0,this.#xo?.isDrawer)return void this.startDrawingSession(t);const i=this.#g.getActive();this.#ro=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#uo)return void this.#xo.startDrawing(this,this.#g,!1,t);this.#g.setCurrentDrawingSession(this),this.#uo=new AbortController;const e=this.#g.combinedSignal(this.#uo);this.div.addEventListener("blur",(({relatedTarget:t})=>{t&&!this.div.contains(t)&&(this.#po=null,this.commitOrRemove())}),{signal:e}),this.#xo.startDrawing(this,this.#g,!1,t)}pause(t){if(t){const{activeElement:t}=document;this.div.contains(t)&&(this.#po=t)}else this.#po&&setTimeout((()=>{this.#po?.focus(),this.#po=null}),0)}endDrawingSession(t=!1){return this.#uo?(this.#g.setCurrentDrawingSession(null),this.#uo.abort(),this.#uo=null,this.#po=null,this.#xo.endDrawing(t)):null}findNewParent(t,e,i){const n=this.#g.findParent(e,i);return null!==n&&n!==this&&(n.changeParent(t),!0)}commitOrRemove(){return!!this.#uo&&(this.endDrawingSession(),!0)}onScaleChanging(){this.#uo&&this.#xo.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#g.getActive()?.parent===this&&(this.#g.commitOrRemove(),this.#g.setActiveEditor(null)),this.#oo&&(clearTimeout(this.#oo),this.#oo=null);for(const t of this.#lo.values())this.#_r?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#lo.clear(),this.#g.removeLayer(this)}#mo(){for(const t of this.#lo.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Vt(this.div,t);for(const t of this.#g.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:t}){this.#g.commitOrRemove(),this.#mo();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Vt(this.div,{rotation:i}),e!==i)for(const t of this.#lo.values())t.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#g.viewParameters.realScale}}class lr{#rr=null;#v=0;#wo=new Map;#ko=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(this.#rr){if(this.#rr!==t){if(this.#wo.size>0)for(const e of this.#wo.values())e.remove(),t.append(e);this.#rr=t}}else this.#rr=t}static get _svgFactory(){return lt(this,"_svgFactory",new cn)}static#Ao(t,[e,i,n,r]){const{style:s}=t;s.top=100*i+"%",s.left=100*e+"%",s.width=100*n+"%",s.height=100*r+"%"}#So(){const t=lr._svgFactory.create(1,1,!0);return this.#rr.append(t),t.setAttribute("aria-hidden",!0),t}#Co(t,e){const i=lr._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const r=lr._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n}#_o(t,e){for(const[i,n]of Object.entries(e))null===n?t.removeAttribute(i):t.setAttribute(i,n)}draw(t,e=!1,i=!1){const n=this.#v++,r=this.#So(),s=lr._svgFactory.createElement("defs");r.append(s);const a=lr._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#ko.set(n,a);const l=i?this.#Co(s,o):null,h=lr._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${o}`),this.updateProperties(r,t),this.#wo.set(n,r),{id:n,clipPathId:`url(#${l})`}}drawOutline(t,e){const i=this.#v++,n=this.#So(),r=lr._svgFactory.createElement("defs");n.append(r);const s=lr._svgFactory.createElement("path");r.append(s);const a=`path_p${this.pageIndex}_${i}`;let o;if(s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke"),e){const t=lr._svgFactory.createElement("mask");r.append(t),o=`mask_p${this.pageIndex}_${i}`,t.setAttribute("id",o),t.setAttribute("maskUnits","objectBoundingBox");const e=lr._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=lr._svgFactory.createElement("use");t.append(n),n.setAttribute("href",`#${a}`),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const l=lr._svgFactory.createElement("use");n.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return n.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(n,t),this.#wo.set(i,n),i}finalizeDraw(t,e){this.#ko.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:n,rootClass:r,path:s}=e,a="number"==typeof t?this.#wo.get(t):t;if(a){if(i&&this.#_o(a,i),n&&lr.#Ao(a,n),r){const{classList:t}=a;for(const[e,i]of Object.entries(r))t.toggle(e,i)}if(s){const t=a.firstChild.firstChild;this.#_o(t,s)}}}updateParent(t,e){if(e===this)return;const i=this.#wo.get(t);i&&(e.#rr.append(i),this.#wo.delete(t),e.#wo.set(t,i))}remove(t){this.#ko.delete(t),null!==this.#rr&&(this.#wo.get(t).remove(),this.#wo.delete(t))}destroy(){this.#rr=null;for(const t of this.#wo.values())t.remove();this.#wo.clear(),this.#ko.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Un};var hr=r.GlobalWorkerOptions,cr=r.getDocument},46762:(t,e,i)=>{"use strict";i.d(e,{G2:()=>u,I$:()=>m,Im:()=>S,RV:()=>L,bh:()=>p,hy:()=>v,st:()=>M,wh:()=>_,yY:()=>f,y_:()=>C});var n=i(38262),r=i(58903),s=i(42845);const a=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function o(t,e){let{$cursor:i}=t.selection;return!i||(e?!e.endOfTextblock("backward",t):i.parentOffset>0)?null:i}function l(t,e,i=!1){for(let n=t;n;n="start"==e?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(i&&1!=n.childCount)return!1}return!1}function h(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function c(t,e){let{$cursor:i}=t.selection;return!i||(e?!e.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)?null:i}function d(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let i=t.node(e);if(t.index(e)+1<i.childCount)return t.doc.resolve(t.after(e+1));if(i.type.spec.isolating)break}return null}const u=(t,e)=>{let i,r=t.selection,a=r instanceof s.nh;if(a){if(r.node.isTextblock||!(0,n.n9)(t.doc,r.from))return!1;i=r.from}else if(i=(0,n.N0)(t.doc,r.from,-1),null==i)return!1;if(e){let n=t.tr.join(i);a&&n.setSelection(s.nh.create(n.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(n.scrollIntoView())}return!0},p=(t,e)=>{let i,r=t.selection;if(r instanceof s.nh){if(r.node.isTextblock||!(0,n.n9)(t.doc,r.to))return!1;i=r.to}else if(i=(0,n.N0)(t.doc,r.to,1),null==i)return!1;return e&&e(t.tr.join(i).scrollIntoView()),!0},f=(t,e)=>{let{$from:i,$to:r}=t.selection,s=i.blockRange(r),a=s&&(0,n.jP)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)};function g(t){for(let e=0;e<t.edgeCount;e++){let{type:i}=t.edge(e);if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}const m=(t,e)=>{let{$head:i,$anchor:n}=t.selection;if(!i.parent.type.spec.code||!i.sameParent(n))return!1;let r=i.node(-1),a=i.indexAfter(-1),o=g(r.contentMatchAt(a));if(!o||!r.canReplaceWith(a,a,o))return!1;if(e){let n=i.after(),r=t.tr.replaceWith(n,n,o.createAndFill());r.setSelection(s.LN.near(r.doc.resolve(n),1)),e(r.scrollIntoView())}return!0};const b=(t,e)=>{let{$from:i,$to:r}=t.selection;if(t.selection instanceof s.nh&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,n.zy)(t.doc,i.pos)||(e&&e(t.tr.split(i.pos).scrollIntoView()),0));if(!i.depth)return!1;let a,o,l=[],h=!1,c=!1;for(let t=i.depth;;t--){if(i.node(t).isBlock){h=i.end(t)==i.pos+(i.depth-t),c=i.start(t)==i.pos-(i.depth-t),o=g(i.node(t-1).contentMatchAt(i.indexAfter(t-1)));let e=x&&x(r.parent,h,i);l.unshift(e||(h&&o?{type:o}:null)),a=t;break}if(1==t)return!1;l.unshift(null)}let d=t.tr;(t.selection instanceof s.U3||t.selection instanceof s.i5)&&d.deleteSelection();let u=d.mapping.map(i.pos),p=(0,n.zy)(d.doc,u,l.length,l);if(p||(l[0]=o?{type:o}:null,p=(0,n.zy)(d.doc,u,l.length,l)),!p)return!1;if(d.split(u,l.length,l),!h&&c&&i.node(a).type!=o){let t=d.mapping.map(i.before(a)),e=d.doc.resolve(t);o&&i.node(a-1).canReplaceWith(e.index(),e.index()+1,o)&&d.setNodeMarkup(d.mapping.map(i.before(a)),o)}return e&&e(d.scrollIntoView()),!0};var x;const v=(t,e)=>{let i,{$from:n,to:r}=t.selection,a=n.sharedDepth(r);return 0!=a&&(i=n.before(a),e&&e(t.tr.setSelection(s.nh.create(t.doc,i))),!0)};function y(t,e,i,a){let o,h,c=e.nodeBefore,d=e.nodeAfter,u=c.type.spec.isolating||d.type.spec.isolating;if(!u&&function(t,e,i){let r=e.nodeBefore,s=e.nodeAfter,a=e.index();return!(!(r&&s&&r.type.compatibleContent(s.type))||(!r.content.size&&e.parent.canReplace(a-1,a)?(i&&i(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(a,a+1)||!s.isTextblock&&!(0,n.n9)(t.doc,e.pos)||(i&&i(t.tr.join(e.pos).scrollIntoView()),0)))}(t,e,i))return!0;let p=!u&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(o=(h=c.contentMatchAt(c.childCount)).findWrapping(d.type))&&h.matchType(o[0]||d.type).validEnd){if(i){let s=e.pos+d.nodeSize,a=r.FK.empty;for(let t=o.length-1;t>=0;t--)a=r.FK.from(o[t].create(null,a));a=r.FK.from(c.copy(a));let l=t.tr.step(new n.Wg(e.pos-1,s,e.pos,s,new r.Ji(a,1,0),o.length,!0)),h=l.doc.resolve(s+2*o.length);h.nodeAfter&&h.nodeAfter.type==c.type&&(0,n.n9)(l.doc,h.pos)&&l.join(h.pos),i(l.scrollIntoView())}return!0}let f=d.type.spec.isolating||a>0&&u?null:s.LN.findFrom(e,1),g=f&&f.$from.blockRange(f.$to),m=g&&(0,n.jP)(g);if(null!=m&&m>=e.depth)return i&&i(t.tr.lift(g,m).scrollIntoView()),!0;if(p&&l(d,"start",!0)&&l(c,"end")){let s=c,a=[];for(;a.push(s),!s.isTextblock;)s=s.lastChild;let o=d,l=1;for(;!o.isTextblock;o=o.firstChild)l++;if(s.canReplace(s.childCount,s.childCount,o.content)){if(i){let s=r.FK.empty;for(let t=a.length-1;t>=0;t--)s=r.FK.from(a[t].copy(s));i(t.tr.step(new n.Wg(e.pos-a.length,e.pos+d.nodeSize,e.pos+l,e.pos+d.nodeSize-l,new r.Ji(s,a.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function w(t){return function(e,i){let n=e.selection,r=t<0?n.$from:n.$to,a=r.depth;for(;r.node(a).isInline;){if(!a)return!1;a--}return!!r.node(a).isTextblock&&(i&&i(e.tr.setSelection(s.U3.create(e.doc,t<0?r.start(a):r.end(a)))),!0)}}const k=w(-1),A=w(1);function S(t,e=null){return function(i,r){let{$from:s,$to:a}=i.selection,o=s.blockRange(a),l=o&&(0,n.oM)(o,t,e);return!!l&&(r&&r(i.tr.wrap(o,l).scrollIntoView()),!0)}}function C(t,e=null){return function(i,n){let r=!1;for(let n=0;n<i.selection.ranges.length&&!r;n++){let{$from:{pos:s},$to:{pos:a}}=i.selection.ranges[n];i.doc.nodesBetween(s,a,((n,s)=>{if(r)return!1;if(n.isTextblock&&!n.hasMarkup(t,e))if(n.type==t)r=!0;else{let e=i.doc.resolve(s),n=e.index();r=e.parent.canReplaceWith(n,n+1,t)}}))}if(!r)return!1;if(n){let r=i.tr;for(let n=0;n<i.selection.ranges.length;n++){let{$from:{pos:s},$to:{pos:a}}=i.selection.ranges[n];r.setBlockType(s,a,t,e)}n(r.scrollIntoView())}return!0}}function _(t,e=null,i){let n=!1!==(i&&i.removeWhenPresent),r=!1!==(i&&i.enterInlineAtoms),a=!(i&&i.includeWhitespace);return function(i,o){let{empty:l,$cursor:h,ranges:c}=i.selection;if(l&&!h||!function(t,e,i,n){for(let r=0;r<e.length;r++){let{$from:s,$to:a}=e[r],o=0==s.depth&&t.inlineContent&&t.type.allowsMarkType(i);if(t.nodesBetween(s.pos,a.pos,((t,e)=>{if(o||!n&&t.isAtom&&t.isInline&&e>=s.pos&&e+t.nodeSize<=a.pos)return!1;o=t.inlineContent&&t.type.allowsMarkType(i)})),o)return!0}return!1}(i.doc,c,t,r))return!1;if(o)if(h)t.isInSet(i.storedMarks||h.marks())?o(i.tr.removeStoredMark(t)):o(i.tr.addStoredMark(t.create(e)));else{let l,h=i.tr;r||(c=function(t){let e=[];for(let i=0;i<t.length;i++){let{$from:n,$to:r}=t[i];n.doc.nodesBetween(n.pos,r.pos,((t,i)=>{if(t.isAtom&&t.content.size&&t.isInline&&i>=n.pos&&i+t.nodeSize<=r.pos)return i+1>n.pos&&e.push(new s.yn(n,n.doc.resolve(i+1))),n=n.doc.resolve(i+1+t.content.size),!1})),n.pos<r.pos&&e.push(new s.yn(n,r))}return e}(c)),l=n?!c.some((e=>i.doc.rangeHasMark(e.$from.pos,e.$to.pos,t))):!c.every((e=>{let i=!1;return h.doc.nodesBetween(e.$from.pos,e.$to.pos,((n,r,s)=>{if(i)return!1;i=!t.isInSet(n.marks)&&!!s&&s.type.allowsMarkType(t)&&!(n.isText&&/^\s*$/.test(n.textBetween(Math.max(0,e.$from.pos-r),Math.min(n.nodeSize,e.$to.pos-r))))})),!i}));for(let i=0;i<c.length;i++){let{$from:n,$to:r}=c[i];if(l){let i=n.pos,s=r.pos,o=n.nodeAfter,l=r.nodeBefore,c=a&&o&&o.isText?/^\s*/.exec(o.text)[0].length:0,d=a&&l&&l.isText?/\s*$/.exec(l.text)[0].length:0;i+c<s&&(i+=c,s-=d),h.addMark(i,s,t.create(e))}else h.removeMark(n.pos,r.pos,t)}o(h.scrollIntoView())}return!0}}function M(...t){return function(e,i,n){for(let r=0;r<t.length;r++)if(t[r](e,i,n))return!0;return!1}}let T=M(a,((t,e,i)=>{let a=o(t,i);if(!a)return!1;let c=h(a);if(!c){let i=a.blockRange(),r=i&&(0,n.jP)(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)}let d=c.nodeBefore;if(y(t,c,e,-1))return!0;if(0==a.parent.content.size&&(l(d,"end")||s.nh.isSelectable(d)))for(let i=a.depth;;i--){let o=(0,n.$L)(t.doc,a.before(i),a.after(i),r.Ji.empty);if(o&&o.slice.size<o.to-o.from){if(e){let i=t.tr.step(o);i.setSelection(l(d,"end")?s.LN.findFrom(i.doc.resolve(i.mapping.map(c.pos,-1)),-1):s.nh.create(i.doc,c.pos-d.nodeSize)),e(i.scrollIntoView())}return!0}if(1==i||a.node(i-1).childCount>1)break}return!(!d.isAtom||c.depth!=a.depth-1)&&(e&&e(t.tr.delete(c.pos-d.nodeSize,c.pos).scrollIntoView()),!0)}),((t,e,i)=>{let{$head:n,empty:r}=t.selection,a=n;if(!r)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("backward",t):n.parentOffset>0)return!1;a=h(n)}let o=a&&a.nodeBefore;return!(!o||!s.nh.isSelectable(o))&&(e&&e(t.tr.setSelection(s.nh.create(t.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)})),E=M(a,((t,e,i)=>{let a=c(t,i);if(!a)return!1;let o=d(a);if(!o)return!1;let h=o.nodeAfter;if(y(t,o,e,1))return!0;if(0==a.parent.content.size&&(l(h,"start")||s.nh.isSelectable(h))){let i=(0,n.$L)(t.doc,a.before(),a.after(),r.Ji.empty);if(i&&i.slice.size<i.to-i.from){if(e){let n=t.tr.step(i);n.setSelection(l(h,"start")?s.LN.findFrom(n.doc.resolve(n.mapping.map(o.pos)),1):s.nh.create(n.doc,n.mapping.map(o.pos))),e(n.scrollIntoView())}return!0}}return!(!h.isAtom||o.depth!=a.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+h.nodeSize).scrollIntoView()),!0)}),((t,e,i)=>{let{$head:n,empty:r}=t.selection,a=n;if(!r)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;a=d(n)}let o=a&&a.nodeAfter;return!(!o||!s.nh.isSelectable(o))&&(e&&e(t.tr.setSelection(s.nh.create(t.doc,a.pos)).scrollIntoView()),!0)}));const N={Enter:M(((t,e)=>{let{$head:i,$anchor:n}=t.selection;return!(!i.parent.type.spec.code||!i.sameParent(n))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),((t,e)=>{let i=t.selection,{$from:n,$to:r}=i;if(i instanceof s.i5||n.parent.inlineContent||r.parent.inlineContent)return!1;let a=g(r.parent.contentMatchAt(r.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let i=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,o=t.tr.insert(i,a.createAndFill());o.setSelection(s.U3.create(o.doc,i+1)),e(o.scrollIntoView())}return!0}),((t,e)=>{let{$cursor:i}=t.selection;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){let r=i.before();if((0,n.zy)(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=i.blockRange(),s=r&&(0,n.jP)(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)}),b),"Mod-Enter":m,Backspace:T,"Mod-Backspace":T,"Shift-Backspace":T,Delete:E,"Mod-Delete":E,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new s.i5(t.doc))),!0)},P={"Ctrl-h":N.Backspace,"Alt-Backspace":N["Mod-Backspace"],"Ctrl-d":N.Delete,"Ctrl-Alt-Backspace":N["Mod-Delete"],"Alt-Delete":N["Mod-Delete"],"Alt-d":N["Mod-Delete"],"Ctrl-a":k,"Ctrl-e":A};for(let t in N)P[t]=N[t];const L=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?P:N},89781:(t,e,i)=>{"use strict";i.d(e,{b6:()=>w,ZS:()=>S,tN:()=>A});var n=200,r=function(){};r.prototype.append=function(t){return t.length?(t=r.from(t),!this.length&&t||t.length<n&&this.leafAppend(t)||this.length<n&&t.leafPrepend(this)||this.appendInner(t)):this},r.prototype.prepend=function(t){return t.length?r.from(t).append(this):this},r.prototype.appendInner=function(t){return new a(this,t)},r.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?r.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},r.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},r.prototype.forEach=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)},r.prototype.map=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length);var n=[];return this.forEach((function(e,i){return n.push(t(e,i))}),e,i),n},r.from=function(t){return t instanceof r?t:t&&t.length?new s(t):r.empty};var s=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,i){return 0==t&&i==this.length?this:new e(this.values.slice(t,i))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,i,n){for(var r=e;r<i;r++)if(!1===t(this.values[r],n+r))return!1},e.prototype.forEachInvertedInner=function(t,e,i,n){for(var r=e-1;r>=i;r--)if(!1===t(this.values[r],n+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=n)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=n)return new e(t.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(e.prototype,i),e}(r);r.empty=new s([]);var a=function(t){function e(e,i){t.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,i,n){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(i,r),n))&&(!(i>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,i)-r,n+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,i,n){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(i,r)-r,n+r))&&(!(i<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),i,n))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var i=this.left.length;return e<=i?this.left.slice(t,e):t>=i?this.right.slice(t-i,e-i):this.left.slice(t,i).append(this.right.slice(0,e-i))},e.prototype.leafAppend=function(t){var i=this.right.leafAppend(t);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(t){var i=this.left.leafPrepend(t);if(i)return new e(i,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(r);const o=r;var l=i(38262),h=i(42845);class c{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let i,n,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(i=this.remapping(r,this.items.length),n=i.maps.length);let s,a,o=t.tr,l=[],h=[];return this.items.forEach(((t,e)=>{if(!t.step)return i||(i=this.remapping(r,e+1),n=i.maps.length),n--,void h.push(t);if(i){h.push(new d(t.map));let e,r=t.step.map(i.slice(n));r&&o.maybeStep(r).doc&&(e=o.mapping.maps[o.mapping.maps.length-1],l.push(new d(e,void 0,void 0,l.length+h.length))),n--,e&&i.appendMap(e,n)}else o.maybeStep(t.step);return t.selection?(s=i?t.selection.map(i.slice(n)):t.selection,a=new c(this.items.slice(0,r).append(h.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:o,selection:s}}addTransform(t,e,i,n){let r=[],s=this.eventCount,a=this.items,o=!n&&a.length?a.get(a.length-1):null;for(let i=0;i<t.steps.length;i++){let l,h=t.steps[i].invert(t.docs[i]),c=new d(t.mapping.maps[i],h,e);(l=o&&o.merge(c))&&(c=l,i?r.pop():a=a.slice(0,a.length-1)),r.push(c),e&&(s++,e=void 0),n||(o=c)}let l=s-i.depth;return l>p&&(a=function(t,e){let i;return t.forEach(((t,n)=>{if(t.selection&&0==e--)return i=n,!1})),t.slice(i)}(a,l),s-=l),new c(a.append(r),s)}remapping(t,e){let i=new l.X9;return this.items.forEach(((e,n)=>{let r=null!=e.mirrorOffset&&n-e.mirrorOffset>=t?i.maps.length-e.mirrorOffset:void 0;i.appendMap(e.map,r)}),t,e),i}addMaps(t){return 0==this.eventCount?this:new c(this.items.append(t.map((t=>new d(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],n=Math.max(0,this.items.length-e),r=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach((t=>{t.selection&&a--}),n);let o=e;this.items.forEach((e=>{let n=r.getMirror(--o);if(null==n)return;s=Math.min(s,n);let l=r.maps[n];if(e.step){let s=t.steps[n].invert(t.docs[n]),h=e.selection&&e.selection.map(r.slice(o+1,n));h&&a++,i.push(new d(l,s,h))}else i.push(new d(l))}),n);let l=[];for(let t=e;t<s;t++)l.push(new d(r.maps[t]));let h=this.items.slice(0,n).append(l).append(i),u=new c(h,a);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-i.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,n=[],r=0;return this.items.forEach(((s,a)=>{if(a>=t)n.push(s),s.selection&&r++;else if(s.step){let t=s.step.map(e.slice(i)),a=t&&t.getMap();if(i--,a&&e.appendMap(a,i),t){let o=s.selection&&s.selection.map(e.slice(i));o&&r++;let l,h=new d(a.invert(),t,o),c=n.length-1;(l=n.length&&n[c].merge(h))?n[c]=l:n.push(h)}}else s.map&&i--}),this.items.length,0),new c(o.from(n.reverse()),r)}}c.empty=new c(o.empty,0);class d{constructor(t,e,i,n){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=n}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new d(e.getMap().invert(),e,this.selection)}}}class u{constructor(t,e,i,n,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=n,this.prevComposition=r}}const p=20;function f(t){let e=[];for(let i=t.length-1;i>=0&&0==e.length;i--)t[i].forEach(((t,i,n,r)=>e.push(n,r)));return e}function g(t,e){if(!t)return null;let i=[];for(let n=0;n<t.length;n+=2){let r=e.map(t[n],1),s=e.map(t[n+1],-1);r<=s&&i.push(r,s)}return i}let m=!1,b=null;function x(t){let e=t.plugins;if(b!=e){m=!1,b=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){m=!0;break}}return m}const v=new h.hs("history"),y=new h.hs("closeHistory");function w(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new h.k_({key:v,state:{init:()=>new u(c.empty,c.empty,null,0,-1),apply:(e,i,n)=>function(t,e,i,n){let r,s=i.getMeta(v);if(s)return s.historyState;i.getMeta(y)&&(t=new u(t.done,t.undone,null,0,-1));let a=i.getMeta("appendedTransaction");if(0==i.steps.length)return t;if(a&&a.getMeta(v))return a.getMeta(v).redo?new u(t.done.addTransform(i,void 0,n,x(e)),t.undone,f(i.mapping.maps),t.prevTime,t.prevComposition):new u(t.done,t.undone.addTransform(i,void 0,n,x(e)),null,t.prevTime,t.prevComposition);if(!1===i.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(r=i.getMeta("rebased"))?new u(t.done.rebased(i,r),t.undone.rebased(i,r),g(t.prevRanges,i.mapping),t.prevTime,t.prevComposition):new u(t.done.addMaps(i.mapping.maps),t.undone.addMaps(i.mapping.maps),g(t.prevRanges,i.mapping),t.prevTime,t.prevComposition);{let r=i.getMeta("composition"),s=0==t.prevTime||!a&&t.prevComposition!=r&&(t.prevTime<(i.time||0)-n.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let i=!1;return t.mapping.maps[0].forEach(((t,n)=>{for(let r=0;r<e.length;r+=2)t<=e[r+1]&&n>=e[r]&&(i=!0)})),i}(i,t.prevRanges)),o=a?g(t.prevRanges,i.mapping):f(i.mapping.maps);return new u(t.done.addTransform(i,s?e.selection.getBookmark():void 0,n,x(e)),c.empty,o,i.time,null==r?t.prevComposition:r)}}(i,n,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,n="historyUndo"==i?A:"historyRedo"==i?S:null;return!!n&&(e.preventDefault(),n(t.state,t.dispatch))}}}})}function k(t,e){return(i,n)=>{let r=v.getState(i);if(!r||0==(t?r.undone:r.done).eventCount)return!1;if(n){let s=function(t,e,i){let n=x(e),r=v.get(e).spec.config,s=(i?t.undone:t.done).popEvent(e,n);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(i?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),r,n),l=new u(i?o:s.remaining,i?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(v,{redo:i,historyState:l})}(r,i,t);s&&n(e?s.scrollIntoView():s)}return!0}}const A=k(!1,!0),S=k(!0,!0);k(!1,!1),k(!0,!1)},61396:(t,e,i)=>{"use strict";i.d(e,{K:()=>f,w:()=>p});for(var n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),o=0;o<10;o++)n[48+o]=n[96+o]=String(o);for(o=1;o<=24;o++)n[o+111]="F"+o;for(o=65;o<=90;o++)n[o]=String.fromCharCode(o+32),r[o]=String.fromCharCode(o);for(var l in n)r.hasOwnProperty(l)||(r[l]=n[l]);var h=i(42845);const c="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function d(t){let e,i,n,r,s=t.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(let t=0;t<s.length-1;t++){let a=s[t];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))n=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);c?r=!0:i=!0}}return e&&(a="Alt-"+a),i&&(a="Ctrl-"+a),r&&(a="Meta-"+a),n&&(a="Shift-"+a),a}function u(t,e,i=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),i&&e.shiftKey&&(t="Shift-"+t),t}function p(t){return new h.k_({props:{handleKeyDown:f(t)}})}function f(t){let e=function(t){let e=Object.create(null);for(let i in t)e[d(i)]=t[i];return e}(t);return function(t,i){let o,l=function(t){var e=!(s&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||a&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?r:n)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(i),h=e[u(l,i)];if(h&&h(t.state,t.dispatch,t))return!0;if(1==l.length&&" "!=l){if(i.shiftKey){let n=e[u(l,i,!1)];if(n&&n(t.state,t.dispatch,t))return!0}if((i.shiftKey||i.altKey||i.metaKey||l.charCodeAt(0)>127)&&(o=n[i.keyCode])&&o!=l){let n=e[u(o,i)];if(n&&n(t.state,t.dispatch,t))return!0}}return!1}}},58903:(t,e,i)=>{"use strict";function n(t){this.content=t}i.d(e,{S4:()=>J,ZF:()=>lt,FK:()=>o,CU:()=>d,sX:()=>$,bP:()=>P,u$:()=>E,vI:()=>u,Sj:()=>K,Ji:()=>p}),n.prototype={constructor:n,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,i){var r=i&&i!=t?this.remove(i):this,s=r.find(t),a=r.content.slice();return-1==s?a.push(i||t,e):(a[s+1]=e,i&&(a[s]=i)),new n(a)},remove:function(t){var e=this.find(t);if(-1==e)return this;var i=this.content.slice();return i.splice(e,2),new n(i)},addToStart:function(t,e){return new n([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var i=this.remove(t).content.slice();return i.push(t,e),new n(i)},addBefore:function(t,e,i){var r=this.remove(e),s=r.content.slice(),a=r.find(t);return s.splice(-1==a?s.length:a,0,e,i),new n(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=n.from(t)).size?new n(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=n.from(t)).size?new n(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=n.from(t);for(var i=0;i<t.content.length;i+=2)e=e.remove(t.content[i]);return e},toObject:function(){var t={};return this.forEach((function(e,i){t[e]=i})),t},get size(){return this.content.length>>1}},n.from=function(t){if(t instanceof n)return t;var e=[];if(t)for(var i in t)e.push(i,t[i]);return new n(e)};const r=n;function s(t,e,i){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:i;let r=t.child(n),a=e.child(n);if(r!=a){if(!r.sameMarkup(a))return i;if(r.isText&&r.text!=a.text){for(let t=0;r.text[t]==a.text[t];t++)i++;return i}if(r.content.size||a.content.size){let t=s(r.content,a.content,i+1);if(null!=t)return t}i+=r.nodeSize}else i+=r.nodeSize}}function a(t,e,i,n){for(let r=t.childCount,s=e.childCount;;){if(0==r||0==s)return r==s?null:{a:i,b:n};let o=t.child(--r),l=e.child(--s),h=o.nodeSize;if(o!=l){if(!o.sameMarkup(l))return{a:i,b:n};if(o.isText&&o.text!=l.text){let t=0,e=Math.min(o.text.length,l.text.length);for(;t<e&&o.text[o.text.length-t-1]==l.text[l.text.length-t-1];)t++,i--,n--;return{a:i,b:n}}if(o.content.size||l.content.size){let t=a(o.content,l.content,i-1,n-1);if(t)return t}i-=h,n-=h}else i-=h,n-=h}}class o{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,i,n=0,r){for(let s=0,a=0;a<e;s++){let o=this.content[s],l=a+o.nodeSize;if(l>t&&!1!==i(o,n+a,r||null,s)&&o.content.size){let r=a+1;o.nodesBetween(Math.max(0,t-r),Math.min(o.content.size,e-r),i,n+r)}a=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,n){let r="",s=!0;return this.nodesBetween(t,e,((a,o)=>{let l=a.isText?a.text.slice(Math.max(t,o)-o,e-o):a.isLeaf?n?"function"==typeof n?n(a):n:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&i&&(s?s=!1:r+=i),r+=l}),0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,n=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(i)&&(n[n.length-1]=e.withText(e.text+i.text),r=1);r<t.content.length;r++)n.push(t.content[r]);return new o(n,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let i=[],n=0;if(e>t)for(let r=0,s=0;s<e;r++){let a=this.content[r],o=s+a.nodeSize;o>t&&((s<t||o>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),i.push(a),n+=a.nodeSize),s=o}return new o(i,n)}cutByIndex(t,e){return t==e?o.empty:0==t&&e==this.content.length?this:new o(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let n=this.content.slice(),r=this.size+e.nodeSize-i.nodeSize;return n[t]=e,new o(n,r)}addToStart(t){return new o([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new o(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let n=this.content[e];t(n,i,e),i+=n.nodeSize}}findDiffStart(t,e=0){return s(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return a(this,t,e,i)}findIndex(t,e=-1){if(0==t)return h(0,t);if(t==this.size)return h(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,n=0;;i++){let r=n+this.child(i).nodeSize;if(r>=t)return r==t||e>0?h(i+1,r):h(i,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return o.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new o(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return o.empty;let e,i=0;for(let n=0;n<t.length;n++){let r=t[n];i+=r.nodeSize,n&&r.isText&&t[n-1].sameMarkup(r)?(e||(e=t.slice(0,n)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new o(e||t,i)}static from(t){if(!t)return o.empty;if(t instanceof o)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new o([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}o.empty=new o([],0);const l={index:0,offset:0};function h(t,e){return l.index=t,l.offset=e,l}function c(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let i=Array.isArray(t);if(Array.isArray(e)!=i)return!1;if(i){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!c(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!c(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}class d{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let n=0;n<t.length;n++){let r=t[n];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,n));else{if(r.type.excludes(this.type))return t;!i&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,n)),e.push(this),i=!0),e&&e.push(r)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&c(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);let n=i.create(e.attrs);return i.checkAttrs(n.attrs),n}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return d.none;if(t instanceof d)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}d.none=[];class u extends Error{}class p{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=g(this.content,t+this.openStart,e);return i&&new p(i,this.openStart,this.openEnd)}removeBetween(t,e){return new p(f(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return p.empty;let i=e.openStart||0,n=e.openEnd||0;if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new p(o.fromJSON(t,e.content),i,n)}static maxOpen(t,e=!0){let i=0,n=0;for(let n=t.firstChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.firstChild)i++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)n++;return new p(t,i,n)}}function f(t,e,i){let{index:n,offset:r}=t.findIndex(e),s=t.maybeChild(n),{index:a,offset:o}=t.findIndex(i);if(r==e||s.isText){if(o!=i&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(i))}if(n!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(f(s.content,e-r-1,i-r-1)))}function g(t,e,i,n){let{index:r,offset:s}=t.findIndex(e),a=t.maybeChild(r);if(s==e||a.isText)return n&&!n.canReplace(r,r,i)?null:t.cut(0,e).append(i).append(t.cut(e));let o=g(a.content,e-s-1,i);return o&&t.replaceChild(r,a.copy(o))}function m(t,e,i){if(i.openStart>t.depth)throw new u("Inserted content deeper than insertion position");if(t.depth-i.openStart!=e.depth-i.openEnd)throw new u("Inconsistent open depths");return b(t,e,i,0)}function b(t,e,i,n){let r=t.index(n),s=t.node(n);if(r==e.index(n)&&n<t.depth-i.openStart){let a=b(t,e,i,n+1);return s.copy(s.content.replaceChild(r,a))}if(i.content.size){if(i.openStart||i.openEnd||t.depth!=n||e.depth!=n){let{start:r,end:a}=function(t,e){let i=e.depth-t.openStart,n=e.node(i).copy(t.content);for(let t=i-1;t>=0;t--)n=e.node(t).copy(o.from(n));return{start:n.resolveNoCache(t.openStart+i),end:n.resolveNoCache(n.content.size-t.openEnd-i)}}(i,t);return k(s,A(t,r,a,e,n))}{let n=t.parent,r=n.content;return k(n,r.cut(0,t.parentOffset).append(i.content).append(r.cut(e.parentOffset)))}}return k(s,S(t,e,n))}function x(t,e){if(!e.type.compatibleContent(t.type))throw new u("Cannot join "+e.type.name+" onto "+t.type.name)}function v(t,e,i){let n=t.node(i);return x(n,e.node(i)),n}function y(t,e){let i=e.length-1;i>=0&&t.isText&&t.sameMarkup(e[i])?e[i]=t.withText(e[i].text+t.text):e.push(t)}function w(t,e,i,n){let r=(e||t).node(i),s=0,a=e?e.index(i):r.childCount;t&&(s=t.index(i),t.depth>i?s++:t.textOffset&&(y(t.nodeAfter,n),s++));for(let t=s;t<a;t++)y(r.child(t),n);e&&e.depth==i&&e.textOffset&&y(e.nodeBefore,n)}function k(t,e){return t.type.checkContent(e),t.copy(e)}function A(t,e,i,n,r){let s=t.depth>r&&v(t,e,r+1),a=n.depth>r&&v(i,n,r+1),l=[];return w(null,t,r,l),s&&a&&e.index(r)==i.index(r)?(x(s,a),y(k(s,A(t,e,i,n,r+1)),l)):(s&&y(k(s,S(t,e,r+1)),l),w(e,i,r,l),a&&y(k(a,S(i,n,r+1)),l)),w(n,null,r,l),new o(l)}function S(t,e,i){let n=[];if(w(null,t,i,n),t.depth>i){y(k(v(t,e,i+1),S(t,e,i+1)),n)}return w(e,null,i,n),new o(n)}p.empty=new p(o.empty,0,0);class C{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],n=t.child(e);return i?t.child(e).cut(i):n}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[3*e],n=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)n+=i.child(e).nodeSize;return n}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return d.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),n=t.maybeChild(e);if(!i){let t=i;i=n,n=t}let r=i.marks;for(var s=0;s<r.length;s++)!1!==r[s].type.spec.inclusive||n&&r[s].isInSet(n.marks)||(r=r[s--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,n=t.parent.maybeChild(t.index());for(var r=0;r<i.length;r++)!1!==i[r].type.spec.inclusive||n&&i[r].isInSet(n.marks)||(i=i[r--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new E(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],n=0,r=e;for(let e=t;;){let{index:t,offset:s}=e.content.findIndex(r),a=r-s;if(i.push(e,t,n+s),!a)break;if(e=e.child(t),e.isText)break;r=a-1,n+=s+1}return new C(e,i,r)}static resolveCached(t,e){let i=T.get(t);if(i)for(let t=0;t<i.elts.length;t++){let n=i.elts[t];if(n.pos==e)return n}else T.set(t,i=new _);let n=i.elts[i.i]=C.resolve(t,e);return i.i=(i.i+1)%M,n}}class _{constructor(){this.elts=[],this.i=0}}const M=12,T=new WeakMap;class E{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const N=Object.create(null);class P{constructor(t,e,i,n=d.none){this.type=t,this.attrs=e,this.marks=n,this.content=i||o.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,n=0){this.content.nodesBetween(t,e,i,n,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,n){return this.content.textBetween(t,e,i,n)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&c(this.attrs,e||t.defaultAttrs||N)&&d.sameSet(this.marks,i||d.none)}copy(t=null){return t==this.content?this:new P(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new P(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return p.empty;let n=this.resolve(t),r=this.resolve(e),s=i?0:n.sharedDepth(e),a=n.start(s),o=n.node(s).content.cut(n.pos-a,r.pos-a);return new p(o,n.depth-s,r.depth-s)}replace(t,e,i){return m(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:n}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(n==t||e.isText)return e;t-=n+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let n=this.content.child(e-1);return{node:n,index:e-1,offset:i-n.nodeSize}}resolve(t){return C.resolveCached(this,t)}resolveNoCache(t){return C.resolve(this,t)}rangeHasMark(t,e,i){let n=!1;return e>t&&this.nodesBetween(t,e,(t=>(i.isInSet(t.marks)&&(n=!0),!n))),n}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),I(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=o.empty,n=0,r=i.childCount){let s=this.contentMatchAt(t).matchFragment(i,n,r),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let t=n;t<r;t++)if(!this.type.allowsMarks(i.child(t).marks))return!1;return!0}canReplaceWith(t,e,i,n){if(n&&!this.type.allowsMarks(n))return!1;let r=this.contentMatchAt(t).matchType(i),s=r&&r.matchFragment(this.content,e);return!!s&&s.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=d.none;for(let e=0;e<this.marks.length;e++){let i=this.marks[e];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!d.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let n=o.fromJSON(t,e.content),r=t.nodeType(e.type).create(e.attrs,n,i);return r.type.checkAttrs(r.attrs),r}}P.prototype.text=void 0;class L extends P{constructor(t,e,i,n){if(super(t,e,null,n),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):I(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new L(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new L(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function I(t,e){for(let i=t.length-1;i>=0;i--)e=t[i].type.name+"("+e+")";return e}class R{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new O(t,e);if(null==i.next)return R.empty;let n=D(i);i.next&&i.err("Unexpected trailing text");let r=function(t){let e=Object.create(null);return i(j(t,0));function i(n){let r=[];n.forEach((e=>{t[e].forEach((({term:e,to:i})=>{if(!e)return;let n;for(let t=0;t<r.length;t++)r[t][0]==e&&(n=r[t][1]);j(t,i).forEach((t=>{n||r.push([e,n=[]]),-1==n.indexOf(t)&&n.push(t)}))}))}));let s=e[n.join(",")]=new R(n.indexOf(t.length-1)>-1);for(let t=0;t<r.length;t++){let n=r[t][1].sort(q);s.next.push({type:r[t][0],next:e[n.join(",")]||i(n)})}return s}}(function(t){let e=[[]];return r(s(t,0),i()),e;function i(){return e.push([])-1}function n(t,i,n){let r={term:n,to:i};return e[t].push(r),r}function r(t,e){t.forEach((t=>t.to=e))}function s(t,e){if("choice"==t.type)return t.exprs.reduce(((t,i)=>t.concat(s(i,e))),[]);if("seq"!=t.type){if("star"==t.type){let a=i();return n(e,a),r(s(t.expr,a),a),[n(a)]}if("plus"==t.type){let a=i();return r(s(t.expr,e),a),r(s(t.expr,a),a),[n(a)]}if("opt"==t.type)return[n(e)].concat(s(t.expr,e));if("range"==t.type){let a=e;for(let e=0;e<t.min;e++){let e=i();r(s(t.expr,a),e),a=e}if(-1==t.max)r(s(t.expr,a),a);else for(let e=t.min;e<t.max;e++){let e=i();n(a,e),r(s(t.expr,a),e),a=e}return[n(a)]}if("name"==t.type)return[n(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let n=0;;n++){let a=s(t.exprs[n],e);if(n==t.exprs.length-1)return a;r(a,e=i())}}}(n));return function(t,e){for(let i=0,n=[t];i<n.length;i++){let t=n[i],r=!t.validEnd,s=[];for(let e=0;e<t.next.length;e++){let{type:i,next:a}=t.next[e];s.push(i.name),!r||i.isText||i.hasRequiredAttrs()||(r=!1),-1==n.indexOf(a)&&n.push(a)}r&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,i),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let n=this;for(let r=e;n&&r<i;r++)n=n.matchType(t.child(r).type);return n}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let n=[this];return function r(s,a){let l=s.matchFragment(t,i);if(l&&(!e||l.validEnd))return o.from(a.map((t=>t.createAndFill())));for(let t=0;t<s.next.length;t++){let{type:e,next:i}=s.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==n.indexOf(i)){n.push(i);let t=r(i,a.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let n=i.shift(),r=n.match;if(r.matchType(t)){let t=[];for(let e=n;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<r.next.length;t++){let{type:s,next:a}=r.next[t];s.isLeaf||s.hasRequiredAttrs()||s.name in e||n.type&&!a.validEnd||(i.push({match:s.contentMatch,type:s,via:n}),e[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(i){t.push(i);for(let n=0;n<i.next.length;n++)-1==t.indexOf(i.next[n].next)&&e(i.next[n].next)}(this),t.map(((e,i)=>{let n=i+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)n+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return n})).join("\n")}}R.empty=new R(!0);class O{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function D(t){let e=[];do{e.push(z(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function z(t){let e=[];do{e.push(F(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function F(t){let e=function(t){if(t.eat("(")){let e=D(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let i=t.nodeTypes,n=i[e];if(n)return[n];let r=[];for(let t in i){let n=i[t];n.isInGroup(e)&&r.push(n)}0==r.length&&t.err("No node type or group '"+e+"' found");return r}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=H(t,e)}return e}function B(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function H(t,e){let i=B(t),n=i;return t.eat(",")&&(n="}"!=t.next?B(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:i,max:n,expr:e}}function q(t,e){return e-t}function j(t,e){let i=[];return function e(n){let r=t[n];if(1==r.length&&!r[0].term)return e(r[0].to);i.push(n);for(let t=0;t<r.length;t++){let{term:n,to:s}=r[t];n||-1!=i.indexOf(s)||e(s)}}(e),i.sort(q)}function G(t){let e=Object.create(null);for(let i in t){let n=t[i];if(!n.hasDefault)return null;e[i]=n.default}return e}function X(t,e){let i=Object.create(null);for(let n in t){let r=e&&e[n];if(void 0===r){let e=t[n];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+n);r=e.default}i[n]=r}return i}function V(t,e,i,n){for(let n in e)if(!(n in t))throw new RangeError(`Unsupported attribute ${n} for ${i} of type ${n}`);for(let i in t){let n=t[i];n.validate&&n.validate(e[i])}}function W(t,e){let i=Object.create(null);if(e)for(let n in e)i[n]=new U(t,n,e[n]);return i}class Y{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=W(t,i.attrs),this.defaultAttrs=G(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==R.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:X(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new P(this,this.computeAttrs(t),o.from(e),d.setFrom(i))}createChecked(t=null,e,i){return e=o.from(e),this.checkContent(e),new P(this,this.computeAttrs(t),e,d.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),(e=o.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let n=this.contentMatch.matchFragment(e),r=n&&n.fillBefore(o.empty,!0);return r?new P(this,t,e.append(r),d.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){V(this.attrs,t,"node",this.name)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:d.none:t}static compile(t,e){let i=Object.create(null);t.forEach(((t,n)=>i[t]=new Y(t,e,n)));let n=e.spec.topNode||"doc";if(!i[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let t in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class U{constructor(t,e,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate="string"==typeof i.validate?function(t,e,i){let n=i.split("|");return i=>{let r=null===i?"null":typeof i;if(n.indexOf(r)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${r}`)}}(t,e,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class ${constructor(t,e,i,n){this.name=t,this.rank=e,this.schema=i,this.spec=n,this.attrs=W(t,n.attrs),this.excluded=null;let r=G(this.attrs);this.instance=r?new d(this,r):null}create(t=null){return!t&&this.instance?this.instance:new d(this,X(this.attrs,t))}static compile(t,e){let i=Object.create(null),n=0;return t.forEach(((t,r)=>i[t]=new $(t,n++,e,r))),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){V(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class K{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let i in t)e[i]=t[i];e.nodes=r.from(t.nodes),e.marks=r.from(t.marks||{}),this.nodes=Y.compile(this.spec.nodes,this),this.marks=$.compile(this.spec.marks,this);let i=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let e=this.nodes[t],n=e.spec.content||"",r=e.spec.marks;if(e.contentMatch=i[n]||(i[n]=R.parse(n,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==r?null:r?Z(this,r.split(" ")):""!=r&&e.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],i=e.spec.excludes;e.excluded=null==i?[e]:""==i?[]:Z(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,n){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Y))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,n)}text(t,e){let i=this.nodes.text;return new L(i,i.defaultAttrs,t,d.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return P.fromJSON(this,t)}markFromJSON(t){return d.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function Z(t,e){let i=[];for(let n=0;n<e.length;n++){let r=e[n],s=t.marks[r],a=s;if(s)i.push(s);else for(let e in t.marks){let n=t.marks[e];("_"==r||n.spec.group&&n.spec.group.split(" ").indexOf(r)>-1)&&i.push(a=n)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return i}class J{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let i=this.matchedStyles=[];e.forEach((t=>{if(function(t){return null!=t.tag}(t))this.tags.push(t);else if(function(t){return null!=t.style}(t)){let e=/[^=]*/.exec(t.style)[0];i.indexOf(e)<0&&i.push(e),this.styles.push(t)}})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let i=t.nodes[e.node];return i.contentMatch.matchType(i)}))}parse(t,e={}){let i=new rt(this,e,!1);return i.addAll(t,d.none,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new rt(this,e,!0);return i.addAll(t,d.none,e.from,e.to),p.maxOpen(i.finish())}matchTag(t,e,i){for(let n=i?this.tags.indexOf(i)+1:0;n<this.tags.length;n++){let i=this.tags[n];if(st(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}matchStyle(t,e,i,n){for(let r=n?this.styles.indexOf(n)+1:0;r<this.styles.length;r++){let n=this.styles[r],s=n.style;if(!(0!=s.indexOf(t)||n.context&&!i.matchesContext(n.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}static schemaRules(t){let e=[];function i(t){let i=null==t.priority?50:t.priority,n=0;for(;n<e.length;n++){let t=e[n];if((null==t.priority?50:t.priority)<i)break}e.splice(n,0,t)}for(let e in t.marks){let n=t.marks[e].spec.parseDOM;n&&n.forEach((t=>{i(t=at(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))}for(let e in t.nodes){let n=t.nodes[e].spec.parseDOM;n&&n.forEach((t=>{i(t=at(t)),t.node||t.ignore||t.mark||(t.node=e)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new J(t,J.schemaRules(t)))}}const Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},et={ol:!0,ul:!0};function it(t,e,i){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&i}class nt{constructor(t,e,i,n,r,s){this.type=t,this.attrs=e,this.marks=i,this.solid=n,this.options=s,this.content=[],this.activeMarks=d.none,this.match=r||(4&s?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(o.from(t));if(!e){let e,i=this.type.contentMatch;return(e=i.findWrapping(t.type))?(this.match=i,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let i=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-t[0].length))}}let e=o.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(o.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Q.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class rt{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let n,r=e.topNode,s=it(null,e.preserveWhitespace,0)|(i?4:0);n=r?new nt(r.type,r.attrs,d.none,!0,e.topMatch||r.type.contentMatch,s):new nt(i?null:t.schema.topNodeType,null,d.none,!0,null,s),this.nodes=[n],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){3==t.nodeType?this.addTextNode(t,e):1==t.nodeType&&this.addElement(t,e)}addTextNode(t,e){let i=t.nodeValue,n=this.top,r=2&n.options?"full":this.localPreserveWS||(1&n.options)>0;if("full"===r||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(r)i="full"!==r?i.replace(/\r?\n|\r/g," "):i.replace(/\r\n?/g,"\n");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let e=n.content[n.content.length-1],r=t.previousSibling;(!e||r&&"BR"==r.nodeName||e.isText&&/[ \t\r\n\u000c]$/.test(e.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),e,!/\S/.test(i)),this.findInText(t)}else this.findInside(t)}addElement(t,e,i){let n=this.localPreserveWS,r=this.top;("PRE"==t.tagName||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s,a=t.nodeName.toLowerCase();et.hasOwnProperty(a)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,i=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&et.hasOwnProperty(t)&&i?(i.appendChild(e),e=i):"li"==t?i=e:t&&(i=null)}}(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(s=this.parser.matchTag(t,this,i));t:if(o?o.ignore:tt.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let i,n=this.needsBlock;if(Q.hasOwnProperty(a))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),i=!0,r.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break t}let s=o&&o.skip?e:this.readStyles(t,e);s&&this.addAll(t,s),i&&this.sync(r),this.needsBlock=n}else{let i=this.readStyles(t,e);i&&this.addElementByRule(t,o,i,!1===o.consuming?s:void 0)}this.localPreserveWS=n}leafFallback(t,e){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"),e)}ignoreFallback(t,e){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),e,!0)}readStyles(t,e){let i=t.style;if(i&&i.length)for(let t=0;t<this.parser.matchedStyles.length;t++){let n=this.parser.matchedStyles[t],r=i.getPropertyValue(n);if(r)for(let t;;){let i=this.parser.matchStyle(n,r,this,t);if(!i)break;if(i.ignore)return null;if(e=i.clearMark?e.filter((t=>!i.clearMark(t))):e.concat(this.parser.schema.marks[i.mark].create(i.attrs)),!1!==i.consuming)break;t=i}}return e}addElementByRule(t,e,i,n){let r,s;if(e.node)if(s=this.parser.schema.nodes[e.node],s.isLeaf)this.insertNode(s.create(e.attrs),i,"BR"==t.nodeName)||this.leafFallback(t,i);else{let t=this.enter(s,e.attrs||null,i,e.preserveWhitespace);t&&(r=!0,i=t)}else{let t=this.parser.schema.marks[e.mark];i=i.concat(t.create(e.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(n)this.addElement(t,i,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t,i,!1)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n,i),this.findAround(t,n,!1)}r&&this.sync(a)&&this.open--}addAll(t,e,i,n){let r=i||0;for(let s=i?t.childNodes[i]:t.firstChild,a=null==n?null:t.childNodes[n];s!=a;s=s.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(s,e);this.findAtPoint(t,r)}findPlace(t,e,i){let n,r;for(let e=this.open,s=0;e>=0;e--){let a=this.nodes[e],o=a.findWrapping(t);if(o&&(!n||n.length>o.length+s)&&(n=o,r=a,!o.length))break;if(a.solid){if(i)break;s+=2}}if(!n)return null;this.sync(r);for(let t=0;t<n.length;t++)e=this.enterInner(n[t],null,e,!1);return e}insertNode(t,e,i){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&(e=this.enterInner(t,null,e))}let n=this.findPlace(t,e,i);if(n){this.closeExtra();let e=this.top;e.match&&(e.match=e.match.matchType(t.type));let i=d.none;for(let r of n.concat(t.marks))(e.type?e.type.allowsMarkType(r.type):ot(r.type,t.type))&&(i=r.addToSet(i));return e.content.push(t.mark(i)),!0}return!1}enter(t,e,i,n){let r=this.findPlace(t.create(e),i,!1);return r&&(r=this.enterInner(t,e,i,!0,n)),r}enterInner(t,e,i,n=!1,r){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let a=it(t,r,s.options);4&s.options&&0==s.content.length&&(a|=4);let o=d.none;return i=i.filter((e=>!(s.type?s.type.allowsMarkType(e.type):ot(e.type,t))||(o=e.addToSet(o),!1))),this.nodes.push(new nt(t,e,o,n,null,a)),this.open++,i}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=1)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let e=i.length-1;e>=0;e--)t+=i[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let n=0;n<this.find.length;n++)if(null==this.find[n].pos&&1==t.nodeType&&t.contains(this.find[n].node)){e.compareDocumentPosition(this.find[n].node)&(i?2:4)&&(this.find[n].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,n=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),r=-(i?i.depth+1:0)+(n?0:1),s=(t,a)=>{for(;t>=0;t--){let o=e[t];if(""==o){if(t==e.length-1||0==t)continue;for(;a>=r;a--)if(s(t-1,a))return!0;return!1}{let t=a>0||0==a&&n?this.nodes[a].type:i&&a>=r?i.node(a-r).type:null;if(!t||t.name!=o&&!t.isInGroup(o))return!1;a--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function st(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function at(t){let e={};for(let i in t)e[i]=t[i];return e}function ot(t,e){let i=e.schema.nodes;for(let n in i){let r=i[n];if(!r.allowsMarkType(t))continue;let s=[],a=t=>{s.push(t);for(let i=0;i<t.edgeCount;i++){let{type:n,next:r}=t.edge(i);if(n==e)return!0;if(s.indexOf(r)<0&&a(r))return!0}};if(a(r.contentMatch))return!0}}class lt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=ct(e).createDocumentFragment());let n=i,r=[];return t.forEach((t=>{if(r.length||t.marks.length){let i=0,s=0;for(;i<r.length&&s<t.marks.length;){let e=t.marks[s];if(this.marks[e.type.name]){if(!e.eq(r[i][0])||!1===e.type.spec.spanning)break;i++,s++}else s++}for(;i<r.length;)n=r.pop()[1];for(;s<t.marks.length;){let i=t.marks[s++],a=this.serializeMark(i,t.isInline,e);a&&(r.push([i,n]),n.appendChild(a.dom),n=a.contentDOM||a.dom)}}n.appendChild(this.serializeNodeInner(t,e))})),i}serializeNodeInner(t,e){let{dom:i,contentDOM:n}=pt(ct(e),this.nodes[t.type.name](t),null,t.attrs);if(n){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,n)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let n=t.marks.length-1;n>=0;n--){let r=this.serializeMark(t.marks[n],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i}serializeMark(t,e,i={}){let n=this.marks[t.type.name];return n&&pt(ct(i),n(t,e),null,t.attrs)}static renderSpec(t,e,i=null,n){return pt(t,e,i,n)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new lt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=ht(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return ht(t.marks)}}function ht(t){let e={};for(let i in t){let n=t[i].spec.toDOM;n&&(e[i]=n)}return e}function ct(t){return t.document||window.document}const dt=new WeakMap;function ut(t){let e=dt.get(t);return void 0===e&&dt.set(t,e=function(t){let e=null;function i(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])e||(e=[]),e.push(t);else for(let e=0;e<t.length;e++)i(t[e]);else for(let e in t)i(t[e])}return i(t),e}(t)),e}function pt(t,e,i,n){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,s=e[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(n&&(r=ut(n))&&r.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a,o=s.indexOf(" ");o>0&&(i=s.slice(0,o),s=s.slice(o+1));let l=i?t.createElementNS(i,s):t.createElement(s),h=e[1],c=1;if(h&&"object"==typeof h&&null==h.nodeType&&!Array.isArray(h)){c=2;for(let t in h)if(null!=h[t]){let e=t.indexOf(" ");e>0?l.setAttributeNS(t.slice(0,e),t.slice(e+1),h[t]):l.setAttribute(t,h[t])}}for(let r=c;r<e.length;r++){let s=e[r];if(0===s){if(r<e.length-1||r>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:e,contentDOM:r}=pt(t,s,i,n);if(l.appendChild(e),r){if(a)throw new RangeError("Multiple content holes");a=r}}}return{dom:l,contentDOM:a}}},57644:(t,e,i)=>{"use strict";i.d(e,{wQ:()=>f});var n=i(58903);const r=["p",0],s=["blockquote",0],a=["hr"],o=["pre",["code",0]],l=["br"],h={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>r},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>s},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>a},heading:{attrs:{level:{default:1,validate:"number"}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:t=>["h"+t.attrs.level,0]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>o},text:{group:"inline"},image:{inline:!0,attrs:{src:{validate:"string"},alt:{default:null,validate:"string|null"},title:{default:null,validate:"string|null"}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM(t){let{src:e,alt:i,title:n}=t.attrs;return["img",{src:e,alt:i,title:n}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>l}},c=["em",0],d=["strong",0],u=["code",0],p={link:{attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),title:t.getAttribute("title")})}],toDOM(t){let{href:e,title:i}=t.attrs;return["a",{href:e,title:i},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>"em"==t.type.name}],toDOM:()=>c},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!=t.style.fontWeight&&null},{style:"font-weight=400",clearMark:t=>"strong"==t.type.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>d},code:{code:!0,parseDOM:[{tag:"code"}],toDOM:()=>u}},f=new n.Sj({nodes:h,marks:p})},42845:(t,e,i)=>{"use strict";i.d(e,{$t:()=>A,LN:()=>a,U3:()=>c,hs:()=>T,i5:()=>f,k_:()=>C,nh:()=>u,yn:()=>o});var n=i(58903),r=i(38262);const s=Object.create(null);class a{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new o(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=n.Ji.empty){let i=e.content.lastChild,r=null;for(let t=0;t<e.openEnd;t++)r=i,i=i.lastChild;let s=t.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:l,$to:h}=a[o],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(h.pos),o?n.Ji.empty:e),0==o&&b(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,n=this.ranges;for(let r=0;r<n.length;r++){let{$from:s,$to:a}=n[r],o=t.mapping.slice(i),l=o.map(s.pos),h=o.map(a.pos);r?t.deleteRange(l,h):(t.replaceRangeWith(l,h,e),b(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let n=t.parent.inlineContent?new c(t):m(t.node(0),t.parent,t.pos,t.index(),e,i);if(n)return n;for(let n=t.depth-1;n>=0;n--){let r=e<0?m(t.node(0),t.node(n),t.before(n+1),t.index(n),e,i):m(t.node(0),t.node(n),t.after(n+1),t.index(n)+1,e,i);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new f(t.node(0))}static atStart(t){return m(t,t,0,0,1)||new f(t)}static atEnd(t){return m(t,t,t.content.size,t.childCount,-1)||new f(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=s[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in s)throw new RangeError("Duplicate use of selection JSON ID "+t);return s[t]=e,e.prototype.jsonID=t,e}getBookmark(){return c.between(this.$anchor,this.$head).getBookmark()}}a.prototype.visible=!0;class o{constructor(t,e){this.$from=t,this.$to=e}}let l=!1;function h(t){l||t.parent.inlineContent||(l=!0)}class c extends a{constructor(t,e=t){h(t),h(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return a.near(i);let n=t.resolve(e.map(this.anchor));return new c(n.parent.inlineContent?n:i,i)}replace(t,e=n.Ji.empty){if(super.replace(t,e),e==n.Ji.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof c&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new d(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new c(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let n=t.resolve(e);return new this(n,i==e?n:t.resolve(i))}static between(t,e,i){let n=t.pos-e.pos;if(i&&!n||(i=n>=0?1:-1),!e.parent.inlineContent){let t=a.findFrom(e,i,!0)||a.findFrom(e,-i,!0);if(!t)return a.near(e,i);e=t.$head}return t.parent.inlineContent||(0==n||(t=(a.findFrom(t,-i,!0)||a.findFrom(t,i,!0)).$anchor).pos<e.pos!=n<0)&&(t=e),new c(t,e)}}a.jsonID("text",c);class d{constructor(t,e){this.anchor=t,this.head=e}map(t){return new d(t.map(this.anchor),t.map(this.head))}resolve(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))}}class u extends a{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:n}=e.mapResult(this.anchor),r=t.resolve(n);return i?a.near(r):new u(r)}content(){return new n.Ji(n.FK.from(this.node),0,0)}eq(t){return t instanceof u&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new u(t.resolve(e.anchor))}static create(t,e){return new u(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}u.prototype.visible=!1,a.jsonID("node",u);class p{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new d(i,i):new p(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&u.isSelectable(i)?new u(e):a.near(e)}}class f extends a{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=n.Ji.empty){if(e==n.Ji.empty){t.delete(0,t.doc.content.size);let e=a.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new f(t)}map(t){return new f(t)}eq(t){return t instanceof f}getBookmark(){return g}}a.jsonID("all",f);const g={map(){return this},resolve:t=>new f(t)};function m(t,e,i,n,r,s=!1){if(e.inlineContent)return c.create(t,i);for(let a=n-(r>0?0:1);r>0?a<e.childCount:a>=0;a+=r){let n=e.child(a);if(n.isAtom){if(!s&&u.isSelectable(n))return u.create(t,i-(r<0?n.nodeSize:0))}else{let e=m(t,n,i+r,r<0?n.childCount:0,r,s);if(e)return e}i+=n.nodeSize*r}return null}function b(t,e,i){let n=t.steps.length-1;if(n<e)return;let s,o=t.steps[n];(o instanceof r.Ln||o instanceof r.Wg)&&(t.mapping.maps[n].forEach(((t,e,i,n)=>{null==s&&(s=n)})),t.setSelection(a.near(t.doc.resolve(s),i)))}class x extends r.dL{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return n.CU.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||n.CU.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();{if(null==i&&(i=e),i=null==i?e:i,!t)return this.deleteRange(e,i);let r=this.storedMarks;if(!r){let t=this.doc.resolve(e);r=i==e?t.marks():t.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,n.text(t,r)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function v(t,e){return e&&t?t.bind(e):t}class y{constructor(t,e,i){this.name=t,this.init=v(e.init,i),this.apply=v(e.apply,i)}}const w=[new y("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new y("selection",{init:(t,e)=>t.selection||a.atStart(e.doc),apply:t=>t.selection}),new y("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,i,n)=>n.selection.$cursor?t.storedMarks:null}),new y("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class k{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=w.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new y(t.key,t.spec.state,t))}))}}class A{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let e=this.config.plugins[i];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),n=null;for(;;){let r=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let o=n?n[s].n:0,l=n?n[s].state:this,h=o<e.length&&a.spec.appendTransaction.call(a,o?e.slice(o):e,l,i);if(h&&i.filterTransaction(h,s)){if(h.setMeta("appendedTransaction",t),!n){n=[];for(let t=0;t<this.config.plugins.length;t++)n.push(t<s?{state:i,n:e.length}:{state:this,n:0})}e.push(h),i=i.applyInner(h),r=!0}n&&(n[s]={state:i,n:e.length})}}if(!r)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new A(this.config),i=this.config.fields;for(let n=0;n<i.length;n++){let r=i[n];e[r.name]=r.apply(t,this[r.name],this,e)}return e}get tr(){return new x(this)}static create(t){let e=new k(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new A(e);for(let n=0;n<e.fields.length;n++)i[e.fields[n].name]=e.fields[n].init(t,i);return i}reconfigure(t){let e=new k(this.schema,t.plugins),i=e.fields,n=new A(e);for(let e=0;e<i.length;e++){let r=i[e].name;n[r]=this.hasOwnProperty(r)?this[r]:i[e].init(t,n)}return n}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let i in t){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let n=t[i],r=n.spec.state;r&&r.toJSON&&(e[i]=r.toJSON.call(n,this[n.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new k(t.schema,t.plugins),s=new A(r);return r.fields.forEach((r=>{if("doc"==r.name)s.doc=n.bP.fromJSON(t.schema,e.doc);else if("selection"==r.name)s.selection=a.fromJSON(s.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let n in i){let a=i[n],o=a.spec.state;if(a.key==r.name&&o&&o.fromJSON&&Object.prototype.hasOwnProperty.call(e,n))return void(s[r.name]=o.fromJSON.call(a,t,e[n],s))}s[r.name]=r.init(t,s)}})),s}}function S(t,e,i){for(let n in t){let r=t[n];r instanceof Function?r=r.bind(e):"handleDOMEvents"==n&&(r=S(r,e,{})),i[n]=r}return i}class C{constructor(t){this.spec=t,this.props={},t.props&&S(t.props,this,this.props),this.key=t.key?t.key.key:M("plugin")}getState(t){return t[this.key]}}const _=Object.create(null);function M(t){return t in _?t+"$"+ ++_[t]:(_[t]=0,t+"$")}class T{constructor(t="key"){this.key=M(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},38262:(t,e,i)=>{"use strict";i.d(e,{$L:()=>L,Ln:()=>b,N0:()=>N,Um:()=>P,Wg:()=>x,X9:()=>l,dL:()=>V,jP:()=>k,n9:()=>T,oM:()=>A,pn:()=>c,zy:()=>M});var n=i(58903);const r=Math.pow(2,16);function s(t){return 65535&t}class a{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class o{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&o.empty)return o.empty}recover(t){let e=0,i=s(t);if(!this.inverted)for(let t=0;t<i;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*i]+e+function(t){return(t-(65535&t))/r}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let n=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let h=this.ranges[l]-(this.inverted?n:0);if(h>t)break;let c=this.ranges[l+s],d=this.ranges[l+o],u=h+c;if(t<=u){let s=h+n+((c?t==h?-1:t==u?1:e:e)<0?0:d);if(i)return s;let o=t==(e<0?h:u)?null:l/3+(t-h)*r,p=t==h?2:t==u?1:4;return(e<0?t!=h:t!=u)&&(p|=8),new a(s,p,o)}n+=d-c}return i?t+n:new a(t+n,0,null)}touches(t,e){let i=0,n=s(e),r=this.inverted?2:1,a=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?i:0);if(s>t)break;let o=this.ranges[e+r];if(t<=s+o&&e==3*n)return!0;i+=this.ranges[e+a]-o}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let n=0,r=0;n<this.ranges.length;n+=3){let s=this.ranges[n],a=s-(this.inverted?r:0),o=s+(this.inverted?0:r),l=this.ranges[n+e],h=this.ranges[n+i];t(a,a+l,o,o+h),r+=h-l}}invert(){return new o(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?o.empty:new o(t<0?[0,-t,0]:[0,0,t])}}o.empty=new o([]);class l{constructor(t,e,i=0,n=(t?t.length:0)){this.mirror=e,this.from=i,this.to=n,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new l(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),null!=e&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,i=this._maps.length;e<t._maps.length;e++){let n=t.getMirror(e);this.appendMap(t._maps[e],null!=n&&n<e?i+n:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this._maps.length+t._maps.length;e>=0;e--){let n=t.getMirror(e);this.appendMap(t._maps[e].invert(),null!=n&&n>e?i-n-1:void 0)}}invert(){let t=new l;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this._maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let n=0;for(let i=this.from;i<this.to;i++){let r=this._maps[i].mapResult(t,e);if(null!=r.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this._maps[e].recover(r.recover);continue}}n|=r.delInfo,t=r.pos}return i?t:new a(t,n,null)}}const h=Object.create(null);class c{getMap(){return o.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=h[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e}}class d{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new d(t,null)}static fail(t){return new d(null,t)}static fromReplace(t,e,i,r){try{return d.ok(t.replace(e,i,r))}catch(t){if(t instanceof n.vI)return d.fail(t.message);throw t}}}function u(t,e,i){let r=[];for(let n=0;n<t.childCount;n++){let s=t.child(n);s.content.size&&(s=s.copy(u(s.content,e,s))),s.isInline&&(s=e(s,i,n)),r.push(s)}return n.FK.fromArray(r)}class p extends c{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new n.Ji(u(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),r),e.openStart,e.openEnd);return d.fromReplace(t,this.from,this.to,s)}invert(){return new f(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new p(e.pos,i.pos,this.mark)}merge(t){return t instanceof p&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new p(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new p(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("addMark",p);class f extends c{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new n.Ji(u(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return d.fromReplace(t,this.from,this.to,i)}invert(){return new p(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new f(e.pos,i.pos,this.mark)}merge(t){return t instanceof f&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new f(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new f(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("removeMark",f);class g extends c{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return d.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(t))return new g(this.pos,e.marks[i]);return new g(this.pos,this.mark)}}return new m(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new g(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new g(e.pos,t.markFromJSON(e.mark))}}c.jsonID("addNodeMark",g);class m extends c{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return d.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new g(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new m(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new m(e.pos,t.markFromJSON(e.mark))}}c.jsonID("removeNodeMark",m);class b extends c{constructor(t,e,i,n=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=n}apply(t){return this.structure&&v(t,this.from,this.to)?d.fail("Structure replace would overwrite content"):d.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new o([this.from,this.to-this.from,this.slice.size])}invert(t){return new b(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new b(e.pos,Math.max(e.pos,i.pos),this.slice,this.structure)}merge(t){if(!(t instanceof b)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new b(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new b(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new b(e.from,e.to,n.Ji.fromJSON(t,e.slice),!!e.structure)}}c.jsonID("replace",b);class x extends c{constructor(t,e,i,n,r,s,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=n,this.slice=r,this.insert=s,this.structure=a}apply(t){if(this.structure&&(v(t,this.from,this.gapFrom)||v(t,this.gapTo,this.to)))return d.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return d.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?d.fromReplace(t,this.from,this.to,i):d.fail("Content does not fit in gap")}getMap(){return new o([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new x(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),n=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),r=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||n<e.pos||r>i.pos?null:new x(e.pos,i.pos,n,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new x(e.from,e.to,e.gapFrom,e.gapTo,n.Ji.fromJSON(t,e.slice),e.insert,!!e.structure)}}function v(t,e,i){let n=t.resolve(e),r=i-e,s=n.depth;for(;r>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,r--;if(r>0){let t=n.node(s).maybeChild(n.indexAfter(s));for(;r>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,r--}}return!1}function y(t,e,i,r=i.contentMatch,s=!0){let a=t.doc.nodeAt(e),o=[],l=e+1;for(let e=0;e<a.childCount;e++){let h=a.child(e),c=l+h.nodeSize,d=r.matchType(h.type);if(d){r=d;for(let e=0;e<h.marks.length;e++)i.allowsMarkType(h.marks[e].type)||t.step(new f(l,c,h.marks[e]));if(s&&h.isText&&"pre"!=i.whitespace){let t,e,r=/\r?\n|\r/g;for(;t=r.exec(h.text);)e||(e=new n.Ji(n.FK.from(i.schema.text(" ",i.allowedMarks(h.marks))),0,0)),o.push(new b(l+t.index,l+t.index+t[0].length,e))}}else o.push(new b(l,c,n.Ji.empty));l=c}if(!r.validEnd){let e=r.fillBefore(n.FK.empty,!0);t.replace(l,l,new n.Ji(e,0,0))}for(let e=o.length-1;e>=0;e--)t.step(o[e])}function w(t,e,i){return(0==e||t.canReplace(e,t.childCount))&&(i==t.childCount||t.canReplace(0,i))}function k(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let n=t.$from.node(i),r=t.$from.index(i),s=t.$to.indexAfter(i);if(i<t.depth&&n.canReplace(r,s,e))return i;if(0==i||n.type.spec.isolating||!w(n,r,s))break}return null}function A(t,e,i=null,n=t){let r=function(t,e){let{parent:i,startIndex:n,endIndex:r}=t,s=i.contentMatchAt(n).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return i.canReplaceWith(n,r,a)?s:null}(t,e),s=r&&function(t,e){let{parent:i,startIndex:n,endIndex:r}=t,s=i.child(n),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let o=(a.length?a[a.length-1]:e).contentMatch;for(let t=n;o&&t<r;t++)o=o.matchType(i.child(t).type);return o&&o.validEnd?a:null}(n,e);return s?r.map(S).concat({type:e,attrs:i}).concat(s.map(S)):null}function S(t){return{type:t,attrs:null}}function C(t,e,i,n){e.forEach(((r,s)=>{if(r.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(r.text);){let r=t.mapping.slice(n).map(i+1+s+a.index);t.replaceWith(r,r+1,e.type.schema.linebreakReplacement.create())}}}))}function _(t,e,i,n){e.forEach(((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let r=t.mapping.slice(n).map(i+1+s);t.replaceWith(r,r+1,e.type.schema.text("\n"))}}))}function M(t,e,i=1,n){let r=t.resolve(e),s=r.depth-i,a=n&&n[n.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let t=r.depth-1,e=i-2;t>s;t--,e--){let i=r.node(t),s=r.index(t);if(i.type.spec.isolating)return!1;let a=i.content.cutByIndex(s,i.childCount),o=n&&n[e+1];o&&(a=a.replaceChild(0,o.type.create(o.attrs)));let l=n&&n[e]||i;if(!i.canReplace(s+1,i.childCount)||!l.type.validContent(a))return!1}let o=r.indexAfter(s),l=n&&n[0];return r.node(s).canReplaceWith(o,o,l?l.type:r.node(s+1).type)}function T(t,e){let i=t.resolve(e),n=i.index();return E(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(n,n+1)}function E(t,e){return!(!t||!e||t.isLeaf||!function(t,e){e.content.size||t.type.compatibleContent(e.type);let i=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let r=0;r<e.childCount;r++){let s=e.child(r),a=s.type==n?t.type.schema.nodes.text:s.type;if(i=i.matchType(a),!i)return!1;if(!t.type.allowsMarks(s.marks))return!1}return i.validEnd}(t,e))}function N(t,e,i=-1){let n=t.resolve(e);for(let t=n.depth;;t--){let r,s,a=n.index(t);if(t==n.depth?(r=n.nodeBefore,s=n.nodeAfter):i>0?(r=n.node(t+1),a++,s=n.node(t).maybeChild(a)):(r=n.node(t).maybeChild(a-1),s=n.node(t+1)),r&&!r.isTextblock&&E(r,s)&&n.node(t).canReplace(a,a+1))return e;if(0==t)break;e=i<0?n.before(t):n.after(t)}}function P(t,e,i){let n=t.resolve(e);if(!i.content.size)return e;let r=i.content;for(let t=0;t<i.openStart;t++)r=r.firstChild.content;for(let t=1;t<=(0==i.openStart&&i.size?2:1);t++)for(let e=n.depth;e>=0;e--){let i=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,s=n.index(e)+(i>0?1:0),a=n.node(e),o=!1;if(1==t)o=a.canReplace(s,s,r);else{let t=a.contentMatchAt(s).findWrapping(r.firstChild.type);o=t&&a.canReplaceWith(s,s,t[0])}if(o)return 0==i?n.pos:i<0?n.before(e+1):n.after(e+1)}return null}function L(t,e,i=e,r=n.Ji.empty){if(e==i&&!r.size)return null;let s=t.resolve(e),a=t.resolve(i);return I(s,a,r)?new b(e,i,r):new R(s,a,r).fit()}function I(t,e,i){return!i.openStart&&!i.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),i.content)}c.jsonID("replaceAround",x);class R{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=n.FK.empty;for(let e=0;e<=t.depth;e++){let i=t.node(e);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=n.FK.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,a=i.depth,o=r.depth;for(;a&&o&&1==s.childCount;)s=s.firstChild.content,a--,o--;let l=new n.Ji(s,a,o);return t>-1?new x(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new b(i.pos,r.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,n=this.unplaced.openEnd;i<t;i++){let r=e.firstChild;if(e.childCount>1&&(n=0),r.type.spec.isolating&&n<=i){t=i;break}e=r.content}for(let e=1;e<=2;e++)for(let i=1==e?t:this.unplaced.openStart;i>=0;i--){let t,r=null;i?(r=z(this.unplaced.content,i-1).firstChild,t=r.content):t=this.unplaced.content;let s=t.firstChild;for(let t=this.depth;t>=0;t--){let a,{type:o,match:l}=this.frontier[t],h=null;if(1==e&&(s?l.matchType(s.type)||(h=l.fillBefore(n.FK.from(s),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:i,frontierDepth:t,parent:r,inject:h};if(2==e&&s&&(a=l.findWrapping(s.type)))return{sliceDepth:i,frontierDepth:t,parent:r,wrap:a};if(r&&l.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=z(t,e);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new n.Ji(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=z(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new n.Ji(O(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new n.Ji(O(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let t=0;t<s.length;t++)this.openFrontierNode(s[t]);let a=this.unplaced,o=i?i.content:a.content,l=a.openStart-t,h=0,c=[],{match:d,type:u}=this.frontier[e];if(r){for(let t=0;t<r.childCount;t++)c.push(r.child(t));d=d.matchFragment(r)}let p=o.size+t-(a.content.size-a.openEnd);for(;h<o.childCount;){let t=o.child(h),e=d.matchType(t.type);if(!e)break;h++,(h>1||0==l||t.content.size)&&(d=e,c.push(F(t.mark(u.allowedMarks(t.marks)),1==h?l:0,h==o.childCount?p:-1)))}let f=h==o.childCount;f||(p=-1),this.placed=D(this.placed,e,n.FK.from(c)),this.frontier[e].match=d,f&&p<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=o;t<p;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=f?0==t?n.Ji.empty:new n.Ji(O(a.content,t-1,1),t-1,p<0?a.openEnd:t-1):new n.Ji(O(a.content,t,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!B(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,n=this.$to.after(i);for(;i>1&&n==this.$to.end(--i);)++n;return n}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:n}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=B(t,e,n,i,r);if(s){for(let i=e-1;i>=0;i--){let{match:e,type:n}=this.frontier[i],r=B(t,i,n,e,!0);if(!r||r.childCount)continue t}return{depth:e,fit:s,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=D(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let e=t.node(i),n=e.type.contentMatch.fillBefore(e.content,!0,t.index(i));this.openFrontierNode(e.type,e.attrs,n)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=D(this.placed,this.depth,n.FK.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(n.FK.empty,!0);t.childCount&&(this.placed=D(this.placed,this.frontier.length,t))}}function O(t,e,i){return 0==e?t.cutByIndex(i,t.childCount):t.replaceChild(0,t.firstChild.copy(O(t.firstChild.content,e-1,i)))}function D(t,e,i){return 0==e?t.append(i):t.replaceChild(t.childCount-1,t.lastChild.copy(D(t.lastChild.content,e-1,i)))}function z(t,e){for(let i=0;i<e;i++)t=t.firstChild.content;return t}function F(t,e,i){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,F(r.firstChild,e-1,1==r.childCount?i-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),i<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(n.FK.empty,!0)))),t.copy(r)}function B(t,e,i,n,r){let s=t.node(e),a=r?t.indexAfter(e):t.index(e);if(a==s.childCount&&!i.compatibleContent(s.type))return null;let o=n.fillBefore(s.content,!0,a);return o&&!function(t,e,i){for(let n=i;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(i,s.content,a)?o:null}function H(t,e,i,r,s){if(e<i){let n=t.firstChild;t=t.replaceChild(0,n.copy(H(n.content,e+1,i,r,n)))}if(e>r){let e=s.contentMatchAt(0),i=e.fillBefore(t).append(t);t=i.append(e.matchFragment(i).fillBefore(n.FK.empty,!0))}return t}function q(t,e){let i=[];for(let n=Math.min(t.depth,e.depth);n>=0;n--){let r=t.start(n);if(r<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;(r==e.start(n)||n==t.depth&&n==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&n&&e.start(n-1)==r-1)&&i.push(n)}return i}class j extends c{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return d.fail("No node at attribute step's position");let i=Object.create(null);for(let t in e.attrs)i[t]=e.attrs[t];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return d.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}getMap(){return o.empty}invert(t){return new j(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new j(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new j(e.pos,e.attr,e.value)}}c.jsonID("attr",j);class G extends c{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let i in t.attrs)e[i]=t.attrs[i];e[this.attr]=this.value;let i=t.type.create(e,t.content,t.marks);return d.ok(i)}getMap(){return o.empty}invert(t){return new G(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new G(e.attr,e.value)}}c.jsonID("docAttr",G);let X=class extends Error{};X=function t(e){let i=Error.call(this,e);return i.__proto__=t.prototype,i},(X.prototype=Object.create(Error.prototype)).constructor=X,X.prototype.name="TransformError";class V{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new l}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new X(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=n.Ji.empty){let r=L(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new n.Ji(n.FK.from(i),0,0))}delete(t,e){return this.replace(t,e,n.Ji.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return function(t,e,i,r){if(!r.size)return t.deleteRange(e,i);let s=t.doc.resolve(e),a=t.doc.resolve(i);if(I(s,a,r))return t.step(new b(e,i,r));let o=q(s,t.doc.resolve(i));0==o[o.length-1]&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let t=s.depth,e=s.pos-1;t>0;t--,e--){let i=s.node(t).type.spec;if(i.defining||i.definingAsContext||i.isolating)break;o.indexOf(t)>-1?l=t:s.before(t)==e&&o.splice(1,0,-t)}let h=o.indexOf(l),c=[],d=r.openStart;for(let t=r.content,e=0;;e++){let i=t.firstChild;if(c.push(i),e==r.openStart)break;t=i.content}for(let t=d-1;t>=0;t--){let e=c[t],i=(u=e.type).spec.defining||u.spec.definingForContent;if(i&&!e.sameMarkup(s.node(Math.abs(l)-1)))d=t;else if(i||!e.type.isTextblock)break}var u;for(let e=r.openStart;e>=0;e--){let l=(e+d+1)%(r.openStart+1),u=c[l];if(u)for(let e=0;e<o.length;e++){let c=o[(e+h)%o.length],d=!0;c<0&&(d=!1,c=-c);let p=s.node(c-1),f=s.index(c-1);if(p.canReplaceWith(f,f,u.type,u.marks))return t.replace(s.before(c),d?a.after(c):i,new n.Ji(H(r.content,0,r.openStart,l),l,r.openEnd))}}let p=t.steps.length;for(let n=o.length-1;n>=0&&(t.replace(e,i,r),!(t.steps.length>p));n--){let t=o[n];t<0||(e=s.before(t),i=a.after(t))}}(this,t,e,i),this}replaceRangeWith(t,e,i){return function(t,e,i,r){if(!r.isInline&&e==i&&t.doc.resolve(e).parent.content.size){let n=function(t,e,i){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),i))return e;if(0==n.parentOffset)for(let t=n.depth-1;t>=0;t--){let e=n.index(t);if(n.node(t).canReplaceWith(e,e,i))return n.before(t+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let t=n.depth-1;t>=0;t--){let e=n.indexAfter(t);if(n.node(t).canReplaceWith(e,e,i))return n.after(t+1);if(e<n.node(t).childCount)return null}return null}(t.doc,e,r.type);null!=n&&(e=i=n)}t.replaceRange(e,i,new n.Ji(n.FK.from(r),0,0))}(this,t,e,i),this}deleteRange(t,e){return function(t,e,i){let n=t.doc.resolve(e),r=t.doc.resolve(i),s=q(n,r);for(let e=0;e<s.length;e++){let i=s[e],a=e==s.length-1;if(a&&0==i||n.node(i).type.contentMatch.validEnd)return t.delete(n.start(i),r.end(i));if(i>0&&(a||n.node(i-1).canReplace(n.index(i-1),r.indexAfter(i-1))))return t.delete(n.before(i),r.after(i))}for(let s=1;s<=n.depth&&s<=r.depth;s++)if(e-n.start(s)==n.depth-s&&i>n.end(s)&&r.end(s)-i!=r.depth-s&&n.start(s-1)==r.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),r.index(s-1)))return t.delete(n.before(s),i);t.delete(e,i)}(this,t,e),this}lift(t,e){return function(t,e,i){let{$from:r,$to:s,depth:a}=e,o=r.before(a+1),l=s.after(a+1),h=o,c=l,d=n.FK.empty,u=0;for(let t=a,e=!1;t>i;t--)e||r.index(t)>0?(e=!0,d=n.FK.from(r.node(t).copy(d)),u++):h--;let p=n.FK.empty,f=0;for(let t=a,e=!1;t>i;t--)e||s.after(t+1)<s.end(t)?(e=!0,p=n.FK.from(s.node(t).copy(p)),f++):c++;t.step(new x(h,c,o,l,new n.Ji(d.append(p),u,f),d.size-u,!0))}(this,t,e),this}join(t,e=1){return function(t,e,i){let r=null,{linebreakReplacement:s}=t.doc.type.schema,a=t.doc.resolve(e-i),o=a.node().type;if(s&&o.inlineContent){let t="pre"==o.whitespace,e=!!o.contentMatch.matchType(s);t&&!e?r=!1:!t&&e&&(r=!0)}let l=t.steps.length;if(!1===r){let n=t.doc.resolve(e+i);_(t,n.node(),n.before(),l)}o.inlineContent&&y(t,e+i-1,o,a.node().contentMatchAt(a.index()),null==r);let h=t.mapping.slice(l),c=h.map(e-i);if(t.step(new b(c,h.map(e+i,-1),n.Ji.empty,!0)),!0===r){let e=t.doc.resolve(c);C(t,e.node(),e.before(),t.steps.length)}}(this,t,e),this}wrap(t,e){return function(t,e,i){let r=n.FK.empty;for(let t=i.length-1;t>=0;t--){if(r.size){let e=i[t].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=n.FK.from(i[t].type.create(i[t].attrs,r))}let s=e.start,a=e.end;t.step(new x(s,a,s,a,new n.Ji(r,0,0),i.length,!0))}(this,t,e),this}setBlockType(t,e=t,i,r=null){return function(t,e,i,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,i,((e,i)=>{let o="function"==typeof s?s(e):s;if(e.isTextblock&&!e.hasMarkup(r,o)&&function(t,e,i){let n=t.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(t.doc,t.mapping.slice(a).map(i),r)){let s=null;if(r.schema.linebreakReplacement){let t="pre"==r.whitespace,e=!!r.contentMatch.matchType(r.schema.linebreakReplacement);t&&!e?s=!1:!t&&e&&(s=!0)}!1===s&&_(t,e,i,a),y(t,t.mapping.slice(a).map(i,1),r,void 0,null===s);let l=t.mapping.slice(a),h=l.map(i,1),c=l.map(i+e.nodeSize,1);return t.step(new x(h,c,h+1,c-1,new n.Ji(n.FK.from(r.create(o,null,e.marks)),0,0),1,!0)),!0===s&&C(t,e,i,a),!1}}))}(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return function(t,e,i,r,s){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");i||(i=a.type);let o=i.create(r,null,s||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,o);if(!i.validContent(a.content))throw new RangeError("Invalid content for node type "+i.name);t.step(new x(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new n.Ji(n.FK.from(o),0,0),1,!0))}(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new j(t,e,i)),this}setDocAttribute(t,e){return this.step(new G(t,e)),this}addNodeMark(t,e){return this.step(new g(t,e)),this}removeNodeMark(t,e){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e instanceof n.CU)e.isInSet(i.marks)&&this.step(new m(t,e));else{let n,r=i.marks,s=[];for(;n=e.isInSet(r);)s.push(new m(t,n)),r=n.removeFromSet(r);for(let t=s.length-1;t>=0;t--)this.step(s[t])}return this}split(t,e=1,i){return function(t,e,i=1,r){let s=t.doc.resolve(e),a=n.FK.empty,o=n.FK.empty;for(let t=s.depth,e=s.depth-i,l=i-1;t>e;t--,l--){a=n.FK.from(s.node(t).copy(a));let e=r&&r[l];o=n.FK.from(e?e.type.create(e.attrs,o):s.node(t).copy(o))}t.step(new b(e,e,new n.Ji(a.append(o),i,i),!0))}(this,t,e,i),this}addMark(t,e,i){return function(t,e,i,n){let r,s,a=[],o=[];t.doc.nodesBetween(e,i,((t,l,h)=>{if(!t.isInline)return;let c=t.marks;if(!n.isInSet(c)&&h.type.allowsMarkType(n.type)){let h=Math.max(l,e),d=Math.min(l+t.nodeSize,i),u=n.addToSet(c);for(let t=0;t<c.length;t++)c[t].isInSet(u)||(r&&r.to==h&&r.mark.eq(c[t])?r.to=d:a.push(r=new f(h,d,c[t])));s&&s.to==h?s.to=d:o.push(s=new p(h,d,n))}})),a.forEach((e=>t.step(e))),o.forEach((e=>t.step(e)))}(this,t,e,i),this}removeMark(t,e,i){return function(t,e,i,r){let s=[],a=0;t.doc.nodesBetween(e,i,((t,o)=>{if(!t.isInline)return;a++;let l=null;if(r instanceof n.sX){let e,i=t.marks;for(;e=r.isInSet(i);)(l||(l=[])).push(e),i=e.removeFromSet(i)}else r?r.isInSet(t.marks)&&(l=[r]):l=t.marks;if(l&&l.length){let n=Math.min(o+t.nodeSize,i);for(let t=0;t<l.length;t++){let i,r=l[t];for(let t=0;t<s.length;t++){let e=s[t];e.step==a-1&&r.eq(s[t].style)&&(i=e)}i?(i.to=n,i.step=a):s.push({style:r,from:Math.max(o,e),to:n,step:a})}}})),s.forEach((e=>t.step(new f(e.from,e.to,e.style))))}(this,t,e,i),this}clearIncompatible(t,e,i){return y(this,t,e,i),this}}},1575:(t,e,i)=>{"use strict";i.d(e,{Lz:()=>mi,NZ:()=>je,zF:()=>Ve});var n=i(42845),r=i(58903),s=i(38262);const a=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},o=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let l=null;const h=function(t,e,i){let n=l||(l=document.createRange());return n.setEnd(t,null==i?t.nodeValue.length:i),n.setStart(t,e||0),n},c=function(t,e,i,n){return i&&(u(t,e,i,n,-1)||u(t,e,i,n,1))},d=/^(img|br|input|textarea|hr)$/i;function u(t,e,i,n,r){for(var s;;){if(t==i&&e==n)return!0;if(e==(r<0?0:p(t))){let i=t.parentNode;if(!i||1!=i.nodeType||f(t)||d.test(t.nodeName)||"false"==t.contentEditable)return!1;e=a(t)+(r<0?0:1),t=i}else{if(1!=t.nodeType)return!1;{let i=t.childNodes[e+(r<0?-1:0)];if(1==i.nodeType&&"false"==i.contentEditable){if(!(null===(s=i.pmViewDesc)||void 0===s?void 0:s.ignoreForSelection))return!1;e+=r}else t=i,e=r<0?p(t):0}}}}function p(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function f(t){let e;for(let i=t;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const g=function(t){return t.focusNode&&c(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function m(t,e){let i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=t,i.key=i.code=e,i}const b="undefined"!=typeof navigator?navigator:null,x="undefined"!=typeof document?document:null,v=b&&b.userAgent||"",y=/Edge\/(\d+)/.exec(v),w=/MSIE \d/.exec(v),k=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(v),A=!!(w||k||y),S=w?document.documentMode:k?+k[1]:y?+y[1]:0,C=!A&&/gecko\/(\d+)/i.test(v);C&&(/Firefox\/(\d+)/.exec(v)||[0,0])[1];const _=!A&&/Chrome\/(\d+)/.exec(v),M=!!_,T=_?+_[1]:0,E=!A&&!!b&&/Apple Computer/.test(b.vendor),N=E&&(/Mobile\/\w+/.test(v)||!!b&&b.maxTouchPoints>2),P=N||!!b&&/Mac/.test(b.platform),L=!!b&&/Win/.test(b.platform),I=/Android \d/.test(v),R=!!x&&"webkitFontSmoothing"in x.documentElement.style,O=R?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function D(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function z(t,e){return"number"==typeof t?t:t[e]}function F(t){let e=t.getBoundingClientRect(),i=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*i,top:e.top,bottom:e.top+t.clientHeight*n}}function B(t,e,i){let n=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let a=i||t.dom;a;){if(1!=a.nodeType){a=o(a);continue}let t=a,i=t==s.body,l=i?D(s):F(t),h=0,c=0;if(e.top<l.top+z(n,"top")?c=-(l.top-e.top+z(r,"top")):e.bottom>l.bottom-z(n,"bottom")&&(c=e.bottom-e.top>l.bottom-l.top?e.top+z(r,"top")-l.top:e.bottom-l.bottom+z(r,"bottom")),e.left<l.left+z(n,"left")?h=-(l.left-e.left+z(r,"left")):e.right>l.right-z(n,"right")&&(h=e.right-l.right+z(r,"right")),h||c)if(i)s.defaultView.scrollBy(h,c);else{let i=t.scrollLeft,n=t.scrollTop;c&&(t.scrollTop+=c),h&&(t.scrollLeft+=h);let r=t.scrollLeft-i,s=t.scrollTop-n;e={left:e.left-r,top:e.top-s,right:e.right-r,bottom:e.bottom-s}}let d=i?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(d))break;a="absolute"==d?a.offsetParent:o(a)}}function H(t){let e=[],i=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=i);n=o(n));return e}function q(t,e){for(let i=0;i<t.length;i++){let{dom:n,top:r,left:s}=t[i];n.scrollTop!=r+e&&(n.scrollTop=r+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let j=null;function G(t,e){let i,n,r,s,a=2e8,o=0,l=e.top,c=e.top;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let t;if(1==d.nodeType)t=d.getClientRects();else{if(3!=d.nodeType)continue;t=h(d).getClientRects()}for(let h=0;h<t.length;h++){let p=t[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let t=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(t<a){i=d,a=t,n=t&&3==i.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==d.nodeType&&t&&(o=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!r&&p.left<=e.left&&p.right>=e.left&&(r=d,s={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!i&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=u+1)}}return!i&&r&&(i=r,n=s,a=0),i&&3==i.nodeType?function(t,e){let i=t.nodeValue.length,n=document.createRange();for(let r=0;r<i;r++){n.setEnd(t,r+1),n.setStart(t,r);let i=U(n,1);if(i.top!=i.bottom&&X(e,i))return{node:t,offset:r+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(i,n):!i||a&&1==i.nodeType?{node:t,offset:o}:G(i,n)}function X(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function V(t,e,i){let n=t.childNodes.length;if(n&&i.top<i.bottom)for(let r=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-i.top)/(i.bottom-i.top))-2)),s=r;;){let i=t.childNodes[s];if(1==i.nodeType){let t=i.getClientRects();for(let n=0;n<t.length;n++){let r=t[n];if(X(e,r))return V(i,e,r)}}if((s=(s+1)%n)==r)break}return t}function W(t,e){let i,n=t.dom.ownerDocument,r=0,s=function(t,e,i){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,i);if(n)return{node:n.offsetNode,offset:Math.min(p(n.offsetNode),n.offset)}}catch(t){}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,i);if(n)return{node:n.startContainer,offset:Math.min(p(n.startContainer),n.startOffset)}}}(n,e.left,e.top);s&&({node:i,offset:r}=s);let a,l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top);if(!l||!t.dom.contains(1!=l.nodeType?l.parentNode:l)){let i=t.dom.getBoundingClientRect();if(!X(e,i))return null;if(l=V(t.dom,e,i),!l)return null}if(E)for(let t=l;i&&t;t=o(t))t.draggable&&(i=void 0);if(l=function(t,e){let i=t.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<t.getBoundingClientRect().left?i:t}(l,e),i){if(C&&1==i.nodeType&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let t,n=i.childNodes[r];"IMG"==n.nodeName&&(t=n.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&r++}let n;R&&r&&1==i.nodeType&&1==(n=i.childNodes[r-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=e.top&&r--,i==t.dom&&r==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:0!=r&&1==i.nodeType&&"BR"==i.childNodes[r-1].nodeName||(a=function(t,e,i,n){let r=-1;for(let i=e,s=!1;i!=t.dom;){let e,a=t.docView.nearestDesc(i,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((e=a.dom.getBoundingClientRect()).width||e.height)&&(a.node.isBlock&&a.parent&&(!s&&e.left>n.left||e.top>n.top?r=a.posBefore:(!s&&e.right<n.left||e.bottom<n.top)&&(r=a.posAfter),s=!0),!a.contentDOM&&r<0&&!a.node.isText))return(a.node.isBlock?n.top<(e.top+e.bottom)/2:n.left<(e.left+e.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,i,-1)}(t,i,r,e))}null==a&&(a=function(t,e,i){let{node:n,offset:r}=G(e,i),s=-1;if(1==n.nodeType&&!n.firstChild){let t=n.getBoundingClientRect();s=t.left!=t.right&&i.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(n,r,s)}(t,l,e));let h=t.docView.nearestDesc(l,!0);return{pos:a,inside:h?h.posAtStart-h.border:-1}}function Y(t){return t.top<t.bottom||t.left<t.right}function U(t,e){let i=t.getClientRects();if(i.length){let t=i[e<0?0:i.length-1];if(Y(t))return t}return Array.prototype.find.call(i,Y)||t.getBoundingClientRect()}const $=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function K(t,e,i){let{node:n,offset:r,atom:s}=t.docView.domFromPos(e,i<0?-1:1),a=R||C;if(3==n.nodeType){if(!a||!$.test(n.nodeValue)&&(i<0?r:r!=n.nodeValue.length)){let t=r,e=r,s=i<0?1:-1;return i<0&&!r?(e++,s=-1):i>=0&&r==n.nodeValue.length?(t--,s=1):i<0?t--:e++,Z(U(h(n,t,e),s),s<0)}{let t=U(h(n,r,r),i);if(C&&r&&/\s/.test(n.nodeValue[r-1])&&r<n.nodeValue.length){let e=U(h(n,r-1,r-1),-1);if(e.top==t.top){let i=U(h(n,r,r+1),-1);if(i.top!=t.top)return Z(i,i.left<e.left)}}return t}}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&r&&(i<0||r==p(n))){let t=n.childNodes[r-1];if(1==t.nodeType)return J(t.getBoundingClientRect(),!1)}if(null==s&&r<p(n)){let t=n.childNodes[r];if(1==t.nodeType)return J(t.getBoundingClientRect(),!0)}return J(n.getBoundingClientRect(),i>=0)}if(null==s&&r&&(i<0||r==p(n))){let t=n.childNodes[r-1],e=3==t.nodeType?h(t,p(t)-(a?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return Z(U(e,1),!1)}if(null==s&&r<p(n)){let t=n.childNodes[r];for(;t.pmViewDesc&&t.pmViewDesc.ignoreForCoords;)t=t.nextSibling;let e=t?3==t.nodeType?h(t,0,a?0:1):1==t.nodeType?t:null:null;if(e)return Z(U(e,-1),!0)}return Z(U(3==n.nodeType?h(n):n,-i),i>=0)}function Z(t,e){if(0==t.width)return t;let i=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:i,right:i}}function J(t,e){if(0==t.height)return t;let i=e?t.top:t.bottom;return{top:i,bottom:i,left:t.left,right:t.right}}function Q(t,e,i){let n=t.state,r=t.root.activeElement;n!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return i()}finally{n!=e&&t.updateState(n),r!=t.dom&&r&&r.focus()}}const tt=/[\u0590-\u08ac]/;let et=null,it=null,nt=!1;function rt(t,e,i){return et==e&&it==i?nt:(et=e,it=i,nt="up"==i||"down"==i?function(t,e,i){let n=e.selection,r="up"==i?n.$from:n.$to;return Q(t,e,(()=>{let{node:e}=t.docView.domFromPos(r.pos,"up"==i?-1:1);for(;;){let i=t.docView.nearestDesc(e,!0);if(!i)break;if(i.node.isBlock){e=i.contentDOM||i.dom;break}e=i.dom.parentNode}let n=K(t,r.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=h(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let r=e[t];if(r.bottom>r.top+1&&("up"==i?n.top-r.top>2*(r.bottom-n.top):r.bottom-n.bottom>2*(n.bottom-r.top)))return!1}}return!0}))}(t,e,i):function(t,e,i){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let r=n.parentOffset,s=!r,a=r==n.parent.content.size,o=t.domSelection();return o?tt.test(n.parent.textContent)&&o.modify?Q(t,e,(()=>{let{focusNode:e,focusOffset:r,anchorNode:s,anchorOffset:a}=t.domSelectionRange(),l=o.caretBidiLevel;o.modify("move",i,"character");let h=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:c,focusOffset:d}=t.domSelectionRange(),u=c&&!h.contains(1==c.nodeType?c:c.parentNode)||e==c&&r==d;try{o.collapse(s,a),e&&(e!=s||r!=a)&&o.extend&&o.extend(e,r)}catch(t){}return null!=l&&(o.caretBidiLevel=l),u})):"left"==i||"backward"==i?s:a:n.pos==n.start()||n.pos==n.end()}(t,e,i))}class st{constructor(t,e,i,n){this.parent=t,this.children=e,this.dom=i,this.contentDOM=n,this.dirty=0,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let n=this.children[e];if(n==t)return i;i+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){let i,n;if(t==this.contentDOM)i=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&(!(n=i.pmViewDesc)||n.parent!=this);)i=i.previousSibling;return i?this.posBeforeChild(n)+n.size:this.posAtStart}{let i,n;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(n=i.pmViewDesc)||n.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(n):this.posAtEnd}}let n;if(t==this.dom&&this.contentDOM)n=e>a(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){n=!1;break}if(e.previousSibling)break}if(null==n&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){n=!0;break}if(e.nextSibling)break}}return(null==n?i>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,n=t;n;n=n.parentNode){let r,s=this.getDesc(n);if(s&&(!e||s.node)){if(!i||!(r=s.nodeDOM)||(1==r.nodeType?r.contains(1==t.nodeType?t:t.parentNode):r==t))return s;i=!1}}}getDesc(t){let e=t.pmViewDesc;for(let t=e;t;t=t.parent)if(t==this)return e}posFromDOM(t,e,i){for(let n=t;n;n=n.parentNode){let r=this.getDesc(n);if(r)return r.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let n=this.children[e],r=i+n.size;if(i==t&&r!=i){for(;!n.border&&n.children.length;)for(let t=0;t<n.children.length;t++){let e=n.children[t];if(e.size){n=e;break}}return n}if(t<r)return n.descAt(t-i-n.border);i=r}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,n=0;for(let e=0;i<this.children.length;i++){let r=this.children[i],s=e+r.size;if(s>t||r instanceof ut){n=t-e;break}e=s}if(n)return this.children[i].domFromPos(n-this.children[i].border,e);for(let t;i&&!(t=this.children[i-1]).size&&t instanceof at&&t.side>=0;i--);if(e<=0){let t,n=!0;for(;t=i?this.children[i-1]:null,t&&t.dom.parentNode!=this.contentDOM;i--,n=!1);return t&&e&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?a(t.dom)+1:0}}{let t,n=!0;for(;t=i<this.children.length?this.children[i]:null,t&&t.dom.parentNode!=this.contentDOM;i++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?a(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,r=-1;for(let s=i,o=0;;o++){let i=this.children[o],l=s+i.size;if(-1==n&&t<=l){let r=s+i.border;if(t>=r&&e<=l-i.border&&i.node&&i.contentDOM&&this.contentDOM.contains(i.contentDOM))return i.parseRange(t,e,r);t=s;for(let e=o;e>0;e--){let i=this.children[e-1];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(1)){n=a(i.dom)+1;break}t-=i.size}-1==n&&(n=0)}if(n>-1&&(l>e||o==this.children.length-1)){e=l;for(let t=o+1;t<this.children.length;t++){let i=this.children[t];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(-1)){r=a(i.dom);break}e+=i.size}-1==r&&(r=this.contentDOM.childNodes.length);break}s=l}return{node:this.contentDOM,from:t,to:e,fromOffset:n,toOffset:r}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(1!=e.nodeType||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,n=!1){let r=Math.min(t,e),s=Math.max(t,e);for(let a=0,o=0;a<this.children.length;a++){let l=this.children[a],h=o+l.size;if(r>o&&s<h)return l.setSelection(t-o-l.border,e-o-l.border,i,n);o=h}let o=this.domFromPos(t,t?-1:1),l=e==t?o:this.domFromPos(e,e?-1:1),h=i.root.getSelection(),d=i.domSelectionRange(),u=!1;if((C||E)&&t==e){let{node:t,offset:e}=o;if(3==t.nodeType){if(u=!(!e||"\n"!=t.nodeValue[e-1]),u&&e==t.nodeValue.length)for(let e,i=t;i;i=i.parentNode){if(e=i.nextSibling){"BR"==e.nodeName&&(o=l={node:e.parentNode,offset:a(e)+1});break}let t=i.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let i=t.childNodes[e-1];u=i&&("BR"==i.nodeName||"false"==i.contentEditable)}}if(C&&d.focusNode&&d.focusNode!=l.node&&1==d.focusNode.nodeType){let t=d.focusNode.childNodes[d.focusOffset];t&&"false"==t.contentEditable&&(n=!0)}if(!(n||u&&E)&&c(o.node,o.offset,d.anchorNode,d.anchorOffset)&&c(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((h.extend||t==e)&&!u){h.collapse(o.node,o.offset);try{t!=e&&h.extend(l.node,l.offset),p=!0}catch(t){}}if(!p){if(t>e){let t=o;o=l,l=t}let i=document.createRange();i.setEnd(l.node,l.offset),i.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(i)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,n=0;n<this.children.length;n++){let r=this.children[n],s=i+r.size;if(i==s?t<=s&&e>=i:t<s&&e>i){let n=i+r.border,a=s-r.border;if(t>=n&&e<=a)return this.dirty=t==i||e==s?2:1,void(t!=n||e!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-n,e-n):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}i=s}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=1==t?2:1;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class at extends st{constructor(t,e,i,n){let r,s=e.type.toDOM;if("function"==typeof s&&(s=s(i,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:n))),!e.type.spec.raw){if(1!=s.nodeType){let t=document.createElement("span");t.appendChild(s),s=t}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=e,this.widget=e,r=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ot extends st{constructor(t,e,i,n){super(t,[],e,null),this.textDOM=i,this.text=n}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class lt extends st{constructor(t,e,i,n,r){super(t,[],i,n),this.mark=e,this.spec=r}static create(t,e,i,n){let s=n.nodeViews[e.type.name],a=s&&s(e,n,i);return a&&a.dom||(a=r.ZF.renderSpec(document,e.type.spec.toDOM(e,i),null,e.attrs)),new lt(t,e,a.dom,a.contentDOM||a.dom,a)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=0}}slice(t,e,i){let n=lt.create(this.parent,this.mark,!0,i),r=this.children,s=this.size;e<s&&(r=Ct(r,e,s,i)),t>0&&(r=Ct(r,0,t,i));for(let t=0;t<r.length;t++)r[t].parent=n;return n.children=r,n}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ht extends st{constructor(t,e,i,n,r,s,a,o,l){super(t,[],r,s),this.node=e,this.outerDeco=i,this.innerDeco=n,this.nodeDOM=a}static create(t,e,i,n,s,a){let o,l=s.nodeViews[e.type.name],h=l&&l(e,s,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:a),i,n),c=h&&h.dom,d=h&&h.contentDOM;if(e.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(e.text);else if(!c){let t=r.ZF.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs);({dom:c,contentDOM:d}=t)}d||e.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),e.type.spec.draggable&&(c.draggable=!0));let u=c;return c=yt(c,i,e),h?o=new pt(t,e,i,n,c,d||null,u,h,s,a+1):e.isText?new dt(t,e,i,n,c,u,s):new ht(t,e,i,n,c,d||null,u,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>r.FK.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,i){return 0==this.dirty&&t.eq(this.node)&&wt(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,n=e,s=t.composing?this.localCompositionInfo(t,e):null,a=s&&s.pos>-1?s:null,o=s&&s.pos<0,l=new At(this,a&&a.node,t);!function(t,e,i,n){let r=e.locals(t),s=0;if(0==r.length){for(let i=0;i<t.childCount;i++){let a=t.child(i);n(a,r,e.forChild(s,a),i),s+=a.nodeSize}return}let a=0,o=[],l=null;for(let h=0;;){let c,d,u,p;for(;a<r.length&&r[a].to==s;){let t=r[a++];t.widget&&(c?(d||(d=[c])).push(t):c=t)}if(c)if(d){d.sort(St);for(let t=0;t<d.length;t++)i(d[t],h,!!l)}else i(c,h,!!l);if(l)p=-1,u=l,l=null;else{if(!(h<t.childCount))break;p=h,u=t.child(h++)}for(let t=0;t<o.length;t++)o[t].to<=s&&o.splice(t--,1);for(;a<r.length&&r[a].from<=s&&r[a].to>s;)o.push(r[a++]);let f=s+u.nodeSize;if(u.isText){let t=f;a<r.length&&r[a].from<t&&(t=r[a].from);for(let e=0;e<o.length;e++)o[e].to<t&&(t=o[e].to);t<f&&(l=u.cut(t-s),u=u.cut(0,t-s),f=t,p=-1)}else for(;a<r.length&&r[a].to<f;)a++;n(u,u.isInline&&!u.isLeaf?o.filter((t=>!t.inline)):o.slice(),e.forChild(s,u),p),s=f}}(this.node,this.innerDeco,((e,s,a)=>{e.spec.marks?l.syncToMarks(e.spec.marks,i,t):e.type.side>=0&&!a&&l.syncToMarks(s==this.node.childCount?r.CU.none:this.node.child(s).marks,i,t),l.placeWidget(e,t,n)}),((e,r,a,h)=>{let c;l.syncToMarks(e.marks,i,t),l.findNodeMatch(e,r,a,h)||o&&t.state.selection.from>n&&t.state.selection.to<n+e.nodeSize&&(c=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(e,r,a,c,t)||l.updateNextNode(e,r,a,t,h,n)||l.addNode(e,r,a,t,n),n+=e.nodeSize})),l.syncToMarks([],i,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),ft(this.contentDOM,this.children,t),N&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof n.U3)||i<e||r>e+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let t=s.nodeValue,n=function(t,e,i,n){for(let r=0,s=0;r<t.childCount&&s<=n;){let a=t.child(r++),o=s;if(s+=a.nodeSize,!a.isText)continue;let l=a.text;for(;r<t.childCount;){let e=t.child(r++);if(s+=e.nodeSize,!e.isText)break;l+=e.text}if(s>=i){if(s>=n&&l.slice(n-e.length-o,n-o)==e)return n-e.length;let t=o<n?l.lastIndexOf(e,n-o-1):-1;if(t>=0&&t+e.length+o>=i)return o+t;if(i==n&&l.length>=n+e.length-o&&l.slice(n-o,n-o+e.length)==e)return n}}return-1}(this.node.content,t,i-e,r-e);return n<0?null:{node:s,pos:n,text:t}}return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:n}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let s=new ot(this,r,e,n);t.input.compositionNodes.push(s),this.children=Ct(this.children,i,i+n.length,t,s)}update(t,e,i,n){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,i,n),!0)}updateInner(t,e,i,n){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(wt(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=xt(this.dom,this.nodeDOM,bt(this.outerDeco,this.node,e),bt(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ct(t,e,i,n,r){yt(n,e,t);let s=new ht(void 0,t,e,i,n,n,n,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class dt extends ht{constructor(t,e,i,n,r,s,a){super(t,e,i,n,r,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=t,this.dirty=0,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,i){let n=this.node.cut(t,e),r=document.createTextNode(n.text);return new dt(this.parent,n,this.outerDeco,this.innerDeco,r,r,i)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(t){return this.node.text==t}}class ut extends st{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class pt extends ht{constructor(t,e,i,n,r,s,a,o,l,h){super(t,e,i,n,r,s,a,l,h),this.spec=o}update(t,e,i,n){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let r=this.spec.update(t,e,i);return r&&this.updateInner(t,e,i,n),r}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,i,n)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,n){this.spec.setSelection?this.spec.setSelection(t,e,i.root):super.setSelection(t,e,i,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function ft(t,e,i){let n=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let a=e[s],o=a.dom;if(o.parentNode==t){for(;o!=n;)n=kt(n),r=!0;n=n.nextSibling}else r=!0,t.insertBefore(o,n);if(a instanceof lt){let e=n?n.previousSibling:t.lastChild;ft(a.contentDOM,a.children,i),n=e?e.nextSibling:t.firstChild}}for(;n;)n=kt(n),r=!0;r&&i.trackWrites==t&&(i.trackWrites=null)}const gt=function(t){t&&(this.nodeName=t)};gt.prototype=Object.create(null);const mt=[new gt];function bt(t,e,i){if(0==t.length)return mt;let n=i?mt[0]:new gt,r=[n];for(let s=0;s<t.length;s++){let a=t[s].type.attrs;if(a){a.nodeName&&r.push(n=new gt(a.nodeName));for(let t in a){let s=a[t];null!=s&&(i&&1==r.length&&r.push(n=new gt(e.isInline?"span":"div")),"class"==t?n.class=(n.class?n.class+" ":"")+s:"style"==t?n.style=(n.style?n.style+";":"")+s:"nodeName"!=t&&(n[t]=s))}}}return r}function xt(t,e,i,n){if(i==mt&&n==mt)return e;let r=e;for(let e=0;e<n.length;e++){let s=n[e],a=i[e];if(e){let e;a&&a.nodeName==s.nodeName&&r!=t&&(e=r.parentNode)&&e.nodeName.toLowerCase()==s.nodeName||(e=document.createElement(s.nodeName),e.pmIsDeco=!0,e.appendChild(r),a=mt[0]),r=e}vt(r,a||mt[0],s)}return r}function vt(t,e,i){for(let n in e)"class"==n||"style"==n||"nodeName"==n||n in i||t.removeAttribute(n);for(let n in i)"class"!=n&&"style"!=n&&"nodeName"!=n&&i[n]!=e[n]&&t.setAttribute(n,i[n]);if(e.class!=i.class){let n=e.class?e.class.split(" ").filter(Boolean):[],r=i.class?i.class.split(" ").filter(Boolean):[];for(let e=0;e<n.length;e++)-1==r.indexOf(n[e])&&t.classList.remove(n[e]);for(let e=0;e<r.length;e++)-1==n.indexOf(r[e])&&t.classList.add(r[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=i.style){if(e.style){let i,n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}i.style&&(t.style.cssText+=i.style)}}function yt(t,e,i){return xt(t,t,mt,bt(e,i,1!=t.nodeType))}function wt(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].type.eq(e[i].type))return!1;return!0}function kt(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class At{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(t,e){let i=e,n=i.children.length,r=t.childCount,s=new Map,a=[];t:for(;r>0;){let o;for(;;)if(n){let t=i.children[n-1];if(!(t instanceof lt)){o=t,n--;break}i=t,n=t.children.length}else{if(i==e)break t;n=i.parent.children.indexOf(i),i=i.parent}let l=o.node;if(l){if(l!=t.child(r-1))break;--r,s.set(o,r),a.push(o)}}return{index:r,matched:s,matches:a.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let n=0,r=this.stack.length>>1,s=Math.min(r,t.length);for(;n<s&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(t[n])&&!1!==t[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let i=this.top.children[e];if(i.matchesMark(t[r])&&!this.isLocked(i.dom)){n=e;break}}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=lt.create(this.top,t[r],e,i);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,r++}}findNodeMatch(t,e,i,n){let r,s=-1;if(n>=this.preMatch.index&&(r=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&r.matchesNode(t,e,i))s=this.top.children.indexOf(r,this.index);else for(let n=this.index,r=Math.min(this.top.children.length,n+5);n<r;n++){let r=this.top.children[n];if(r.matchesNode(t,e,i)&&!this.preMatch.matched.has(r)){s=n;break}}return!(s<0)&&(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,n,r){let s=this.top.children[n];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(t,e,i,r)&&(this.destroyBetween(this.index,n),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,i,n,r,s){for(let a=this.index;a<this.top.children.length;a++){let o=this.top.children[a];if(o instanceof ht){let l=this.preMatch.matched.get(o);if(null!=l&&l!=r)return!1;let h,c=o.dom,d=this.isLocked(c)&&!(t.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==t.text&&3!=o.dirty&&wt(e,o.outerDeco));if(!d&&o.update(t,e,i,n))return this.destroyBetween(this.index,a),o.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(o,t,e,i,n,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=2,h.updateChildren(n,s+1),h.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,i,n,r,s){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!wt(i,t.outerDeco)||!n.eq(t.innerDeco))return null;let a=ht.create(this.top,e,i,n,r,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let t of a.children)t.parent=a}return t.destroy(),a}addNode(t,e,i,n,r){let s=ht.create(this.top,t,e,i,n,r);s.contentDOM&&s.updateChildren(n,r+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,e,i){let n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(t)||t!=n.widget&&n.widget.type.toDOM.parentNode){let n=new at(this.top,t,e,i);this.top.children.splice(this.index++,0,n),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof lt;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof dt)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((E||M)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);"IMG"==t&&(i.className="ProseMirror-separator",i.alt=""),"BR"==t&&(i.className="ProseMirror-trailingBreak");let n=new ut(this.top,[],i,null);e!=this.top?e.children.push(n):e.children.splice(this.index++,0,n),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function St(t,e){return t.type.side-e.type.side}function Ct(t,e,i,n,r){let s=[];for(let a=0,o=0;a<t.length;a++){let l=t[a],h=o,c=o+=l.size;h>=i||c<=e?s.push(l):(h<e&&s.push(l.slice(0,e-h,n)),r&&(s.push(r),r=void 0),c>i&&s.push(l.slice(i-h,l.size,n)))}return s}function _t(t,e=null){let i=t.domSelectionRange(),r=t.state.doc;if(!i.focusNode)return null;let s=t.docView.nearestDesc(i.focusNode),o=s&&0==s.size,l=t.docView.posFromDOM(i.focusNode,i.focusOffset,1);if(l<0)return null;let h,c,d=r.resolve(l);if(g(i)){for(h=l;s&&!s.node;)s=s.parent;let t=s.node;if(s&&t.isAtom&&n.nh.isSelectable(t)&&s.parent&&(!t.isInline||!function(t,e,i){for(let n=0==e,r=e==p(t);n||r;){if(t==i)return!0;let e=a(t);if(!(t=t.parentNode))return!1;n=n&&0==e,r=r&&e==p(t)}}(i.focusNode,i.focusOffset,s.dom))){let t=s.posBefore;c=new n.nh(l==t?d:r.resolve(t))}}else{if(i instanceof t.dom.ownerDocument.defaultView.Selection&&i.rangeCount>1){let e=l,n=l;for(let r=0;r<i.rangeCount;r++){let s=i.getRangeAt(r);e=Math.min(e,t.docView.posFromDOM(s.startContainer,s.startOffset,1)),n=Math.max(n,t.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(e<0)return null;[h,l]=n==t.state.selection.anchor?[n,e]:[e,n],d=r.resolve(l)}else h=t.docView.posFromDOM(i.anchorNode,i.anchorOffset,1);if(h<0)return null}let u=r.resolve(h);if(!c){c=Ot(t,u,d,"pointer"==e||t.state.selection.head<d.pos&&!o?1:-1)}return c}function Mt(t){return t.editable?t.hasFocus():zt(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Tt(t,e=!1){let i=t.state.selection;if(It(t,i),Mt(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&M){let e=t.domSelectionRange(),i=t.domObserver.currentSelection;if(e.anchorNode&&i.anchorNode&&c(e.anchorNode,e.anchorOffset,i.anchorNode,i.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),i=document.createRange();if(!e)return;let n=t.cursorWrapper.dom,r="IMG"==n.nodeName;r?i.setStart(n.parentNode,a(n)+1):i.setStart(n,0);i.collapse(!0),e.removeAllRanges(),e.addRange(i),!r&&!t.state.selection.visible&&A&&S<=11&&(n.disabled=!0,n.disabled=!1)}(t);else{let r,s,{anchor:a,head:o}=i;!Et||i instanceof n.U3||(i.$from.parent.inlineContent||(r=Nt(t,i.from)),i.empty||i.$from.parent.inlineContent||(s=Nt(t,i.to))),t.docView.setSelection(a,o,t,e),Et&&(r&&Lt(r),s&&Lt(s)),i.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let i=t.domSelectionRange(),n=i.anchorNode,r=i.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{i.anchorNode==n&&i.anchorOffset==r||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{Mt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Et=E||M&&T<63;function Nt(t,e){let{node:i,offset:n}=t.docView.domFromPos(e,0),r=n<i.childNodes.length?i.childNodes[n]:null,s=n?i.childNodes[n-1]:null;if(E&&r&&"false"==r.contentEditable)return Pt(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return Pt(r);if(s)return Pt(s)}}function Pt(t){return t.contentEditable="true",E&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Lt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function It(t,e){if(e instanceof n.nh){let i=t.docView.descAt(e.from);i!=t.lastSelectedViewDesc&&(Rt(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else Rt(t)}function Rt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ot(t,e,i,r){return t.someProp("createSelectionBetween",(n=>n(t,e,i)))||n.U3.between(e,i,r)}function Dt(t){return!(t.editable&&!t.hasFocus())&&zt(t)}function zt(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function Ft(t,e){let{$anchor:i,$head:r}=t.selection,s=e>0?i.max(r):i.min(r),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&n.LN.findFrom(a,e)}function Bt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ht(t,e,i){let r=t.state.selection;if(!(r instanceof n.U3)){if(r instanceof n.nh&&r.node.isInline)return Bt(t,new n.U3(e>0?r.$to:r.$from));{let i=Ft(t.state,e);return!!i&&Bt(t,i)}}if(i.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Bt(t,new n.U3(r.$anchor,a))}if(!r.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let i=Ft(t.state,e);return!!(i&&i instanceof n.nh)&&Bt(t,i)}if(!(P&&i.indexOf("m")>-1)){let i,s=r.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText)return!1;let o=e<0?s.pos-a.nodeSize:s.pos;return!!(a.isAtom||(i=t.docView.descAt(o))&&!i.contentDOM)&&(n.nh.isSelectable(a)?Bt(t,new n.nh(e<0?t.state.doc.resolve(s.pos-a.nodeSize):s)):!!R&&Bt(t,new n.U3(t.state.doc.resolve(e<0?o:o+a.nodeSize))))}}function qt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function jt(t,e){let i=t.pmViewDesc;return i&&0==i.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function Gt(t,e){return e<0?function(t){let e=t.domSelectionRange(),i=e.focusNode,n=e.focusOffset;if(!i)return;let r,s,o=!1;C&&1==i.nodeType&&n<qt(i)&&jt(i.childNodes[n],-1)&&(o=!0);for(;;)if(n>0){if(1!=i.nodeType)break;{let t=i.childNodes[n-1];if(jt(t,-1))r=i,s=--n;else{if(3!=t.nodeType)break;i=t,n=i.nodeValue.length}}}else{if(Xt(i))break;{let e=i.previousSibling;for(;e&&jt(e,-1);)r=i.parentNode,s=a(e),e=e.previousSibling;if(e)i=e,n=qt(i);else{if(i=i.parentNode,i==t.dom)break;n=0}}}o?Vt(t,i,n):r&&Vt(t,r,s)}(t):function(t){let e=t.domSelectionRange(),i=e.focusNode,n=e.focusOffset;if(!i)return;let r,s,o=qt(i);for(;;)if(n<o){if(1!=i.nodeType)break;if(!jt(i.childNodes[n],1))break;r=i,s=++n}else{if(Xt(i))break;{let e=i.nextSibling;for(;e&&jt(e,1);)r=e.parentNode,s=a(e)+1,e=e.nextSibling;if(e)i=e,n=0,o=qt(i);else{if(i=i.parentNode,i==t.dom)break;n=o=0}}}r&&Vt(t,r,s)}(t)}function Xt(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Vt(t,e,i){if(3!=e.nodeType){let t,n;(n=function(t,e){for(;t&&e==t.childNodes.length&&!f(t);)e=a(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let i=t.childNodes[e];if(3==i.nodeType)return i;if(1==i.nodeType&&"false"==i.contentEditable)break;t=i,e=0}}(e,i))?(e=n,i=0):(t=function(t,e){for(;t&&!e&&!f(t);)e=a(t),t=t.parentNode;for(;t&&e;){let i=t.childNodes[e-1];if(3==i.nodeType)return i;if(1==i.nodeType&&"false"==i.contentEditable)break;e=(t=i).childNodes.length}}(e,i))&&(e=t,i=t.nodeValue.length)}let n=t.domSelection();if(!n)return;if(g(n)){let t=document.createRange();t.setEnd(e,i),t.setStart(e,i),n.removeAllRanges(),n.addRange(t)}else n.extend&&n.extend(e,i);t.domObserver.setCurSelection();let{state:r}=t;setTimeout((()=>{t.state==r&&Tt(t)}),50)}function Wt(t,e){let i=t.state.doc.resolve(e);if(!M&&!L&&i.parent.inlineContent){let n=t.coordsAtPos(e);if(e>i.start()){let i=t.coordsAtPos(e-1),r=(i.top+i.bottom)/2;if(r>n.top&&r<n.bottom&&Math.abs(i.left-n.left)>1)return i.left<n.left?"ltr":"rtl"}if(e<i.end()){let i=t.coordsAtPos(e+1),r=(i.top+i.bottom)/2;if(r>n.top&&r<n.bottom&&Math.abs(i.left-n.left)>1)return i.left>n.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function Yt(t,e,i){let r=t.state.selection;if(r instanceof n.U3&&!r.empty||i.indexOf("s")>-1)return!1;if(P&&i.indexOf("m")>-1)return!1;let{$from:s,$to:a}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Ft(t.state,e);if(i&&i instanceof n.nh)return Bt(t,i)}if(!s.parent.inlineContent){let i=e<0?s:a,o=r instanceof n.i5?n.LN.near(i,e):n.LN.findFrom(i,e);return!!o&&Bt(t,o)}return!1}function Ut(t,e){if(!(t.state.selection instanceof n.U3))return!0;let{$head:i,$anchor:r,empty:s}=t.state.selection;if(!i.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){let n=t.state.tr;return e<0?n.delete(i.pos-a.nodeSize,i.pos):n.delete(i.pos,i.pos+a.nodeSize),t.dispatch(n),!0}return!1}function $t(t,e,i){t.domObserver.stop(),e.contentEditable=i,t.domObserver.start()}function Kt(t,e){let i=e.keyCode,n=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==i||P&&72==i&&"c"==n)return Ut(t,-1)||Gt(t,-1);if(46==i&&!e.shiftKey||P&&68==i&&"c"==n)return Ut(t,1)||Gt(t,1);if(13==i||27==i)return!0;if(37==i||P&&66==i&&"c"==n){let e=37==i?"ltr"==Wt(t,t.state.selection.from)?-1:1:-1;return Ht(t,e,n)||Gt(t,e)}if(39==i||P&&70==i&&"c"==n){let e=39==i?"ltr"==Wt(t,t.state.selection.from)?1:-1:1;return Ht(t,e,n)||Gt(t,e)}return 38==i||P&&80==i&&"c"==n?Yt(t,-1,n)||Gt(t,-1):40==i||P&&78==i&&"c"==n?function(t){if(!E||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:i}=t.domSelectionRange();if(e&&1==e.nodeType&&0==i&&e.firstChild&&"false"==e.firstChild.contentEditable){let i=e.firstChild;$t(t,i,"true"),setTimeout((()=>$t(t,i,"false")),20)}return!1}(t)||Yt(t,1,n)||Gt(t,1):n==(P?"m":"c")&&(66==i||73==i||89==i||90==i)}function Zt(t,e){t.someProp("transformCopied",(i=>{e=i(e,t)}));let i=[],{content:n,openStart:s,openEnd:a}=e;for(;s>1&&a>1&&1==n.childCount&&1==n.firstChild.childCount;){s--,a--;let t=n.firstChild;i.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),n=t.content}let o=t.someProp("clipboardSerializer")||r.ZF.fromSchema(t.state.schema),l=oe(),h=l.createElement("div");h.appendChild(o.serializeFragment(n,{document:l}));let c,d=h.firstChild,u=0;for(;d&&1==d.nodeType&&(c=se[d.nodeName.toLowerCase()]);){for(let t=c.length-1;t>=0;t--){let e=l.createElement(c[t]);for(;h.firstChild;)e.appendChild(h.firstChild);h.appendChild(e),u++}d=h.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${s} ${a}${u?` -${u}`:""} ${JSON.stringify(i)}`),{dom:h,text:t.someProp("clipboardTextSerializer",(i=>i(e,t)))||e.content.textBetween(0,e.content.size,"\n\n"),slice:e}}function Jt(t,e,i,n,s){let a,o,l=s.parent.type.spec.code;if(!i&&!e)return null;let h=e&&(n||l||!i);if(h){if(t.someProp("transformPastedText",(i=>{e=i(e,l||n,t)})),l)return e?new r.Ji(r.FK.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):r.Ji.empty;let i=t.someProp("clipboardTextParser",(i=>i(e,s,n,t)));if(i)o=i;else{let i=s.marks(),{schema:n}=t.state,o=r.ZF.fromSchema(n);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=a.appendChild(document.createElement("p"));t&&e.appendChild(o.serializeNode(n.text(t,i)))}))}}else t.someProp("transformPastedHTML",(e=>{i=e(i,t)})),a=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let i,n=oe().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t);(i=r&&se[r[1].toLowerCase()])&&(t=i.map((t=>"<"+t+">")).join("")+t+i.map((t=>"</"+t+">")).reverse().join(""));if(n.innerHTML=function(t){let e=window.trustedTypes;if(!e)return t;le||(le=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t}));return le.createHTML(t)}(t),i)for(let t=0;t<i.length;t++)n=n.querySelector(i[t])||n;return n}(i),R&&function(t){let e=t.querySelectorAll(M?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<e.length;i++){let n=e[i];1==n.childNodes.length&&""==n.textContent&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}(a);let c=a&&a.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let t=+d[3];t>0;t--){let t=a.firstChild;for(;t&&1!=t.nodeType;)t=t.nextSibling;if(!t)break;a=t}if(!o){let e=t.someProp("clipboardParser")||t.someProp("domParser")||r.S4.fromSchema(t.state.schema);o=e.parseSlice(a,{preserveWhitespace:!(!h&&!d),context:s,ruleFromNode:t=>"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Qt.test(t.parentNode.nodeName)?null:{ignore:!0}})}if(d)o=function(t,e){if(!t.size)return t;let i,n=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch(e){return t}let{content:s,openStart:a,openEnd:o}=t;for(let t=i.length-2;t>=0;t-=2){let e=n.nodes[i[t]];if(!e||e.hasRequiredAttrs())break;s=r.FK.from(e.create(i[t+1],s)),a++,o++}return new r.Ji(s,a,o)}(re(o,+d[1],+d[2]),d[4]);else if(o=r.Ji.maxOpen(function(t,e){if(t.childCount<2)return t;for(let i=e.depth;i>=0;i--){let n,s=e.node(i).contentMatchAt(e.index(i)),a=[];if(t.forEach((t=>{if(!a)return;let e,i=s.findWrapping(t.type);if(!i)return a=null;if(e=a.length&&n.length&&ee(i,n,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=ie(a[a.length-1],n.length));let e=te(t,i);a.push(e),s=s.matchType(e.type),n=i}})),a)return r.FK.from(a)}return t}(o.content,s),!0),o.openStart||o.openEnd){let t=0,e=0;for(let e=o.content.firstChild;t<o.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=o.content.lastChild;e<o.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);o=re(o,t,e)}return t.someProp("transformPasted",(e=>{o=e(o,t)})),o}const Qt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function te(t,e,i=0){for(let n=e.length-1;n>=i;n--)t=e[n].create(null,r.FK.from(t));return t}function ee(t,e,i,n,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let a=ee(t,e,i,n.lastChild,s+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(s==t.length-1?i.type:t[s+1]))return n.copy(n.content.append(r.FK.from(te(i,t,s+1))))}}function ie(t,e){if(0==e)return t;let i=t.content.replaceChild(t.childCount-1,ie(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(r.FK.empty,!0);return t.copy(i.append(n))}function ne(t,e,i,n,s,a){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(a=0),s<n-1&&(l=ne(l,e,i,n,s+1,a)),s>=i&&(l=e<0?o.contentMatchAt(0).fillBefore(l,a<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(r.FK.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function re(t,e,i){return e<t.openStart&&(t=new r.Ji(ne(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),i<t.openEnd&&(t=new r.Ji(ne(t.content,1,i,t.openEnd,0,0),t.openStart,i)),t}const se={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ae=null;function oe(){return ae||(ae=document.implementation.createHTMLDocument("title"))}let le=null;const he={},ce={},de={touchstart:!0,touchmove:!0};class ue{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function pe(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function fe(t){t.someProp("handleDOMEvents",(e=>{for(let i in e)t.input.eventHandlers[i]||t.dom.addEventListener(i,t.input.eventHandlers[i]=e=>ge(t,e))}))}function ge(t,e){return t.someProp("handleDOMEvents",(i=>{let n=i[e.type];return!!n&&(n(t,e)||e.defaultPrevented)}))}function me(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target;i!=t.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}function be(t){return{left:t.clientX,top:t.clientY}}function xe(t,e,i,n,r){if(-1==n)return!1;let s=t.state.doc.resolve(n);for(let n=s.depth+1;n>0;n--)if(t.someProp(e,(e=>n>s.depth?e(t,i,s.nodeAfter,s.before(n),r,!0):e(t,i,s.node(n),s.before(n),r,!1))))return!0;return!1}function ve(t,e,i){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);"pointer"==i&&n.setMeta("pointer",!0),t.dispatch(n)}function ye(t,e,i,r,s){return xe(t,"handleClickOn",e,i,r)||t.someProp("handleClick",(i=>i(t,e,r)))||(s?function(t,e){if(-1==e)return!1;let i,r,s=t.state.selection;s instanceof n.nh&&(i=s.node);let a=t.state.doc.resolve(e);for(let t=a.depth+1;t>0;t--){let e=t>a.depth?a.nodeAfter:a.node(t);if(n.nh.isSelectable(e)){r=i&&s.$from.depth>0&&t>=s.$from.depth&&a.before(s.$from.depth+1)==s.$from.pos?a.before(s.$from.depth):a.before(t);break}}return null!=r&&(ve(t,n.nh.create(t.state.doc,r),"pointer"),!0)}(t,i):function(t,e){if(-1==e)return!1;let i=t.state.doc.resolve(e),r=i.nodeAfter;return!!(r&&r.isAtom&&n.nh.isSelectable(r))&&(ve(t,new n.nh(i),"pointer"),!0)}(t,i))}function we(t,e,i,n){return xe(t,"handleDoubleClickOn",e,i,n)||t.someProp("handleDoubleClick",(i=>i(t,e,n)))}function ke(t,e,i,r){return xe(t,"handleTripleClickOn",e,i,r)||t.someProp("handleTripleClick",(i=>i(t,e,r)))||function(t,e,i){if(0!=i.button)return!1;let r=t.state.doc;if(-1==e)return!!r.inlineContent&&(ve(t,n.U3.create(r,0,r.content.size),"pointer"),!0);let s=r.resolve(e);for(let e=s.depth+1;e>0;e--){let i=e>s.depth?s.nodeAfter:s.node(e),a=s.before(e);if(i.inlineContent)ve(t,n.U3.create(r,a+1,a+1+i.content.size),"pointer");else{if(!n.nh.isSelectable(i))continue;ve(t,n.nh.create(r,a),"pointer")}return!0}}(t,i,r)}function Ae(t){return Pe(t)}ce.keydown=(t,e)=>{let i=e;if(t.input.shiftKey=16==i.keyCode||i.shiftKey,!_e(t,i)&&(t.input.lastKeyCode=i.keyCode,t.input.lastKeyCodeTime=Date.now(),!I||!M||13!=i.keyCode))if(229!=i.keyCode&&t.domObserver.forceFlush(),!N||13!=i.keyCode||i.ctrlKey||i.altKey||i.metaKey)t.someProp("handleKeyDown",(e=>e(t,i)))||Kt(t,i)?i.preventDefault():pe(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,m(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},ce.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},ce.keypress=(t,e)=>{let i=e;if(_e(t,i)||!i.charCode||i.ctrlKey&&!i.altKey||P&&i.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,i))))return void i.preventDefault();let r=t.state.selection;if(!(r instanceof n.U3&&r.$from.sameParent(r.$to))){let e=String.fromCharCode(i.charCode),n=()=>t.state.tr.insertText(e).scrollIntoView();/[\r\n]/.test(e)||t.someProp("handleTextInput",(i=>i(t,r.$from.pos,r.$to.pos,e,n)))||t.dispatch(n()),i.preventDefault()}};const Se=P?"metaKey":"ctrlKey";he.mousedown=(t,e)=>{let i=e;t.input.shiftKey=i.shiftKey;let n=Ae(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&function(t,e){let i=e.x-t.clientX,n=e.y-t.clientY;return i*i+n*n<100}(i,t.input.lastClick)&&!i[Se]&&t.input.lastClick.button==i.button&&("singleClick"==t.input.lastClick.type?s="doubleClick":"doubleClick"==t.input.lastClick.type&&(s="tripleClick")),t.input.lastClick={time:r,x:i.clientX,y:i.clientY,type:s,button:i.button};let a=t.posAtCoords(be(i));a&&("singleClick"==s?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ce(t,a,i,!!n)):("doubleClick"==s?we:ke)(t,a.pos,a.inside,i)?i.preventDefault():pe(t,"pointer"))};class Ce{constructor(t,e,i,r){let s,a;if(this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[Se],this.allowDefault=i.shiftKey,e.inside>-1)s=t.state.doc.nodeAt(e.inside),a=e.inside;else{let i=t.state.doc.resolve(e.pos);s=i.parent,a=i.depth?i.before():0}const o=r?null:i.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:h}=t.state;(0==i.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||h instanceof n.nh&&h.from<=a&&h.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!C||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),pe(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Tt(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(be(t))),this.updateAllowDefault(t),this.allowDefault||!e?pe(this.view,"pointer"):ye(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||E&&this.mightDrag&&!this.mightDrag.node.isAtom||M&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(ve(this.view,n.LN.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):pe(this.view,"pointer")}move(t){this.updateAllowDefault(t),pe(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function _e(t,e){return!!t.composing||!!(E&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}he.touchstart=t=>{t.input.lastTouch=Date.now(),Ae(t),pe(t,"pointer")},he.touchmove=t=>{t.input.lastTouch=Date.now(),pe(t,"pointer")},he.contextmenu=t=>Ae(t);const Me=I?5e3:-1;function Te(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>Pe(t)),e))}function Ee(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ne(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let i=function(t,e){for(;;){if(3==t.nodeType&&e)return t;if(1==t.nodeType&&e>0){if("false"==t.contentEditable)return null;e=p(t=t.childNodes[e-1])}else{if(!t.parentNode||f(t))return null;e=a(t),t=t.parentNode}}}(e.focusNode,e.focusOffset),n=function(t,e){for(;;){if(3==t.nodeType&&e<t.nodeValue.length)return t;if(1==t.nodeType&&e<t.childNodes.length){if("false"==t.contentEditable)return null;t=t.childNodes[e],e=0}else{if(!t.parentNode||f(t))return null;e=a(t)+1,t=t.parentNode}}}(e.focusNode,e.focusOffset);if(i&&n&&i!=n){let e=n.pmViewDesc,r=t.domObserver.lastChangedTextNode;if(i==r||n==r)return r;if(!e||!e.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let t=i.pmViewDesc;if(t&&t.isText(i.nodeValue))return n}}return i||n}function Pe(t,e=!1){if(!(I&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Ee(t),e||t.docView&&t.docView.dirty){let i=_t(t),n=t.state.selection;return i&&!i.eq(n)?t.dispatch(t.state.tr.setSelection(i)):!t.markCursor&&!e||n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.updateState(t.state):t.dispatch(t.state.tr.deleteSelection()),!0}return!1}}ce.compositionstart=ce.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,i=e.selection.$to;if(e.selection instanceof n.U3&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||i.marks(),Pe(t,!0),t.markCursor=null;else if(Pe(t,!e.selection.empty),C&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length){let e=t.domSelectionRange();for(let i=e.focusNode,n=e.focusOffset;i&&1==i.nodeType&&0!=n;){let e=n<0?i.lastChild:i.childNodes[n-1];if(!e)break;if(3==e.nodeType){let i=t.domSelection();i&&i.collapse(e,e.nodeValue.length);break}i=e,n=-1}}t.input.composing=!0}Te(t,Me)},ce.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then((()=>t.domObserver.flush())),t.input.compositionID++,Te(t,20))};const Le=A&&S<15||N&&O<604;function Ie(t,e,i,n,s){let a=Jt(t,e,i,n,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,s,a||r.Ji.empty))))return!0;if(!a)return!1;let o=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(a),l=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(a);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Re(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let i=t.getData("text/uri-list");return i?i.replace(/\r?\n/g," "):""}he.copy=ce.cut=(t,e)=>{let i=e,n=t.state.selection,r="cut"==i.type;if(n.empty)return;let s=Le?null:i.clipboardData,a=n.content(),{dom:o,text:l}=Zt(t,a);s?(i.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",l)):function(t,e){if(!t.dom.parentNode)return;let i=t.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout((()=>{i.parentNode&&i.parentNode.removeChild(i),t.focus()}),50)}(t,o),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},ce.paste=(t,e)=>{let i=e;if(t.composing&&!I)return;let n=Le?null:i.clipboardData,r=t.input.shiftKey&&45!=t.input.lastKeyCode;n&&Ie(t,Re(n),n.getData("text/html"),r,i)?i.preventDefault():function(t,e){if(!t.dom.parentNode)return;let i=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let r=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),i?Ie(t,n.value,null,r,e):Ie(t,n.textContent,n.innerHTML,r,e)}),50)}(t,i)};class Oe{constructor(t,e,i){this.slice=t,this.move=e,this.node=i}}const De=P?"altKey":"ctrlKey";function ze(t,e){let i=t.someProp("dragCopies",(t=>!t(e)));return null!=i?i:!e[De]}he.dragstart=(t,e)=>{let i=e,r=t.input.mouseDown;if(r&&r.done(),!i.dataTransfer)return;let s,a=t.state.selection,o=a.empty?null:t.posAtCoords(be(i));if(o&&o.pos>=a.from&&o.pos<=(a instanceof n.nh?a.to-1:a.to));else if(r&&r.mightDrag)s=n.nh.create(t.state.doc,r.mightDrag.pos);else if(i.target&&1==i.target.nodeType){let e=t.docView.nearestDesc(i.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&(s=n.nh.create(t.state.doc,e.posBefore))}let l=(s||t.state.selection).content(),{dom:h,text:c,slice:d}=Zt(t,l);(!i.dataTransfer.files.length||!M||T>120)&&i.dataTransfer.clearData(),i.dataTransfer.setData(Le?"Text":"text/html",h.innerHTML),i.dataTransfer.effectAllowed="copyMove",Le||i.dataTransfer.setData("text/plain",c),t.dragging=new Oe(d,ze(t,i),s)},he.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},ce.dragover=ce.dragenter=(t,e)=>e.preventDefault(),ce.drop=(t,e)=>{let i=e,a=t.dragging;if(t.dragging=null,!i.dataTransfer)return;let o=t.posAtCoords(be(i));if(!o)return;let l=t.state.doc.resolve(o.pos),h=a&&a.slice;h?t.someProp("transformPasted",(e=>{h=e(h,t)})):h=Jt(t,Re(i.dataTransfer),Le?null:i.dataTransfer.getData("text/html"),!1,l);let c=!(!a||!ze(t,i));if(t.someProp("handleDrop",(e=>e(t,i,h||r.Ji.empty,c))))return void i.preventDefault();if(!h)return;i.preventDefault();let d=h?(0,s.Um)(t.state.doc,l.pos,h):l.pos;null==d&&(d=l.pos);let u=t.state.tr;if(c){let{node:t}=a;t?t.replace(u):u.deleteSelection()}let p=u.mapping.map(d),f=0==h.openStart&&0==h.openEnd&&1==h.content.childCount,g=u.doc;if(f?u.replaceRangeWith(p,p,h.content.firstChild):u.replaceRange(p,p,h),u.doc.eq(g))return;let m=u.doc.resolve(p);if(f&&n.nh.isSelectable(h.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(h.content.firstChild))u.setSelection(new n.nh(m));else{let e=u.mapping.map(d);u.mapping.maps[u.mapping.maps.length-1].forEach(((t,i,n,r)=>e=r)),u.setSelection(Ot(t,m,u.doc.resolve(e)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))},he.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Tt(t)}),20))},he.blur=(t,e)=>{let i=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),i.relatedTarget&&t.dom.contains(i.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},he.beforeinput=(t,e)=>{if(M&&I&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,m(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}),50)}};for(let t in ce)he[t]=ce[t];function Fe(t,e){if(t==e)return!0;for(let i in t)if(t[i]!==e[i])return!1;for(let i in e)if(!(i in t))return!1;return!0}class Be{constructor(t,e){this.toDOM=t,this.spec=e||Xe,this.side=this.spec.side||0}map(t,e,i,n){let{pos:r,deleted:s}=t.mapResult(e.from+n,this.side<0?-1:1);return s?null:new je(r-i,r-i,this)}valid(){return!0}eq(t){return this==t||t instanceof Be&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Fe(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class He{constructor(t,e){this.attrs=t,this.spec=e||Xe}map(t,e,i,n){let r=t.map(e.from+n,this.spec.inclusiveStart?-1:1)-i,s=t.map(e.to+n,this.spec.inclusiveEnd?1:-1)-i;return r>=s?null:new je(r,s,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof He&&Fe(this.attrs,t.attrs)&&Fe(this.spec,t.spec)}static is(t){return t.type instanceof He}destroy(){}}class qe{constructor(t,e){this.attrs=t,this.spec=e||Xe}map(t,e,i,n){let r=t.mapResult(e.from+n,1);if(r.deleted)return null;let s=t.mapResult(e.to+n,-1);return s.deleted||s.pos<=r.pos?null:new je(r.pos-i,s.pos-i,this)}valid(t,e){let i,{index:n,offset:r}=t.content.findIndex(e.from);return r==e.from&&!(i=t.child(n)).isText&&r+i.nodeSize==e.to}eq(t){return this==t||t instanceof qe&&Fe(this.attrs,t.attrs)&&Fe(this.spec,t.spec)}destroy(){}}class je{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new je(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new je(t,t,new Be(e,i))}static inline(t,e,i,n){return new je(t,e,new He(i,n))}static node(t,e,i,n){return new je(t,e,new qe(i,n))}get spec(){return this.type.spec}get inline(){return this.type instanceof He}get widget(){return this.type instanceof Be}}const Ge=[],Xe={};class Ve{constructor(t,e){this.local=t.length?t:Ge,this.children=e.length?e:Ge}static create(t,e){return e.length?Ze(e,t,0,Xe):We}find(t,e,i){let n=[];return this.findInner(null==t?0:t,null==e?1e9:e,n,0,i),n}findInner(t,e,i,n,r){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=e&&a.to>=t&&(!r||r(a.spec))&&i.push(a.copy(a.from+n,a.to+n))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,e-a,i,n+a,r)}}map(t,e,i){return this==We||0==t.maps.length?this:this.mapInner(t,e,0,0,i||Xe)}mapInner(t,e,i,n,r){let s;for(let a=0;a<this.local.length;a++){let o=this.local[a].map(t,i,n);o&&o.type.valid(e,o)?(s||(s=[])).push(o):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?function(t,e,i,n,r,s,a){let o=t.slice();for(let t=0,e=s;t<i.maps.length;t++){let n=0;i.maps[t].forEach(((t,i,r,s)=>{let a=s-r-(i-t);for(let r=0;r<o.length;r+=3){let s=o[r+1];if(s<0||t>s+e-n)continue;let l=o[r]+e-n;i>=l?o[r+1]=t<=l?-2:-1:t>=e&&a&&(o[r]+=a,o[r+1]+=a)}n+=a})),e=i.maps[t].map(e,-1)}let l=!1;for(let e=0;e<o.length;e+=3)if(o[e+1]<0){if(-2==o[e+1]){l=!0,o[e+1]=-1;continue}let h=i.map(t[e]+s),c=h-r;if(c<0||c>=n.content.size){l=!0;continue}let d=i.map(t[e+1]+s,-1)-r,{index:u,offset:p}=n.content.findIndex(c),f=n.maybeChild(u);if(f&&p==c&&p+f.nodeSize==d){let n=o[e+2].mapInner(i,f,h+1,t[e]+s+1,a);n!=We?(o[e]=c,o[e+1]=d,o[e+2]=n):(o[e+1]=-2,l=!0)}else l=!0}if(l){let l=function(t,e,i,n,r,s,a){function o(t,e){for(let s=0;s<t.local.length;s++){let o=t.local[s].map(n,r,e);o?i.push(o):a.onRemove&&a.onRemove(t.local[s].spec)}for(let i=0;i<t.children.length;i+=3)o(t.children[i+2],t.children[i]+e+1)}for(let i=0;i<t.length;i+=3)-1==t[i+1]&&o(t[i+2],e[i]+s+1);return i}(o,t,e,i,r,s,a),h=Ze(l,n,0,a);e=h.local;for(let t=0;t<o.length;t+=3)o[t+1]<0&&(o.splice(t,3),t-=3);for(let t=0,e=0;t<h.children.length;t+=3){let i=h.children[t];for(;e<o.length&&o[e]<i;)e+=3;o.splice(e,0,h.children[t],h.children[t+1],h.children[t+2])}}return new Ve(e.sort(Je),o)}(this.children,s||[],t,e,i,n,r):s?new Ve(s.sort(Je),Ge):We}add(t,e){return e.length?this==We?Ve.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let n,r=0;t.forEach(((t,s)=>{let a,o=s+i;if(a=$e(e,t,o)){for(n||(n=this.children.slice());r<n.length&&n[r]<s;)r+=3;n[r]==s?n[r+2]=n[r+2].addInner(t,a,o+1):n.splice(r,0,s,s+t.nodeSize,Ze(a,t,o+1,Xe)),r+=3}}));let s=Ue(r?Ke(e):e,-i);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||s.splice(e--,1);return new Ve(s.length?this.local.concat(s).sort(Je):this.local,n||this.children)}remove(t){return 0==t.length||this==We?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,n=this.local;for(let n=0;n<i.length;n+=3){let r,s=i[n]+e,a=i[n+1]+e;for(let e,i=0;i<t.length;i++)(e=t[i])&&e.from>s&&e.to<a&&(t[i]=null,(r||(r=[])).push(e));if(!r)continue;i==this.children&&(i=this.children.slice());let o=i[n+2].removeInner(r,s+1);o!=We?i[n+2]=o:(i.splice(n,3),n-=3)}if(n.length)for(let i,r=0;r<t.length;r++)if(i=t[r])for(let t=0;t<n.length;t++)n[t].eq(i,e)&&(n==this.local&&(n=this.local.slice()),n.splice(t--,1));return i==this.children&&n==this.local?this:n.length||i.length?new Ve(n,i):We}forChild(t,e){if(this==We)return this;if(e.isLeaf)return Ve.empty;let i,n;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(i=this.children[e+2]);break}let r=t+1,s=r+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<s&&e.to>r&&e.type instanceof He){let t=Math.max(r,e.from)-r,i=Math.min(s,e.to)-r;t<i&&(n||(n=[])).push(e.copy(t,i))}}if(n){let t=new Ve(n.sort(Je),Ge);return i?new Ye([t,i]):t}return i||We}eq(t){if(this==t)return!0;if(!(t instanceof Ve)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Qe(this.localsInner(t))}localsInner(t){if(this==We)return Ge;if(t.inlineContent||!this.local.some(He.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof He||e.push(this.local[t]);return e}forEachSet(t){t(this)}}Ve.empty=new Ve([],[]),Ve.removeOverlap=Qe;const We=Ve.empty;class Ye{constructor(t){this.members=t}map(t,e){const i=this.members.map((i=>i.map(t,e,Xe)));return Ye.from(i)}forChild(t,e){if(e.isLeaf)return Ve.empty;let i=[];for(let n=0;n<this.members.length;n++){let r=this.members[n].forChild(t,e);r!=We&&(r instanceof Ye?i=i.concat(r.members):i.push(r))}return Ye.from(i)}eq(t){if(!(t instanceof Ye)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let n=0;n<this.members.length;n++){let r=this.members[n].localsInner(t);if(r.length)if(e){i&&(e=e.slice(),i=!1);for(let t=0;t<r.length;t++)e.push(r[t])}else e=r}return e?Qe(i?e:e.sort(Je)):Ge}static from(t){switch(t.length){case 0:return We;case 1:return t[0];default:return new Ye(t.every((t=>t instanceof Ve))?t:t.reduce(((t,e)=>t.concat(e instanceof Ve?e:e.members)),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}}function Ue(t,e){if(!e||!t.length)return t;let i=[];for(let n=0;n<t.length;n++){let r=t[n];i.push(new je(r.from+e,r.to+e,r.type))}return i}function $e(t,e,i){if(e.isLeaf)return null;let n=i+e.nodeSize,r=null;for(let e,s=0;s<t.length;s++)(e=t[s])&&e.from>i&&e.to<n&&((r||(r=[])).push(e),t[s]=null);return r}function Ke(t){let e=[];for(let i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function Ze(t,e,i,n){let r=[],s=!1;e.forEach(((e,a)=>{let o=$e(t,e,a+i);if(o){s=!0;let t=Ze(o,e,i+a+1,n);t!=We&&r.push(a,a+e.nodeSize,t)}}));let a=Ue(s?Ke(t):t,-i).sort(Je);for(let t=0;t<a.length;t++)a[t].type.valid(e,a[t])||(n.onRemove&&n.onRemove(a[t].spec),a.splice(t--,1));return a.length||r.length?new Ve(a,r):We}function Je(t,e){return t.from-e.from||t.to-e.to}function Qe(t){let e=t;for(let i=0;i<e.length-1;i++){let n=e[i];if(n.from!=n.to)for(let r=i+1;r<e.length;r++){let s=e[r];if(s.from!=n.from){s.from<n.to&&(e==t&&(e=t.slice()),e[i]=n.copy(n.from,s.from),ti(e,r,n.copy(s.from,n.to)));break}s.to!=n.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,n.to),ti(e,r+1,s.copy(n.to,s.to)))}}return e}function ti(t,e,i){for(;e<t.length&&Je(i,t[e])>0;)e++;t.splice(e,0,i)}function ei(t){let e=[];return t.someProp("decorations",(i=>{let n=i(t.state);n&&n!=We&&e.push(n)})),t.cursorWrapper&&e.push(Ve.create(t.state.doc,[t.cursorWrapper.deco])),Ye.from(e)}const ii={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ni=A&&S<=11;class ri{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class si{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ri,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);A&&S<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),ni&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ii)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(Dt(this.view)){if(this.suppressingSelectionUpdates)return Tt(this.view);if(A&&S<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&c(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,i=new Set;for(let e=t.focusNode;e;e=o(e))i.add(e);for(let n=t.anchorNode;n;n=o(n))if(i.has(n)){e=n;break}let n=e&&this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Dt(t)&&!this.ignoreSelectionChange(i),s=-1,a=-1,o=!1,l=[];if(t.editable)for(let t=0;t<e.length;t++){let i=this.registerMutation(e[t],l);i&&(s=s<0?i.from:Math.min(i.from,s),a=a<0?i.to:Math.max(i.to,a),i.typeOver&&(o=!0))}if(C&&l.length){let e=l.filter((t=>"BR"==t.nodeName));if(2==e.length){let[t,i]=e;t.parentNode&&t.parentNode.parentNode==i.parentNode?i.remove():t.remove()}else{let{focusNode:i}=this.currentSelection;for(let n of e){let e=n.parentNode;!e||"LI"!=e.nodeName||i&&hi(t,i)==e||n.remove()}}}let h=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&g(i)&&(h=_t(t))&&h.eq(n.LN.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Tt(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,a),function(t){if(ai.has(t))return;if(ai.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=C,oi)return;oi=!0}}(t)),this.handleDOMChange(s,a,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Tt(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(t))return null;if("childList"==t.type){for(let i=0;i<t.addedNodes.length;i++){let n=t.addedNodes[i];e.push(n),3==n.nodeType&&(this.lastChangedTextNode=n)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let n=t.previousSibling,r=t.nextSibling;if(A&&S<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:i,nextSibling:s}=t.addedNodes[e];(!i||Array.prototype.indexOf.call(t.addedNodes,i)<0)&&(n=i),(!s||Array.prototype.indexOf.call(t.addedNodes,s)<0)&&(r=s)}let s=n&&n.parentNode==t.target?a(n)+1:0,o=i.localPosFromDOM(t.target,s,-1),l=r&&r.parentNode==t.target?a(r):t.target.childNodes.length;return{from:o,to:i.localPosFromDOM(t.target,l,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let ai=new WeakMap,oi=!1;function li(t,e){let i=e.startContainer,n=e.startOffset,r=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return c(a.node,a.offset,r,s)&&([i,n,r,s]=[r,s,i,n]),{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}}function hi(t,e){for(let i=e.parentNode;i&&i!=t.dom;i=i.parentNode){let e=t.docView.nearestDesc(i,!0);if(e&&e.node.isBlock)return i}return null}function ci(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(E&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||E&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const di=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ui(t,e,i,s,a){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,i=_t(t,e);if(i&&!t.state.selection.eq(i)){if(M&&I&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,m(13,"Enter")))))return;let n=t.state.tr.setSelection(i);"pointer"==e?n.setMeta("pointer",!0):"key"==e&&n.scrollIntoView(),o&&n.setMeta("composition",o),t.dispatch(n)}return}let l=t.state.doc.resolve(e),h=l.sharedDepth(i);e=l.before(h+1),i=t.state.doc.resolve(i).after(h+1);let c,d,u=t.state.selection,p=function(t,e,i){let n,{node:s,fromOffset:a,toOffset:o,from:l,to:h}=t.docView.parseRange(e,i),c=t.domSelectionRange(),d=c.anchorNode;if(d&&t.dom.contains(1==d.nodeType?d:d.parentNode)&&(n=[{node:d,offset:c.anchorOffset}],g(c)||n.push({node:c.focusNode,offset:c.focusOffset})),M&&8===t.input.lastKeyCode)for(let t=o;t>a;t--){let e=s.childNodes[t-1],i=e.pmViewDesc;if("BR"==e.nodeName&&!i){o=t;break}if(!i||i.size)break}let u=t.state.doc,p=t.someProp("domParser")||r.S4.fromSchema(t.state.schema),f=u.resolve(l),m=null,b=p.parse(s,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:a,to:o,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:n,ruleFromNode:ci,context:f});if(n&&null!=n[0].pos){let t=n[0].pos,e=n[1]&&n[1].pos;null==e&&(e=t),m={anchor:t+l,head:e+l}}return{doc:b,sel:m,from:l,to:h}}(t,e,i),f=t.state.doc,b=f.slice(p.from,p.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(c=t.state.selection.to,d="end"):(c=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let x=function(t,e,i,n,r){let s=t.findDiffStart(e,i);if(null==s)return null;let{a,b:o}=t.findDiffEnd(e,i+t.size,i+e.size);if("end"==r){n-=a+Math.max(0,s-Math.min(a,o))-s}if(a<s&&t.size<e.size){let t=n<=s&&n>=a?s-n:0;s-=t,s&&s<e.size&&gi(e.textBetween(s-1,s+1))&&(s+=t?1:-1),o=s+(o-a),a=s}else if(o<s){let e=n<=s&&n>=o?s-n:0;s-=e,s&&s<t.size&&gi(t.textBetween(s-1,s+1))&&(s+=e?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}(b.content,p.doc.content,p.from,c,d);if(x&&t.input.domChangeCount++,(N&&t.input.lastIOSEnter>Date.now()-225||I)&&a.some((t=>1==t.nodeType&&!di.test(t.nodeName)))&&(!x||x.endA>=x.endB)&&t.someProp("handleKeyDown",(e=>e(t,m(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!x){if(!(s&&u instanceof n.U3&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){let e=pi(t,t.state.doc,p.sel);if(e&&!e.eq(t.state.selection)){let i=t.state.tr.setSelection(e);o&&i.setMeta("composition",o),t.dispatch(i)}}return}x={start:u.from,endA:u.to,endB:u.to}}t.state.selection.from<t.state.selection.to&&x.start==x.endB&&t.state.selection instanceof n.U3&&(x.start>t.state.selection.from&&x.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?x.start=t.state.selection.from:x.endA<t.state.selection.to&&x.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(x.endB+=t.state.selection.to-x.endA,x.endA=t.state.selection.to)),A&&S<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>p.from&&" "==p.doc.textBetween(x.start-p.from-1,x.start-p.from+1)&&(x.start--,x.endA--,x.endB--);let v,y=p.doc.resolveNoCache(x.start-p.from),w=p.doc.resolveNoCache(x.endB-p.from),k=f.resolve(x.start),C=y.sameParent(w)&&y.parent.inlineContent&&k.end()>=x.endA;if((N&&t.input.lastIOSEnter>Date.now()-225&&(!C||a.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!C&&y.pos<p.doc.content.size&&(!y.sameParent(w)||!y.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(y.pos,w.pos,"",""))&&(v=n.LN.findFrom(p.doc.resolve(y.pos+1),1,!0))&&v.head>y.pos)&&t.someProp("handleKeyDown",(e=>e(t,m(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>x.start&&function(t,e,i,n,r){if(i-e<=r.pos-n.pos||fi(n,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let t=s.nodeAfter;return null!=t&&i==e+t.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=t.resolve(fi(s,!0,!0));return!(!a.parent.isTextblock||a.pos>i||fi(a,!0,!1)<i)&&n.parent.content.cut(n.parentOffset).eq(a.parent.content)}(f,x.start,x.endA,y,w)&&t.someProp("handleKeyDown",(e=>e(t,m(8,"Backspace")))))return void(I&&M&&t.domObserver.suppressSelectionUpdates());M&&x.endB==x.start&&(t.input.lastChromeDelete=Date.now()),I&&!C&&y.start()!=w.start()&&0==w.parentOffset&&y.depth==w.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==x.endA&&(x.endB-=2,w=p.doc.resolveNoCache(x.endB-p.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,m(13,"Enter"))}))}),20));let _,T=x.start,E=x.endA,P=e=>{let i=e||t.state.tr.replace(T,E,p.doc.slice(x.start-p.from,x.endB-p.from));if(p.sel){let e=pi(t,i.doc,p.sel);e&&!(M&&t.composing&&e.empty&&(x.start!=x.endB||t.input.lastChromeDelete<Date.now()-100)&&(e.head==T||e.head==i.mapping.map(E)-1)||A&&e.empty&&e.head==T)&&i.setSelection(e)}return o&&i.setMeta("composition",o),i.scrollIntoView()};if(C){if(y.pos==w.pos){A&&S<=11&&0==y.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>Tt(t)),20));let e=P(t.state.tr.delete(T,E)),i=f.resolve(x.start).marksAcross(f.resolve(x.endA));i&&e.ensureMarks(i),t.dispatch(e)}else if(x.endA==x.endB&&(_=function(t,e){let i,n,s,a=t.firstChild.marks,o=e.firstChild.marks,l=a,h=o;for(let t=0;t<o.length;t++)l=o[t].removeFromSet(l);for(let t=0;t<a.length;t++)h=a[t].removeFromSet(h);if(1==l.length&&0==h.length)n=l[0],i="add",s=t=>t.mark(n.addToSet(t.marks));else{if(0!=l.length||1!=h.length)return null;n=h[0],i="remove",s=t=>t.mark(n.removeFromSet(t.marks))}let c=[];for(let t=0;t<e.childCount;t++)c.push(s(e.child(t)));if(r.FK.from(c).eq(t))return{mark:n,type:i}}(y.parent.content.cut(y.parentOffset,w.parentOffset),k.parent.content.cut(k.parentOffset,x.endA-k.start())))){let e=P(t.state.tr);"add"==_.type?e.addMark(T,E,_.mark):e.removeMark(T,E,_.mark),t.dispatch(e)}else if(y.parent.child(y.index()).isText&&y.index()==w.index()-(w.textOffset?0:1)){let e=y.parent.textBetween(y.parentOffset,w.parentOffset),i=()=>P(t.state.tr.insertText(e,T,E));t.someProp("handleTextInput",(n=>n(t,T,E,e,i)))||t.dispatch(i())}}else t.dispatch(P())}function pi(t,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:Ot(t,e.resolve(i.anchor),e.resolve(i.head))}function fi(t,e,i){let n=t.depth,r=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,r++,e=!1;if(i){let e=t.node(n).maybeChild(t.indexAfter(n));for(;e&&!e.isLeaf;)e=e.firstChild,r++}return r}function gi(t){if(2!=t.length)return!1;let e=t.charCodeAt(0),i=t.charCodeAt(1);return e>=56320&&e<=57343&&i>=55296&&i<=56319}class mi{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ue,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(wi),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=vi(this),xi(this),this.nodeViews=yi(this),this.docView=ct(this.state.doc,bi(this),ei(this),this.dom,this),this.domObserver=new si(this,((t,e,i,n)=>ui(this,t,e,i,n))),this.domObserver.start(),function(t){for(let e in he){let i=he[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!me(t,e)||ge(t,e)||!t.editable&&e.type in ce||i(t,e)},de[e]?{passive:!0}:void 0)}E&&t.dom.addEventListener("input",(()=>null)),fe(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&fe(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(wi),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let t in this._props)e[t]=this._props[t];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var i;let n=this.state,r=!1,s=!1;t.storedMarks&&this.composing&&(Ee(this),s=!0),this.state=t;let a=n.plugins!=t.plugins||this._props.plugins!=e.plugins;if(a||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=yi(this);(function(t,e){let i=0,n=0;for(let n in t){if(t[n]!=e[n])return!0;i++}for(let t in e)n++;return i!=n})(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(a||e.handleDOMEvents!=this._props.handleDOMEvents)&&fe(this),this.editable=vi(this),xi(this);let o=ei(this),l=bi(this),h=n.plugins==t.plugins||n.doc.eq(t.doc)?t.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",d=r||!this.docView.matchesNode(t.doc,l,o);!d&&t.selection.eq(n.selection)||(s=!0);let u="preserve"==h&&s&&null==this.dom.style.overflowAnchor&&function(t){let e,i,n=t.dom.getBoundingClientRect(),r=Math.max(0,n.top);for(let s=(n.left+n.right)/2,a=r+1;a<Math.min(innerHeight,n.bottom);a+=5){let n=t.root.elementFromPoint(s,a);if(!n||n==t.dom||!t.dom.contains(n))continue;let o=n.getBoundingClientRect();if(o.top>=r-20){e=n,i=o.top;break}}return{refDOM:e,refTop:i,stack:H(t.dom)}}(this);if(s){this.domObserver.stop();let e=d&&(A||M)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&function(t,e){let i=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(i)!=e.$anchor.start(i)}(n.selection,t.selection);if(d){let i=M?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Ne(this)),!r&&this.docView.update(t.doc,l,o,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=ct(t.doc,l,o,this.dom,this)),i&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),i=t.domSelectionRange();return c(e.node,e.offset,i.anchorNode,i.anchorOffset)}(this))?Tt(this,e):(It(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),(null===(i=this.dragging)||void 0===i?void 0:i.node)&&!n.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,n),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():u&&function({refDOM:t,refTop:e,stack:i}){let n=t?t.getBoundingClientRect().top:0;q(i,0==n?0:n-e)}(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(t&&this.dom.contains(1==t.nodeType?t:t.parentNode))if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof n.nh){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&B(this,e.getBoundingClientRect(),t)}else B(this,this.coordsAtPos(this.state.selection.head,1),t);else;}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}updateDraggedNode(t,e){let i=t.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let t=i.from+(this.state.doc.content.size-e.doc.content.size);(t>0&&this.state.doc.nodeAt(t))==i.node&&(r=t)}this.dragging=new Oe(t.slice,t.move,r<0?void 0:n.nh.create(this.state.doc,r))}someProp(t,e){let i,n=this._props&&this._props[t];if(null!=n&&(i=e?e(n):n))return i;for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n].props[t];if(null!=r&&(i=e?e(r):r))return i}let r=this.state.plugins;if(r)for(let n=0;n<r.length;n++){let s=r[n].props[t];if(null!=s&&(i=e?e(s):s))return i}}hasFocus(){if(A){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(j)return t.focus(j);let e=H(t);t.focus(null==j?{get preventScroll(){return j={preventScroll:!0},!0}}:void 0),j||(j=!1,q(e,0))}(this.dom),Tt(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return t||document}updateRoot(){this._root=null}posAtCoords(t){return W(this,t)}coordsAtPos(t,e=1){return K(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let n=this.docView.posFromDOM(t,e,i);if(null==n)throw new RangeError("DOM position not inside the editor");return n}endOfTextblock(t,e){return rt(this,e||this.state,t)}pasteHTML(t,e){return Ie(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Ie(this,t,null,!0,e||new ClipboardEvent("paste"))}serializeForClipboard(t){return Zt(this,t)}destroy(){this.docView&&(!function(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ei(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,l=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(t,e){ge(t,e)||!he[e.type]||!t.editable&&e.type in ce||he[e.type](t,e)}(this,t)}domSelectionRange(){let t=this.domSelection();return t?E&&11===this.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return li(t,i)}let i;function n(t){t.preventDefault(),t.stopImmediatePropagation(),i=t.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),i?li(t,i):null}(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function bi(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(i=>{if("function"==typeof i&&(i=i(t.state)),i)for(let t in i)"class"==t?e.class+=" "+i[t]:"style"==t?e.style=(e.style?e.style+";":"")+i[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(i[t]))})),e.translate||(e.translate="no"),[je.node(0,t.state.doc.content.size,e)]}function xi(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:je.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function vi(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function yi(t){let e=Object.create(null);function i(t){for(let i in t)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=t[i])}return t.someProp("nodeViews",i),t.someProp("markViews",i),e}function wi(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}mi.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}},78052:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>Ji});var n={};i.r(n),i.d(n,{Attributor:()=>a,AttributorStore:()=>f,BlockBlot:()=>_,ClassAttributor:()=>d,ContainerBlot:()=>T,EmbedBlot:()=>E,InlineBlot:()=>S,LeafBlot:()=>x,ParentBlot:()=>k,Registry:()=>h,Scope:()=>s,ScrollBlot:()=>L,StyleAttributor:()=>p,TextBlot:()=>R});var r=i(7222),s=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(s||{});class a{constructor(t,e,i={}){this.attrName=t,this.keyName=e;const n=s.TYPE&s.ATTRIBUTE;this.scope=null!=i.scope?i.scope&s.LEVEL|n:s.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class o extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const l=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(e,i,n){const r=this.query(i);if(null==r)throw new o(`Unable to create ${i} blot`);const s=r,a=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:s.create(n),l=new s(e,a,n);return t.blots.set(l.domNode,l),l}find(e,i=!1){return t.find(e,i)}query(t,e=s.ANY){let i;return"string"==typeof t?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:"number"==typeof t?t&s.LEVEL&s.BLOCK?i=this.types.block:t&s.LEVEL&s.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(i=this.classes[t],!!i))),i=i||this.tags[t.tagName]),null==i?null:"scope"in i&&e&s.LEVEL&i.scope&&e&s.TYPE&i.scope?i:null}register(...t){return t.map((t=>{const e="blotName"in t,i="attrName"in t;if(!e&&!i)throw new o("Invalid definition");if(e&&"abstract"===t.blotName)throw new o("Cannot register abstract class");const n=e?t.blotName:i?t.attrName:void 0;return this.types[n]=t,i?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};l.blots=new WeakMap;let h=l;function c(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const d=class extends a{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){c(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(c(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function u(t){const e=t.split("-"),i=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+i}const p=class extends a{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[u(this.keyName)]=e,!0)}remove(t){t.style[u(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[u(this.keyName)];return this.canAdd(t,e)?e:""}};const f=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=h.find(this.domNode);if(null==t)return;const e=a.keys(this.domNode),i=d.keys(this.domNode),n=p.keys(this.domNode);e.concat(i).concat(n).forEach((e=>{const i=t.scroll.query(e,s.ATTRIBUTE);i instanceof a&&(this.attributes[i.attrName]=i)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const i=this.attributes[e].value(this.domNode);t.format(e,i)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},g=class{constructor(t,e){this.scroll=t,this.domNode=e,h.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new o("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?("string"==typeof t?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):"number"==typeof t&&(i=t),e="number"==typeof i?document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?document.createElement(i):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),h.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,n){const r=this.isolate(t,e);if(null!=this.scroll.query(i,s.BLOT)&&n)r.wrap(i,n);else if(null!=this.scroll.query(i,s.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(i,n)}}insertAt(t,e,i){const n=null==i?this.scroll.create("text",e):this.scroll.create(e,i),r=this.split(t);this.parent.insertBefore(n,r||void 0)}isolate(t,e){const i=this.split(t);if(null==i)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const i="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const i="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new o(`Cannot wrap ${t}`);return i.appendChild(this),i}};g.blotName="abstract";let m=g;const b=class extends m{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};b.scope=s.INLINE_BLOT;const x=b;class v{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){const e=this.iterator();let i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){const e=this.iterator();let i=e(),n=0;for(;i;){if(i===t)return n;n+=1,i=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const i=this.iterator();let n=i();for(;n;){const r=n.length();if(t<r||e&&t===r&&(null==n.next||0!==n.next.length()))return[n,t];t-=r,n=i()}return[null,0]}forEach(t){const e=this.iterator();let i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;const[n,r]=this.find(t);let s=t-r;const a=this.iterator(n);let o=a();for(;o&&s<t+e;){const n=o.length();t>s?i(o,t-s,Math.min(e,s+n-t)):i(o,0,Math.min(n,t+e-s)),s+=n,o=a()}}map(t){return this.reduce(((e,i)=>(e.push(t(i)),e)),[])}reduce(t,e){const i=this.iterator();let n=i();for(;n;)e=t(e,n),n=i();return e}}function y(t,e){const i=e.find(t);if(i)return i;try{return e.create(t)}catch{const i=e.create(s.INLINE);return Array.from(t.childNodes).forEach((t=>{i.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach(),i}}const w=class t extends m{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new v,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=y(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof o)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,i)=>{t.deleteAt(e,i)}))}descendant(e,i=0){const[n,r]=this.children.find(i);return null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e?[n,r]:n instanceof t?n.descendant(e,r):[null,-1]}descendants(e,i=0,n=Number.MAX_VALUE){let r=[],s=n;return this.children.forEachAt(i,n,((i,n,a)=>{(null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e)&&r.push(i),i instanceof t&&(r=r.concat(i.descendants(e,n,s))),s-=a})),r}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((i=>{e||this.statics.allowedChildren.some((t=>i instanceof t))||(i.statics.scope===s.BLOCK_BLOT?(null!=i.next&&this.splitAfter(i),null!=i.prev&&this.splitAfter(i.prev),i.parent.unwrap(),e=!0):i instanceof t?i.unwrap():i.remove())}))}formatAt(t,e,i,n){this.children.forEachAt(t,e,((t,e,r)=>{t.formatAt(e,r,i,n)}))}insertAt(t,e,i){const[n,r]=this.children.find(t);if(n)n.insertAt(r,e,i);else{const t=null==i?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((i=>{t.insertBefore(i,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,i=!1){const[n,r]=this.children.find(e,i),s=[[this,e]];return n instanceof t?s.concat(n.path(r,i)):(null!=n&&s.push([n,r]),s)}removeChild(t){this.children.remove(t)}replaceWith(e,i){const n="string"==typeof e?this.scroll.create(e,i):e;return n instanceof t&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),((t,n,r)=>{const s=t.split(n,e);null!=s&&i.appendChild(s)})),i}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const i=[],n=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(i.push(...t.addedNodes),n.push(...t.removedNodes))})),n.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),i.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const i=y(t,this.scroll);(i.next!==e||null==i.next)&&(null!=i.parent&&i.parent.removeChild(this),this.insertBefore(i,e||void 0))})),this.enforceAllowedChildren()}};w.uiClass="";const k=w;const A=class t extends k{static create(t){return super.create(t)}static formats(e,i){const n=i.query(t.blotName);if(null==n||e.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new f(this.domNode)}format(e,i){if(e!==this.statics.blotName||i){const t=this.scroll.query(e,s.INLINE);if(null==t)return;t instanceof a?this.attributes.attribute(t,i):i&&(e!==this.statics.blotName||this.formats()[e]!==i)&&this.replaceWith(e,i)}else this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){null!=this.formats()[i]||this.scroll.query(i,s.ATTRIBUTE)?this.isolate(t,e).format(i,n):super.formatAt(t,e,i,n)}optimize(e){super.optimize(e);const i=this.formats();if(0===Object.keys(i).length)return this.unwrap();const n=this.next;n instanceof t&&n.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}(i,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(e,i){const n=super.wrap(e,i);return n instanceof t&&this.attributes.move(n),n}};A.allowedChildren=[A,x],A.blotName="inline",A.scope=s.INLINE_BLOT,A.tagName="SPAN";const S=A,C=class t extends k{static create(t){return super.create(t)}static formats(e,i){const n=i.query(t.blotName);if(null==n||e.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new f(this.domNode)}format(e,i){const n=this.scroll.query(e,s.BLOCK);null!=n&&(n instanceof a?this.attributes.attribute(n,i):e!==this.statics.blotName||i?i&&(e!==this.statics.blotName||this.formats()[e]!==i)&&this.replaceWith(e,i):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){null!=this.scroll.query(i,s.BLOCK)?this.format(i,n):super.formatAt(t,e,i,n)}insertAt(t,e,i){if(null==i||null!=this.scroll.query(e,s.INLINE))super.insertAt(t,e,i);else{const n=this.split(t);if(null==n)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,i);n.parent.insertBefore(t,n)}}}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};C.blotName="block",C.scope=s.BLOCK_BLOT,C.tagName="P",C.allowedChildren=[S,C,x];const _=C,M=class extends k{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,n){super.formatAt(t,e,i,n),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};M.blotName="container",M.scope=s.BLOCK_BLOT;const T=M;const E=class extends x{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,n){0===t&&e===this.length()?this.format(i,n):super.formatAt(t,e,i,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}},N={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},P=class extends k{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,N),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=s.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,i,n){this.update(),super.formatAt(t,e,i,n)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);const i=e.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)t.push(n.pop());const r=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(i.has(t.domNode)||i.set(t.domNode,[]),e&&r(t.parent))},s=t=>{i.has(t.domNode)&&(t instanceof k&&t.children.forEach(s),i.delete(t.domNode),t.optimize(e))};let a=t;for(let e=0;a.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);r(e,!1),e instanceof k&&e.children.forEach((t=>{r(t,!1)}))}))):"attributes"===t.type&&r(e.prev)),r(e))})),this.children.forEach(s),a=Array.from(this.observer.takeRecords()),n=a.slice();n.length>0;)t.push(n.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const i=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:i.has(e.domNode)?(i.get(e.domNode).push(t),null):(i.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&i.has(t.domNode)&&t.update(i.get(t.domNode)||[],e)})),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};P.blotName="scroll",P.defaultChild=_,P.allowedChildren=[_,T],P.scope=s.BLOCK_BLOT,P.tagName="DIV";const L=P,I=class t extends x{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){null==i?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};I.blotName="text",I.scope=s.INLINE_BLOT;const R=I;var O=i(12660),D=i(20903),z=i(14259);const F=function(t,e){return(0,z.A)(t,e)};class B extends E{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}B.blotName="break",B.tagName="BR";const H=B;class q extends R{}const j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function G(t){return t.replace(/[&<>"']/g,(t=>j[t]))}class X extends S{static allowedChildren=[X,H,E,q];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const i=X.order.indexOf(t),n=X.order.indexOf(e);return i>=0||n>=0?i-n:t===e?0:t<e?-1:1}formatAt(t,e,i,n){if(X.compare(this.statics.blotName,i)<0&&this.scroll.query(i,s.BLOT)){const r=this.isolate(t,e);n&&r.wrap(i,n)}else super.formatAt(t,e,i,n)}optimize(t){if(super.optimize(t),this.parent instanceof X&&X.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const V=X;class W extends _{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=U(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,i,n){e<=0||(this.scroll.query(i,s.BLOCK)?t+e===this.length()&&this.format(i,n):super.formatAt(t,Math.min(e,this.length()-t-1),i,n),this.cache={})}insertAt(t,e,i){if(null!=i)return super.insertAt(t,e,i),void(this.cache={});if(0===e.length)return;const n=e.split("\n"),r=n.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let s=this;n.reduce(((t,e)=>(s=s.split(t,!0),s.insertAt(0,e),e.length)),t+r.length)}insertBefore(t,e){const{head:i}=this.children;super.insertBefore(t,e),i instanceof H&&i.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const i=super.split(t,e);return this.cache={},i}}W.blotName="block",W.tagName="P",W.defaultChild=H,W.allowedChildren=[H,V,E,q];class Y extends E{attach(){super.attach(),this.attributes=new f(this.domNode)}delta(){return(new O).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const i=this.scroll.query(t,s.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}formatAt(t,e,i,n){this.format(i,n)}insertAt(t,e,i){if(null!=i)return void super.insertAt(t,e,i);const n=e.split("\n"),r=n.pop(),s=n.map((t=>{const e=this.scroll.create(W.blotName);return e.insertAt(0,t),e})),a=this.split(t);s.forEach((t=>{this.parent.insertBefore(t,a)})),r&&this.parent.insertBefore(this.scroll.create("text",r),a)}}function U(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(x).reduce(((t,i)=>0===i.length()?t:t.insert(i.value(),$(i,{},e))),new O).insert("\n",$(t))}function $(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},i&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:$(t.parent,e,i))}Y.scope=s.BLOCK_BLOT;class K extends E{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(K.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let i=this,n=0;for(;null!=i&&i.statics.scope!==s.BLOCK_BLOT;)n+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=K.CONTENTS.length,i.optimize(),i.formatAt(n,K.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof q?this.prev:null,i=e?e.length():0,n=this.next instanceof q?this.next:null,r=n?n.text:"",{textNode:s}=this,a=s.data.split(K.CONTENTS).join("");let o;if(s.data=K.CONTENTS,e)o=e,(a||n)&&(e.insertAt(e.length(),a+r),n&&n.remove());else if(n)o=n,n.insertAt(0,a);else{const t=document.createTextNode(a);o=this.scroll.create(t),this.parent.insertBefore(o,this)}if(this.remove(),t){const r=(t,r)=>e&&t===e.domNode?r:t===s?i+r-1:n&&t===n.domNode?i+a.length+r:null,l=r(t.start.node,t.start.offset),h=r(t.end.node,t.end.offset);if(null!==l&&null!==h)return{startNode:o.domNode,startOffset:l,endNode:o.domNode,endOffset:h}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=K.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const Z=K;var J=i(30228);const Q=new WeakMap,tt=["error","warn","log","info"];let et="warn";function it(t){if(et&&tt.indexOf(t)<=tt.indexOf(et))for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]}function nt(t){return tt.reduce(((e,i)=>(e[i]=it.bind(console,i,t),e)),{})}nt.level=t=>{et=t},it.level=nt.level;const rt=nt,st=rt("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const i=Q.get(t);i&&i.emitter&&i.emitter.handleDOM(...e)}))}))}));const at=class extends J{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",st.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return st.log.call(st,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.domListeners[t.type]||[]).forEach((e=>{let{node:n,handler:r}=e;(t.target===n||n.contains(t.target))&&r(t,...i)}))}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}},ot=rt("quill:selection");class lt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}function ht(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const ct=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new lt(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,at.sources.USER),1)})),this.emitter.on(at.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(at.events.SCROLL_UPDATE,((e,i)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const n=i.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(n?at.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(at.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:i,endNode:n,endOffset:r}=e.range;this.setNativeRange(t,i,n,r),this.update(at.sources.SILENT)}})),this.update(at.sources.SILENT)}handleComposition(){this.emitter.on(at.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(at.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(at.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!this.scroll.query(t,s.BLOCK)){if(i.start.node!==this.cursor.textNode){const t=this.scroll.find(i.start.node,!1);if(null==t)return;if(t instanceof x){const e=t.split(i.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.scroll.length();let n;t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let[r,s]=this.scroll.leaf(t);if(null==r)return null;if(e>0&&s===r.length()){const[e]=this.scroll.leaf(t+1);if(e){const[i]=this.scroll.line(t),[n]=this.scroll.line(t+1);i===n&&(r=e,s=0)}}[n,s]=r.position(s,!0);const a=document.createRange();if(e>0)return a.setStart(n,s),[r,s]=this.scroll.leaf(t+e),null==r?null:([n,s]=r.position(s,!0),a.setEnd(n,s),a.getBoundingClientRect());let o,l="left";if(n instanceof Text){if(!n.data.length)return null;s<n.data.length?(a.setStart(n,s),a.setEnd(n,s+1)):(a.setStart(n,s-1),a.setEnd(n,s),l="right"),o=a.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;o=r.domNode.getBoundingClientRect(),s>0&&(l="right")}return{bottom:o.top+o.height,height:o.height,left:o[l],right:o[l],top:o.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const i=this.normalizeNative(e);return ot.info("getNativeRange",i),i}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();if(null==e)return[null,null];return[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&ht(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const i=e.map((t=>{const[e,i]=t,n=this.scroll.find(e,!0),r=n.offset(this.scroll);return 0===i?r:n instanceof x?r+n.index(e,i):r+n.length()})),n=Math.min(Math.max(...i),this.scroll.length()-1),r=Math.min(n,...i);return new lt(r,n-r)}normalizeNative(t){if(!ht(this.root,t.startContainer)||!t.collapsed&&!ht(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:i}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;e=e.lastChild,i=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=i})),e}rangeToNative(t){const e=this.scroll.length(),i=(t,i)=>{t=Math.min(e-1,t);const[n,r]=this.scroll.leaf(t);return n?n.position(r,i):[null,-1]};return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(ot.info("setNativeRange",t,e,i,n),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==i.parentNode))return;const s=document.getSelection();if(null!=s)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(null==a||r||t!==a.startContainer||e!==a.startOffset||i!==a.endContainer||n!==a.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&"BR"===i.tagName&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);const r=document.createRange();r.setStart(t,e),r.setEnd(i,n),s.removeAllRanges(),s.addRange(r)}}else s.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at.sources.API;if("string"==typeof e&&(i=e,e=!1),ot.info("setRange",t),null!=t){const i=this.rangeToNative(t);this.setNativeRange(...i,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at.sources.USER;const e=this.lastRange,[i,n]=this.getRange();if(this.lastRange=i,this.lastNative=n,null!=this.lastRange&&(this.savedRange=this.lastRange),!F(e,this.lastRange)){if(!this.composing&&null!=n&&n.native.collapsed&&n.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const i=[at.events.SELECTION_CHANGE,(0,D.A)(this.lastRange),(0,D.A)(e),t];this.emitter.emit(at.events.EDITOR_CHANGE,...i),t!==at.sources.SILENT&&this.emitter.emit(...i)}}},dt=/^[ -~]*$/;function ut(t,e,i){if(0===t.length){const[t]=gt(i.pop());return e<=0?`</li></${t}>`:`</li></${t}>${ut([],e-1,i)}`}const[{child:n,offset:r,length:s,indent:a,type:o},...l]=t,[h,c]=gt(o);if(a>e)return i.push(o),a===e+1?`<${h}><li${c}>${pt(n,r,s)}${ut(l,a,i)}`:`<${h}><li>${ut(t,e+1,i)}`;const d=i[i.length-1];if(a===e&&o===d)return`</li><li${c}>${pt(n,r,s)}${ut(l,a,i)}`;const[u]=gt(i.pop());return`</li></${u}>${ut(t,e-1,i)}`}function pt(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,i);if(t instanceof q){return G(t.value().slice(e,e+i)).replaceAll(" ","&nbsp;")}if(t instanceof k){if("list-container"===t.statics.blotName){const n=[];return t.children.forEachAt(e,i,((t,e,i)=>{const r="formats"in t&&"function"==typeof t.formats?t.formats():{};n.push({child:t,offset:e,length:i,indent:r.indent||0,type:r.list})})),ut(n,-1,[])}const r=[];if(t.children.forEachAt(e,i,((t,e,i)=>{r.push(pt(t,e,i))})),n||"list"===t.statics.blotName)return r.join("");const{outerHTML:s,innerHTML:a}=t.domNode,[o,l]=s.split(`>${a}<`);return"<table"===o?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${o}>${r.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function ft(t,e){return Object.keys(e).reduce(((i,n)=>{if(null==t[n])return i;const r=e[n];return r===t[n]?i[n]=r:Array.isArray(r)?r.indexOf(t[n])<0?i[n]=r.concat([t[n]]):i[n]=r:i[n]=[r,t[n]],i}),{})}function gt(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function mt(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new O)}function bt(t,e){let{index:i,length:n}=t;return new lt(i+e,n)}const xt=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const i=mt(t),n=new O;return function(t){const e=[];return t.forEach((t=>{if("string"==typeof t.insert){t.insert.split("\n").forEach(((i,n)=>{n&&e.push({insert:"\n",attributes:t.attributes}),i&&e.push({insert:i,attributes:t.attributes})}))}else e.push(t)})),e}(i.ops.slice()).reduce(((t,i)=>{const a=O.Op.length(i);let o=i.attributes||{},l=!1,h=!1;if(null!=i.insert){if(n.retain(a),"string"==typeof i.insert){const n=i.insert;h=!n.endsWith("\n")&&(e<=t||!!this.scroll.descendant(Y,t)[0]),this.scroll.insertAt(t,n);const[s,a]=this.scroll.line(t);let l=(0,r.A)({},$(s));if(s instanceof W){const[t]=s.descendant(x,a);t&&(l=(0,r.A)(l,$(t)))}o=O.AttributeMap.diff(l,o)||{}}else if("object"==typeof i.insert){const n=Object.keys(i.insert)[0];if(null==n)return t;const a=null!=this.scroll.query(n,s.INLINE);if(a)(e<=t||this.scroll.descendant(Y,t)[0])&&(h=!0);else if(t>0){const[e,i]=this.scroll.descendant(x,t-1);if(e instanceof q){"\n"!==e.value()[i]&&(l=!0)}else e instanceof E&&e.statics.scope===s.INLINE_BLOT&&(l=!0)}if(this.scroll.insertAt(t,n,i.insert[n]),a){const[e]=this.scroll.descendant(x,t);if(e){const t=(0,r.A)({},$(e));o=O.AttributeMap.diff(t,o)||{}}}}e+=a}else if(n.push(i),null!==i.retain&&"object"==typeof i.retain){const e=Object.keys(i.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,i.retain[e])}Object.keys(o).forEach((e=>{this.scroll.formatAt(t,a,e,o[e])}));const c=l?1:0,d=h?1:0;return e+=c+d,n.retain(c),n.delete(d),t+a+c+d}),0),n.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+O.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new O).retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach((n=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(n,i[n])}))})),this.scroll.optimize();const n=(new O).retain(t).retain(e,(0,D.A)(i));return this.update(n)}formatText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(i).forEach((n=>{this.scroll.formatAt(t,e,n,i[n])}));const n=(new O).retain(t).retain(e,(0,D.A)(i));return this.update(n)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new O)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof W?i.push(e):e instanceof x&&n.push(e)})):(i=this.scroll.lines(t,e),n=this.scroll.descendants(x,t,e));const[r,s]=[i,n].map((t=>{const e=t.shift();if(null==e)return{};let i=$(e);for(;Object.keys(i).length>0;){const e=t.shift();if(null==e)return i;i=ft($(e),i)}return i}));return{...r,...s}}getHTML(t,e){const[i,n]=this.scroll.line(t);if(i){const r=i.length();return!(i.length()>=n+e)||0===n&&e===r?pt(this.scroll,t,e,!0):pt(i,n,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const i=mt(e),n=(new O).retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(n)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new O).retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((n=>{this.scroll.formatAt(t,e.length,n,i[n])})),this.update((new O).retain(t).insert(e,(0,D.A)(i)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==W.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof H}removeFormat(t,e){const i=this.getText(t,e),[n,r]=this.scroll.line(t+e);let s=0,a=new O;null!=n&&(s=n.length()-r,a=n.delta().slice(r,r+s-1).insert("\n"));const o=this.getContents(t,e+s).diff((new O).insert(i).concat(a)),l=(new O).retain(t).concat(o);return this.applyDelta(l)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(dt)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),s=$(r),a=r.offset(this.scroll),o=e[0].oldValue.replace(Z.CONTENTS,""),l=(new O).insert(o),h=(new O).insert(r.value()),c=i&&{oldRange:bt(i.oldRange,-a),newRange:bt(i.newRange,-a)};t=(new O).retain(a).concat(l.diff(h,c)).reduce(((t,e)=>e.insert?t.insert(e.insert,s):t.push(e)),new O),this.delta=n.compose(t)}else this.delta=this.getDelta(),t&&F(n.compose(t),this.delta)||(t=n.diff(this.delta,i));return t}};const vt=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}},yt="\ufeff";const wt=class extends E{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(yt),this.rightGuard=document.createTextNode(yt),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,i=null;const n=t.data.split(yt).join("");if(t===this.leftGuard)if(this.prev instanceof q){const t=this.prev.length();this.prev.insertAt(t,n),i={startNode:this.prev.domNode,startOffset:t+n.length}}else e=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(e),this),i={startNode:e,startOffset:n.length};else t===this.rightGuard&&(this.next instanceof q?(this.next.insertAt(0,n),i={startNode:this.next.domNode,startOffset:n.length}):(e=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(e),this.next),i={startNode:e,startOffset:n.length}));return t.data=yt,i}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const i=this.restore(t.target);i&&(e.range=i)}}))}};const kt=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof wt||(this.emitter.emit(at.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(at.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(at.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(at.events.COMPOSITION_END,t),this.isComposing=!1}};class At{static DEFAULTS={modules:{}};static themes={default:At};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const St=At,Ct=t=>{const e=t.getBoundingClientRect(),i="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,n="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*i,bottom:e.top+t.clientHeight*n,left:e.left}},_t=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Mt=(t,e,i,n,r,s)=>t<i&&e>n?0:t<i?-(i-t+r):e>n?e-t>n-i?t+r-i:e-n+s:0,Tt=(t,e)=>{const i=t.ownerDocument;let n=e,r=t;for(;r;){const t=r===i.body,e=t?{top:0,right:window.visualViewport?.width??i.documentElement.clientWidth,bottom:window.visualViewport?.height??i.documentElement.clientHeight,left:0}:Ct(r),a=getComputedStyle(r),o=Mt(n.left,n.right,e.left,e.right,_t(a.scrollPaddingLeft),_t(a.scrollPaddingRight)),l=Mt(n.top,n.bottom,e.top,e.bottom,_t(a.scrollPaddingTop),_t(a.scrollPaddingBottom));if(o||l)if(t)i.defaultView?.scrollBy(o,l);else{const{scrollLeft:t,scrollTop:e}=r;l&&(r.scrollTop+=l),o&&(r.scrollLeft+=o);const i=r.scrollLeft-t,s=r.scrollTop-e;n={left:n.left-i,top:n.top-s,right:n.right-i,bottom:n.bottom-s}}r=t||"fixed"===a.position?null:(s=r).parentElement||s.getRootNode().host||null}var s},Et=["block","break","cursor","inline","scroll","text"],Nt=(t,e,i)=>{const n=new h;return Et.forEach((t=>{const i=e.query(t);i&&n.register(i)})),t.forEach((t=>{let r=e.query(t);r||i.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;r;)if(n.register(r),r="blotName"in r?r.requiredContainer??null:null,s+=1,s>100){i.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),n},Pt=rt("quill"),Lt=new h;k.uiClass="ql-ui";class It{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Lt,theme:"default"};static events=at.events;static sources=at.sources;static version="2.0.3";static imports={delta:O,parchment:n,"core/module":vt,"core/theme":St};static debug(t){!0===t&&(t="log"),rt.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Q.get(t)||Lt.find(t,e)}static import(t){return null==this.imports[t]&&Pt.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),i="attrName"in t?t.attrName:t.blotName;"string"==typeof i?this.register(`formats/${i}`,t,e):Object.keys(t).forEach((i=>{this.register(i,t[i],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||i||Pt.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Lt.register(e),"function"==typeof e.register&&e.register(Lt)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const i=Rt(t);if(!i)throw new Error("Invalid Quill container");const n=!e.theme||e.theme===It.DEFAULTS.theme,s=n?St:It.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:a,...o}=It.DEFAULTS,{modules:l,...h}=s.DEFAULTS;let c=Ot(e.modules);null!=c&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const d=(0,r.A)({},Ot(a),Ot(l),c),u={...o,...Dt(h),...Dt(e)};let p=e.registry;p?e.formats&&Pt.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?Nt(e.formats,u.registry,Pt):u.registry;return{...u,registry:p,container:i,theme:s,modules:Object.entries(d).reduce(((t,e)=>{let[i,n]=e;if(!n)return t;const s=It.import(`modules/${i}`);return null==s?(Pt.error(`Cannot load ${i} module. Are you sure you registered it?`),t):{...t,[i]:(0,r.A)({},s.DEFAULTS||{},n)}}),{}),bounds:Rt(u.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void Pt.error("Invalid Quill container",t);this.options.debug&&It.debug(this.options.debug);const i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Q.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new at;const n=L.blotName,s=this.options.registry.query(n);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new xt(this.scroll),this.selection=new ct(this.scroll,this.emitter),this.composition=new kt(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(at.events.EDITOR_CHANGE,(t=>{t===at.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(at.events.SCROLL_UPDATE,((t,e)=>{const i=this.selection.lastRange,[n]=this.selection.getRange(),r=i&&n?{oldRange:i,newRange:n}:void 0;zt.call(this,(()=>this.editor.update(null,e,r)),t)})),this.emitter.on(at.events.SCROLL_EMBED_UPDATE,((t,e)=>{const i=this.selection.lastRange,[n]=this.selection.getRange(),r=i&&n?{oldRange:i,newRange:n}:void 0;zt.call(this,(()=>{const i=(new O).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(i,[],r)}),It.sources.USER)})),i){const t=this.clipboard.convert({html:`${i}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=Ft(t,e,i),zt.call(this,(()=>this.editor.deleteText(t,e)),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at.sources.API;return zt.call(this,(()=>{const i=this.getSelection(!0);let n=new O;if(null==i)return n;if(this.scroll.query(t,s.BLOCK))n=this.editor.formatLine(i.index,i.length,{[t]:e});else{if(0===i.length)return this.selection.format(t,e),n;n=this.editor.formatText(i.index,i.length,{[t]:e})}return this.setSelection(i,at.sources.SILENT),n}),i)}formatLine(t,e,i,n,r){let s;return[t,e,s,r]=Ft(t,e,i,n,r),zt.call(this,(()=>this.editor.formatLine(t,e,s)),r,t,0)}formatText(t,e,i,n,r){let s;return[t,e,s,r]=Ft(t,e,i,n,r),zt.call(this,(()=>this.editor.formatText(t,e,s)),r,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=null;if(i="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!i)return null;const n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Ft(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ft(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ft(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:It.sources.API;return zt.call(this,(()=>this.editor.insertEmbed(t,e,i)),n,t)}insertText(t,e,i,n,r){let s;return[t,,s,r]=Ft(t,0,i,n,r),zt.call(this,(()=>this.editor.insertText(t,e,s)),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=Ft(t,e,i),zt.call(this,(()=>this.editor.removeFormat(t,e)),i,t)}scrollRectIntoView(t){Tt(this.root,t)}scrollIntoView(){this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.sources.API;return zt.call(this,(()=>{t=new O(t);const e=this.getLength(),i=this.editor.deleteText(0,e),n=this.editor.insertContents(0,t),r=this.editor.deleteText(this.getLength()-1,1);return i.compose(n).compose(r)}),e)}setSelection(t,e,i){null==t?this.selection.setRange(null,e||It.sources.API):([t,e,,i]=Ft(t,e,i),this.selection.setRange(new lt(Math.max(0,t),e),i),i!==at.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.sources.API;const i=(new O).insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.sources.API;return zt.call(this,(()=>(t=new O(t),this.editor.applyDelta(t))),e,!0)}}function Rt(t){return"string"==typeof t?document.querySelector(t):t}function Ot(t){return Object.entries(t??{}).reduce(((t,e)=>{let[i,n]=e;return{...t,[i]:!0===n?{}:n}}),{})}function Dt(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function zt(t,e,i,n){if(!this.isEnabled()&&e===at.sources.USER&&!this.allowReadOnlyEdits)return new O;let r=null==i?null:this.getSelection();const s=this.editor.delta,a=t();if(null!=r&&(!0===i&&(i=r.index),null==n?r=Bt(r,a,e):0!==n&&(r=Bt(r,i,n,e)),this.setSelection(r,at.sources.SILENT)),a.length()>0){const t=[at.events.TEXT_CHANGE,a,s,e];this.emitter.emit(at.events.EDITOR_CHANGE,...t),e!==at.sources.SILENT&&this.emitter.emit(...t)}return a}function Ft(t,e,i,n,r){let s={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=n,n=i,i=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=n,n=i,i=e,e=0),"object"==typeof i?(s=i,r=n):"string"==typeof i&&(null!=n?s[i]=n:r=i),[t,e,s,r=r||at.sources.API]}function Bt(t,e,i,n){const r="number"==typeof i?i:0;if(null==t)return null;let s,a;return e&&"function"==typeof e.transformPosition?[s,a]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,n!==at.sources.USER))):[s,a]=[t.index,t.index+t.length].map((t=>t<e||t===e&&n===at.sources.USER?t:r>=0?t+r:Math.max(e,t+r))),new lt(s,a-s)}const Ht=class extends T{};function qt(t){return t instanceof W||t instanceof Y}function jt(t){return"function"==typeof t.updateContent}function Gt(t,e,i){i.reduce(((e,i)=>{const n=O.Op.length(i);let r=i.attributes||{};if(null!=i.insert)if("string"==typeof i.insert){const n=i.insert;t.insertAt(e,n);const[s]=t.descendant(x,e),a=$(s);r=O.AttributeMap.diff(a,r)||{}}else if("object"==typeof i.insert){const n=Object.keys(i.insert)[0];if(null==n)return e;t.insertAt(e,n,i.insert[n]);if(null!=t.scroll.query(n,s.INLINE)){const[i]=t.descendant(x,e),n=$(i);r=O.AttributeMap.diff(n,r)||{}}}return Object.keys(r).forEach((i=>{t.formatAt(e,n,i,r[i])})),e+n}),e)}const Xt=class extends L{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=W;static allowedChildren=[W,Y,Ht];constructor(t,e,i){let{emitter:n}=i;super(t,e),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(at.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(at.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(at.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[i,n]=this.line(t),[r]=this.line(t+e);if(super.deleteAt(t,e),null!=r&&i!==r&&n>0){if(i instanceof Y||r instanceof Y)return void this.optimize();const t=r.children.head instanceof H?null:r.children.head;i.moveChildren(r,t),i.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,n){super.formatAt(t,e,i,n),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(null==i||null==this.scroll.query(e,s.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==i&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),i):t.insertAt(0,e,i)}else{const t=this.scroll.create(e,i);this.appendChild(t)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===s.INLINE_BLOT){const i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){const i=this.deltaToRenderBlocks(e.concat((new O).insert("\n"))),n=i.pop();if(null==n)return;this.batchStart();const r=i.shift();if(r){const e="block"===r.type&&(0===r.delta.length()||!this.descendant(Y,t)[0]&&t<this.length()),i="block"===r.type?r.delta:(new O).insert({[r.key]:r.value});Gt(this,t,i);const n="block"===r.type?1:0,s=t+i.length()+n;e&&this.insertAt(s-1,"\n");const a=$(this.line(t)[0]),o=O.AttributeMap.diff(a,r.attributes)||{};Object.keys(o).forEach((t=>{this.formatAt(s-1,1,t,o[t])})),t=s}let[s,a]=this.children.find(t);if(i.length&&(s&&(s=s.split(a),a=0),i.forEach((t=>{if("block"===t.type){Gt(this.createBlock(t.attributes,s||void 0),0,t.delta)}else{const e=this.create(t.key,t.value);this.insertBefore(e,s||void 0),Object.keys(t.attributes).forEach((i=>{e.format(i,t.attributes[i])}))}}))),"block"===n.type&&n.delta.length()){Gt(this,s?s.offset(s.scroll)+a:this.length(),n.delta)}this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[i,n]=e;return i instanceof x?[i,n]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(qt,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const i=(t,e,n)=>{let r=[],s=n;return t.children.forEachAt(e,n,((t,e,n)=>{qt(t)?r.push(t):t instanceof T&&(r=r.concat(i(t,e,s))),s-=n})),r};return i(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(at.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=at.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const i=this.find(e,!0);return i&&!jt(i)}))).length>0&&this.emitter.emit(at.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(at.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){const[n]=this.descendant((t=>t instanceof Y),t);n&&n.statics.blotName===e&&jt(n)&&n.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let i=new O;return t.forEach((t=>{const n=t?.insert;if(n)if("string"==typeof n){const r=n.split("\n");r.slice(0,-1).forEach((n=>{i.insert(n,t.attributes),e.push({type:"block",delta:i,attributes:t.attributes??{}}),i=new O}));const s=r[r.length-1];s&&i.insert(s,t.attributes)}else{const r=Object.keys(n)[0];if(!r)return;this.query(r,s.INLINE)?i.push(t):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new O,e.push({type:"blockEmbed",key:r,value:n[r],attributes:t.attributes??{}}))}})),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i;const n={};Object.entries(t).forEach((t=>{let[e,r]=t;null!=this.query(e,s.BLOCK&s.BLOT)?i=e:n[e]=r}));const r=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(r,e||void 0);const a=r.length();return Object.entries(n).forEach((t=>{let[e,i]=t;r.formatAt(0,a,e,i)})),r}},Vt={scope:s.BLOCK,whitelist:["right","center","justify"]},Wt=new a("align","align",Vt),Yt=new d("align","ql-align",Vt),Ut=new p("align","text-align",Vt);class $t extends p{value(t){let e=super.value(t);if(!e.startsWith("rgb("))return e;e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");return`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`}}const Kt=new d("color","ql-color",{scope:s.INLINE}),Zt=new $t("color","color",{scope:s.INLINE}),Jt=new d("background","ql-bg",{scope:s.INLINE}),Qt=new $t("background","background-color",{scope:s.INLINE});class te extends Ht{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${G(this.code(t,e))}\n</pre>`}}class ee extends W{static TAB="  ";static register(){It.register(te)}}class ie extends V{}ie.blotName="code",ie.tagName="CODE",ee.blotName="code-block",ee.className="ql-code-block",ee.tagName="DIV",te.blotName="code-block-container",te.className="ql-code-block-container",te.tagName="DIV",te.allowedChildren=[ee],ee.allowedChildren=[q,H,Z],ee.requiredContainer=te;const ne={scope:s.BLOCK,whitelist:["rtl"]},re=new a("direction","dir",ne),se=new d("direction","ql-direction",ne),ae=new p("direction","direction",ne),oe={scope:s.INLINE,whitelist:["serif","monospace"]},le=new d("font","ql-font",oe);const he=new class extends p{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",oe),ce=new d("size","ql-size",{scope:s.INLINE,whitelist:["small","large","huge"]}),de=new p("size","font-size",{scope:s.INLINE,whitelist:["10px","18px","32px"]}),ue=rt("quill:keyboard"),pe=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class fe extends vt{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((i=>!!e[i]!==t[i]&&null!==e[i]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=(0,D.A)(t)}t.shortKey&&(t[pe]=t.shortKey,delete t.shortKey);return t}(t);if(null==n)return void ue.warn("Attempted to add invalid keyboard binding",n);"function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i});(Array.isArray(n.key)?n.key:[n.key]).forEach((t=>{const r={...n,key:t,...e,...i};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}))}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>fe.match(t,e)));if(0===e.length)return;const i=It.find(t.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const n=this.quill.getSelection();if(null==n||!this.quill.hasFocus())return;const[r,s]=this.quill.getLine(n.index),[a,o]=this.quill.getLeaf(n.index),[l,h]=0===n.length?[a,o]:this.quill.getLeaf(n.index+n.length),c=a instanceof R?a.value().slice(0,o):"",d=l instanceof R?l.value().slice(h):"",u={collapsed:0===n.length,empty:0===n.length&&r.length()<=1,format:this.quill.getFormat(n),line:r,offset:s,prefix:c,suffix:d,event:t};e.some((t=>{if(null!=t.collapsed&&t.collapsed!==u.collapsed)return!1;if(null!=t.empty&&t.empty!==u.empty)return!1;if(null!=t.offset&&t.offset!==u.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==u.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=u.format[e]:!1===t.format[e]?null==u.format[e]:F(t.format[e],u.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(u.prefix))&&(!(null!=t.suffix&&!t.suffix.test(u.suffix))&&!0!==t.handler.call(this,n,u,t))}))&&t.preventDefault()}))}handleBackspace(t,e){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let n={};const[r]=this.quill.getLine(t.index);let s=(new O).retain(t.index-i).delete(i);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e){if(!("block"===e.statics.blotName&&e.length()<=1)){const e=r.formats(),i=this.quill.getFormat(t.index-1,1);if(n=O.AttributeMap.diff(e,i)||{},Object.keys(n).length>0){const e=(new O).retain(t.index+r.length()-2).retain(1,n);s=s.compose(e)}}}}this.quill.updateContents(s,It.sources.USER),this.quill.focus()}handleDelete(t,e){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let n={};const[r]=this.quill.getLine(t.index);let s=(new O).retain(t.index).delete(i);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const i=r.formats(),a=this.quill.getFormat(t.index,1);n=O.AttributeMap.diff(i,a)||{},Object.keys(n).length>0&&(s=s.retain(e.length()-1).retain(1,n))}}this.quill.updateContents(s,It.sources.USER),this.quill.focus()}handleDeleteRange(t){ye({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const i=Object.keys(e.format).reduce(((t,i)=>(this.quill.scroll.query(i,s.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t)),{}),n=(new O).retain(t.index).delete(t.length).insert("\n",i);this.quill.updateContents(n,It.sources.USER),this.quill.setSelection(t.index+1,It.sources.SILENT),this.quill.focus()}}const ge={bindings:{bold:xe("bold"),italic:xe("italic"),underline:xe("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",It.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",It.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",It.sources.USER):null!=e.format.list&&this.quill.format("list",!1,It.sources.USER)}},"indent code-block":me(!0),"outdent code-block":me(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,It.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const i=(new O).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(i,It.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,It.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,It.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const i={list:!1};e.format.indent&&(i.indent=!1),this.quill.formatLine(t.index,t.length,i,It.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,i]=this.quill.getLine(t.index),n={...e.formats(),list:"checked"},r=(new O).retain(t.index).insert("\n",n).retain(e.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,It.sources.USER),this.quill.setSelection(t.index+1,It.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[i,n]=this.quill.getLine(t.index),r=(new O).retain(t.index).insert("\n",e.format).retain(i.length()-n-1).retain(1,{header:null});this.quill.updateContents(r,It.sources.USER),this.quill.setSelection(t.index+1,It.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[i,n,r,s]=e.getTable(t),a=function(t,e,i,n){if(null==e.prev&&null==e.next)return null==i.prev&&null==i.next?0===n?-1:1:null==i.prev?-1:1;if(null==e.prev)return-1;if(null==e.next)return 1;return null}(0,n,r,s);if(null==a)return;let o=i.offset();if(a<0){const e=(new O).retain(o).insert("\n");this.quill.updateContents(e,It.sources.USER),this.quill.setSelection(t.index+1,t.length,It.sources.SILENT)}else if(a>0){o+=i.length();const t=(new O).retain(o).insert("\n");this.quill.updateContents(t,It.sources.USER),this.quill.setSelection(o,It.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:i,line:n}=e,r=n.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(r-1,It.sources.USER):this.quill.setSelection(r+n.length(),It.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:i}=e.prefix,[n,r]=this.quill.getLine(t.index);if(r>i)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",It.sources.USER),this.quill.history.cutoff();const a=(new O).retain(t.index-r).delete(i+1).retain(n.length()-2-r).retain(1,{list:s});return this.quill.updateContents(a,It.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,It.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,i]=this.quill.getLine(t.index);let n=2,r=e;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,n-=1,n<=0){const n=(new O).retain(t.index+e.length()-i-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(n,It.sources.USER),this.quill.setSelection(t.index-1,It.sources.SILENT),!1}return!0}},"embed left":be("ArrowLeft",!1),"embed left shift":be("ArrowLeft",!0),"embed right":be("ArrowRight",!1),"embed right shift":be("ArrowRight",!0),"table down":ve(!1),"table up":ve(!0)}};function me(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,i){let{event:n}=i;const r=this.quill.scroll.query("code-block"),{TAB:s}=r;if(0===e.length&&!n.shiftKey)return this.quill.insertText(e.index,s,It.sources.USER),void this.quill.setSelection(e.index+s.length,It.sources.SILENT);const a=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:l}=e;a.forEach(((e,i)=>{t?(e.insertAt(0,s),0===i?o+=s.length:l+=s.length):e.domNode.textContent.startsWith(s)&&(e.deleteAt(0,s.length),0===i?o-=s.length:l-=s.length)})),this.quill.update(It.sources.USER),this.quill.setSelection(o,l,It.sources.SILENT)}}}function be(t,e){const i="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[i]:/^$/,handler(i){let{index:n}=i;"ArrowRight"===t&&(n+=i.length+1);const[r]=this.quill.getLeaf(n);return!(r instanceof E)||("ArrowLeft"===t?e?this.quill.setSelection(i.index-1,i.length+1,It.sources.USER):this.quill.setSelection(i.index-1,It.sources.USER):e?this.quill.setSelection(i.index,i.length+1,It.sources.USER):this.quill.setSelection(i.index+i.length+1,It.sources.USER),!1)}}}function xe(t){return{key:t[0],shortKey:!0,handler(e,i){this.quill.format(t,!i.format[t],It.sources.USER)}}}function ve(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,i){const n=t?"prev":"next",r=i.line,s=r.parent[n];if(null!=s){if("table-row"===s.statics.blotName){let t=s.children.head,e=r;for(;null!=e.prev;)e=e.prev,t=t.next;const n=t.offset(this.quill.scroll)+Math.min(i.offset,t.length()-1);this.quill.setSelection(n,0,It.sources.USER)}}else{const e=r.table()[n];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,It.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,It.sources.USER))}return!1}}}function ye(t){let{quill:e,range:i}=t;const n=e.getLines(i);let r={};if(n.length>1){const t=n[0].formats(),e=n[n.length-1].formats();r=O.AttributeMap.diff(e,t)||{}}e.deleteText(i,It.sources.USER),Object.keys(r).length>0&&e.formatLine(i.index,1,r,It.sources.USER),e.setSelection(i.index,It.sources.SILENT)}fe.DEFAULTS=ge;const we=/font-weight:\s*normal/,ke=["P","OL","UL"],Ae=t=>t&&ke.includes(t.tagName);const Se=/\bmso-list:[^;]*ignore/i,Ce=/\bmso-list:[^;]*\bl(\d+)/i,_e=/\bmso-list:[^;]*\blevel(\d+)/i,Me=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),i=[],n=[];e.forEach((t=>{(t.getAttribute("style")||"").match(Se)?i.push(t):n.push(t)})),i.forEach((t=>t.parentNode?.removeChild(t)));const r=t.documentElement.innerHTML,s=n.map((t=>((t,e)=>{const i=t.getAttribute("style"),n=i?.match(Ce);if(!n)return null;const r=Number(n[1]),s=i?.match(_e),a=s?Number(s[1]):1,o=new RegExp(`@list l${r}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(o);return{id:r,indent:a,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(t,r))).filter((t=>t));for(;s.length;){const t=[];let e=s.shift();for(;e;)t.push(e),e=s.length&&s[0]?.element===e.element.nextElementSibling&&s[0].id===e.id?s.shift():null;const i=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,i.appendChild(e)}));const n=t[0]?.element,{parentNode:r}=n??{};n&&r?.replaceChild(i,n),t.slice(1).forEach((t=>{let{element:e}=t;r?.removeChild(e)}))}};const Te=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&Me(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(we))).forEach((e=>{const i=t.createDocumentFragment();i.append(...e.childNodes),e.parentNode?.replaceChild(i,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>Ae(t.previousElementSibling)&&Ae(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],Ee=t=>{t.documentElement&&Te.forEach((e=>{e(t)}))},Ne=rt("quill:clipboard"),Pe=[[Node.TEXT_NODE,function(t,e,i){let n=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(n.trim());if(!Fe(t)){if(0===n.trim().length&&n.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!De(t.previousElementSibling,e)&&!De(t.nextElementSibling,e)}(t,i))return e;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(null==t.previousSibling&&null!=t.parentElement&&De(t.parentElement,i)||t.previousSibling instanceof Element&&De(t.previousSibling,i))&&(n=n.replace(/^ /,"")),(null==t.nextSibling&&null!=t.parentElement&&De(t.parentElement,i)||t.nextSibling instanceof Element&&De(t.nextSibling,i))&&(n=n.replace(/ $/,"")),n=n.replaceAll(""," ")}return e.insert(n)}],[Node.TEXT_NODE,qe],["br",function(t,e){Oe(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,qe],[Node.ELEMENT_NODE,function(t,e,i){const n=i.query(t);if(null==n)return e;if(n.prototype instanceof E){const e={},r=n.value(t);if(null!=r)return e[n.blotName]=r,(new O).insert(e,n.formats(t,i))}else if(n.prototype instanceof _&&!Oe(e,"\n")&&e.insert("\n"),"blotName"in n&&"formats"in n&&"function"==typeof n.formats)return Re(e,n.blotName,n.formats(t,i),i);return e}],[Node.ELEMENT_NODE,function(t,e,i){const n=a.keys(t),r=d.keys(t),o=p.keys(t),l={};return n.concat(r).concat(o).forEach((e=>{let n=i.query(e,s.ATTRIBUTE);null!=n&&(l[n.attrName]=n.value(t),l[n.attrName])||(n=Le[e],null==n||n.attrName!==e&&n.keyName!==e||(l[n.attrName]=n.value(t)||void 0),n=Ie[e],null==n||n.attrName!==e&&n.keyName!==e||(n=Ie[e],l[n.attrName]=n.value(t)||void 0))})),Object.entries(l).reduce(((t,e)=>{let[n,r]=e;return Re(t,n,r,i)}),e)}],[Node.ELEMENT_NODE,function(t,e,i){const n={},r=t.style||{};"italic"===r.fontStyle&&(n.italic=!0);"underline"===r.textDecoration&&(n.underline=!0);"line-through"===r.textDecoration&&(n.strike=!0);(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(n.bold=!0);if(e=Object.entries(n).reduce(((t,e)=>{let[n,r]=e;return Re(t,n,r,i)}),e),parseFloat(r.textIndent||0)>0)return(new O).insert("\t").concat(e);return e}],["li",function(t,e,i){const n=i.query(t);if(null==n||"list"!==n.blotName||!Oe(e,"\n"))return e;let r=-1,s=t.parentNode;for(;null!=s;)["OL","UL"].includes(s.tagName)&&(r+=1),s=s.parentNode;return r<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:r,...e.attributes||{}}):t),new O)}],["ol, ul",function(t,e,i){const n=t;let r="OL"===n.tagName?"ordered":"bullet";const s=n.getAttribute("data-checked");s&&(r="true"===s?"checked":"unchecked");return Re(e,"list",r,i)}],["pre",function(t,e,i){const n=i.query("code-block"),r=!n||!("formats"in n)||"function"!=typeof n.formats||n.formats(t,i);return Re(e,"code-block",r,i)}],["tr",function(t,e,i){const n="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;if(null!=n){return Re(e,"table",Array.from(n.querySelectorAll("tr")).indexOf(t)+1,i)}return e}],["b",He("bold")],["i",He("italic")],["strike",He("strike")],["style",function(){return new O}]],Le=[Wt,re].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),Ie=[Ut,Qt,Zt,ae,he,de].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function Re(t,e,i,n){return n.query(e)?t.reduce(((t,n)=>{if(!n.insert)return t;if(n.attributes&&n.attributes[e])return t.push(n);const r=i?{[e]:i}:{};return t.insert(n.insert,{...r,...n.attributes})}),new O):t}function Oe(t,e){let i="";for(let n=t.ops.length-1;n>=0&&i.length<e.length;--n){const e=t.ops[n];if("string"!=typeof e.insert)break;i=e.insert+i}return i.slice(-1*e.length)===e}function De(t,e){if(!(t instanceof Element))return!1;const i=e.query(t);return!(i&&i.prototype instanceof E)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const ze=new WeakMap;function Fe(t){return null!=t&&(ze.has(t)||("PRE"===t.tagName?ze.set(t,!0):ze.set(t,Fe(t.parentNode))),ze.get(t))}function Be(t,e,i,n,r){return e.nodeType===e.TEXT_NODE?n.reduce(((i,n)=>n(e,i,t)),new O):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((s,a)=>{let o=Be(t,a,i,n,r);return a.nodeType===e.ELEMENT_NODE&&(o=i.reduce(((e,i)=>i(a,e,t)),o),o=(r.get(a)||[]).reduce(((e,i)=>i(a,e,t)),o)),s.concat(o)}),new O):new O}function He(t){return(e,i,n)=>Re(i,t,!0,n)}function qe(t,e,i){if(!Oe(e,"\n")){if(De(t,i)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let n=t.nextSibling;for(;null!=n;){if(De(n,i))return e.insert("\n");const t=i.query(n);if(t&&t.prototype instanceof Y)return e.insert("\n");n=n.firstChild}}}return e}function je(t,e){let i=e;for(let e=t.length-1;e>=0;e-=1){const n=t[e];t[e]={delta:i.transform(n.delta,!0),range:n.range&&Ge(n.range,i)},i=n.delta.transform(i),0===t[e].delta.length()&&t.splice(e,1)}}function Ge(t,e){if(!t)return t;const i=e.transformPosition(t.index);return{index:i,length:e.transformPosition(t.index+t.length)-i}}class Xe extends vt{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);i=document.createRange(),i.setStart(t.offsetNode,t.offset),i.setEnd(t.offsetNode,t.offset)}const n=i&&t.selection.normalizeNative(i);if(n){const i=t.selection.normalizedToRange(n);e.dataTransfer?.files&&this.upload(i,e.dataTransfer.files)}}))}upload(t,e){const i=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&i.push(t)})),i.length>0&&this.options.handler.call(this,t,i)}}Xe.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const i=e.map((t=>new Promise((e=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.readAsDataURL(t)}))));Promise.all(i).then((e=>{const i=e.reduce(((t,e)=>t.insert({image:e})),(new O).retain(t.index).delete(t.length));this.quill.updateContents(i,at.sources.USER),this.quill.setSelection(t.index+e.length,at.sources.SILENT)}))}};const Ve=Xe,We=["insertText","insertReplacementText"];const Ye=class extends vt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(It.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){ye({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new O).retain(t.index).insert(e,i),It.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,It.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!We.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const i=function(t){if("string"==typeof t.data)return t.data;if(t.dataTransfer?.types.includes("text/plain"))return t.dataTransfer.getData("text/plain");return null}(t);if(null==i)return;const n=this.quill.selection.normalizeNative(e),r=n?this.quill.selection.normalizedToRange(n):null;r&&this.replaceText(r,i)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},Ue=/Mac/i.test(navigator.platform);const $e=class extends vt{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:i,event:n}=e;if(!(i instanceof k&&i.uiNode))return!0;const r="rtl"===getComputedStyle(i.domNode).direction;return!!(r&&"ArrowRight"!==n.key||!r&&"ArrowLeft"!==n.key)||(this.quill.setSelection(t.index-1,t.length+(n.shiftKey?1:0),It.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!Ue||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+100,this.isListening)return;this.isListening=!0;document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const i=this.quill.scroll.find(e.startContainer);if(!(i instanceof k&&i.uiNode))return;const n=document.createRange();n.setStartAfter(i.uiNode),n.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(n)}};It.register({"blots/block":W,"blots/block/embed":Y,"blots/break":H,"blots/container":Ht,"blots/cursor":Z,"blots/embed":wt,"blots/inline":V,"blots/scroll":Xt,"blots/text":q,"modules/clipboard":class extends vt{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Pe.concat(this.options.matchers??[]).forEach((t=>{let[e,i]=t;this.addMatcher(e,i)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n[ee.blotName])return(new O).insert(i||"",{[ee.blotName]:n[ee.blotName]});if(!e)return(new O).insert(i||"",n);const r=this.convertHTML(e);return Oe(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||n.table)?r.compose((new O).retain(r.length()-1).delete(1)):r}normalizeHTML(t){Ee(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const i=e.body,n=new WeakMap,[r,s]=this.prepareMatching(i,n);return Be(this.quill.scroll,i,r,s,n)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:It.sources.API;if("string"==typeof t){const i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,It.sources.SILENT)}else{const n=this.convert({html:e,text:""});this.quill.updateContents((new O).retain(t).concat(n),i),this.quill.setSelection(t+n.length(),It.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(null==i)return;const{html:n,text:r}=this.onCopy(i,e);t.clipboardData?.setData("text/plain",r),t.clipboardData?.setData("text/html",n),e&&ye({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const i=t.clipboardData?.getData("text/html");let n=t.clipboardData?.getData("text/plain");if(!i&&!n){const e=t.clipboardData?.getData("text/uri-list");e&&(n=this.normalizeURIList(e))}const r=Array.from(t.clipboardData?.files||[]);if(!i&&r.length>0)this.quill.uploader.upload(e,r);else{if(i&&r.length>0){const t=(new DOMParser).parseFromString(i,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,r)}this.onPaste(e,{html:i,text:n})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:n}=e;const r=this.quill.getFormat(t.index),s=this.convert({text:i,html:n},r);Ne.log("onPaste",s,{text:i,html:n});const a=(new O).retain(t.index).delete(t.length).concat(s);this.quill.updateContents(a,It.sources.USER),this.quill.setSelection(a.length()-t.length,It.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const i=[],n=[];return this.matchers.forEach((r=>{const[s,a]=r;switch(s){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:i.push(a);break;default:Array.from(t.querySelectorAll(s)).forEach((t=>{if(e.has(t)){const i=e.get(t);i?.push(a)}else e.set(t,[a])}))}})),[i,n]}},"modules/history":class extends vt{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(It.events.EDITOR_CHANGE,((t,e,i,n)=>{t===It.events.SELECTION_CHANGE?e&&n!==It.sources.SILENT&&(this.currentRange=e):t===It.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&n!==It.sources.USER?this.transform(e):this.record(e,i)),this.currentRange=Ge(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const i=this.stack[t].pop();if(!i)return;const n=this.quill.getContents(),r=i.delta.invert(n);this.stack[e].push({delta:r,range:Ge(i.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,It.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let i=t.invert(e),n=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(i=i.compose(t.delta),n=t.range)}else this.lastRecorded=r;0!==i.length()&&(this.stack.undo.push({delta:i,range:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){je(this.stack.undo,t),je(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,It.sources.USER);else{const e=function(t,e){const i=e.reduce(((t,e)=>t+(e.delete||0)),0);let n=e.length()-i;(function(t,e){const i=e.ops[e.ops.length-1];if(null==i)return!1;if(null!=i.insert)return"string"==typeof i.insert&&i.insert.endsWith("\n");if(null!=i.attributes)return Object.keys(i.attributes).some((e=>null!=t.query(e,s.BLOCK)));return!1})(t,e)&&(n-=1);return n}(this.quill.scroll,t.delta);this.quill.setSelection(e,It.sources.USER)}}},"modules/keyboard":fe,"modules/uploader":Ve,"modules/input":Ye,"modules/uiNode":$e});const Ke=It;const Ze=new class extends d{add(t,e){let i=0;if("+1"===e||"-1"===e){const n=this.value(t)||0;i="+1"===e?n+1:n-1}else"number"==typeof e&&(i=e);return 0===i?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:s.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Je=Ze;const Qe=class extends W{static blotName="blockquote";static tagName="blockquote"};const ti=class extends W{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}};class ei extends Ht{}ei.blotName="list-container",ei.tagName="OL";class ii extends W{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){It.register(ei)}constructor(t,e){super(t,e);const i=e.ownerDocument.createElement("span"),n=i=>{if(!t.isEnabled())return;const n=this.statics.formats(e,t);"checked"===n?(this.format("list","unchecked"),i.preventDefault()):"unchecked"===n&&(this.format("list","checked"),i.preventDefault())};i.addEventListener("mousedown",n),i.addEventListener("touchstart",n),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}ii.blotName="list",ii.tagName="LI",ei.allowedChildren=[ii],ii.requiredContainer=ei;const ni=class extends V{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};const ri=class extends ni{static blotName="italic";static tagName=["EM","I"]};class si extends V{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return ai(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function ai(t,e){const i=document.createElement("a");i.href=t;const n=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(n)>-1}const oi=class extends V{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}};const li=class extends ni{static blotName="strike";static tagName=["S","STRIKE"]};const hi=class extends V{static blotName="underline";static tagName="U"};const ci=class extends wt{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},di=["alt","height","width"];const ui=class extends E{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return di.reduce(((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return ai(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){di.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},pi=["height","width"];const fi=class extends Y{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return pi.reduce(((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e)),{})}static sanitize(t){return si.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){pi.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},gi=new d("code-token","hljs",{scope:s.INLINE});class mi extends V{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(ee.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),gi.add(this.domNode,i)}format(t,e){t!==mi.blotName?super.format(t,e):e?gi.add(this.domNode,e):(gi.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),gi.value(this.domNode)||this.unwrap()}}mi.blotName="code-token",mi.className="ql-token";class bi extends ee{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),mi.blotName,!1),super.replaceWith(t,e)}}class xi extends te{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===bi.blotName&&(this.forceNext=!0,this.children.forEach((i=>{i.format(t,e)})))}formatAt(t,e,i,n){i===bi.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,n)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const i=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,n=bi.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==i){if(i.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(U(e,!1))),new O),r=t(i,n);e.diff(r).reduce(((t,e)=>{let{retain:i,attributes:n}=e;return i?(n&&Object.keys(n).forEach((e=>{[bi.blotName,mi.blotName].includes(e)&&this.formatAt(t,i,e,n[e])})),t+i):t}),0)}this.cachedText=i,this.forceNext=!1}}html(t,e){const[i]=this.children.find(t);return`<pre data-language="${i?bi.formats(i.domNode):"plain"}">\n${G(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=bi.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}xi.allowedChildren=[bi],bi.requiredContainer=xi,bi.allowedChildren=[mi,Z,q,H];class vi extends vt{static register(){It.register(mi,!0),It.register(bi,!0),It.register(xi,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:i}=e;return t[i]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(It.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof xi))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:i,label:n}=t;const r=e.ownerDocument.createElement("option");r.textContent=n,r.setAttribute("value",i),e.appendChild(r)})),e.addEventListener("change",(()=>{t.format(bi.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=bi.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(It.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(It.sources.USER);const i=this.quill.getSelection();(null==t?this.quill.scroll.descendants(xi):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(It.sources.SILENT),null!=i&&this.quill.setSelection(i,It.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return G(t).split("\n").reduce(((t,i,n)=>(0!==n&&t.insert("\n",{[ee.blotName]:e}),t.insert(i))),new O);const i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(ee.className),i.innerHTML=((t,e,i)=>{if("string"==typeof t.versionString){const n=t.versionString.split(".")[0];if(parseInt(n,10)>=11)return t.highlight(i,{language:e}).value}return t.highlight(e,i).value})(this.options.hljs,e,t),Be(this.quill.scroll,i,[(t,e)=>{const i=gi.value(t);return i?e.compose((new O).retain(e.length(),{[mi.blotName]:i})):e}],[(t,i)=>t.data.split("\n").reduce(((t,i,n)=>(0!==n&&t.insert("\n",{[ee.blotName]:e}),t.insert(i))),i)],new WeakMap)}}vi.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class yi extends W{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Si()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===yi.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class wi extends Ht{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),n=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===n.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),i=t.next.formats();if(e.table!==i.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class ki extends Ht{static blotName="table-body";static tagName="TBODY"}class Ai extends Ht{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(wi),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=yi.formats(t.children.head.domNode));const i=this.scroll.create(yi.blotName,e);t.appendChild(i),i.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(ki);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const i=e.children.at(t);null!=i&&i.remove()}))}insertColumn(t){const[e]=this.descendant(ki);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const i=e.children.at(t),n=yi.formats(e.children.head.domNode),r=this.scroll.create(yi.blotName,n);e.insertBefore(r,i)}))}insertRow(t){const[e]=this.descendant(ki);if(null==e||null==e.children.head)return;const i=Si(),n=this.scroll.create(wi.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(yi.blotName,i);n.appendChild(t)}));const r=e.children.at(t);e.insertBefore(n,r)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function Si(){return`row-${Math.random().toString(36).slice(2,6)}`}Ai.allowedChildren=[ki],ki.requiredContainer=Ai,ki.allowedChildren=[wi],wi.requiredContainer=ki,wi.allowedChildren=[yi],yi.requiredContainer=wi;const Ci=class extends vt{static register(){It.register(yi),It.register(wi),It.register(ki),It.register(Ai)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Ai).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(It.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(It.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(It.sources.USER),this.quill.setSelection(e,It.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,i]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==yi.blotName)return[null,null,null,-1];const n=e.parent;return[n.parent.parent,n,e,i]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[i,n,r]=this.getTable(e);if(null==r)return;const s=r.cellOffset();i.insertColumn(s+t),this.quill.update(It.sources.USER);let a=n.rowOffset();0===t&&(a+=1),this.quill.setSelection(e.index+a,e.length,It.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[i,n,r]=this.getTable(e);if(null==r)return;const s=n.rowOffset();i.insertRow(s+t),this.quill.update(It.sources.USER),t>0?this.quill.setSelection(e,It.sources.SILENT):this.quill.setSelection(e.index+n.children.length,e.length,It.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const i=this.quill.getSelection();if(null==i)return;const n=new Array(t).fill(0).reduce((t=>{const i=new Array(e).fill("\n").join("");return t.insert(i,{table:Si()})}),(new O).retain(i.index));this.quill.updateContents(n,It.sources.USER),this.quill.setSelection(i.index,It.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(It.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(It.events.TEXT_CHANGE,((t,e,i)=>{i===It.sources.USER&&this.balanceTables()})),!0)))}))}},_i=rt("quill:toolbar");class Mi extends vt{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]);e.forEach((e=>{const i=document.createElement("span");i.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)Ti(i,t);else{const e=Object.keys(t)[0],n=t[e];Array.isArray(n)?function(t,e,i){const n=document.createElement("select");n.classList.add(`ql-${e}`),i.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),n.appendChild(e)})),t.appendChild(n)}(i,e,n):Ti(i,e,n)}})),t.appendChild(i)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(It.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):_i.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void _i.warn("ignoring attaching to nonexistent format",e,t);const i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,(i=>{let n;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];n=!e.hasAttribute("selected")&&(e.value||!1)}else n=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,n);else if(this.quill.scroll.query(e).prototype instanceof E){if(n=prompt(`Enter ${e}`),!n)return;this.quill.updateContents((new O).retain(r.index).delete(r.length).insert({[e]:n}),It.sources.USER)}else this.quill.format(e,n,It.sources.USER);this.update(r)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((i=>{const[n,r]=i;if("SELECT"===r.tagName){let i=null;if(null==t)i=null;else if(null==e[n])i=r.querySelector("option[selected]");else if(!Array.isArray(e[n])){let t=e[n];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),i=r.querySelector(`option[value="${t}"]`)}null==i?(r.value="",r.selectedIndex=-1):i.selected=!0}else if(null==t)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const t=e[n],i=t===r.getAttribute("value")||null!=t&&t.toString()===r.getAttribute("value")||null==t&&!r.getAttribute("value");r.classList.toggle("ql-active",i),r.setAttribute("aria-pressed",i.toString())}else{const t=null!=e[n];r.classList.toggle("ql-active",t),r.setAttribute("aria-pressed",t.toString())}}))}}function Ti(t,e,i){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),null!=i?(n.value=i,n.setAttribute("aria-label",`${e}: ${i}`)):n.setAttribute("aria-label",e),t.appendChild(n)}Mi.DEFAULTS={},Mi.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,s.INLINE)&&this.quill.format(t,!1,It.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,It.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",It.sources.USER):t||"right"!==e||this.quill.format("align",!1,It.sources.USER),this.quill.format("direction",t,It.sources.USER)},indent(t){const e=this.quill.getSelection(),i=this.quill.getFormat(e),n=parseInt(i.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===i.direction&&(e*=-1),this.quill.format("indent",n+e,It.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,It.sources.USER)},list(t){const e=this.quill.getSelection(),i=this.quill.getFormat(e);"check"===t?"checked"===i.list||"unchecked"===i.list?this.quill.format("list",!1,It.sources.USER):this.quill.format("list","unchecked",It.sources.USER):this.quill.format("list",t,It.sources.USER)}}};const Ei='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Ni={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Ei,"code-block":Ei,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let Pi=0;function Li(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}const Ii=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Li(this.label,"aria-expanded"),Li(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Pi}`,Pi+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const i=this.buildItem(e);t.appendChild(i),!0===e.selected&&this.selectItem(i)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.container.querySelector(".ql-selected");t!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}};const Ri=class extends Ii{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const i=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=n:i.style.fill=n)}};const Oi=class extends Ii{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const i=t||this.defaultItem;if(null!=i){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}};const Di=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");const n=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let s=0;if(r.right>n.right&&(s=n.right-r.right,this.root.style.left=`${e+s}px`),r.left<n.left&&(s=n.left-r.left,this.root.style.left=`${e+s}px`),r.bottom>n.bottom){const e=r.bottom-r.top,n=t.bottom-t.top+e;this.root.style.top=i-n+"px",this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},zi=[!1,"center","right","justify"],Fi=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Bi=[!1,"serif","monospace"],Hi=["1","2","3",!1],qi=["small",!1,"large","huge"];class ji extends St{constructor(t,e){super(t,e);const i=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",i)};t.emitter.listenDOM("click",document.body,i)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((i=>{if(i.startsWith("ql-")&&(i=i.slice(3),null!=e[i]))if("direction"===i)t.innerHTML=e[i][""]+e[i].rtl;else if("string"==typeof e[i])t.innerHTML=e[i];else{const n=t.value||"";null!=n&&e[i][n]&&(t.innerHTML=e[i][n])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&Xi(t,zi),"object"==typeof e.align))return new Oi(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const i=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&Xi(t,Fi,"background"===i?"#ffffff":"#000000"),new Ri(t,e[i])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?Xi(t,Bi):t.classList.contains("ql-header")?Xi(t,Hi):t.classList.contains("ql-size")&&Xi(t,qi)),new Ii(t)}));this.quill.on(at.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}ji.DEFAULTS=(0,r.A)({},St.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Gi extends Di{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const i=this.quill.getBounds(this.quill.selection.savedRange);null!=i&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,at.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,at.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`;if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`;return t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,at.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",at.sources.USER),this.quill.setSelection(i+2,at.sources.USER)}break}}this.textbox.value="",this.hide()}}function Xi(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const n=document.createElement("option");e===i?n.setAttribute("selected","selected"):n.setAttribute("value",String(e)),t.appendChild(n)}))}const Vi=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Wi extends Gi{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(at.events.EDITOR_CHANGE,((t,e,i,n)=>{if(t===at.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&n===at.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const i=t[t.length-1],n=this.quill.getIndex(i),r=Math.min(i.length()-1,e.index+e.length-n),s=this.quill.getBounds(new lt(n,r));null!=s&&this.position(s)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(at.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0!==e&&(i.style.marginLeft=-1*e-i.offsetWidth/2+"px"),e}}class Yi extends ji{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Vi),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Wi(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Ni),this.buildPickers(t.container.querySelectorAll("select"),Ni))}}Yi.DEFAULTS=(0,r.A)({},ji.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,It.sources.USER)}}}}});const Ui=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class $i extends Gi{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,at.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(at.events.SELECTION_CHANGE,((t,e,i)=>{if(null!=t){if(0===t.length&&i===at.sources.USER){const[e,i]=this.quill.scroll.descendant(si,t.index);if(null!=e){this.linkRange=new lt(t.index-i,e.length());const n=si.formats(e.domNode);this.preview.textContent=n,this.preview.setAttribute("href",n),this.show();const r=this.quill.getBounds(this.linkRange);return void(null!=r&&this.position(r))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class Ki extends ji{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Ui),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Ni),this.buildPickers(t.container.querySelectorAll("select"),Ni),this.tooltip=new $i(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,i)=>{t.handlers.link.call(t,!i.format.link)})))}}Ki.DEFAULTS=(0,r.A)({},ji.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,It.sources.USER)}}}}});const Zi=Ki;Ke.register({"attributors/attribute/direction":re,"attributors/class/align":Yt,"attributors/class/background":Jt,"attributors/class/color":Kt,"attributors/class/direction":se,"attributors/class/font":le,"attributors/class/size":ce,"attributors/style/align":Ut,"attributors/style/background":Qt,"attributors/style/color":Zt,"attributors/style/direction":ae,"attributors/style/font":he,"attributors/style/size":de},!0),Ke.register({"formats/align":Yt,"formats/direction":se,"formats/indent":Je,"formats/background":Qt,"formats/color":Zt,"formats/font":le,"formats/size":ce,"formats/blockquote":Qe,"formats/code-block":ee,"formats/header":ti,"formats/list":ii,"formats/bold":ni,"formats/code":ie,"formats/italic":ri,"formats/link":si,"formats/script":oi,"formats/strike":li,"formats/underline":hi,"formats/formula":ci,"formats/image":ui,"formats/video":fi,"modules/syntax":vi,"modules/table":Ci,"modules/toolbar":Mi,"themes/bubble":Yi,"themes/snow":Zi,"ui/icons":Ni,"ui/picker":Ii,"ui/icon-picker":Oi,"ui/color-picker":Ri,"ui/tooltip":Di},!0);const Ji=Ke}},t=>{var e=e=>t(t.s=e);e(78052),e(91100),e(60023),e(22130),e(10246),e(55778),e(27377),e(85619),e(15697),e(69661),e(58903),e(42845),e(1575),e(57644),e(46762),e(61396),e(89781),e(45448),e(37107)}]);